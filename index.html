<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="styles/bundle.css" />
    <script src="js/bundle.js"></script>
</head>
<body>

<!-- mount point -->
<sealevel-app></sealevel-app>

<script>
    var xmlhttp = new XMLHttpRequest()
    var url = './subset.json'

    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            var stations = JSON.parse(xmlhttp.responseText)
            loadSeaLevelData(stations);
        }
    }
    xmlhttp.open('GET', url, true)
    xmlhttp.send()

    function loadSeaLevelData(stations) {
        correctiv.mount('sealevel-app', {
            items: stations,
            center: [41.890251, 12.492373],
            zoom: 2,
            iconOptions: {
                iconSize: [10,10],
                iconAnchor: [5, 5]
            },
            tiles: 'http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png',
            attribution: 'CartoDB <a href="https://cartodb.com/attributions">attribution</a>'
        })
    }

</script>
</body>

</html>