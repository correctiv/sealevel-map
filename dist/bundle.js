!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(50)},function(t,e,n){(function(t){/* Riot v3.4.0, @license MIT */
!function(t,n){n(e)}(this,function(e){"use strict";function n(t){return Wt.test(t)}function r(t){return typeof t===Nt}function i(t){return t&&typeof t===Ot}function o(t){return typeof t===Rt}function a(t){return typeof t===It}function s(t){return o(t)||null===t||""===t}function u(t){return Array.isArray(t)||t instanceof Array}function l(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return o(t[e])||n&&n.writable}function c(t){return Vt.test(t)}function h(t,e){return(e||document).querySelectorAll(t)}function f(t,e){return(e||document).querySelector(t)}function p(){return document.createDocumentFragment()}function d(){return document.createTextNode("")}function m(t){return document.createElement(t)}function v(t,e){if(o(t.innerHTML)){var n=(new DOMParser).parseFromString(e,"application/xml"),r=t.ownerDocument.importNode(n.documentElement,!0);t.appendChild(r)}else t.innerHTML=e}function y(t,e){t.style.display=e?"":"none",t.hidden=!e}function _(t,e){t.removeAttribute(e)}function g(t){return Object.keys(t).reduce(function(e,n){return e+" "+n+": "+t[n]+";"},"")}function x(t,e){return t.getAttribute(e)}function b(t,e,n){var r=jt.exec(e);r&&r[1]?t.setAttributeNS(Dt,r[1],n):t.setAttribute(e,n)}function w(t,e,n){t.insertBefore(e,n.parentNode&&n)}function M(t,e){if(t)for(var n;n=qt.exec(t);)e(n[1].toLowerCase(),n[2]||n[3]||n[4])}function T(t,e,n){if(t){var r,i=e(t,n);if(i===!1)return;for(t=t.firstChild;t;)r=t.nextSibling,T(t,e,i),t=r}}function S(t,e){for(var n=t?t.length:0,r=0;r<n;++r)e(t[r],r);return t}function E(t,e){return t.indexOf(e)!==-1}function A(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function k(t,e){return t.slice(0,e.length)===e}function z(t,e,n,r){return Object.defineProperty(t,e,C({value:n,enumerable:!1,writable:!1,configurable:!0},r)),t}function C(t){for(var e,n=arguments,r=1;r<n.length;++r)if(e=n[r])for(var i in e)l(t,i)&&(t[i]=e[i]);return t}function P(t,e,n){var r=this.__.parent,i=this.__.item;if(!i)for(;r&&!i;)i=r.__.item,r=r.__.parent;if(l(n,"currentTarget")&&(n.currentTarget=t),l(n,"target")&&(n.target=n.srcElement),l(n,"which")&&(n.which=n.charCode||n.keyCode),n.item=i,e.call(this,n),!n.preventUpdate){var o=lt(this);o.isMounted&&o.update()}}function L(t,e,n,r){var i,o=P.bind(r,n,e);n[t]=null,i=t.replace(ie,""),n._riotEvents||(n._riotEvents={}),n._riotEvents[t]&&n.removeEventListener(i,n._riotEvents[t]),n._riotEvents[t]=o,n.addEventListener(i,o,!1)}function I(t,e,n){var r,i,o,a;return t.tag&&t.tagName===n?void t.tag.update():(i="VIRTUAL"===t.dom.tagName,t.tag&&(i&&(o=t.tag.__.head,a=d(),o.parentNode.insertBefore(a,o)),t.tag.unmount(!0)),t.impl=Mt[n],r={root:t.dom,parent:e,hasImpl:!0,tagName:n},t.tag=ut(t.impl,r,t.dom.innerHTML,e),S(t.attrs,function(e){return b(t.tag.root,e.name,e.value)}),t.tagName=n,t.tag.mount(),i&&vt(t.tag,a||t.tag.root),void(e.__.onUnmount=function(){var e=t.tag.opts.dataIs,n=t.tag.parent.tags,r=t.tag.__.parent.tags;dt(n,e,t.tag),dt(r,e,t.tag),t.tag.unmount()}))}function O(t){return t?(t=t.replace(St,""),Zt[t]&&(t=Zt[t]),t):null}function R(t){if(!this.root||!x(this.root,"virtualized")){var e,n,o=t.dom,a=O(t.attr),u=E([Pt,Lt],a),l=t.root&&"VIRTUAL"===t.root.tagName,c=o&&(t.parent||o.parentNode),h="style"===a,f="class"===a;if(t._riot_id)return void(t.isMounted?t.update():(t.mount(),l&&vt(t,t.root)));if(t.update)return t.update();if(n=te(t.expr,this),e=i(n),e&&(e=!f&&!h,f?n=te(JSON.stringify(n),this):h&&(n=g(n))),t.bool&&(n=!!n&&a),t.isRtag)return I(t,this,n);if(!(t.wasParsedOnce&&t.value===n||(t.value=n,t.wasParsedOnce=!0,e))){if(!a)return n+="",void(c&&(t.parent=c,"TEXTAREA"===c.tagName?(c.value=n,Gt||(o.nodeValue=n)):o.nodeValue=n));t.isAttrRemoved&&n||(_(o,t.attr),t.isAttrRemoved=!0),r(n)?L(a,n,o,this):u?y(o,a===Lt?!n:n):(t.bool&&(o[a]=n),"value"===a&&o.value!==n&&(o.value=n),s(n)||n===!1||b(o,a,n),h&&o.hidden&&y(o,!1))}}}function N(t){S(t,R.bind(this))}function D(t,e,n,r){var i=r?Object.create(r):{};return i[t.key]=e,t.pos&&(i[t.pos]=n),i}function j(t,e){for(var n=e.length,r=t.length;n>r;)n--,B.apply(e[n],[e,n])}function B(t,e){t.splice(e,1),this.unmount(),dt(this.parent,this,this.__.tagName,!0)}function F(t){var e=this;S(Object.keys(this.tags),function(n){st.apply(e.tags[n],[n,t])})}function U(t,e,n){n?_t.apply(this,[t,e]):w(t,this.root,e.root)}function V(t,e,n){n?yt.apply(this,[t,e]):w(t,this.root,e.root)}function q(t,e){e?yt.call(this,t):t.appendChild(this.root)}function Z(t,e,n){_(t,zt);var r,i=typeof x(t,Ct)!==It||_(t,Ct),o=ht(t),s=Mt[o],l=t.parentNode,c=d(),h=ot(t),f=x(t,kt),m=[],v=[],y=!0,g=!Mt[o],b="VIRTUAL"===t.tagName;return n=te.loopKeys(n),n.isLoop=!0,f&&_(t,kt),l.insertBefore(c,t),l.removeChild(t),n.update=function(){n.value=te(n.val,e);var l=p(),d=n.value,_=!u(d)&&!a(d),x=c.parentNode;_?(r=d||!1,d=r?Object.keys(d).map(function(t){return D(n,d[t],t)}):[]):r=!1,f&&(d=d.filter(function(t,r){return n.key&&!_?!!te(f,D(n,t,r,e)):!!te(f,C(Object.create(e),t))})),S(d,function(a,u){var c=i&&typeof a===Ot&&!r,f=v.indexOf(a),p=f===-1,_=!p&&c?f:u,w=m[_],M=u>=v.length,T=c&&p||!c&&!w;a=!r&&n.key?D(n,a,u):a,T?(w=new it(s,{parent:e,isLoop:y,isAnonymous:g,tagName:o,root:t.cloneNode(g),item:a,index:u},t.innerHTML),w.mount(),M?q.apply(w,[l||x,b]):V.apply(w,[x,m[u],b]),M||v.splice(u,0,a),m.splice(u,0,w),h&&pt(e.tags,o,w,!0)):_!==u&&c&&(E(d,v[_])&&(U.apply(w,[x,m[u],b]),m.splice(u,0,m.splice(_,1)[0]),v.splice(u,0,v.splice(_,1)[0])),n.pos&&(w[n.pos]=u),!h&&w.tags&&F.call(w,u)),w.__.item=a,w.__.index=u,w.__.parent=e,T||w.update(a)}),j(d,m),v=d.slice(),x.insertBefore(l,c)},n.unmount=function(){S(m,function(t){t.unmount()})},n}function W(t,e,n){var r=this,i={parent:{children:e}};return T(t,function(e,i){var o,a,s,u=e.nodeType,l=i.parent;if(!n&&e===t)return{parent:l};if(3===u&&"STYLE"!==e.parentNode.tagName&&te.hasExpr(e.nodeValue)&&l.children.push({dom:e,expr:e.nodeValue}),1!==u)return i;var c="VIRTUAL"===e.tagName;if(o=x(e,zt))return c&&b(e,"loopVirtual",!0),l.children.push(Z(e,r,o)),!1;if(o=x(e,kt))return l.children.push(Object.create(oe).init(e,r,o)),!1;if((a=x(e,At))&&te.hasExpr(a))return l.children.push({isRtag:!0,expr:a,dom:e,attrs:[].slice.call(e.attributes)}),!1;if(s=ot(e),c&&(x(e,"virtualized")&&e.parentElement.removeChild(e),s||x(e,"virtualized")||x(e,"loopVirtual")||(s={tmpl:e.outerHTML})),s&&(e!==t||n)){if(!c||x(e,At)){var h={root:e,parent:r,hasImpl:!0};return l.children.push(ut(s,h,e.innerHTML,r)),!1}b(e,"virtualized",!0);var f=new it({tmpl:e.outerHTML},{root:e,parent:r},e.innerHTML);l.children.push(f)}return G.apply(r,[e,e.attributes,function(t,e){e&&l.children.push(e)}]),{parent:l}},i),{tree:i,root:t}}function G(t,e,r){var i=this;S(e,function(e){var o,a=e.name,s=n(a);E(Et,a)?o=Object.create(ae).init(t,i,a,e.value):te.hasExpr(e.value)&&(o={dom:t,expr:e.value,attr:a,bool:s}),r(e,o)})}function H(t,e,n){var r="o"===n[0],i=r?"select>":"table>";if(t.innerHTML="<"+i+e.trim()+"</"+i,i=t.firstChild,r)i.selectedIndex=-1;else{var o=he[n];o&&1===i.childElementCount&&(i=f(o,i))}return i}function X(t,e){if(!se.test(t))return t;var n={};return e=e&&e.replace(le,function(t,e,r){return n[e]=n[e]||r,""}).trim(),t.replace(ce,function(t,e,r){return n[e]||r||""}).replace(ue,function(t,n){return e||n||""})}function Y(t,e){var n=t&&t.match(/^\s*<([-\w]+)/),r=n&&n[1].toLowerCase(),i=m(pe);return t=X(t,e),fe.test(r)?i=H(i,t,r):v(i,t),i}function K(t,e){var n=this,r=n.name,i=n.tmpl,o=n.css,a=n.attrs,s=n.onCreate;return Mt[r]||(J(r,i,o,a,s),Mt[r].class=this.constructor),mt(t,r,e,this),o&&$t.inject(),this}function J(t,e,n,i,o){return r(i)&&(o=i,/^[\w\-]+\s?=/.test(n)?(i=n,n=""):i=""),n&&(r(n)?o=n:$t.add(n)),t=t.toLowerCase(),Mt[t]={name:t,tmpl:e,attrs:i,fn:o},t}function $(t,e,n,r,i){return n&&$t.add(n,t),Mt[t]={name:t,tmpl:e,attrs:r,fn:i},t}function Q(t,e,n){function r(t){if(t.tagName){var i=x(t,At);e&&i!==e&&(i=e,b(t,At,e));var a=mt(t,i||t.tagName.toLowerCase(),n);a&&o.push(a)}else t.length&&S(t,r)}var o=[];$t.inject(),i(e)&&(n=e,e=0);var s,u;if(a(t)?(t="*"===t?u=gt():t+gt(t.split(/, */)),s=t?h(t):[]):s=t,"*"===e){if(e=u||gt(),s.tagName)s=h(e,s);else{var l=[];S(s,function(t){return l.push(h(e,t))}),s=l}e=0}return r(s),o}function tt(t,e,n){if(i(t))return void tt("__unnamed_"+ve++,t,!0);var a=n?me:de;if(!e){if(o(a[t]))throw new Error("Unregistered mixin: "+t);return a[t]}a[t]=r(e)?C(e.prototype,a[t]||{})&&e:C(a[t]||{},e)}function et(){return S(wt,function(t){return t.update()})}function nt(t){delete Mt[t]}function rt(t,e,n,r,i){if(!t||!n){var o=!n&&t?this:e||this;S(i,function(t){t.expr&&N.call(o,[t.expr]),r[A(t.name).replace(St,"")]=t.expr?t.expr.value:t.value})}}function it(t,e,n){void 0===t&&(t={}),void 0===e&&(e={});var i,o=C({},e.opts),s=e.parent,u=e.isLoop,l=!!e.isAnonymous,c=re.skipAnonymousTags&&l,h=ft(e.item),f=e.index,p=[],d=[],m=[],v=e.root,y=e.tagName||ht(v),g="virtual"===y,x=[];c||ee(this),t.name&&v._tag&&v._tag.unmount(!0),this.isMounted=!1,z(this,"__",{isAnonymous:l,instAttrs:p,innerHTML:n,tagName:y,index:f,isLoop:u,virts:[],tail:null,head:null,parent:null,item:null}),z(this,"_riot_id",++ge),z(this,"root",v),C(this,{opts:o},h),z(this,"parent",s||null),z(this,"tags",{}),z(this,"refs",{}),i=u&&l?v:Y(t.tmpl,n,u),z(this,"update",function(t){var e={},n=this.isMounted&&!c;return t=ft(t),C(this,t),rt.apply(this,[u,s,l,e,p]),n&&this.isMounted&&r(this.shouldUpdate)&&!this.shouldUpdate(t,e)?this:(u&&l&&at.apply(this,[this.parent,x]),C(o,e),n&&this.trigger("update",t),N.call(this,m),n&&this.trigger("updated"),this)}.bind(this)),z(this,"mixin",function(){var t=this;return S(arguments,function(e){var n,i,o=[],s=["init","__proto__"];e=a(e)?tt(e):e,n=r(e)?new e:e;var u=Object.getPrototypeOf(n);do o=o.concat(Object.getOwnPropertyNames(i||n));while(i=Object.getPrototypeOf(i||n));S(o,function(e){if(!E(s,e)){var i=Object.getOwnPropertyDescriptor(n,e)||Object.getOwnPropertyDescriptor(u,e),o=i&&(i.get||i.set);!t.hasOwnProperty(e)&&o?Object.defineProperty(t,e,i):t[e]=r(n[e])?n[e].bind(t):n[e]}}),n.init&&n.init.bind(t)()}),this}.bind(this)),z(this,"mount",function(){var e=this;v._tag=this,G.apply(s,[v,v.attributes,function(t,n){!l&&ae.isPrototypeOf(n)&&(n.tag=e),t.expr=n,p.push(t)}]),d=[],M(t.attrs,function(t,e){d.push({name:t,value:e})}),G.apply(this,[v,d,function(t,e){e?m.push(e):b(v,t.name,t.value)}]),rt.apply(this,[u,s,l,o,p]);var n=tt(Tt);if(n&&!c)for(var r in n)n.hasOwnProperty(r)&&e.mixin(n[r]);if(t.fn&&t.fn.call(this,o),c||this.trigger("before-mount"),W.apply(this,[i,m,l]),this.update(h),!l)for(;i.firstChild;)v.appendChild(i.firstChild);if(z(this,"root",v),z(this,"isMounted",!0),!c){if(this.parent){var a=lt(this.parent);a.one(a.isMounted?"updated":"mount",function(){e.trigger("mount")})}else this.trigger("mount");return this}}.bind(this)),z(this,"unmount",function(e){var n,r=this,i=this.root,o=i.parentNode,a=wt.indexOf(this);if(c||this.trigger("before-unmount"),M(t.attrs,function(t){k(t,St)&&(t=t.slice(St.length)),_(v,t)}),a!==-1&&wt.splice(a,1),o||g){if(s)n=lt(s),g?Object.keys(this.tags).forEach(function(t){dt(n.tags,t,r.tags[t])}):(dt(n.tags,y,this),s!==n&&dt(s.tags,y,this));else for(;i.firstChild;)i.removeChild(i.firstChild);o&&(e?_(o,At):o.removeChild(i))}return this.__.virts&&S(this.__.virts,function(t){t.parentNode&&t.parentNode.removeChild(t)}),ct(m),S(p,function(t){return t.expr&&t.expr.unmount&&t.expr.unmount()}),this.__.onUnmount&&this.__.onUnmount(),c||(this.trigger("unmount"),this.off("*")),z(this,"isMounted",!1),delete this.root._tag,this}.bind(this))}function ot(t){return t.tagName&&Mt[x(t,At)||x(t,At)||t.tagName.toLowerCase()]}function at(t,e){var n=this;S(Object.keys(t),function(r){var i=!c(r)&&E(e,r);(o(n[r])||i)&&(i||e.push(r),n[r]=t[r])})}function st(t,e){var n,r=this.parent;r&&(n=r.tags[t],u(n)?n.splice(e,0,n.splice(n.indexOf(this),1)[0]):pt(r.tags,t,this))}function ut(t,e,n,r){var i=new it(t,e,n),o=e.tagName||ht(e.root,!0),a=lt(r);return z(i,"parent",a),i.__.parent=r,pt(a.tags,o,i),a!==r&&pt(r.tags,o,i),e.root.innerHTML="",i}function lt(t){for(var e=t;e.__.isAnonymous&&e.parent;)e=e.parent;return e}function ct(t){S(t,function(t){t instanceof it?t.unmount(!0):t.unmount&&t.unmount()})}function ht(t,e){var n=ot(t),r=!e&&x(t,At);return r&&!te.hasExpr(r)?r:n?n.name:t.tagName.toLowerCase()}function ft(t){if(!(t instanceof it||t&&r(t.trigger)))return t;var e={};for(var n in t)Vt.test(n)||(e[n]=t[n]);return e}function pt(t,e,n,r,i){var a=t[e],s=u(a),l=!o(i);if(!a||a!==n)if(!a&&r)t[e]=[n];else if(a)if(s){var c=a.indexOf(n);if(c===i)return;c!==-1&&a.splice(c,1),l?a.splice(i,0,n):a.push(n)}else t[e]=[a,n];else t[e]=n}function dt(t,e,n,r){if(u(t[e])){var i=t[e].indexOf(n);i!==-1&&t[e].splice(i,1),t[e].length?1!==t[e].length||r||(t[e]=t[e][0]):delete t[e]}else delete t[e]}function mt(t,e,n,r){var i=Mt[e],o=Mt[e].class,a=r||(o?Object.create(o.prototype):{}),s=t._innerHTML=t._innerHTML||t.innerHTML;t.innerHTML="";var u=C({root:t,opts:n},{parent:n?n.parent:null});return i&&t&&it.apply(a,[i,u,s]),a&&a.mount&&(a.mount(!0),E(wt,a)||wt.push(a)),a}function vt(t,e){var n=p();yt.call(t,n),e.parentNode.replaceChild(n,e)}function yt(t,e){var n,r,i=this,o=d(),a=d(),s=p();for(this.root.insertBefore(o,this.root.firstChild),this.root.appendChild(a),this.__.head=r=o,this.__.tail=a;r;)n=r.nextSibling,s.appendChild(r),i.__.virts.push(r),r=n;e?t.insertBefore(s,e.__.head):t.appendChild(s)}function _t(t,e){for(var n,r=this,i=this.__.head,o=p();i;)if(n=i.nextSibling,o.appendChild(i),i=n,i===r.__.tail){o.appendChild(i),t.insertBefore(o,e.__.head);break}}function gt(t){if(!t){var e=Object.keys(Mt);return e+gt(e)}return t.filter(function(t){return!/[^-\w]/.test(t)}).reduce(function(t,e){var n=e.trim().toLowerCase();return t+",["+At+'="'+n+'"]'},"")}var xt,bt,wt=[],Mt={},Tt="__global_mixin",St="riot-",Et=["ref","data-ref"],At="data-is",kt="if",zt="each",Ct="no-reorder",Pt="show",Lt="hide",It="string",Ot="object",Rt="undefined",Nt="function",Dt="http://www.w3.org/1999/xlink",jt=/^xlink:(\w+)/,Bt=typeof window===Rt?void 0:window,Ft=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,Ut=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/,Vt=/^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|refs|parent|opts|trigger|o(?:n|ff|ne))$/,qt=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g,Zt={viewbox:"viewBox"},Wt=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/,Gt=0|(Bt&&Bt.document||{}).documentMode,Ht=Object.freeze({isBoolAttr:n,isFunction:r,isObject:i,isUndefined:o,isString:a,isBlank:s,isArray:u,isWritable:l,isReservedName:c}),Xt=Object.freeze({$$:h,$:f,createFrag:p,createDOMPlaceholder:d,mkEl:m,setInnerHTML:v,toggleVisibility:y,remAttr:_,styleObjectToString:g,getAttr:x,setAttr:b,safeInsert:w,walkAttrs:M,walkNodes:T}),Yt={},Kt=[],Jt=!1;Bt&&(xt=function(){var t=m("style");b(t,"type","text/css");var e=f("style[type=riot]");return e?(e.id&&(t.id=e.id),e.parentNode.replaceChild(t,e)):document.getElementsByTagName("head")[0].appendChild(t),t}(),bt=xt.styleSheet);var $t={styleNode:xt,add:function(t,e){e?Yt[e]=t:Kt.push(t),Jt=!0},inject:function(){if(Bt&&Jt){Jt=!1;var t=Object.keys(Yt).map(function(t){return Yt[t]}).concat(Kt).join("\n");bt?bt.cssText=t:xt.innerHTML=t}}},Qt=function(e){function n(t){return t}function r(t,e){return e||(e=x),new RegExp(t.source.replace(/{/g,e[2]).replace(/}/g,e[3]),t.global?c:"")}function i(t){if(t===y)return _;var e=t.split(" ");if(2!==e.length||d.test(t))throw new Error('Unsupported brackets "'+t+'"');return e=e.concat(t.replace(m,"\\").split(" ")),e[4]=r(e[1].length>1?/{[\S\s]*?}/:_[4],e),e[5]=r(t.length>3?/\\({|})/g:_[5],e),e[6]=r(_[6],e),e[7]=RegExp("\\\\("+e[3]+")|([[({])|("+e[3]+")|"+p,c),e[8]=t,e}function o(t){return t instanceof RegExp?u(t):x[t]}function a(t){(t||(t=y))!==x[8]&&(x=i(t),u=t===y?n:r,x[9]=u(_[9])),g=t}function s(t){var e;t=t||{},e=t.brackets,Object.defineProperty(t,"brackets",{set:a,get:function(){return g},enumerable:!0}),l=t,a(e)}var u,l,c="g",h=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,f=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`/g,p=f.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,d=RegExp("[\\x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),m=/(?=[[\]()*+?.^$|])/g,v={"(":RegExp("([()])|"+p,c),"[":RegExp("([[\\]])|"+p,c),"{":RegExp("([{}])|"+p,c)},y="{ }",_=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+p,c),y,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],g=e,x=[];return o.split=function(t,e,n){function r(t){e||a?l.push(t&&t.replace(n[5],"$1")):l.push(t)}function i(t,e,n){var r,i=v[e];for(i.lastIndex=n,n=1;(r=i.exec(t))&&(!r[1]||(r[1]===e?++n:--n)););return n?t.length:i.lastIndex}n||(n=x);var o,a,s,u,l=[],c=n[6];for(a=s=c.lastIndex=0;o=c.exec(t);){if(u=o.index,a){if(o[2]){c.lastIndex=i(t,o[2],c.lastIndex);continue}if(!o[3])continue}o[1]||(r(t.slice(s,u)),s=c.lastIndex,c=n[6+(a^=1)],c.lastIndex=s)}return t&&s<t.length&&r(t.slice(s)),l},o.hasExpr=function(t){return x[4].test(t)},o.loopKeys=function(t){var e=t.match(x[9]);return e?{key:e[1],pos:e[2],val:x[0]+e[3].trim()+x[1]}:{val:t.trim()}},o.array=function(t){return t?i(t):x},Object.defineProperty(o,"settings",{set:s,get:function(){return l}}),o.settings="undefined"!=typeof t&&t.settings||{},o.set=a,o.R_STRINGS=f,o.R_MLCOMMS=h,o.S_QBLOCKS=p,o}(),te=function(){function t(t,r){return t?(a[t]||(a[t]=n(t))).call(r,e):t}function e(e,n){e.riotData={tagName:n&&n.__&&n.__.tagName,_riot_id:n&&n._riot_id},t.errorHandler?t.errorHandler(e):"undefined"!=typeof console&&"function"==typeof console.error&&(e.riotData.tagName&&console.error("Riot template error thrown in the <%s> tag",e.riotData.tagName),console.error(e))}function n(t){var e=r(t);return"try{return "!==e.slice(0,11)&&(e="return "+e),new Function("E",e+";")}function r(t){var e,n=[],r=Qt.split(t.replace(c,'"'),1);if(r.length>2||r[0]){var o,a,s=[];for(o=a=0;o<r.length;++o)e=r[o],e&&(e=1&o?i(e,1,n):'"'+e.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(s[a++]=e);e=a<2?s[0]:"["+s.join(",")+'].join("")'}else e=i(r[1],0,n);return n[0]&&(e=e.replace(h,function(t,e){return n[e].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),e}function i(t,e,n){function r(e,n){var r,i=1,o=f[e];for(o.lastIndex=n.lastIndex;r=o.exec(t);)if(r[0]===e)++i;else if(!--i)break;n.lastIndex=i?t.length:o.lastIndex}if(t=t.replace(l,function(t,e){return t.length>2&&!e?s+(n.push(t)-1)+"~":t}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var i,a=[],c=0;t&&(i=t.match(u))&&!i.index;){var h,p,d=/,|([[{(])|$/g;for(t=RegExp.rightContext,h=i[2]?n[i[2]].slice(1,-1).trim().replace(/\s+/g," "):i[1];p=(i=d.exec(t))[1];)r(p,d);p=t.slice(0,i.index),t=RegExp.rightContext,a[c++]=o(p,1,h)}t=c?c>1?"["+a.join(",")+'].join(" ").trim()':a[0]:o(t,e)}return t}function o(t,e,n){var r;return t=t.replace(d,function(t,e,n,i,o){return n&&(i=r?0:i+t.length,"this"!==n&&"global"!==n&&"window"!==n?(t=e+'("'+n+p+n,i&&(r="."===(o=o[i])||"("===o||"["===o)):i&&(r=!m.test(o.slice(i)))),t}),r&&(t="try{return "+t+"}catch(e){E(e,this)}"),n?t=(r?"function(){"+t+"}.call(this)":"("+t+")")+'?"'+n+'":""':e&&(t="function(v){"+(r?t.replace("return ","v="):"v=("+t+")")+';return v||v===0?v:""}.call(this)'),t}var a={};t.hasExpr=Qt.hasExpr,t.loopKeys=Qt.loopKeys,t.clearCache=function(){a={}},t.errorHandler=null;var s=String.fromCharCode(8279),u=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,l=RegExp(Qt.S_QBLOCKS,"g"),c=/\u2057/g,h=/\u2057(\d+)~/g,f={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},p='"in this?this:'+("object"!=typeof window?"global":"window")+").",d=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,m=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return t.version=Qt.version="v3.0.3",t}(),ee=function(t){t=t||{};var e={},n=Array.prototype.slice;return Object.defineProperties(t,{on:{value:function(n,r){return"function"==typeof r&&(e[n]=e[n]||[]).push(r),t},enumerable:!1,writable:!1,configurable:!1},off:{value:function(n,r){if("*"!=n||r)if(r)for(var i,o=e[n],a=0;i=o&&o[a];++a)i==r&&o.splice(a--,1);else delete e[n];else e={};return t},enumerable:!1,writable:!1,configurable:!1},one:{value:function(e,n){function r(){t.off(e,r),n.apply(t,arguments)}return t.on(e,r)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(r){var i,o,a,s=arguments,u=arguments.length-1,l=new Array(u);for(a=0;a<u;a++)l[a]=s[a+1];for(i=n.call(e[r]||[],0),a=0;o=i[a];++a)o.apply(t,l);return e["*"]&&"*"!=r&&t.trigger.apply(t,["*",r].concat(l)),t},enumerable:!1,writable:!1,configurable:!1}}),t},ne=Object.freeze({each:S,contains:E,toCamel:A,startsWith:k,defineProperty:z,extend:C}),re=C(Object.create(Qt.settings),{skipAnonymousTags:!0}),ie=/^on/,oe={init:function(t,e,n){_(t,kt),this.tag=e,this.expr=n,this.stub=document.createTextNode(""),this.pristine=t;var r=t.parentNode;return r.insertBefore(this.stub,t),r.removeChild(t),this},update:function(){this.value=te(this.expr,this.tag),this.value&&!this.current?(this.current=this.pristine.cloneNode(!0),this.stub.parentNode.insertBefore(this.current,this.stub),this.expressions=[],W.apply(this.tag,[this.current,this.expressions,!0])):!this.value&&this.current&&(ct(this.expressions),this.current._tag?this.current._tag.unmount():this.current.parentNode&&this.current.parentNode.removeChild(this.current),this.current=null,this.expressions=[]),this.value&&N.call(this.tag,this.expressions)},unmount:function(){ct(this.expressions||[]),delete this.pristine,delete this.parentNode,delete this.stub}},ae={init:function(t,e,n,r){return this.dom=t,this.attr=n,this.rawValue=r,this.parent=e,this.hasExp=te.hasExpr(r),this},update:function(){var t=this.value,e=this.parent&&lt(this.parent),n=this.tag||this.dom;this.value=this.hasExp?te(this.rawValue,this.parent):this.rawValue,!s(t)&&e&&dt(e.refs,t,n),s(this.value)?_(this.dom,this.attr):(e&&pt(e.refs,this.value,n,null,this.parent.__.index),b(this.dom,this.attr,this.value))},unmount:function(){var t=this.tag||this.dom,e=this.parent&&lt(this.parent);!s(this.value)&&e&&dt(e.refs,this.value,t),delete this.dom,delete this.parent}},se=/<yield\b/i,ue=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,le=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,ce=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,he={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},fe=Gt&&Gt<10?Ft:Ut,pe="div",de={},me=de[Tt]={},ve=0,ye="v3.4.0",_e=Object.freeze({Tag:K,tag:J,tag2:$,mount:Q,mixin:tt,update:et,unregister:nt,version:ye}),ge=0,xe=Object.freeze({getTag:ot,inheritFrom:at,moveChildTag:st,initChildTag:ut,getImmediateCustomParentTag:lt,unmountAll:ct,getTagName:ht,cleanUpData:ft,arrayishAdd:pt,arrayishRemove:dt,mountTo:mt,makeReplaceVirtual:vt,makeVirtual:yt,moveVirtual:_t,selectTags:gt}),be=re,we={tmpl:te,brackets:Qt,styleManager:$t,vdom:wt,styleNode:$t.styleNode,dom:Xt,check:Ht,misc:ne,tags:xe},Me=K,Te=J,Se=$,Ee=Q,Ae=tt,ke=et,ze=nt,Ce=ye,Pe=ee,Le=C({},_e,{observable:ee,settings:be,util:we});e.settings=be,e.util=we,e.Tag=Me,e.tag=Te,e.tag2=Se,e.mount=Ee,e.mixin=Ae,e.update=ke,e.unregister=ze,e.version=Ce,e.observable=Pe,e.default=Le,Object.defineProperty(e,"__esModule",{value:!0})})}).call(e,n(1))},function(t,e,n){var r;(function(t,i){(function(){function o(t,e){return t.set(e[0],e[1]),t}function a(t,e){return t.add(e),t}function s(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function u(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function l(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function c(t,e){for(var n=null==t?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}function h(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function f(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function p(t,e){var n=null==t?0:t.length;return!!n&&T(t,e,0)>-1}function d(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function m(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function v(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function y(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function _(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function g(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function x(t){return t.split("")}function b(t){return t.match(qe)||[]}function w(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function M(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function T(t,e,n){return e===e?J(t,e,n):M(t,E,n)}function S(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function E(t){return t!==t}function A(t,e){var n=null==t?0:t.length;return n?L(t,e)/n:Dt}function k(t){return function(e){return null==e?it:e[t]}}function z(t){return function(e){return null==t?it:t[e]}}function C(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function P(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function L(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==it&&(n=n===it?o:n+o)}return n}function I(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function O(t,e){return m(e,function(e){return[e,t[e]]})}function R(t){return function(e){return t(e)}}function N(t,e){return m(e,function(e){return t[e]})}function D(t,e){return t.has(e)}function j(t,e){for(var n=-1,r=t.length;++n<r&&T(e,t[n],0)>-1;);return n}function B(t,e){for(var n=t.length;n--&&T(e,t[n],0)>-1;);return n}function F(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function U(t){return"\\"+nr[t]}function V(t,e){return null==t?it:t[e]}function q(t){return Hn.test(t)}function Z(t){return Xn.test(t)}function W(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function G(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function H(t,e){return function(n){return t(e(n))}}function X(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==ht||(t[n]=ht,o[i++]=n)}return o}function Y(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function K(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function J(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function $(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function Q(t){return q(t)?et(t):gr(t)}function tt(t){return q(t)?nt(t):x(t)}function et(t){for(var e=Wn.lastIndex=0;Wn.test(t);)++e;return e}function nt(t){return t.match(Wn)||[]}function rt(t){return t.match(Gn)||[]}var it,ot="4.17.4",at=200,st="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ut="Expected a function",lt="__lodash_hash_undefined__",ct=500,ht="__lodash_placeholder__",ft=1,pt=2,dt=4,mt=1,vt=2,yt=1,_t=2,gt=4,xt=8,bt=16,wt=32,Mt=64,Tt=128,St=256,Et=512,At=30,kt="...",zt=800,Ct=16,Pt=1,Lt=2,It=3,Ot=1/0,Rt=9007199254740991,Nt=1.7976931348623157e308,Dt=NaN,jt=4294967295,Bt=jt-1,Ft=jt>>>1,Ut=[["ary",Tt],["bind",yt],["bindKey",_t],["curry",xt],["curryRight",bt],["flip",Et],["partial",wt],["partialRight",Mt],["rearg",St]],Vt="[object Arguments]",qt="[object Array]",Zt="[object AsyncFunction]",Wt="[object Boolean]",Gt="[object Date]",Ht="[object DOMException]",Xt="[object Error]",Yt="[object Function]",Kt="[object GeneratorFunction]",Jt="[object Map]",$t="[object Number]",Qt="[object Null]",te="[object Object]",ee="[object Promise]",ne="[object Proxy]",re="[object RegExp]",ie="[object Set]",oe="[object String]",ae="[object Symbol]",se="[object Undefined]",ue="[object WeakMap]",le="[object WeakSet]",ce="[object ArrayBuffer]",he="[object DataView]",fe="[object Float32Array]",pe="[object Float64Array]",de="[object Int8Array]",me="[object Int16Array]",ve="[object Int32Array]",ye="[object Uint8Array]",_e="[object Uint8ClampedArray]",ge="[object Uint16Array]",xe="[object Uint32Array]",be=/\b__p \+= '';/g,we=/\b(__p \+=) '' \+/g,Me=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Te=/&(?:amp|lt|gt|quot|#39);/g,Se=/[&<>"']/g,Ee=RegExp(Te.source),Ae=RegExp(Se.source),ke=/<%-([\s\S]+?)%>/g,ze=/<%([\s\S]+?)%>/g,Ce=/<%=([\s\S]+?)%>/g,Pe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Le=/^\w*$/,Ie=/^\./,Oe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Re=/[\\^$.*+?()[\]{}|]/g,Ne=RegExp(Re.source),De=/^\s+|\s+$/g,je=/^\s+/,Be=/\s+$/,Fe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,Ve=/,? & /,qe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ze=/\\(\\)?/g,We=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ge=/\w*$/,He=/^[-+]0x[0-9a-f]+$/i,Xe=/^0b[01]+$/i,Ye=/^\[object .+?Constructor\]$/,Ke=/^0o[0-7]+$/i,Je=/^(?:0|[1-9]\d*)$/,$e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qe=/($^)/,tn=/['\n\r\u2028\u2029\\]/g,en="\\ud800-\\udfff",nn="\\u0300-\\u036f",rn="\\ufe20-\\ufe2f",on="\\u20d0-\\u20ff",an=nn+rn+on,sn="\\u2700-\\u27bf",un="a-z\\xdf-\\xf6\\xf8-\\xff",ln="\\xac\\xb1\\xd7\\xf7",cn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",hn="\\u2000-\\u206f",fn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pn="A-Z\\xc0-\\xd6\\xd8-\\xde",dn="\\ufe0e\\ufe0f",mn=ln+cn+hn+fn,vn="['’]",yn="["+en+"]",_n="["+mn+"]",gn="["+an+"]",xn="\\d+",bn="["+sn+"]",wn="["+un+"]",Mn="[^"+en+mn+xn+sn+un+pn+"]",Tn="\\ud83c[\\udffb-\\udfff]",Sn="(?:"+gn+"|"+Tn+")",En="[^"+en+"]",An="(?:\\ud83c[\\udde6-\\uddff]){2}",kn="[\\ud800-\\udbff][\\udc00-\\udfff]",zn="["+pn+"]",Cn="\\u200d",Pn="(?:"+wn+"|"+Mn+")",Ln="(?:"+zn+"|"+Mn+")",In="(?:"+vn+"(?:d|ll|m|re|s|t|ve))?",On="(?:"+vn+"(?:D|LL|M|RE|S|T|VE))?",Rn=Sn+"?",Nn="["+dn+"]?",Dn="(?:"+Cn+"(?:"+[En,An,kn].join("|")+")"+Nn+Rn+")*",jn="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Bn="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Fn=Nn+Rn+Dn,Un="(?:"+[bn,An,kn].join("|")+")"+Fn,Vn="(?:"+[En+gn+"?",gn,An,kn,yn].join("|")+")",qn=RegExp(vn,"g"),Zn=RegExp(gn,"g"),Wn=RegExp(Tn+"(?="+Tn+")|"+Vn+Fn,"g"),Gn=RegExp([zn+"?"+wn+"+"+In+"(?="+[_n,zn,"$"].join("|")+")",Ln+"+"+On+"(?="+[_n,zn+Pn,"$"].join("|")+")",zn+"?"+Pn+"+"+In,zn+"+"+On,Bn,jn,xn,Un].join("|"),"g"),Hn=RegExp("["+Cn+en+an+dn+"]"),Xn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kn=-1,Jn={};Jn[fe]=Jn[pe]=Jn[de]=Jn[me]=Jn[ve]=Jn[ye]=Jn[_e]=Jn[ge]=Jn[xe]=!0,Jn[Vt]=Jn[qt]=Jn[ce]=Jn[Wt]=Jn[he]=Jn[Gt]=Jn[Xt]=Jn[Yt]=Jn[Jt]=Jn[$t]=Jn[te]=Jn[re]=Jn[ie]=Jn[oe]=Jn[ue]=!1;var $n={};$n[Vt]=$n[qt]=$n[ce]=$n[he]=$n[Wt]=$n[Gt]=$n[fe]=$n[pe]=$n[de]=$n[me]=$n[ve]=$n[Jt]=$n[$t]=$n[te]=$n[re]=$n[ie]=$n[oe]=$n[ae]=$n[ye]=$n[_e]=$n[ge]=$n[xe]=!0,$n[Xt]=$n[Yt]=$n[ue]=!1;var Qn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y",
"ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},tr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},er={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rr=parseFloat,ir=parseInt,or="object"==typeof t&&t&&t.Object===Object&&t,ar="object"==typeof self&&self&&self.Object===Object&&self,sr=or||ar||Function("return this")(),ur="object"==typeof e&&e&&!e.nodeType&&e,lr=ur&&"object"==typeof i&&i&&!i.nodeType&&i,cr=lr&&lr.exports===ur,hr=cr&&or.process,fr=function(){try{return hr&&hr.binding&&hr.binding("util")}catch(t){}}(),pr=fr&&fr.isArrayBuffer,dr=fr&&fr.isDate,mr=fr&&fr.isMap,vr=fr&&fr.isRegExp,yr=fr&&fr.isSet,_r=fr&&fr.isTypedArray,gr=k("length"),xr=z(Qn),br=z(tr),wr=z(er),Mr=function t(e){function n(t){if(lu(t)&&!bf(t)&&!(t instanceof x)){if(t instanceof i)return t;if(xc.call(t,"__wrapped__"))return aa(t)}return new i(t)}function r(){}function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=it}function x(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=jt,this.__views__=[]}function z(){var t=new x(this.__wrapped__);return t.__actions__=Fi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Fi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Fi(this.__views__),t}function J(){if(this.__filtered__){var t=new x(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function et(){var t=this.__wrapped__.value(),e=this.__dir__,n=bf(t),r=e<0,i=n?t.length:0,o=Co(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,h=c.length,f=0,p=Kc(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return bi(t,this.__actions__);var d=[];t:for(;u--&&f<p;){l+=e;for(var m=-1,v=t[l];++m<h;){var y=c[m],_=y.iteratee,g=y.type,x=_(v);if(g==Lt)v=x;else if(!x){if(g==Pt)continue t;break t}}d[f++]=v}return d}function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qe(){this.__data__=ah?ah(null):{},this.size=0}function en(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function nn(t){var e=this.__data__;if(ah){var n=e[t];return n===lt?it:n}return xc.call(e,t)?e[t]:it}function rn(t){var e=this.__data__;return ah?e[t]!==it:xc.call(e,t)}function on(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ah&&e===it?lt:e,this}function an(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function sn(){this.__data__=[],this.size=0}function un(t){var e=this.__data__,n=In(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Oc.call(e,n,1),--this.size,!0}function ln(t){var e=this.__data__,n=In(e,t);return n<0?it:e[n][1]}function cn(t){return In(this.__data__,t)>-1}function hn(t,e){var n=this.__data__,r=In(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function fn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function pn(){this.size=0,this.__data__={hash:new nt,map:new(nh||an),string:new nt}}function dn(t){var e=Eo(this,t).delete(t);return this.size-=e?1:0,e}function mn(t){return Eo(this,t).get(t)}function vn(t){return Eo(this,t).has(t)}function yn(t,e){var n=Eo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function _n(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new fn;++e<n;)this.add(t[e])}function gn(t){return this.__data__.set(t,lt),this}function xn(t){return this.__data__.has(t)}function bn(t){var e=this.__data__=new an(t);this.size=e.size}function wn(){this.__data__=new an,this.size=0}function Mn(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Tn(t){return this.__data__.get(t)}function Sn(t){return this.__data__.has(t)}function En(t,e){var n=this.__data__;if(n instanceof an){var r=n.__data__;if(!nh||r.length<at-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new fn(r)}return n.set(t,e),this.size=n.size,this}function An(t,e){var n=bf(t),r=!n&&xf(t),i=!n&&!r&&Mf(t),o=!n&&!r&&!i&&kf(t),a=n||r||i||o,s=a?I(t.length,pc):[],u=s.length;for(var l in t)!e&&!xc.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||jo(l,u))||s.push(l);return s}function kn(t){var e=t.length;return e?t[ni(0,e-1)]:it}function zn(t,e){return na(Fi(t),Bn(e,0,t.length))}function Cn(t){return na(Fi(t))}function Pn(t,e,n){(n===it||Ys(t[e],n))&&(n!==it||e in t)||Dn(t,e,n)}function Ln(t,e,n){var r=t[e];xc.call(t,e)&&Ys(r,n)&&(n!==it||e in t)||Dn(t,e,n)}function In(t,e){for(var n=t.length;n--;)if(Ys(t[n][0],e))return n;return-1}function On(t,e,n,r){return _h(t,function(t,i,o){e(r,t,n(t),o)}),r}function Rn(t,e){return t&&Ui(e,Zu(e),t)}function Nn(t,e){return t&&Ui(e,Wu(e),t)}function Dn(t,e,n){"__proto__"==e&&jc?jc(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function jn(t,e){for(var n=-1,r=e.length,i=ac(r),o=null==t;++n<r;)i[n]=o?it:Uu(t,e[n]);return i}function Bn(t,e,n){return t===t&&(n!==it&&(t=t<=n?t:n),e!==it&&(t=t>=e?t:e)),t}function Fn(t,e,n,r,i,o){var a,s=e&ft,u=e&pt,c=e&dt;if(n&&(a=i?n(t,r,i,o):n(t)),a!==it)return a;if(!uu(t))return t;var h=bf(t);if(h){if(a=Io(t),!s)return Fi(t,a)}else{var f=Ch(t),p=f==Yt||f==Kt;if(Mf(t))return ki(t,s);if(f==te||f==Vt||p&&!i){if(a=u||p?{}:Oo(t),!s)return u?qi(t,Nn(a,t)):Vi(t,Rn(a,t))}else{if(!$n[f])return i?t:{};a=Ro(t,f,Fn,s)}}o||(o=new bn);var d=o.get(t);if(d)return d;o.set(t,a);var m=c?u?wo:bo:u?Wu:Zu,v=h?it:m(t);return l(v||t,function(r,i){v&&(i=r,r=t[i]),Ln(a,i,Fn(r,e,n,i,t,o))}),a}function Un(t){var e=Zu(t);return function(n){return Vn(n,t,e)}}function Vn(t,e,n){var r=n.length;if(null==t)return!r;for(t=hc(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===it&&!(i in t)||!o(a))return!1}return!0}function Wn(t,e,n){if("function"!=typeof t)throw new dc(ut);return Ih(function(){t.apply(it,n)},e)}function Gn(t,e,n,r){var i=-1,o=p,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=m(e,R(n))),r?(o=d,a=!1):e.length>=at&&(o=D,a=!1,e=new _n(e));t:for(;++i<s;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h===h){for(var f=l;f--;)if(e[f]===h)continue t;u.push(c)}else o(e,h,r)||u.push(c)}return u}function Hn(t,e){var n=!0;return _h(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Xn(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===it?a===a&&!xu(a):n(a,s)))var s=a,u=o}return u}function Qn(t,e,n,r){var i=t.length;for(n=Eu(n),n<0&&(n=-n>i?0:i+n),r=r===it||r>i?i:Eu(r),r<0&&(r+=i),r=n>r?0:Au(r);n<r;)t[n++]=e;return t}function tr(t,e){var n=[];return _h(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function er(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Do),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?er(s,e-1,n,r,i):v(i,s):r||(i[i.length]=s)}return i}function nr(t,e){return t&&xh(t,e,Zu)}function or(t,e){return t&&bh(t,e,Zu)}function ar(t,e){return f(e,function(e){return ou(t[e])})}function ur(t,e){e=Ei(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[ra(e[n++])];return n&&n==r?t:it}function lr(t,e,n){var r=e(t);return bf(t)?r:v(r,n(t))}function hr(t){return null==t?t===it?se:Qt:Dc&&Dc in hc(t)?zo(t):Ko(t)}function fr(t,e){return t>e}function gr(t,e){return null!=t&&xc.call(t,e)}function Mr(t,e){return null!=t&&e in hc(t)}function Sr(t,e,n){return t>=Kc(e,n)&&t<Yc(e,n)}function Er(t,e,n){for(var r=n?d:p,i=t[0].length,o=t.length,a=o,s=ac(o),u=1/0,l=[];a--;){var c=t[a];a&&e&&(c=m(c,R(e))),u=Kc(c.length,u),s[a]=!n&&(e||i>=120&&c.length>=120)?new _n(a&&c):it}c=t[0];var h=-1,f=s[0];t:for(;++h<i&&l.length<u;){var v=c[h],y=e?e(v):v;if(v=n||0!==v?v:0,!(f?D(f,y):r(l,y,n))){for(a=o;--a;){var _=s[a];if(!(_?D(_,y):r(t[a],y,n)))continue t}f&&f.push(y),l.push(v)}}return l}function Ar(t,e,n,r){return nr(t,function(t,i,o){e(r,n(t),i,o)}),r}function kr(t,e,n){e=Ei(e,t),t=$o(t,e);var r=null==t?t:t[ra(Sa(e))];return null==r?it:s(r,t,n)}function zr(t){return lu(t)&&hr(t)==Vt}function Cr(t){return lu(t)&&hr(t)==ce}function Pr(t){return lu(t)&&hr(t)==Gt}function Lr(t,e,n,r,i){return t===e||(null==t||null==e||!lu(t)&&!lu(e)?t!==t&&e!==e:Ir(t,e,n,r,Lr,i))}function Ir(t,e,n,r,i,o){var a=bf(t),s=bf(e),u=a?qt:Ch(t),l=s?qt:Ch(e);u=u==Vt?te:u,l=l==Vt?te:l;var c=u==te,h=l==te,f=u==l;if(f&&Mf(t)){if(!Mf(e))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new bn),a||kf(t)?yo(t,e,n,r,i,o):_o(t,e,u,n,r,i,o);if(!(n&mt)){var p=c&&xc.call(t,"__wrapped__"),d=h&&xc.call(e,"__wrapped__");if(p||d){var m=p?t.value():t,v=d?e.value():e;return o||(o=new bn),i(m,v,n,r,o)}}return!!f&&(o||(o=new bn),go(t,e,n,r,i,o))}function Or(t){return lu(t)&&Ch(t)==Jt}function Rr(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=hc(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var u=s[0],l=t[u],c=s[1];if(a&&s[2]){if(l===it&&!(u in t))return!1}else{var h=new bn;if(r)var f=r(l,c,u,t,e,h);if(!(f===it?Lr(c,l,mt|vt,r,h):f))return!1}}return!0}function Nr(t){if(!uu(t)||qo(t))return!1;var e=ou(t)?Ec:Ye;return e.test(ia(t))}function Dr(t){return lu(t)&&hr(t)==re}function jr(t){return lu(t)&&Ch(t)==ie}function Br(t){return lu(t)&&su(t.length)&&!!Jn[hr(t)]}function Fr(t){return"function"==typeof t?t:null==t?Ol:"object"==typeof t?bf(t)?Gr(t[0],t[1]):Wr(t):Vl(t)}function Ur(t){if(!Zo(t))return Xc(t);var e=[];for(var n in hc(t))xc.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Vr(t){if(!uu(t))return Yo(t);var e=Zo(t),n=[];for(var r in t)("constructor"!=r||!e&&xc.call(t,r))&&n.push(r);return n}function qr(t,e){return t<e}function Zr(t,e){var n=-1,r=Ks(t)?ac(t.length):[];return _h(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Wr(t){var e=Ao(t);return 1==e.length&&e[0][2]?Go(e[0][0],e[0][1]):function(n){return n===t||Rr(n,t,e)}}function Gr(t,e){return Fo(t)&&Wo(e)?Go(ra(t),e):function(n){var r=Uu(n,t);return r===it&&r===e?qu(n,t):Lr(e,r,mt|vt)}}function Hr(t,e,n,r,i){t!==e&&xh(e,function(o,a){if(uu(o))i||(i=new bn),Xr(t,e,a,n,Hr,r,i);else{var s=r?r(t[a],o,a+"",t,e,i):it;s===it&&(s=o),Pn(t,a,s)}},Wu)}function Xr(t,e,n,r,i,o,a){var s=t[n],u=e[n],l=a.get(u);if(l)return void Pn(t,n,l);var c=o?o(s,u,n+"",t,e,a):it,h=c===it;if(h){var f=bf(u),p=!f&&Mf(u),d=!f&&!p&&kf(u);c=u,f||p||d?bf(s)?c=s:Js(s)?c=Fi(s):p?(h=!1,c=ki(u,!0)):d?(h=!1,c=Ri(u,!0)):c=[]:yu(u)||xf(u)?(c=s,xf(s)?c=zu(s):(!uu(s)||r&&ou(s))&&(c=Oo(u))):h=!1}h&&(a.set(u,c),i(c,u,r,o,a),a.delete(u)),Pn(t,n,c)}function Yr(t,e){var n=t.length;if(n)return e+=e<0?n:0,jo(e,n)?t[e]:it}function Kr(t,e,n){var r=-1;e=m(e.length?e:[Ol],R(So()));var i=Zr(t,function(t,n,i){var o=m(e,function(e){return e(t)});return{criteria:o,index:++r,value:t}});return P(i,function(t,e){return Di(t,e,n)})}function Jr(t,e){return $r(t,e,function(e,n){return qu(t,n)})}function $r(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=ur(t,a);n(s,a)&&ui(o,Ei(a,t),s)}return o}function Qr(t){return function(e){return ur(e,t)}}function ti(t,e,n,r){var i=r?S:T,o=-1,a=e.length,s=t;for(t===e&&(e=Fi(e)),n&&(s=m(t,R(n)));++o<a;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==t&&Oc.call(s,u,1),Oc.call(t,u,1);return t}function ei(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;jo(i)?Oc.call(t,i,1):_i(t,i)}}return t}function ni(t,e){return t+qc(Qc()*(e-t+1))}function ri(t,e,n,r){for(var i=-1,o=Yc(Vc((e-t)/(n||1)),0),a=ac(o);o--;)a[r?o:++i]=t,t+=n;return a}function ii(t,e){var n="";if(!t||e<1||e>Rt)return n;do e%2&&(n+=t),e=qc(e/2),e&&(t+=t);while(e);return n}function oi(t,e){return Oh(Jo(t,e,Ol),t+"")}function ai(t){return kn(rl(t))}function si(t,e){var n=rl(t);return na(n,Bn(e,0,n.length))}function ui(t,e,n,r){if(!uu(t))return t;e=Ei(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=ra(e[i]),l=n;if(i!=a){var c=s[u];l=r?r(c,u,s):it,l===it&&(l=uu(c)?c:jo(e[i+1])?[]:{})}Ln(s,u,l),s=s[u]}return t}function li(t){return na(rl(t))}function ci(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=ac(i);++r<i;)o[r]=t[r+e];return o}function hi(t,e){var n;return _h(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function fi(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=Ft){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!xu(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return pi(t,e,Ol,n)}function pi(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!==e,s=null===e,u=xu(e),l=e===it;i<o;){var c=qc((i+o)/2),h=n(t[c]),f=h!==it,p=null===h,d=h===h,m=xu(h);if(a)var v=r||d;else v=l?d&&(r||f):s?d&&f&&(r||!p):u?d&&f&&!p&&(r||!m):!p&&!m&&(r?h<=e:h<e);v?i=c+1:o=c}return Kc(o,Bt)}function di(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ys(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function mi(t){return"number"==typeof t?t:xu(t)?Dt:+t}function vi(t){if("string"==typeof t)return t;if(bf(t))return m(t,vi)+"";if(xu(t))return vh?vh.call(t):"";var e=t+"";return"0"==e&&1/t==-Ot?"-0":e}function yi(t,e,n){var r=-1,i=p,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=d;else if(o>=at){var l=e?null:Eh(t);if(l)return Y(l);a=!1,i=D,u=new _n}else u=e?[]:s;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(c)}else i(u,h,n)||(u!==s&&u.push(h),s.push(c))}return s}function _i(t,e){return e=Ei(e,t),t=$o(t,e),null==t||delete t[ra(Sa(e))]}function gi(t,e,n,r){return ui(t,e,n(ur(t,e)),r)}function xi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ci(t,r?0:o,r?o+1:i):ci(t,r?o+1:0,r?i:o)}function bi(t,e){var n=t;return n instanceof x&&(n=n.value()),y(e,function(t,e){return e.func.apply(e.thisArg,v([t],e.args))},n)}function wi(t,e,n){var r=t.length;if(r<2)return r?yi(t[0]):[];for(var i=-1,o=ac(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=Gn(o[i]||a,t[s],e,n));return yi(er(o,1),e,n)}function Mi(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:it;n(a,t[r],s)}return a}function Ti(t){return Js(t)?t:[]}function Si(t){return"function"==typeof t?t:Ol}function Ei(t,e){return bf(t)?t:Fo(t,e)?[t]:Rh(Pu(t))}function Ai(t,e,n){var r=t.length;return n=n===it?r:n,!e&&n>=r?t:ci(t,e,n)}function ki(t,e){if(e)return t.slice();var n=t.length,r=Cc?Cc(n):new t.constructor(n);return t.copy(r),r}function zi(t){var e=new t.constructor(t.byteLength);return new zc(e).set(new zc(t)),e}function Ci(t,e){var n=e?zi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Pi(t,e,n){var r=e?n(G(t),ft):G(t);return y(r,o,new t.constructor)}function Li(t){var e=new t.constructor(t.source,Ge.exec(t));return e.lastIndex=t.lastIndex,e}function Ii(t,e,n){var r=e?n(Y(t),ft):Y(t);return y(r,a,new t.constructor)}function Oi(t){return mh?hc(mh.call(t)):{}}function Ri(t,e){var n=e?zi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ni(t,e){if(t!==e){var n=t!==it,r=null===t,i=t===t,o=xu(t),a=e!==it,s=null===e,u=e===e,l=xu(e);if(!s&&!l&&!o&&t>e||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function Di(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Ni(i[r],o[r]);if(u){if(r>=s)return u;var l=n[r];return u*("desc"==l?-1:1)}}return t.index-e.index}function ji(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,l=Yc(o-a,0),c=ac(u+l),h=!r;++s<u;)c[s]=e[s];for(;++i<a;)(h||i<o)&&(c[n[i]]=t[i]);for(;l--;)c[s++]=t[i++];return c}function Bi(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,l=e.length,c=Yc(o-s,0),h=ac(c+l),f=!r;++i<c;)h[i]=t[i];for(var p=i;++u<l;)h[p+u]=e[u];for(;++a<s;)(f||i<o)&&(h[p+n[a]]=t[i++]);return h}function Fi(t,e){var n=-1,r=t.length;for(e||(e=ac(r));++n<r;)e[n]=t[n];return e}function Ui(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):it;u===it&&(u=t[s]),i?Dn(n,s,u):Ln(n,s,u)}return n}function Vi(t,e){return Ui(t,kh(t),e)}function qi(t,e){return Ui(t,zh(t),e)}function Zi(t,e){return function(n,r){var i=bf(n)?u:On,o=e?e():{};return i(n,t,So(r,2),o)}}function Wi(t){return oi(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:it,a=i>2?n[2]:it;for(o=t.length>3&&"function"==typeof o?(i--,o):it,a&&Bo(n[0],n[1],a)&&(o=i<3?it:o,i=1),e=hc(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function Gi(t,e){return function(n,r){if(null==n)return n;if(!Ks(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=hc(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function Hi(t){return function(e,n,r){for(var i=-1,o=hc(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(n(o[u],u,o)===!1)break}return e}}function Xi(t,e,n){function r(){var e=this&&this!==sr&&this instanceof r?o:t;return e.apply(i?n:this,arguments)}var i=e&yt,o=Ji(t);return r}function Yi(t){return function(e){e=Pu(e);var n=q(e)?tt(e):it,r=n?n[0]:e.charAt(0),i=n?Ai(n,1).join(""):e.slice(1);return r[t]()+i}}function Ki(t){return function(e){return y(zl(ll(e).replace(qn,"")),t,"")}}function Ji(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=yh(t.prototype),r=t.apply(n,e);return uu(r)?r:n}}function $i(t,e,n){function r(){for(var o=arguments.length,a=ac(o),u=o,l=To(r);u--;)a[u]=arguments[u];var c=o<3&&a[0]!==l&&a[o-1]!==l?[]:X(a,l);if(o-=c.length,o<n)return lo(t,e,eo,r.placeholder,it,a,c,it,it,n-o);var h=this&&this!==sr&&this instanceof r?i:t;return s(h,this,a)}var i=Ji(t);return r}function Qi(t){return function(e,n,r){var i=hc(e);if(!Ks(e)){var o=So(n,3);e=Zu(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:it}}function to(t){return xo(function(e){var n=e.length,r=n,o=i.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new dc(ut);if(o&&!s&&"wrapper"==Mo(a))var s=new i([],!0)}for(r=s?r:n;++r<n;){a=e[r];var u=Mo(a),l="wrapper"==u?Ah(a):it;s=l&&Vo(l[0])&&l[1]==(Tt|xt|wt|St)&&!l[4].length&&1==l[9]?s[Mo(l[0])].apply(s,l[3]):1==a.length&&Vo(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&bf(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function eo(t,e,n,r,i,o,a,s,u,l){function c(){for(var y=arguments.length,_=ac(y),g=y;g--;)_[g]=arguments[g];if(d)var x=To(c),b=F(_,x);if(r&&(_=ji(_,r,i,d)),o&&(_=Bi(_,o,a,d)),y-=b,d&&y<l){var w=X(_,x);return lo(t,e,eo,c.placeholder,n,_,w,s,u,l-y)}var M=f?n:this,T=p?M[t]:t;return y=_.length,s?_=Qo(_,s):m&&y>1&&_.reverse(),h&&u<y&&(_.length=u),this&&this!==sr&&this instanceof c&&(T=v||Ji(T)),T.apply(M,_)}var h=e&Tt,f=e&yt,p=e&_t,d=e&(xt|bt),m=e&Et,v=p?it:Ji(t);return c}function no(t,e){return function(n,r){return Ar(n,t,e(r),{})}}function ro(t,e){return function(n,r){var i;if(n===it&&r===it)return e;if(n!==it&&(i=n),r!==it){if(i===it)return r;"string"==typeof n||"string"==typeof r?(n=vi(n),r=vi(r)):(n=mi(n),r=mi(r)),i=t(n,r)}return i}}function io(t){return xo(function(e){return e=m(e,R(So())),oi(function(n){var r=this;return t(e,function(t){return s(t,r,n)})})})}function oo(t,e){e=e===it?" ":vi(e);var n=e.length;if(n<2)return n?ii(e,t):e;var r=ii(e,Vc(t/Q(e)));return q(e)?Ai(tt(r),0,t).join(""):r.slice(0,t)}function ao(t,e,n,r){function i(){for(var e=-1,u=arguments.length,l=-1,c=r.length,h=ac(c+u),f=this&&this!==sr&&this instanceof i?a:t;++l<c;)h[l]=r[l];for(;u--;)h[l++]=arguments[++e];return s(f,o?n:this,h)}var o=e&yt,a=Ji(t);return i}function so(t){return function(e,n,r){return r&&"number"!=typeof r&&Bo(e,n,r)&&(n=r=it),e=Su(e),n===it?(n=e,e=0):n=Su(n),r=r===it?e<n?1:-1:Su(r),ri(e,n,r,t)}}function uo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ku(e),n=ku(n)),t(e,n)}}function lo(t,e,n,r,i,o,a,s,u,l){var c=e&xt,h=c?a:it,f=c?it:a,p=c?o:it,d=c?it:o;e|=c?wt:Mt,e&=~(c?Mt:wt),e&gt||(e&=~(yt|_t));var m=[t,e,i,p,h,d,f,s,u,l],v=n.apply(it,m);return Vo(t)&&Lh(v,m),v.placeholder=r,ta(v,t,e)}function co(t){var e=cc[t];return function(t,n){if(t=ku(t),n=null==n?0:Kc(Eu(n),292)){var r=(Pu(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return r=(Pu(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function ho(t){return function(e){var n=Ch(e);return n==Jt?G(e):n==ie?K(e):O(e,t(e))}}function fo(t,e,n,r,i,o,a,s){var u=e&_t;if(!u&&"function"!=typeof t)throw new dc(ut);var l=r?r.length:0;if(l||(e&=~(wt|Mt),r=i=it),a=a===it?a:Yc(Eu(a),0),s=s===it?s:Eu(s),l-=i?i.length:0,e&Mt){var c=r,h=i;r=i=it}var f=u?it:Ah(t),p=[t,e,n,r,i,c,h,o,a,s];if(f&&Xo(p,f),t=p[0],e=p[1],n=p[2],r=p[3],i=p[4],s=p[9]=p[9]===it?u?0:t.length:Yc(p[9]-l,0),!s&&e&(xt|bt)&&(e&=~(xt|bt)),e&&e!=yt)d=e==xt||e==bt?$i(t,e,s):e!=wt&&e!=(yt|wt)||i.length?eo.apply(it,p):ao(t,e,n,r);else var d=Xi(t,e,n);var m=f?wh:Lh;return ta(m(d,p),t,e)}function po(t,e,n,r){return t===it||Ys(t,yc[n])&&!xc.call(r,n)?e:t}function mo(t,e,n,r,i,o){return uu(t)&&uu(e)&&(o.set(e,t),Hr(t,e,it,mo,o),o.delete(e)),t}function vo(t){return yu(t)?it:t}function yo(t,e,n,r,i,o){var a=n&mt,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var c=-1,h=!0,f=n&vt?new _n:it;for(o.set(t,e),o.set(e,t);++c<s;){var p=t[c],d=e[c];if(r)var m=a?r(d,p,c,e,t,o):r(p,d,c,t,e,o);if(m!==it){if(m)continue;h=!1;break}if(f){if(!g(e,function(t,e){if(!D(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)})){h=!1;break}}else if(p!==d&&!i(p,d,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function _o(t,e,n,r,i,o,a){switch(n){case he:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ce:return!(t.byteLength!=e.byteLength||!o(new zc(t),new zc(e)));case Wt:case Gt:case $t:return Ys(+t,+e);case Xt:return t.name==e.name&&t.message==e.message;case re:case oe:return t==e+"";case Jt:var s=G;case ie:var u=r&mt;if(s||(s=Y),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=vt,a.set(t,e);var c=yo(s(t),s(e),r,i,o,a);return a.delete(t),c;case ae:if(mh)return mh.call(t)==mh.call(e)}return!1}function go(t,e,n,r,i,o){var a=n&mt,s=bo(t),u=s.length,l=bo(e),c=l.length;if(u!=c&&!a)return!1;for(var h=u;h--;){var f=s[h];if(!(a?f in e:xc.call(e,f)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var d=!0;o.set(t,e),o.set(e,t);for(var m=a;++h<u;){f=s[h];var v=t[f],y=e[f];if(r)var _=a?r(y,v,f,e,t,o):r(v,y,f,t,e,o);if(!(_===it?v===y||i(v,y,n,r,o):_)){d=!1;break}m||(m="constructor"==f)}if(d&&!m){var g=t.constructor,x=e.constructor;g!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof x&&x instanceof x)&&(d=!1)}return o.delete(t),o.delete(e),d}function xo(t){return Oh(Jo(t,it,ya),t+"")}function bo(t){return lr(t,Zu,kh)}function wo(t){return lr(t,Wu,zh)}function Mo(t){for(var e=t.name+"",n=uh[e],r=xc.call(uh,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function To(t){var e=xc.call(n,"placeholder")?n:t;return e.placeholder}function So(){var t=n.iteratee||Rl;return t=t===Rl?Fr:t,arguments.length?t(arguments[0],arguments[1]):t}function Eo(t,e){var n=t.__data__;return Uo(e)?n["string"==typeof e?"string":"hash"]:n.map}function Ao(t){for(var e=Zu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Wo(i)]}return e}function ko(t,e){var n=V(t,e);return Nr(n)?n:it}function zo(t){var e=xc.call(t,Dc),n=t[Dc];try{t[Dc]=it;var r=!0}catch(t){}var i=Mc.call(t);return r&&(e?t[Dc]=n:delete t[Dc]),i}function Co(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Kc(e,t+a);break;case"takeRight":t=Yc(t,e-a)}}return{start:t,end:e}}function Po(t){var e=t.match(Ue);return e?e[1].split(Ve):[]}function Lo(t,e,n){e=Ei(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=ra(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=null==t?0:t.length,!!i&&su(i)&&jo(a,i)&&(bf(t)||xf(t)))}function Io(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&xc.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Oo(t){return"function"!=typeof t.constructor||Zo(t)?{}:yh(Pc(t))}function Ro(t,e,n,r){var i=t.constructor;switch(e){case ce:return zi(t);case Wt:case Gt:return new i(+t);case he:return Ci(t,r);case fe:case pe:case de:case me:case ve:case ye:case _e:case ge:case xe:return Ri(t,r);case Jt:return Pi(t,r,n);case $t:case oe:return new i(t);case re:return Li(t);case ie:return Ii(t,r,n);case ae:return Oi(t)}}function No(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Fe,"{\n/* [wrapped with "+e+"] */\n")}function Do(t){return bf(t)||xf(t)||!!(Rc&&t&&t[Rc])}function jo(t,e){return e=null==e?Rt:e,!!e&&("number"==typeof t||Je.test(t))&&t>-1&&t%1==0&&t<e}function Bo(t,e,n){if(!uu(n))return!1;var r=typeof e;return!!("number"==r?Ks(n)&&jo(e,n.length):"string"==r&&e in n)&&Ys(n[e],t)}function Fo(t,e){if(bf(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!xu(t))||(Le.test(t)||!Pe.test(t)||null!=e&&t in hc(e))}function Uo(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Vo(t){var e=Mo(t),r=n[e];if("function"!=typeof r||!(e in x.prototype))return!1;if(t===r)return!0;var i=Ah(r);return!!i&&t===i[0]}function qo(t){return!!wc&&wc in t}function Zo(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||yc;return t===n}function Wo(t){return t===t&&!uu(t)}function Go(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==it||t in hc(n)))}}function Ho(t){var e=Rs(t,function(t){return n.size===ct&&n.clear(),t}),n=e.cache;return e}function Xo(t,e){var n=t[1],r=e[1],i=n|r,o=i<(yt|_t|Tt),a=r==Tt&&n==xt||r==Tt&&n==St&&t[7].length<=e[8]||r==(Tt|St)&&e[7].length<=e[8]&&n==xt;if(!o&&!a)return t;r&yt&&(t[2]=e[2],i|=n&yt?0:gt);var s=e[3];if(s){var u=t[3];t[3]=u?ji(u,s,e[4]):s,t[4]=u?X(t[3],ht):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?Bi(u,s,e[6]):s,t[6]=u?X(t[5],ht):e[6]),s=e[7],s&&(t[7]=s),r&Tt&&(t[8]=null==t[8]?e[8]:Kc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Yo(t){var e=[];if(null!=t)for(var n in hc(t))e.push(n);return e}function Ko(t){return Mc.call(t)}function Jo(t,e,n){return e=Yc(e===it?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Yc(r.length-e,0),a=ac(o);++i<o;)a[i]=r[e+i];i=-1;for(var u=ac(e+1);++i<e;)u[i]=r[i];return u[e]=n(a),s(t,this,u)}}function $o(t,e){return e.length<2?t:ur(t,ci(e,0,-1))}function Qo(t,e){for(var n=t.length,r=Kc(e.length,n),i=Fi(t);r--;){var o=e[r];t[r]=jo(o,n)?i[o]:it}return t}function ta(t,e,n){var r=e+"";return Oh(t,No(r,oa(Po(r),n)))}function ea(t){var e=0,n=0;return function(){var r=Jc(),i=Ct-(r-n);if(n=r,i>0){if(++e>=zt)return arguments[0]}else e=0;return t.apply(it,arguments)}}function na(t,e){var n=-1,r=t.length,i=r-1;for(e=e===it?r:e;++n<e;){var o=ni(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function ra(t){if("string"==typeof t||xu(t))return t;var e=t+"";return"0"==e&&1/t==-Ot?"-0":e}function ia(t){if(null!=t){try{return gc.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function oa(t,e){return l(Ut,function(n){var r="_."+n[0];e&n[1]&&!p(t,r)&&t.push(r)}),t.sort()}function aa(t){if(t instanceof x)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=Fi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function sa(t,e,n){e=(n?Bo(t,e,n):e===it)?1:Yc(Eu(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=ac(Vc(r/e));i<r;)a[o++]=ci(t,i,i+=e);return a}function ua(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function la(){var t=arguments.length;if(!t)return[];for(var e=ac(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return v(bf(n)?Fi(n):[n],er(e,1))}function ca(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:Eu(e),ci(t,e<0?0:e,r)):[]}function ha(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:Eu(e),e=r-e,ci(t,0,e<0?0:e)):[]}function fa(t,e){return t&&t.length?xi(t,So(e,3),!0,!0):[]}function pa(t,e){return t&&t.length?xi(t,So(e,3),!0):[]}function da(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Bo(t,e,n)&&(n=0,r=i),Qn(t,e,n,r)):[]}function ma(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Eu(n);return i<0&&(i=Yc(r+i,0)),M(t,So(e,3),i)}function va(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==it&&(i=Eu(n),i=n<0?Yc(r+i,0):Kc(i,r-1)),M(t,So(e,3),i,!0)}function ya(t){var e=null==t?0:t.length;return e?er(t,1):[]}function _a(t){var e=null==t?0:t.length;return e?er(t,Ot):[]}function ga(t,e){var n=null==t?0:t.length;return n?(e=e===it?1:Eu(e),er(t,e)):[]}function xa(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function ba(t){return t&&t.length?t[0]:it}function wa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Eu(n);return i<0&&(i=Yc(r+i,0)),T(t,e,i)}function Ma(t){var e=null==t?0:t.length;return e?ci(t,0,-1):[]}function Ta(t,e){return null==t?"":Hc.call(t,e)}function Sa(t){var e=null==t?0:t.length;return e?t[e-1]:it}function Ea(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==it&&(i=Eu(n),i=i<0?Yc(r+i,0):Kc(i,r-1)),e===e?$(t,e,i):M(t,E,i,!0)}function Aa(t,e){return t&&t.length?Yr(t,Eu(e)):it}function ka(t,e){return t&&t.length&&e&&e.length?ti(t,e):t}function za(t,e,n){return t&&t.length&&e&&e.length?ti(t,e,So(n,2)):t}function Ca(t,e,n){return t&&t.length&&e&&e.length?ti(t,e,it,n):t}function Pa(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=So(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return ei(t,i),n}function La(t){return null==t?t:th.call(t)}function Ia(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Bo(t,e,n)?(e=0,n=r):(e=null==e?0:Eu(e),n=n===it?r:Eu(n)),ci(t,e,n)):[]}function Oa(t,e){return fi(t,e)}function Ra(t,e,n){return pi(t,e,So(n,2))}function Na(t,e){var n=null==t?0:t.length;if(n){var r=fi(t,e);if(r<n&&Ys(t[r],e))return r}return-1}function Da(t,e){return fi(t,e,!0)}function ja(t,e,n){return pi(t,e,So(n,2),!0)}function Ba(t,e){var n=null==t?0:t.length;if(n){var r=fi(t,e,!0)-1;if(Ys(t[r],e))return r}return-1}function Fa(t){return t&&t.length?di(t):[]}function Ua(t,e){return t&&t.length?di(t,So(e,2)):[]}function Va(t){var e=null==t?0:t.length;return e?ci(t,1,e):[]}function qa(t,e,n){return t&&t.length?(e=n||e===it?1:Eu(e),ci(t,0,e<0?0:e)):[]}function Za(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:Eu(e),e=r-e,ci(t,e<0?0:e,r)):[]}function Wa(t,e){return t&&t.length?xi(t,So(e,3),!1,!0):[]}function Ga(t,e){return t&&t.length?xi(t,So(e,3)):[]}function Ha(t){return t&&t.length?yi(t):[]}function Xa(t,e){return t&&t.length?yi(t,So(e,2)):[]}function Ya(t,e){return e="function"==typeof e?e:it,t&&t.length?yi(t,it,e):[]}function Ka(t){if(!t||!t.length)return[];var e=0;return t=f(t,function(t){if(Js(t))return e=Yc(t.length,e),!0}),I(e,function(e){return m(t,k(e));
})}function Ja(t,e){if(!t||!t.length)return[];var n=Ka(t);return null==e?n:m(n,function(t){return s(e,it,t)})}function $a(t,e){return Mi(t||[],e||[],Ln)}function Qa(t,e){return Mi(t||[],e||[],ui)}function ts(t){var e=n(t);return e.__chain__=!0,e}function es(t,e){return e(t),t}function ns(t,e){return e(t)}function rs(){return ts(this)}function is(){return new i(this.value(),this.__chain__)}function os(){this.__values__===it&&(this.__values__=Tu(this.value()));var t=this.__index__>=this.__values__.length,e=t?it:this.__values__[this.__index__++];return{done:t,value:e}}function as(){return this}function ss(t){for(var e,n=this;n instanceof r;){var i=aa(n);i.__index__=0,i.__values__=it,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function us(){var t=this.__wrapped__;if(t instanceof x){var e=t;return this.__actions__.length&&(e=new x(this)),e=e.reverse(),e.__actions__.push({func:ns,args:[La],thisArg:it}),new i(e,this.__chain__)}return this.thru(La)}function ls(){return bi(this.__wrapped__,this.__actions__)}function cs(t,e,n){var r=bf(t)?h:Hn;return n&&Bo(t,e,n)&&(e=it),r(t,So(e,3))}function hs(t,e){var n=bf(t)?f:tr;return n(t,So(e,3))}function fs(t,e){return er(_s(t,e),1)}function ps(t,e){return er(_s(t,e),Ot)}function ds(t,e,n){return n=n===it?1:Eu(n),er(_s(t,e),n)}function ms(t,e){var n=bf(t)?l:_h;return n(t,So(e,3))}function vs(t,e){var n=bf(t)?c:gh;return n(t,So(e,3))}function ys(t,e,n,r){t=Ks(t)?t:rl(t),n=n&&!r?Eu(n):0;var i=t.length;return n<0&&(n=Yc(i+n,0)),gu(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&T(t,e,n)>-1}function _s(t,e){var n=bf(t)?m:Zr;return n(t,So(e,3))}function gs(t,e,n,r){return null==t?[]:(bf(e)||(e=null==e?[]:[e]),n=r?it:n,bf(n)||(n=null==n?[]:[n]),Kr(t,e,n))}function xs(t,e,n){var r=bf(t)?y:C,i=arguments.length<3;return r(t,So(e,4),n,i,_h)}function bs(t,e,n){var r=bf(t)?_:C,i=arguments.length<3;return r(t,So(e,4),n,i,gh)}function ws(t,e){var n=bf(t)?f:tr;return n(t,Ns(So(e,3)))}function Ms(t){var e=bf(t)?kn:ai;return e(t)}function Ts(t,e,n){e=(n?Bo(t,e,n):e===it)?1:Eu(e);var r=bf(t)?zn:si;return r(t,e)}function Ss(t){var e=bf(t)?Cn:li;return e(t)}function Es(t){if(null==t)return 0;if(Ks(t))return gu(t)?Q(t):t.length;var e=Ch(t);return e==Jt||e==ie?t.size:Ur(t).length}function As(t,e,n){var r=bf(t)?g:hi;return n&&Bo(t,e,n)&&(e=it),r(t,So(e,3))}function ks(t,e){if("function"!=typeof e)throw new dc(ut);return t=Eu(t),function(){if(--t<1)return e.apply(this,arguments)}}function zs(t,e,n){return e=n?it:e,e=t&&null==e?t.length:e,fo(t,Tt,it,it,it,it,e)}function Cs(t,e){var n;if("function"!=typeof e)throw new dc(ut);return t=Eu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=it),n}}function Ps(t,e,n){e=n?it:e;var r=fo(t,xt,it,it,it,it,it,e);return r.placeholder=Ps.placeholder,r}function Ls(t,e,n){e=n?it:e;var r=fo(t,bt,it,it,it,it,it,e);return r.placeholder=Ls.placeholder,r}function Is(t,e,n){function r(e){var n=f,r=p;return f=p=it,_=e,m=t.apply(r,n)}function i(t){return _=t,v=Ih(s,e),g?r(t):m}function o(t){var n=t-y,r=t-_,i=e-n;return x?Kc(i,d-r):i}function a(t){var n=t-y,r=t-_;return y===it||n>=e||n<0||x&&r>=d}function s(){var t=lf();return a(t)?u(t):void(v=Ih(s,o(t)))}function u(t){return v=it,b&&f?r(t):(f=p=it,m)}function l(){v!==it&&Sh(v),_=0,f=y=p=v=it}function c(){return v===it?m:u(lf())}function h(){var t=lf(),n=a(t);if(f=arguments,p=this,y=t,n){if(v===it)return i(y);if(x)return v=Ih(s,e),r(y)}return v===it&&(v=Ih(s,e)),m}var f,p,d,m,v,y,_=0,g=!1,x=!1,b=!0;if("function"!=typeof t)throw new dc(ut);return e=ku(e)||0,uu(n)&&(g=!!n.leading,x="maxWait"in n,d=x?Yc(ku(n.maxWait)||0,e):d,b="trailing"in n?!!n.trailing:b),h.cancel=l,h.flush=c,h}function Os(t){return fo(t,Et)}function Rs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new dc(ut);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Rs.Cache||fn),n}function Ns(t){if("function"!=typeof t)throw new dc(ut);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Ds(t){return Cs(2,t)}function js(t,e){if("function"!=typeof t)throw new dc(ut);return e=e===it?e:Eu(e),oi(t,e)}function Bs(t,e){if("function"!=typeof t)throw new dc(ut);return e=null==e?0:Yc(Eu(e),0),oi(function(n){var r=n[e],i=Ai(n,0,e);return r&&v(i,r),s(t,this,i)})}function Fs(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new dc(ut);return uu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Is(t,e,{leading:r,maxWait:e,trailing:i})}function Us(t){return zs(t,1)}function Vs(t,e){return mf(Si(e),t)}function qs(){if(!arguments.length)return[];var t=arguments[0];return bf(t)?t:[t]}function Zs(t){return Fn(t,dt)}function Ws(t,e){return e="function"==typeof e?e:it,Fn(t,dt,e)}function Gs(t){return Fn(t,ft|dt)}function Hs(t,e){return e="function"==typeof e?e:it,Fn(t,ft|dt,e)}function Xs(t,e){return null==e||Vn(t,e,Zu(e))}function Ys(t,e){return t===e||t!==t&&e!==e}function Ks(t){return null!=t&&su(t.length)&&!ou(t)}function Js(t){return lu(t)&&Ks(t)}function $s(t){return t===!0||t===!1||lu(t)&&hr(t)==Wt}function Qs(t){return lu(t)&&1===t.nodeType&&!yu(t)}function tu(t){if(null==t)return!0;if(Ks(t)&&(bf(t)||"string"==typeof t||"function"==typeof t.splice||Mf(t)||kf(t)||xf(t)))return!t.length;var e=Ch(t);if(e==Jt||e==ie)return!t.size;if(Zo(t))return!Ur(t).length;for(var n in t)if(xc.call(t,n))return!1;return!0}function eu(t,e){return Lr(t,e)}function nu(t,e,n){n="function"==typeof n?n:it;var r=n?n(t,e):it;return r===it?Lr(t,e,it,n):!!r}function ru(t){if(!lu(t))return!1;var e=hr(t);return e==Xt||e==Ht||"string"==typeof t.message&&"string"==typeof t.name&&!yu(t)}function iu(t){return"number"==typeof t&&Gc(t)}function ou(t){if(!uu(t))return!1;var e=hr(t);return e==Yt||e==Kt||e==Zt||e==ne}function au(t){return"number"==typeof t&&t==Eu(t)}function su(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Rt}function uu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function lu(t){return null!=t&&"object"==typeof t}function cu(t,e){return t===e||Rr(t,e,Ao(e))}function hu(t,e,n){return n="function"==typeof n?n:it,Rr(t,e,Ao(e),n)}function fu(t){return vu(t)&&t!=+t}function pu(t){if(Ph(t))throw new uc(st);return Nr(t)}function du(t){return null===t}function mu(t){return null==t}function vu(t){return"number"==typeof t||lu(t)&&hr(t)==$t}function yu(t){if(!lu(t)||hr(t)!=te)return!1;var e=Pc(t);if(null===e)return!0;var n=xc.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&gc.call(n)==Tc}function _u(t){return au(t)&&t>=-Rt&&t<=Rt}function gu(t){return"string"==typeof t||!bf(t)&&lu(t)&&hr(t)==oe}function xu(t){return"symbol"==typeof t||lu(t)&&hr(t)==ae}function bu(t){return t===it}function wu(t){return lu(t)&&Ch(t)==ue}function Mu(t){return lu(t)&&hr(t)==le}function Tu(t){if(!t)return[];if(Ks(t))return gu(t)?tt(t):Fi(t);if(Nc&&t[Nc])return W(t[Nc]());var e=Ch(t),n=e==Jt?G:e==ie?Y:rl;return n(t)}function Su(t){if(!t)return 0===t?t:0;if(t=ku(t),t===Ot||t===-Ot){var e=t<0?-1:1;return e*Nt}return t===t?t:0}function Eu(t){var e=Su(t),n=e%1;return e===e?n?e-n:e:0}function Au(t){return t?Bn(Eu(t),0,jt):0}function ku(t){if("number"==typeof t)return t;if(xu(t))return Dt;if(uu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=uu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(De,"");var n=Xe.test(t);return n||Ke.test(t)?ir(t.slice(2),n?2:8):He.test(t)?Dt:+t}function zu(t){return Ui(t,Wu(t))}function Cu(t){return t?Bn(Eu(t),-Rt,Rt):0===t?t:0}function Pu(t){return null==t?"":vi(t)}function Lu(t,e){var n=yh(t);return null==e?n:Rn(n,e)}function Iu(t,e){return w(t,So(e,3),nr)}function Ou(t,e){return w(t,So(e,3),or)}function Ru(t,e){return null==t?t:xh(t,So(e,3),Wu)}function Nu(t,e){return null==t?t:bh(t,So(e,3),Wu)}function Du(t,e){return t&&nr(t,So(e,3))}function ju(t,e){return t&&or(t,So(e,3))}function Bu(t){return null==t?[]:ar(t,Zu(t))}function Fu(t){return null==t?[]:ar(t,Wu(t))}function Uu(t,e,n){var r=null==t?it:ur(t,e);return r===it?n:r}function Vu(t,e){return null!=t&&Lo(t,e,gr)}function qu(t,e){return null!=t&&Lo(t,e,Mr)}function Zu(t){return Ks(t)?An(t):Ur(t)}function Wu(t){return Ks(t)?An(t,!0):Vr(t)}function Gu(t,e){var n={};return e=So(e,3),nr(t,function(t,r,i){Dn(n,e(t,r,i),t)}),n}function Hu(t,e){var n={};return e=So(e,3),nr(t,function(t,r,i){Dn(n,r,e(t,r,i))}),n}function Xu(t,e){return Yu(t,Ns(So(e)))}function Yu(t,e){if(null==t)return{};var n=m(wo(t),function(t){return[t]});return e=So(e),$r(t,n,function(t,n){return e(t,n[0])})}function Ku(t,e,n){e=Ei(e,t);var r=-1,i=e.length;for(i||(i=1,t=it);++r<i;){var o=null==t?it:t[ra(e[r])];o===it&&(r=i,o=n),t=ou(o)?o.call(t):o}return t}function Ju(t,e,n){return null==t?t:ui(t,e,n)}function $u(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:ui(t,e,n,r)}function Qu(t,e,n){var r=bf(t),i=r||Mf(t)||kf(t);if(e=So(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:uu(t)&&ou(o)?yh(Pc(t)):{}}return(i?l:nr)(t,function(t,r,i){return e(n,t,r,i)}),n}function tl(t,e){return null==t||_i(t,e)}function el(t,e,n){return null==t?t:gi(t,e,Si(n))}function nl(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:gi(t,e,Si(n),r)}function rl(t){return null==t?[]:N(t,Zu(t))}function il(t){return null==t?[]:N(t,Wu(t))}function ol(t,e,n){return n===it&&(n=e,e=it),n!==it&&(n=ku(n),n=n===n?n:0),e!==it&&(e=ku(e),e=e===e?e:0),Bn(ku(t),e,n)}function al(t,e,n){return e=Su(e),n===it?(n=e,e=0):n=Su(n),t=ku(t),Sr(t,e,n)}function sl(t,e,n){if(n&&"boolean"!=typeof n&&Bo(t,e,n)&&(e=n=it),n===it&&("boolean"==typeof e?(n=e,e=it):"boolean"==typeof t&&(n=t,t=it)),t===it&&e===it?(t=0,e=1):(t=Su(t),e===it?(e=t,t=0):e=Su(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Qc();return Kc(t+i*(e-t+rr("1e-"+((i+"").length-1))),e)}return ni(t,e)}function ul(t){return tp(Pu(t).toLowerCase())}function ll(t){return t=Pu(t),t&&t.replace($e,xr).replace(Zn,"")}function cl(t,e,n){t=Pu(t),e=vi(e);var r=t.length;n=n===it?r:Bn(Eu(n),0,r);var i=n;return n-=e.length,n>=0&&t.slice(n,i)==e}function hl(t){return t=Pu(t),t&&Ae.test(t)?t.replace(Se,br):t}function fl(t){return t=Pu(t),t&&Ne.test(t)?t.replace(Re,"\\$&"):t}function pl(t,e,n){t=Pu(t),e=Eu(e);var r=e?Q(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return oo(qc(i),n)+t+oo(Vc(i),n)}function dl(t,e,n){t=Pu(t),e=Eu(e);var r=e?Q(t):0;return e&&r<e?t+oo(e-r,n):t}function ml(t,e,n){t=Pu(t),e=Eu(e);var r=e?Q(t):0;return e&&r<e?oo(e-r,n)+t:t}function vl(t,e,n){return n||null==e?e=0:e&&(e=+e),$c(Pu(t).replace(je,""),e||0)}function yl(t,e,n){return e=(n?Bo(t,e,n):e===it)?1:Eu(e),ii(Pu(t),e)}function _l(){var t=arguments,e=Pu(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function gl(t,e,n){return n&&"number"!=typeof n&&Bo(t,e,n)&&(e=n=it),(n=n===it?jt:n>>>0)?(t=Pu(t),t&&("string"==typeof e||null!=e&&!Ef(e))&&(e=vi(e),!e&&q(t))?Ai(tt(t),0,n):t.split(e,n)):[]}function xl(t,e,n){return t=Pu(t),n=null==n?0:Bn(Eu(n),0,t.length),e=vi(e),t.slice(n,n+e.length)==e}function bl(t,e,r){var i=n.templateSettings;r&&Bo(t,e,r)&&(e=it),t=Pu(t),e=If({},e,i,po);var o,a,s=If({},e.imports,i.imports,po),u=Zu(s),l=N(s,u),c=0,h=e.interpolate||Qe,f="__p += '",p=fc((e.escape||Qe).source+"|"+h.source+"|"+(h===Ce?We:Qe).source+"|"+(e.evaluate||Qe).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Kn+"]")+"\n";t.replace(p,function(e,n,r,i,s,u){return r||(r=i),f+=t.slice(c,u).replace(tn,U),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),f+="';\n";var m=e.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(be,""):f).replace(we,"$1").replace(Me,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=ep(function(){return lc(u,d+"return "+f).apply(it,l)});if(v.source=f,ru(v))throw v;return v}function wl(t){return Pu(t).toLowerCase()}function Ml(t){return Pu(t).toUpperCase()}function Tl(t,e,n){if(t=Pu(t),t&&(n||e===it))return t.replace(De,"");if(!t||!(e=vi(e)))return t;var r=tt(t),i=tt(e),o=j(r,i),a=B(r,i)+1;return Ai(r,o,a).join("")}function Sl(t,e,n){if(t=Pu(t),t&&(n||e===it))return t.replace(Be,"");if(!t||!(e=vi(e)))return t;var r=tt(t),i=B(r,tt(e))+1;return Ai(r,0,i).join("")}function El(t,e,n){if(t=Pu(t),t&&(n||e===it))return t.replace(je,"");if(!t||!(e=vi(e)))return t;var r=tt(t),i=j(r,tt(e));return Ai(r,i).join("")}function Al(t,e){var n=At,r=kt;if(uu(e)){var i="separator"in e?e.separator:i;n="length"in e?Eu(e.length):n,r="omission"in e?vi(e.omission):r}t=Pu(t);var o=t.length;if(q(t)){var a=tt(t);o=a.length}if(n>=o)return t;var s=n-Q(r);if(s<1)return r;var u=a?Ai(a,0,s).join(""):t.slice(0,s);if(i===it)return u+r;if(a&&(s+=u.length-s),Ef(i)){if(t.slice(s).search(i)){var l,c=u;for(i.global||(i=fc(i.source,Pu(Ge.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var h=l.index;u=u.slice(0,h===it?s:h)}}else if(t.indexOf(vi(i),s)!=s){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r}function kl(t){return t=Pu(t),t&&Ee.test(t)?t.replace(Te,wr):t}function zl(t,e,n){return t=Pu(t),e=n?it:e,e===it?Z(t)?rt(t):b(t):t.match(e)||[]}function Cl(t){var e=null==t?0:t.length,n=So();return t=e?m(t,function(t){if("function"!=typeof t[1])throw new dc(ut);return[n(t[0]),t[1]]}):[],oi(function(n){for(var r=-1;++r<e;){var i=t[r];if(s(i[0],this,n))return s(i[1],this,n)}})}function Pl(t){return Un(Fn(t,ft))}function Ll(t){return function(){return t}}function Il(t,e){return null==t||t!==t?e:t}function Ol(t){return t}function Rl(t){return Fr("function"==typeof t?t:Fn(t,ft))}function Nl(t){return Wr(Fn(t,ft))}function Dl(t,e){return Gr(t,Fn(e,ft))}function jl(t,e,n){var r=Zu(e),i=ar(e,r);null!=n||uu(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=ar(e,Zu(e)));var o=!(uu(n)&&"chain"in n&&!n.chain),a=ou(t);return l(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Fi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,v([this.value()],arguments))})}),t}function Bl(){return sr._===this&&(sr._=Sc),this}function Fl(){}function Ul(t){return t=Eu(t),oi(function(e){return Yr(e,t)})}function Vl(t){return Fo(t)?k(ra(t)):Qr(t)}function ql(t){return function(e){return null==t?it:ur(t,e)}}function Zl(){return[]}function Wl(){return!1}function Gl(){return{}}function Hl(){return""}function Xl(){return!0}function Yl(t,e){if(t=Eu(t),t<1||t>Rt)return[];var n=jt,r=Kc(t,jt);e=So(e),t-=jt;for(var i=I(r,e);++n<t;)e(n);return i}function Kl(t){return bf(t)?m(t,ra):xu(t)?[t]:Fi(Rh(Pu(t)))}function Jl(t){var e=++bc;return Pu(t)+e}function $l(t){return t&&t.length?Xn(t,Ol,fr):it}function Ql(t,e){return t&&t.length?Xn(t,So(e,2),fr):it}function tc(t){return A(t,Ol)}function ec(t,e){return A(t,So(e,2))}function nc(t){return t&&t.length?Xn(t,Ol,qr):it}function rc(t,e){return t&&t.length?Xn(t,So(e,2),qr):it}function ic(t){return t&&t.length?L(t,Ol):0}function oc(t,e){return t&&t.length?L(t,So(e,2)):0}e=null==e?sr:Tr.defaults(sr.Object(),e,Tr.pick(sr,Yn));var ac=e.Array,sc=e.Date,uc=e.Error,lc=e.Function,cc=e.Math,hc=e.Object,fc=e.RegExp,pc=e.String,dc=e.TypeError,mc=ac.prototype,vc=lc.prototype,yc=hc.prototype,_c=e["__core-js_shared__"],gc=vc.toString,xc=yc.hasOwnProperty,bc=0,wc=function(){var t=/[^.]+$/.exec(_c&&_c.keys&&_c.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Mc=yc.toString,Tc=gc.call(hc),Sc=sr._,Ec=fc("^"+gc.call(xc).replace(Re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ac=cr?e.Buffer:it,kc=e.Symbol,zc=e.Uint8Array,Cc=Ac?Ac.allocUnsafe:it,Pc=H(hc.getPrototypeOf,hc),Lc=hc.create,Ic=yc.propertyIsEnumerable,Oc=mc.splice,Rc=kc?kc.isConcatSpreadable:it,Nc=kc?kc.iterator:it,Dc=kc?kc.toStringTag:it,jc=function(){try{var t=ko(hc,"defineProperty");return t({},"",{}),t}catch(t){}}(),Bc=e.clearTimeout!==sr.clearTimeout&&e.clearTimeout,Fc=sc&&sc.now!==sr.Date.now&&sc.now,Uc=e.setTimeout!==sr.setTimeout&&e.setTimeout,Vc=cc.ceil,qc=cc.floor,Zc=hc.getOwnPropertySymbols,Wc=Ac?Ac.isBuffer:it,Gc=e.isFinite,Hc=mc.join,Xc=H(hc.keys,hc),Yc=cc.max,Kc=cc.min,Jc=sc.now,$c=e.parseInt,Qc=cc.random,th=mc.reverse,eh=ko(e,"DataView"),nh=ko(e,"Map"),rh=ko(e,"Promise"),ih=ko(e,"Set"),oh=ko(e,"WeakMap"),ah=ko(hc,"create"),sh=oh&&new oh,uh={},lh=ia(eh),ch=ia(nh),hh=ia(rh),fh=ia(ih),ph=ia(oh),dh=kc?kc.prototype:it,mh=dh?dh.valueOf:it,vh=dh?dh.toString:it,yh=function(){function t(){}return function(e){if(!uu(e))return{};if(Lc)return Lc(e);t.prototype=e;var n=new t;return t.prototype=it,n}}();n.templateSettings={escape:ke,evaluate:ze,interpolate:Ce,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=yh(r.prototype),i.prototype.constructor=i,x.prototype=yh(r.prototype),x.prototype.constructor=x,nt.prototype.clear=qe,nt.prototype.delete=en,nt.prototype.get=nn,nt.prototype.has=rn,nt.prototype.set=on,an.prototype.clear=sn,an.prototype.delete=un,an.prototype.get=ln,an.prototype.has=cn,an.prototype.set=hn,fn.prototype.clear=pn,fn.prototype.delete=dn,fn.prototype.get=mn,fn.prototype.has=vn,fn.prototype.set=yn,_n.prototype.add=_n.prototype.push=gn,_n.prototype.has=xn,bn.prototype.clear=wn,bn.prototype.delete=Mn,bn.prototype.get=Tn,bn.prototype.has=Sn,bn.prototype.set=En;var _h=Gi(nr),gh=Gi(or,!0),xh=Hi(),bh=Hi(!0),wh=sh?function(t,e){return sh.set(t,e),t}:Ol,Mh=jc?function(t,e){return jc(t,"toString",{configurable:!0,enumerable:!1,value:Ll(e),writable:!0})}:Ol,Th=oi,Sh=Bc||function(t){return sr.clearTimeout(t)},Eh=ih&&1/Y(new ih([,-0]))[1]==Ot?function(t){return new ih(t)}:Fl,Ah=sh?function(t){return sh.get(t)}:Fl,kh=Zc?function(t){return null==t?[]:(t=hc(t),f(Zc(t),function(e){return Ic.call(t,e)}))}:Zl,zh=Zc?function(t){for(var e=[];t;)v(e,kh(t)),t=Pc(t);return e}:Zl,Ch=hr;(eh&&Ch(new eh(new ArrayBuffer(1)))!=he||nh&&Ch(new nh)!=Jt||rh&&Ch(rh.resolve())!=ee||ih&&Ch(new ih)!=ie||oh&&Ch(new oh)!=ue)&&(Ch=function(t){var e=hr(t),n=e==te?t.constructor:it,r=n?ia(n):"";if(r)switch(r){case lh:return he;case ch:return Jt;case hh:return ee;case fh:return ie;case ph:return ue}return e});var Ph=_c?ou:Wl,Lh=ea(wh),Ih=Uc||function(t,e){return sr.setTimeout(t,e)},Oh=ea(Mh),Rh=Ho(function(t){var e=[];return Ie.test(t)&&e.push(""),t.replace(Oe,function(t,n,r,i){e.push(r?i.replace(Ze,"$1"):n||t)}),e}),Nh=oi(function(t,e){return Js(t)?Gn(t,er(e,1,Js,!0)):[]}),Dh=oi(function(t,e){var n=Sa(e);return Js(n)&&(n=it),Js(t)?Gn(t,er(e,1,Js,!0),So(n,2)):[]}),jh=oi(function(t,e){var n=Sa(e);return Js(n)&&(n=it),Js(t)?Gn(t,er(e,1,Js,!0),it,n):[]}),Bh=oi(function(t){var e=m(t,Ti);return e.length&&e[0]===t[0]?Er(e):[]}),Fh=oi(function(t){var e=Sa(t),n=m(t,Ti);return e===Sa(n)?e=it:n.pop(),n.length&&n[0]===t[0]?Er(n,So(e,2)):[]}),Uh=oi(function(t){var e=Sa(t),n=m(t,Ti);return e="function"==typeof e?e:it,e&&n.pop(),n.length&&n[0]===t[0]?Er(n,it,e):[]}),Vh=oi(ka),qh=xo(function(t,e){var n=null==t?0:t.length,r=jn(t,e);return ei(t,m(e,function(t){return jo(t,n)?+t:t}).sort(Ni)),r}),Zh=oi(function(t){return yi(er(t,1,Js,!0))}),Wh=oi(function(t){var e=Sa(t);return Js(e)&&(e=it),yi(er(t,1,Js,!0),So(e,2))}),Gh=oi(function(t){var e=Sa(t);return e="function"==typeof e?e:it,yi(er(t,1,Js,!0),it,e)}),Hh=oi(function(t,e){return Js(t)?Gn(t,e):[]}),Xh=oi(function(t){return wi(f(t,Js))}),Yh=oi(function(t){var e=Sa(t);return Js(e)&&(e=it),wi(f(t,Js),So(e,2))}),Kh=oi(function(t){var e=Sa(t);return e="function"==typeof e?e:it,wi(f(t,Js),it,e)}),Jh=oi(Ka),$h=oi(function(t){var e=t.length,n=e>1?t[e-1]:it;return n="function"==typeof n?(t.pop(),n):it,Ja(t,n)}),Qh=xo(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return jn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof x&&jo(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:ns,args:[o],thisArg:it}),new i(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(it),t})):this.thru(o)}),tf=Zi(function(t,e,n){xc.call(t,n)?++t[n]:Dn(t,n,1)}),ef=Qi(ma),nf=Qi(va),rf=Zi(function(t,e,n){xc.call(t,n)?t[n].push(e):Dn(t,n,[e])}),of=oi(function(t,e,n){var r=-1,i="function"==typeof e,o=Ks(t)?ac(t.length):[];return _h(t,function(t){o[++r]=i?s(e,t,n):kr(t,e,n)}),o}),af=Zi(function(t,e,n){Dn(t,n,e)}),sf=Zi(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),uf=oi(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Bo(t,e[0],e[1])?e=[]:n>2&&Bo(e[0],e[1],e[2])&&(e=[e[0]]),Kr(t,er(e,1),[])}),lf=Fc||function(){return sr.Date.now()},cf=oi(function(t,e,n){var r=yt;if(n.length){var i=X(n,To(cf));r|=wt}return fo(t,r,e,n,i)}),hf=oi(function(t,e,n){var r=yt|_t;if(n.length){var i=X(n,To(hf));r|=wt}return fo(e,r,t,n,i)}),ff=oi(function(t,e){return Wn(t,1,e)}),pf=oi(function(t,e,n){return Wn(t,ku(e)||0,n)});Rs.Cache=fn;var df=Th(function(t,e){e=1==e.length&&bf(e[0])?m(e[0],R(So())):m(er(e,1),R(So()));var n=e.length;return oi(function(r){for(var i=-1,o=Kc(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return s(t,this,r)})}),mf=oi(function(t,e){var n=X(e,To(mf));return fo(t,wt,it,e,n)}),vf=oi(function(t,e){var n=X(e,To(vf));return fo(t,Mt,it,e,n)}),yf=xo(function(t,e){return fo(t,St,it,it,it,e)}),_f=uo(fr),gf=uo(function(t,e){return t>=e}),xf=zr(function(){return arguments}())?zr:function(t){return lu(t)&&xc.call(t,"callee")&&!Ic.call(t,"callee")},bf=ac.isArray,wf=pr?R(pr):Cr,Mf=Wc||Wl,Tf=dr?R(dr):Pr,Sf=mr?R(mr):Or,Ef=vr?R(vr):Dr,Af=yr?R(yr):jr,kf=_r?R(_r):Br,zf=uo(qr),Cf=uo(function(t,e){return t<=e}),Pf=Wi(function(t,e){if(Zo(e)||Ks(e))return void Ui(e,Zu(e),t);for(var n in e)xc.call(e,n)&&Ln(t,n,e[n])}),Lf=Wi(function(t,e){Ui(e,Wu(e),t)}),If=Wi(function(t,e,n,r){Ui(e,Wu(e),t,r)}),Of=Wi(function(t,e,n,r){Ui(e,Zu(e),t,r)}),Rf=xo(jn),Nf=oi(function(t){return t.push(it,po),s(If,it,t)}),Df=oi(function(t){return t.push(it,mo),s(Vf,it,t)}),jf=no(function(t,e,n){t[e]=n},Ll(Ol)),Bf=no(function(t,e,n){xc.call(t,e)?t[e].push(n):t[e]=[n]},So),Ff=oi(kr),Uf=Wi(function(t,e,n){Hr(t,e,n)}),Vf=Wi(function(t,e,n,r){Hr(t,e,n,r)}),qf=xo(function(t,e){var n={};if(null==t)return n;var r=!1;e=m(e,function(e){return e=Ei(e,t),r||(r=e.length>1),e}),Ui(t,wo(t),n),r&&(n=Fn(n,ft|pt|dt,vo));for(var i=e.length;i--;)_i(n,e[i]);return n}),Zf=xo(function(t,e){return null==t?{}:Jr(t,e)}),Wf=ho(Zu),Gf=ho(Wu),Hf=Ki(function(t,e,n){return e=e.toLowerCase(),t+(n?ul(e):e)}),Xf=Ki(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Yf=Ki(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Kf=Yi("toLowerCase"),Jf=Ki(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),$f=Ki(function(t,e,n){return t+(n?" ":"")+tp(e)}),Qf=Ki(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),tp=Yi("toUpperCase"),ep=oi(function(t,e){try{return s(t,it,e)}catch(t){return ru(t)?t:new uc(t)}}),np=xo(function(t,e){return l(e,function(e){e=ra(e),Dn(t,e,cf(t[e],t))}),t}),rp=to(),ip=to(!0),op=oi(function(t,e){return function(n){return kr(n,t,e)}}),ap=oi(function(t,e){return function(n){return kr(t,n,e)}}),sp=io(m),up=io(h),lp=io(g),cp=so(),hp=so(!0),fp=ro(function(t,e){return t+e},0),pp=co("ceil"),dp=ro(function(t,e){return t/e},1),mp=co("floor"),vp=ro(function(t,e){return t*e},1),yp=co("round"),_p=ro(function(t,e){return t-e},0);return n.after=ks,n.ary=zs,n.assign=Pf,n.assignIn=Lf,n.assignInWith=If,n.assignWith=Of,n.at=Rf,n.before=Cs,n.bind=cf,n.bindAll=np,n.bindKey=hf,n.castArray=qs,n.chain=ts,n.chunk=sa,n.compact=ua,n.concat=la,n.cond=Cl,n.conforms=Pl,n.constant=Ll,n.countBy=tf,n.create=Lu,n.curry=Ps,n.curryRight=Ls,n.debounce=Is,n.defaults=Nf,n.defaultsDeep=Df,n.defer=ff,n.delay=pf,n.difference=Nh,n.differenceBy=Dh,n.differenceWith=jh,n.drop=ca,n.dropRight=ha,n.dropRightWhile=fa,n.dropWhile=pa,n.fill=da,n.filter=hs,n.flatMap=fs,n.flatMapDeep=ps,n.flatMapDepth=ds,n.flatten=ya,n.flattenDeep=_a,n.flattenDepth=ga,n.flip=Os,n.flow=rp,n.flowRight=ip,n.fromPairs=xa,n.functions=Bu,n.functionsIn=Fu,n.groupBy=rf,n.initial=Ma,n.intersection=Bh,n.intersectionBy=Fh,n.intersectionWith=Uh,n.invert=jf,n.invertBy=Bf,n.invokeMap=of,n.iteratee=Rl,n.keyBy=af,n.keys=Zu,n.keysIn=Wu,n.map=_s,n.mapKeys=Gu,n.mapValues=Hu,n.matches=Nl,n.matchesProperty=Dl,n.memoize=Rs,n.merge=Uf,n.mergeWith=Vf,n.method=op,n.methodOf=ap,n.mixin=jl,n.negate=Ns,n.nthArg=Ul,n.omit=qf,n.omitBy=Xu,n.once=Ds,n.orderBy=gs,n.over=sp,n.overArgs=df,n.overEvery=up,n.overSome=lp,n.partial=mf,n.partialRight=vf,n.partition=sf,n.pick=Zf,n.pickBy=Yu,n.property=Vl,n.propertyOf=ql,n.pull=Vh,n.pullAll=ka,n.pullAllBy=za,n.pullAllWith=Ca,n.pullAt=qh,n.range=cp,n.rangeRight=hp,n.rearg=yf,n.reject=ws,n.remove=Pa,n.rest=js,n.reverse=La,n.sampleSize=Ts,n.set=Ju,n.setWith=$u,n.shuffle=Ss,n.slice=Ia,n.sortBy=uf,n.sortedUniq=Fa,n.sortedUniqBy=Ua,n.split=gl,n.spread=Bs,n.tail=Va,n.take=qa,n.takeRight=Za,n.takeRightWhile=Wa,n.takeWhile=Ga,n.tap=es,n.throttle=Fs,n.thru=ns,n.toArray=Tu,n.toPairs=Wf,n.toPairsIn=Gf,n.toPath=Kl,n.toPlainObject=zu,n.transform=Qu,n.unary=Us,n.union=Zh,n.unionBy=Wh,n.unionWith=Gh,n.uniq=Ha,n.uniqBy=Xa,n.uniqWith=Ya,n.unset=tl,n.unzip=Ka,n.unzipWith=Ja,n.update=el,n.updateWith=nl,n.values=rl,n.valuesIn=il,n.without=Hh,n.words=zl,n.wrap=Vs,n.xor=Xh,n.xorBy=Yh,n.xorWith=Kh,n.zip=Jh,n.zipObject=$a,n.zipObjectDeep=Qa,n.zipWith=$h,n.entries=Wf,n.entriesIn=Gf,n.extend=Lf,n.extendWith=If,jl(n,n),n.add=fp,n.attempt=ep,n.camelCase=Hf,n.capitalize=ul,n.ceil=pp,n.clamp=ol,n.clone=Zs,n.cloneDeep=Gs,n.cloneDeepWith=Hs,n.cloneWith=Ws,n.conformsTo=Xs,n.deburr=ll,n.defaultTo=Il,n.divide=dp,n.endsWith=cl,n.eq=Ys,n.escape=hl,n.escapeRegExp=fl,n.every=cs,n.find=ef,n.findIndex=ma,n.findKey=Iu,n.findLast=nf,n.findLastIndex=va,n.findLastKey=Ou,n.floor=mp,n.forEach=ms,n.forEachRight=vs,n.forIn=Ru,n.forInRight=Nu,n.forOwn=Du,n.forOwnRight=ju,n.get=Uu,n.gt=_f,n.gte=gf,n.has=Vu,n.hasIn=qu,n.head=ba,n.identity=Ol,n.includes=ys,n.indexOf=wa,n.inRange=al,n.invoke=Ff,n.isArguments=xf,n.isArray=bf,n.isArrayBuffer=wf,n.isArrayLike=Ks,n.isArrayLikeObject=Js,n.isBoolean=$s,n.isBuffer=Mf,n.isDate=Tf,n.isElement=Qs,n.isEmpty=tu,n.isEqual=eu,n.isEqualWith=nu,n.isError=ru,n.isFinite=iu,n.isFunction=ou,n.isInteger=au,n.isLength=su,n.isMap=Sf,n.isMatch=cu,n.isMatchWith=hu,n.isNaN=fu,n.isNative=pu,n.isNil=mu,n.isNull=du,n.isNumber=vu,n.isObject=uu,n.isObjectLike=lu,n.isPlainObject=yu,n.isRegExp=Ef,n.isSafeInteger=_u,n.isSet=Af,n.isString=gu,n.isSymbol=xu,n.isTypedArray=kf,n.isUndefined=bu,n.isWeakMap=wu,n.isWeakSet=Mu,n.join=Ta,n.kebabCase=Xf,n.last=Sa,n.lastIndexOf=Ea,n.lowerCase=Yf,n.lowerFirst=Kf,n.lt=zf,n.lte=Cf,n.max=$l,n.maxBy=Ql,n.mean=tc,n.meanBy=ec,n.min=nc,n.minBy=rc,n.stubArray=Zl,n.stubFalse=Wl,n.stubObject=Gl,n.stubString=Hl,n.stubTrue=Xl,n.multiply=vp,n.nth=Aa,n.noConflict=Bl,n.noop=Fl,n.now=lf,n.pad=pl,n.padEnd=dl,n.padStart=ml,n.parseInt=vl,n.random=sl,n.reduce=xs,n.reduceRight=bs,n.repeat=yl,n.replace=_l,n.result=Ku,n.round=yp,n.runInContext=t,n.sample=Ms,n.size=Es,n.snakeCase=Jf,n.some=As,n.sortedIndex=Oa,n.sortedIndexBy=Ra,n.sortedIndexOf=Na,n.sortedLastIndex=Da,n.sortedLastIndexBy=ja,n.sortedLastIndexOf=Ba,n.startCase=$f,n.startsWith=xl,n.subtract=_p,n.sum=ic,n.sumBy=oc,n.template=bl,n.times=Yl,n.toFinite=Su,n.toInteger=Eu,n.toLength=Au,n.toLower=wl,n.toNumber=ku,n.toSafeInteger=Cu,n.toString=Pu,n.toUpper=Ml,n.trim=Tl,n.trimEnd=Sl,n.trimStart=El,n.truncate=Al,n.unescape=kl,n.uniqueId=Jl,n.upperCase=Qf,n.upperFirst=tp,n.each=ms,n.eachRight=vs,n.first=ba,jl(n,function(){var t={};return nr(n,function(e,r){xc.call(n.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),n.VERSION=ot,l(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),l(["drop","take"],function(t,e){x.prototype[t]=function(n){n=n===it?1:Yc(Eu(n),0);var r=this.__filtered__&&!e?new x(this):this.clone();return r.__filtered__?r.__takeCount__=Kc(n,r.__takeCount__):r.__views__.push({size:Kc(n,jt),type:t+(r.__dir__<0?"Right":"")}),r},x.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),l(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==Pt||n==It;x.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:So(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),l(["head","last"],function(t,e){var n="take"+(e?"Right":"");x.prototype[t]=function(){return this[n](1).value()[0]}}),l(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");x.prototype[t]=function(){return this.__filtered__?new x(this):this[n](1)}}),x.prototype.compact=function(){return this.filter(Ol)},x.prototype.find=function(t){return this.filter(t).head()},x.prototype.findLast=function(t){return this.reverse().find(t)},x.prototype.invokeMap=oi(function(t,e){return"function"==typeof t?new x(this):this.map(function(n){return kr(n,t,e)})}),x.prototype.reject=function(t){return this.filter(Ns(So(t)))},x.prototype.slice=function(t,e){t=Eu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new x(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==it&&(e=Eu(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},x.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},x.prototype.toArray=function(){return this.take(jt)},nr(x.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),a=n[o?"take"+("last"==e?"Right":""):e],s=o||/^find/.test(e);a&&(n.prototype[e]=function(){var e=this.__wrapped__,u=o?[1]:arguments,l=e instanceof x,c=u[0],h=l||bf(e),f=function(t){var e=a.apply(n,v([t],u));return o&&p?e[0]:e};h&&r&&"function"==typeof c&&1!=c.length&&(l=h=!1);var p=this.__chain__,d=!!this.__actions__.length,m=s&&!p,y=l&&!d;if(!s&&h){e=y?e:new x(this);var _=t.apply(e,u);return _.__actions__.push({func:ns,args:[f],thisArg:it}),new i(_,p)}return m&&y?t.apply(this,u):(_=this.thru(f),m?o?_.value()[0]:_.value():_)})}),l(["pop","push","shift","sort","splice","unshift"],function(t){var e=mc[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var n=this.value();return e.apply(bf(n)?n:[],t)}return this[r](function(n){return e.apply(bf(n)?n:[],t)})}}),nr(x.prototype,function(t,e){var r=n[e];if(r){var i=r.name+"",o=uh[i]||(uh[i]=[]);o.push({name:e,func:r})}}),uh[eo(it,_t).name]=[{name:"wrapper",func:it}],x.prototype.clone=z,x.prototype.reverse=J,x.prototype.value=et,n.prototype.at=Qh,n.prototype.chain=rs,n.prototype.commit=is,n.prototype.next=os,n.prototype.plant=ss,n.prototype.reverse=us,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=ls,n.prototype.first=n.prototype.head,Nc&&(n.prototype[Nc]=as),n},Tr=Mr();sr._=Tr,r=function(){return Tr}.call(e,n,e,i),!(r!==it&&(i.exports=r))}).call(this)}).call(e,function(){return this}(),n(26)(t))},function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(t){return function(e,n){return Ml(t(e),n)}}function n(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Bl?i*=10:o>=Fl?i*=5:o>=Ul&&(i*=2),e<t?-i:i}function r(t){return t.length}function i(){}function o(t,e){var n=new i;if(t instanceof i)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,o=-1,a=t.length;if(null==e)for(;++o<a;)n.set(o,t[o]);else for(;++o<a;)n.set(e(r=t[o],o,t),r)}else if(t)for(var s in t)n.set(s,t[s]);return n}function a(){return{}}function s(t,e,n){t[e]=n}function u(){return o()}function l(t,e,n){t.set(e,n)}function c(){}function h(t,e){var n=new c;if(t instanceof c)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}function f(t){return+t}function p(t){return t*t}function d(t){return t*(2-t)}function m(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function v(t){return t*t*t}function y(t){return--t*t*t+1}function _(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function g(t){return 1-Math.cos(t*Mc)}function x(t){return Math.sin(t*Mc);
}function b(t){return(1-Math.cos(wc*t))/2}function w(t){return Math.pow(2,10*t-10)}function M(t){return 1-Math.pow(2,-10*t)}function T(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function S(t){return 1-Math.sqrt(1-t*t)}function E(t){return Math.sqrt(1- --t*t)}function A(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function k(t){return 1-z(1-t)}function z(t){return(t=+t)<Tc?Ic*t*t:t<Ec?Ic*(t-=Sc)*t+Ac:t<zc?Ic*(t-=kc)*t+Cc:Ic*(t-=Pc)*t+Lc}function C(t){return((t*=2)<=1?1-z(1-t):z(t-1)+1)/2}function P(t,e){return t[0]-e[0]||t[1]-e[1]}function L(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;++i){for(;r>1&&Gc(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function I(){this._x0=this._y0=this._x1=this._y1=null,this._=[]}function O(){return new I}function R(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,l,c,h,f,p=t._root,d={data:r},m=t._x0,v=t._y0,y=t._x1,_=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((l=e>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(v+_)/2))?v=a:_=a,i=p,!(p=p[h=c<<1|l]))return i[h]=d,t;if(s=+t._x.call(null,p.data),u=+t._y.call(null,p.data),e===s&&n===u)return d.next=p,i?i[h]=d:t._root=d,t;do i=i?i[h]=new Array(4):t._root=new Array(4),(l=e>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(v+_)/2))?v=a:_=a;while((h=c<<1|l)===(f=(u>=a)<<1|s>=o));return i[f]=p,i[h]=d,t}function N(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,l=1/0,c=-(1/0),h=-(1/0);for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>h&&(h=i));for(c<u&&(u=this._x0,c=this._x1),h<l&&(l=this._y0,h=this._y1),this.cover(u,l).cover(c,h),n=0;n<o;++n)R(this,a[n],s[n],t[n]);return this}function D(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function j(t){return t[0]}function B(t){return t[1]}function F(t,e,n){var r=new U(null==e?j:e,null==n?B:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function U(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function V(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}function q(t){if(!(t>=1))throw new Error;this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function Z(t){if(!t._start)try{W(t)}catch(e){if(t._tasks[t._ended+t._active-1])H(t,e);else if(!t._data)throw e}}function W(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],r=n.length-1,i=n[r];n[r]=G(t,e),--t._waiting,++t._active,n=i.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||mh)}}function G(t,e){return function(n,r){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=n?H(t,n):(t._data[e]=r,t._waiting?Z(t):X(t))))}}function H(t,e){var n,r=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--r>=0;)if((n=t._tasks[r])&&(t._tasks[r]=null,n.abort))try{n.abort()}catch(t){}t._active=NaN,X(t)}function X(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function Y(t){return new q(arguments.length?+t:1/0)}function K(t){return t.innerRadius}function J(t){return t.outerRadius}function $(t){return t.startAngle}function Q(t){return t.endAngle}function tt(t){return t&&t.padAngle}function et(t){return t>=1?gh:t<=-1?-gh:Math.asin(t)}function nt(t,e,n,r,i,o,a,s){var u=n-t,l=r-e,c=a-i,h=s-o,f=(c*(e-o)-h*(t-i))/(h*u-c*l);return[t+f*u,e+f*l]}function rt(t,e,n,r,i,o,a){var s=t-n,u=e-r,l=(a?o:-o)/Math.sqrt(s*s+u*u),c=l*u,h=-l*s,f=t+c,p=e+h,d=n+c,m=r+h,v=(f+d)/2,y=(p+m)/2,_=d-f,g=m-p,x=_*_+g*g,b=i-o,w=f*m-d*p,M=(g<0?-1:1)*Math.sqrt(Math.max(0,b*b*x-w*w)),T=(w*g-_*M)/x,S=(-w*_-g*M)/x,E=(w*g+_*M)/x,A=(-w*_+g*M)/x,k=T-v,z=S-y,C=E-v,P=A-y;return k*k+z*z>C*C+P*P&&(T=E,S=A),{cx:T,cy:S,x01:-c,y01:-h,x11:T*(i/b-1),y11:S*(i/b-1)}}function it(t){this._context=t}function ot(t){return t[0]}function at(t){return t[1]}function st(t){this._curve=t}function ut(t){function e(e){return new st(t(e))}return e._curve=t,e}function lt(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(ut(t)):e()._curve},t}function ct(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ht(t){this._context=t}function ft(t){this._context=t}function pt(t){this._context=t}function dt(t,e){this._basis=new ht(t),this._beta=e}function mt(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function vt(t,e){this._context=t,this._k=(1-e)/6}function yt(t,e){this._context=t,this._k=(1-e)/6}function _t(t,e){this._context=t,this._k=(1-e)/6}function gt(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>yh){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>yh){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function xt(t,e){this._context=t,this._alpha=e}function bt(t,e){this._context=t,this._alpha=e}function wt(t,e){this._context=t,this._alpha=e}function Mt(t){this._context=t}function Tt(t){return t<0?-1:1}function St(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Tt(o)+Tt(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Et(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function At(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function kt(t){this._context=t}function zt(t){this._context=new Ct(t)}function Ct(t){this._context=t}function Pt(t){return new kt(t)}function Lt(t){return new zt(t)}function It(t){this._context=t}function Ot(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function Rt(t,e){this._context=t,this._t=e}function Nt(t){return new Rt(t,0)}function Dt(t){return new Rt(t,1)}function jt(t,e){return t[e]}function Bt(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function Ft(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ut(){}function Vt(t){var e;return t=(t+"").trim().toLowerCase(),(e=Ef.exec(t))?(e=parseInt(e[1],16),new Ht(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=Af.exec(t))?qt(parseInt(e[1],16)):(e=kf.exec(t))?new Ht(e[1],e[2],e[3],1):(e=zf.exec(t))?new Ht(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Cf.exec(t))?Zt(e[1],e[2],e[3],e[4]):(e=Pf.exec(t))?Zt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Lf.exec(t))?Xt(e[1],e[2]/100,e[3]/100,1):(e=If.exec(t))?Xt(e[1],e[2]/100,e[3]/100,e[4]):Of.hasOwnProperty(t)?qt(Of[t]):"transparent"===t?new Ht(NaN,NaN,NaN,0):null}function qt(t){return new Ht(t>>16&255,t>>8&255,255&t,1)}function Zt(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ht(t,e,n,r)}function Wt(t){return t instanceof Ut||(t=Vt(t)),t?(t=t.rgb(),new Ht(t.r,t.g,t.b,t.opacity)):new Ht}function Gt(t,e,n,r){return 1===arguments.length?Wt(t):new Ht(t,e,n,null==r?1:r)}function Ht(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Xt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Jt(t,e,n,r)}function Yt(t){if(t instanceof Jt)return new Jt(t.h,t.s,t.l,t.opacity);if(t instanceof Ut||(t=Vt(t)),!t)return new Jt;if(t instanceof Jt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Jt(a,s,u,t.opacity)}function Kt(t,e,n,r){return 1===arguments.length?Yt(t):new Jt(t,e,n,null==r?1:r)}function Jt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function $t(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Qt(t){if(t instanceof ee)return new ee(t.l,t.a,t.b,t.opacity);if(t instanceof ue){var e=t.h*Rf;return new ee(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Ht||(t=Wt(t));var n=oe(t.r),r=oe(t.g),i=oe(t.b),o=ne((.4124564*n+.3575761*r+.1804375*i)/jf),a=ne((.2126729*n+.7151522*r+.072175*i)/Bf),s=ne((.0193339*n+.119192*r+.9503041*i)/Ff);return new ee(116*a-16,500*(o-a),200*(a-s),t.opacity)}function te(t,e,n,r){return 1===arguments.length?Qt(t):new ee(t,e,n,null==r?1:r)}function ee(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function ne(t){return t>Zf?Math.pow(t,1/3):t/qf+Uf}function re(t){return t>Vf?t*t*t:qf*(t-Uf)}function ie(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function oe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ae(t){if(t instanceof ue)return new ue(t.h,t.c,t.l,t.opacity);t instanceof ee||(t=Qt(t));var e=Math.atan2(t.b,t.a)*Nf;return new ue(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function se(t,e,n,r){return 1===arguments.length?ae(t):new ue(t,e,n,null==r?1:r)}function ue(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function le(t){if(t instanceof he)return new he(t.h,t.s,t.l,t.opacity);t instanceof Ht||(t=Wt(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=($f*r+Kf*e-Jf*n)/($f+Kf-Jf),o=r-i,a=(Yf*(n-i)-Hf*o)/Xf,s=Math.sqrt(a*a+o*o)/(Yf*i*(1-i)),u=s?Math.atan2(a,o)*Nf-120:NaN;return new he(u<0?u+360:u,s,i,t.opacity)}function ce(t,e,n,r){return 1===arguments.length?le(t):new he(t,e,n,null==r?1:r)}function he(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function fe(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function pe(t,e){return function(n){return t+n*e}}function de(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function me(t,e){var n=e-t;return n?pe(t,n>180||n<-180?n-360*Math.round(n/360):n):op(isNaN(t)?e:t)}function ve(t){return 1===(t=+t)?ye:function(e,n){return n-e?de(e,n,t):op(isNaN(e)?n:e)}}function ye(t,e){var n=e-t;return n?pe(t,n):op(isNaN(t)?e:t)}function _e(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Gt(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}function ge(t){return function(){return t}}function xe(t){return function(e){return t(e)+""}}function be(t){return"none"===t?gp:(Qf||(Qf=document.createElement("DIV"),tp=document.documentElement,ep=document.defaultView),Qf.style.transform=t,t=ep.getComputedStyle(tp.appendChild(Qf),null).getPropertyValue("transform"),tp.removeChild(Qf),t=t.slice(7,-1).split(","),xp(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function we(t){return null==t?gp:(np||(np=document.createElementNS("http://www.w3.org/2000/svg","g")),np.setAttribute("transform",t),(t=np.transform.baseVal.consolidate())?(t=t.matrix,xp(t.a,t.b,t.c,t.d,t.e,t.f)):gp)}function Me(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:hp(t,i)},{i:u-2,x:hp(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}function a(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:hp(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function s(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:hp(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function u(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:hp(t,n)},{i:s-2,x:hp(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,i),a(e.rotate,n.rotate,r,i),s(e.skewX,n.skewX,r,i),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}function Te(t){return((t=Math.exp(t))+1/t)/2}function Se(t){return((t=Math.exp(t))-1/t)/2}function Ee(t){return((t=Math.exp(2*t))-1)/(t+1)}function Ae(t){return function(e,n){var r=t((e=Kt(e)).h,(n=Kt(n)).h),i=ye(e.s,n.s),o=ye(e.l,n.l),a=ye(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}function ke(t,e){var n=ye((t=te(t)).l,(e=te(e)).l),r=ye(t.a,e.a),i=ye(t.b,e.b),o=ye(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function ze(t){return function(e,n){var r=t((e=se(e)).h,(n=se(n)).h),i=ye(e.c,n.c),o=ye(e.l,n.l),a=ye(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}function Ce(t){return function e(n){function r(e,r){var i=t((e=ce(e)).h,(r=ce(r)).h),o=ye(e.s,r.s),a=ye(e.l,r.l),s=ye(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}function Pe(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new Le(r)}function Le(t){this._=t}function Ie(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function Oe(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Re(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Rp,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}function Ne(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function De(t,e){var n=Ne(t);return function(r,i){return e(n(r),i,t)}}function je(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function Be(t){return function(e,n){t(null==e?n:null)}}function Fe(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Ue(t,e){return function(n){return t(n.responseText,e)}}function Ve(){return ld||(fd(qe),ld=hd.now()+cd)}function qe(){ld=0}function Ze(){this._call=this._time=this._next=null}function We(t,e,n){var r=new Ze;return r.restart(t,e,n),r}function Ge(){Ve(),++id;for(var t,e=Np;e;)(t=ld-e._time)>=0&&e._call.call(null,t),e=e._next;--id}function He(){ld=(ud=hd.now())+cd,id=od=0;try{Ge()}finally{id=0,Ye(),ld=0}}function Xe(){var t=hd.now(),e=t-ud;e>sd&&(cd-=e,ud=t)}function Ye(){for(var t,e,n=Np,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Np=e);Dp=t,Ke(r)}function Ke(t){if(!id){od&&(od=clearTimeout(od));var e=t-ld;e>24?(t<1/0&&(od=setTimeout(He,e)),ad&&(ad=clearInterval(ad))):(ad||(ad=setInterval(Xe,sd)),id=1,fd(He))}}function Je(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;do a.push(new Date(+n));while(e(n,o),t(n),n<r);return a},i.filter=function(n){return Je(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return md.setTime(+e),vd.setTime(+r),t(md),t(vd),Math.floor(n(md,vd))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t===0}:function(e){return i.count(0,e)%t===0}):i:null}),i}function $e(t){return Je(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*xd)/Md})}function Qe(t){return Je(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Md})}function tn(t){if(!(e=km.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",o=e[4]||"",a=!!e[5],s=e[6]&&+e[6],u=!!e[7],l=e[8]&&+e[8].slice(1),c=e[9]||"";"n"===c?(u=!0,c="g"):Am[c]||(c=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=s,this.comma=u,this.precision=l,this.type=c}function en(t){return t}function nn(e){return Cm=Lm(e),t.format=Cm.format,t.formatPrefix=Cm.formatPrefix,Cm}function rn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function on(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function an(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function sn(t){function e(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Dm[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function n(t,e){return function(n){var i=an(1900),o=r(i,t,n+="",0);if(o!=n.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"W"in i||"U"in i){"w"in i||(i.w="W"in i?1:0);var a="Z"in i?on(an(i.y)).getUTCDay():e(an(i.y)).getDay();i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7}return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,on(i)):e(i)}}function r(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(i=e.charCodeAt(a++),37===i){if(i=e.charAt(a++),o=V[i in Dm?e.charAt(a++):i],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function i(t,e,n){var r=C.exec(e.slice(n));return r?(t.p=P[r[0].toLowerCase()],n+r[0].length):-1}function o(t,e,n){var r=O.exec(e.slice(n));return r?(t.w=R[r[0].toLowerCase()],n+r[0].length):-1}function a(t,e,n){var r=L.exec(e.slice(n));return r?(t.w=I[r[0].toLowerCase()],n+r[0].length):-1}function s(t,e,n){var r=j.exec(e.slice(n));return r?(t.m=B[r[0].toLowerCase()],n+r[0].length):-1}function u(t,e,n){var r=N.exec(e.slice(n));return r?(t.m=D[r[0].toLowerCase()],n+r[0].length):-1}function l(t,e,n){return r(t,w,e,n)}function c(t,e,n){return r(t,M,e,n)}function h(t,e,n){return r(t,T,e,n)}function f(t){return A[t.getDay()]}function p(t){return E[t.getDay()]}function d(t){return z[t.getMonth()]}function m(t){return k[t.getMonth()]}function v(t){return S[+(t.getHours()>=12)]}function y(t){return A[t.getUTCDay()]}function _(t){return E[t.getUTCDay()]}function g(t){return z[t.getUTCMonth()]}function x(t){return k[t.getUTCMonth()]}function b(t){return S[+(t.getUTCHours()>=12)]}var w=t.dateTime,M=t.date,T=t.time,S=t.periods,E=t.days,A=t.shortDays,k=t.months,z=t.shortMonths,C=cn(S),P=hn(S),L=cn(E),I=hn(E),O=cn(A),R=hn(A),N=cn(k),D=hn(k),j=cn(z),B=hn(z),F={a:f,A:p,b:d,B:m,c:null,d:En,e:En,H:An,I:kn,j:zn,L:Cn,m:Pn,M:Ln,p:v,S:In,U:On,w:Rn,W:Nn,x:null,X:null,y:Dn,Y:jn,Z:Bn,"%":tr},U={a:y,A:_,b:g,B:x,c:null,d:Fn,e:Fn,H:Un,I:Vn,j:qn,L:Zn,m:Wn,M:Gn,p:b,S:Hn,U:Xn,w:Yn,W:Kn,x:null,X:null,y:Jn,Y:$n,Z:Qn,"%":tr},V={a:o,A:a,b:s,B:u,c:l,d:gn,e:gn,H:bn,I:bn,j:xn,L:Tn,m:_n,M:wn,p:i,S:Mn,U:pn,w:fn,W:dn,x:c,X:h,y:vn,Y:mn,Z:yn,"%":Sn};return F.x=e(M,F),F.X=e(T,F),F.c=e(w,F),U.x=e(M,U),U.X=e(T,U),U.c=e(w,U),{format:function(t){var n=e(t+="",F);return n.toString=function(){return t},n},parse:function(t){var e=n(t+="",rn);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",U);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t,on);return e.toString=function(){return t},e}}}function un(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function ln(t){return t.replace(Fm,"\\$&")}function cn(t){return new RegExp("^(?:"+t.map(ln).join("|")+")","i")}function hn(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function fn(t,e,n){var r=jm.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function pn(t,e,n){var r=jm.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function dn(t,e,n){var r=jm.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function mn(t,e,n){var r=jm.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function vn(t,e,n){var r=jm.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function yn(t,e,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _n(t,e,n){var r=jm.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function gn(t,e,n){var r=jm.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function xn(t,e,n){var r=jm.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function bn(t,e,n){var r=jm.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function wn(t,e,n){var r=jm.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Mn(t,e,n){var r=jm.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Tn(t,e,n){var r=jm.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Sn(t,e,n){var r=Bm.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function En(t,e){return un(t.getDate(),e,2)}function An(t,e){return un(t.getHours(),e,2)}function kn(t,e){return un(t.getHours()%12||12,e,2)}function zn(t,e){return un(1+Cd.count(Xd(t),t),e,3)}function Cn(t,e){return un(t.getMilliseconds(),e,3)}function Pn(t,e){return un(t.getMonth()+1,e,2)}function Ln(t,e){return un(t.getMinutes(),e,2)}function In(t,e){return un(t.getSeconds(),e,2)}function On(t,e){return un(Ld.count(Xd(t),t),e,2)}function Rn(t){return t.getDay()}function Nn(t,e){return un(Id.count(Xd(t),t),e,2)}function Dn(t,e){return un(t.getFullYear()%100,e,2)}function jn(t,e){return un(t.getFullYear()%1e4,e,4)}function Bn(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+un(e/60|0,"0",2)+un(e%60,"0",2)}function Fn(t,e){return un(t.getUTCDate(),e,2)}function Un(t,e){return un(t.getUTCHours(),e,2)}function Vn(t,e){return un(t.getUTCHours()%12||12,e,2)}function qn(t,e){return un(1+tm.count(_m(t),t),e,3)}function Zn(t,e){return un(t.getUTCMilliseconds(),e,3)}function Wn(t,e){return un(t.getUTCMonth()+1,e,2)}function Gn(t,e){return un(t.getUTCMinutes(),e,2)}function Hn(t,e){return un(t.getUTCSeconds(),e,2)}function Xn(t,e){return un(nm.count(_m(t),t),e,2)}function Yn(t){return t.getUTCDay()}function Kn(t,e){return un(rm.count(_m(t),t),e,2)}function Jn(t,e){return un(t.getUTCFullYear()%100,e,2)}function $n(t,e){return un(t.getUTCFullYear()%1e4,e,4)}function Qn(){return"+0000"}function tr(){return"%"}function er(e){return Im=sn(e),t.timeFormat=Im.format,t.timeParse=Im.parse,t.utcFormat=Im.utcFormat,t.utcParse=Im.utcParse,Im}function nr(t){return t.toISOString()}function rr(t){var e=new Date(t);return isNaN(e)?null:e}function ir(t){function e(e){var o=e+"",a=n.get(o);if(!a){if(i!==Hm)return i;n.set(o,a=r.push(e))}return t[(a-1)%t.length]}var n=o(),r=[],i=Hm;return t=null==t?[]:Gm.call(t),e.domain=function(t){if(!arguments.length)return r.slice();r=[],n=o();for(var i,a,s=-1,u=t.length;++s<u;)n.has(a=(i=t[s])+"")||n.set(a,r.push(i));return e},e.range=function(n){return arguments.length?(t=Gm.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(i=t,e):i},e.copy=function(){return ir().domain(r).range(t).unknown(i)},e}function or(){function t(){var t=i().length,r=a[1]<a[0],h=a[r-0],f=a[1-r];e=(f-h)/Math.max(1,t-u+2*l),s&&(e=Math.floor(e)),h+=(f-h-e*(t-u))*c,n=e*(1-u),s&&(h=Math.round(h),n=Math.round(n));var p=jl(t).map(function(t){return h+e*t});return o(r?p.reverse():p)}var e,n,r=ir().unknown(void 0),i=r.domain,o=r.range,a=[0,1],s=!1,u=0,l=0,c=.5;return delete r.unknown,r.domain=function(e){return arguments.length?(i(e),t()):i()},r.range=function(e){return arguments.length?(a=[+e[0],+e[1]],t()):a.slice()},r.rangeRound=function(e){return a=[+e[0],+e[1]],s=!0,t()},r.bandwidth=function(){return n},r.step=function(){return e},r.round=function(e){return arguments.length?(s=!!e,t()):s},r.padding=function(e){return arguments.length?(u=l=Math.max(0,Math.min(1,e)),t()):u},r.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),t()):u},r.paddingOuter=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),t()):l},r.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),t()):c},r.copy=function(){return or().domain(i()).range(a).round(s).paddingInner(u).paddingOuter(l).align(c)},t()}function ar(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ar(e())},t}function sr(){return ar(or().paddingInner(1))}function ur(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Xm(e)}function lr(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}function cr(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}function hr(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1];return o<i?(i=n(o,i),a=r(s,a)):(i=n(i,o),a=r(a,s)),function(t){return a(i(t))}}function fr(t,e,n,r){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)o[s]=n(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(e){var n=El(t,e,1,i)-1;return a[n](o[n](e))}}function pr(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function dr(t,e){function n(){return i=Math.min(s.length,u.length)>2?fr:hr,o=a=null,r}function r(e){return(o||(o=i(s,u,c?lr(t):t,l)))(+e)}var i,o,a,s=Km,u=Km,l=vp,c=!1;return r.invert=function(t){return(a||(a=i(u,s,ur,c?cr(e):e)))(+t)},r.domain=function(t){return arguments.length?(s=Wm.call(t,Ym),n()):s.slice()},r.range=function(t){return arguments.length?(u=Gm.call(t),n()):u.slice()},r.rangeRound=function(t){return u=Gm.call(t),l=yp,n()},r.clamp=function(t){return arguments.length?(c=!!t,n()):c},r.interpolate=function(t){return arguments.length?(l=t,n()):l},n()}function mr(t){var e=t.domain;return t.ticks=function(t){var n=e();return Vl(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return Jm(e(),t,n)},t.nice=function(r){var i=e(),o=i.length-1,a=null==r?10:r,s=i[0],u=i[o],l=n(s,u,a);return l&&(l=n(Math.floor(s/l)*l,Math.ceil(u/l)*l,a),i[0]=Math.floor(s/l)*l,i[o]=Math.ceil(u/l)*l,e(i)),t},t}function vr(){var t=dr(ur,hp);return t.copy=function(){return pr(t,vr())},mr(t)}function yr(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=Wm.call(n,Ym),t):e.slice()},t.copy=function(){return yr().domain(e)},mr(t)}function _r(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:Xm(e)}function gr(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function xr(t){return isFinite(t)?+("1e"+t):t<0?0:t}function br(t){return 10===t?xr:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function wr(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Mr(t){return function(e){return-t(-e)}}function Tr(){function e(){return o=wr(i),a=br(i),r()[0]<0&&(o=Mr(o),a=Mr(a)),n}var n=dr(_r,gr).domain([1,10]),r=n.domain,i=10,o=wr(10),a=br(10);return n.base=function(t){return arguments.length?(i=+t,e()):i},n.domain=function(t){return arguments.length?(r(t),e()):r()},n.ticks=function(t){var e,n=r(),s=n[0],u=n[n.length-1];(e=u<s)&&(f=s,s=u,u=f);var l,c,h,f=o(s),p=o(u),d=null==t?10:+t,m=[];if(!(i%1)&&p-f<d){if(f=Math.round(f)-1,p=Math.round(p)+1,s>0){for(;f<p;++f)for(c=1,l=a(f);c<i;++c)if(h=l*c,!(h<s)){if(h>u)break;m.push(h)}}else for(;f<p;++f)for(c=i-1,l=a(f);c>=1;--c)if(h=l*c,!(h<s)){if(h>u)break;m.push(h)}}else m=Vl(f,p,Math.min(p-f,d)).map(a);return e?m.reverse():m},n.tickFormat=function(e,r){if(null==r&&(r=10===i?".0e":","),"function"!=typeof r&&(r=t.format(r)),e===1/0)return r;null==e&&(e=10);var s=Math.max(1,i*e/n.ticks().length);return function(t){var e=t/a(Math.round(o(t)));return e*i<i-.5&&(e*=i),e<=s?r(t):""}},n.nice=function(){return r($m(r(),{floor:function(t){return a(Math.floor(o(t)))},ceil:function(t){return a(Math.ceil(o(t)))}}))},n.copy=function(){return pr(n,Tr().base(i))},n}function Sr(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function Er(){function t(t,e){return(e=Sr(e,n)-(t=Sr(t,n)))?function(r){return(Sr(r,n)-t)/e}:Xm(e)}function e(t,e){return e=Sr(e,n)-(t=Sr(t,n)),function(r){return Sr(t+e*r,1/n)}}var n=1,r=dr(t,e),i=r.domain;return r.exponent=function(t){return arguments.length?(n=+t,i(i())):n},r.copy=function(){return pr(r,Er().exponent(n))},mr(r)}function Ar(){return Er().exponent(.5)}function kr(){function t(){var t=0,o=Math.max(1,r.length);for(i=new Array(o-1);++t<o;)i[t-1]=Wl(n,t/o);return e}function e(t){if(!isNaN(t=+t))return r[El(i,t)]}var n=[],r=[],i=[];return e.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},e.domain=function(e){if(!arguments.length)return n.slice();n=[];for(var r,i=0,o=e.length;i<o;++i)r=e[i],null==r||isNaN(r=+r)||n.push(r);return n.sort(Ml),t()},e.range=function(e){return arguments.length?(r=Gm.call(e),t()):r.slice()},e.quantiles=function(){return i.slice()},e.copy=function(){return kr().domain(n).range(r)},e}function zr(){function t(t){if(t<=t)return a[El(o,t,0,i)]}function e(){var e=-1;for(o=new Array(i);++e<i;)o[e]=((e+1)*r-(e-i)*n)/(i+1);return t}var n=0,r=1,i=1,o=[.5],a=[0,1];return t.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],e()):[n,r]},t.range=function(t){return arguments.length?(i=(a=Gm.call(t)).length-1,e()):a.slice()},t.invertExtent=function(t){var e=a.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,o[0]]:e>=i?[o[i-1],r]:[o[e-1],o[e]]},t.copy=function(){return zr().domain([n,r]).range(a)},mr(t)}function Cr(){function t(t){if(t<=t)return n[El(e,t,0,r)]}var e=[.5],n=[0,1],r=1;return t.domain=function(i){return arguments.length?(e=Gm.call(i),r=Math.min(e.length,n.length-1),t):e.slice()},t.range=function(i){return arguments.length?(n=Gm.call(i),r=Math.min(e.length,n.length-1),t):n.slice()},t.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},t.copy=function(){return Cr().domain(e).range(n)},t}function Pr(t){return new Date(t)}function Lr(t){return t instanceof Date?+t:+new Date(+t)}function Ir(t,e,r,i,o,a,s,u,l){function c(n){return(s(n)<n?m:a(n)<n?v:o(n)<n?y:i(n)<n?_:e(n)<n?r(n)<n?g:x:t(n)<n?b:w)(n)}function h(e,r,i,o){if(null==e&&(e=10),"number"==typeof e){var a=Math.abs(i-r)/e,s=Tl(function(t){return t[2]}).right(M,a);s===M.length?(o=n(r/ov,i/ov,e),e=t):s?(s=M[a/M[s-1][2]<M[s][2]/a?s-1:s],o=s[1],e=s[0]):(o=n(r,i,e),e=u)}return null==o?e:e.every(o)}var f=dr(ur,hp),p=f.invert,d=f.domain,m=l(".%L"),v=l(":%S"),y=l("%I:%M"),_=l("%I %p"),g=l("%a %d"),x=l("%b %d"),b=l("%B"),w=l("%Y"),M=[[s,1,Qm],[s,5,5*Qm],[s,15,15*Qm],[s,30,30*Qm],[a,1,tv],[a,5,5*tv],[a,15,15*tv],[a,30,30*tv],[o,1,ev],[o,3,3*ev],[o,6,6*ev],[o,12,12*ev],[i,1,nv],[i,2,2*nv],[r,1,rv],[e,1,iv],[e,3,3*iv],[t,1,ov]];return f.invert=function(t){return new Date(p(t))},f.domain=function(t){return arguments.length?d(Wm.call(t,Lr)):d().map(Pr)},f.ticks=function(t,e){var n,r=d(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=h(t,i,o,e),n=n?n.range(i,o+1):[],a?n.reverse():n},f.tickFormat=function(t,e){return null==e?c:l(e)},f.nice=function(t,e){var n=d();return(t=h(t,n[0],n[n.length-1],e))?d($m(n,t)):f},f.copy=function(){return pr(f,Ir(t,e,r,i,o,a,s,u,l))},f}function Or(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))];
}}function Rr(t){function e(e){var o=(e-n)/(r-n);return t(i?Math.max(0,Math.min(1,o)):o)}var n=0,r=1,i=!1;return e.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.clamp=function(t){return arguments.length?(i=!!t,e):i},e.interpolator=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return Rr(t).domain([n,r]).clamp(i)},mr(e)}function Nr(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===wv&&e.documentElement.namespaceURI===wv?e.createElement(t):e.createElementNS(n,t)}}function Dr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function jr(){return new Br}function Br(){this._="@"+(++Ev).toString(36)}function Fr(t,e,n){return t=Ur(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Ur(e,n,r){return function(i){var o=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=o}}}function Vr(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function qr(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function Zr(t,e,n){var r=Pv.hasOwnProperty(t.type)?Fr:Ur;return function(i,o,a){var s,u=this.__on,l=r(e,o,a);if(u)for(var c=0,h=u.length;c<h;++c)if((s=u[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=e);this.addEventListener(t.type,l,n),s={type:t.type,name:t.name,value:e,listener:l,capture:n},u?u.push(s):this.__on=[s]}}function Wr(e,n,r,i){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=o}}function Gr(){}function Hr(){return[]}function Xr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Yr(t,e,n,r,i,o){for(var a,s=0,u=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new Xr(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function Kr(t,e,n,r,i,o,a){var s,u,l,c={},h=e.length,f=o.length,p=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(p[s]=l=Wv+a.call(u,u.__data__,s,e),l in c?i[s]=u:c[l]=u);for(s=0;s<f;++s)l=Wv+a.call(t,o[s],s,o),(u=c[l])?(r[s]=u,u.__data__=o[s],c[l]=null):n[s]=new Xr(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&c[p[s]]===u&&(i[s]=u)}function Jr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function $r(t){return function(){this.removeAttribute(t)}}function Qr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ti(t,e){return function(){this.setAttribute(t,e)}}function ei(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ni(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function ri(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ii(t){return function(){this.style.removeProperty(t)}}function oi(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ai(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function si(t){return function(){delete this[t]}}function ui(t,e){return function(){this[t]=e}}function li(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function ci(t){return t.trim().split(/^|\s+/)}function hi(t){return t.classList||new fi(t)}function fi(t){this._node=t,this._names=ci(t.getAttribute("class")||"")}function pi(t,e){for(var n=hi(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function di(t,e){for(var n=hi(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function mi(t){return function(){pi(this,t)}}function vi(t){return function(){di(this,t)}}function yi(t,e){return function(){(e.apply(this,arguments)?pi:di)(this,t)}}function _i(){this.textContent=""}function gi(t){return function(){this.textContent=t}}function xi(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function bi(){this.innerHTML=""}function wi(t){return function(){this.innerHTML=t}}function Mi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Ti(){this.nextSibling&&this.parentNode.appendChild(this)}function Si(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ei(){return null}function Ai(){var t=this.parentNode;t&&t.removeChild(this)}function ki(t,e,n){var r=iy(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function zi(t,e){return function(){return ki(this,t,e)}}function Ci(t,e){return function(){return ki(this,t,e.apply(this,arguments))}}function Pi(t,e){this._groups=t,this._parents=e}function Li(){return new Pi([[document.documentElement]],yy)}function Ii(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>Ty)throw new Error("too late");return n}function Oi(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>Ey)throw new Error("too late");return n}function Ri(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}function Ni(t,e,n){function r(t){n.state=Sy,n.timer.restart(i,n.delay,n.time),n.delay<=t&&i(t-n.delay)}function i(r){var l,c,h,f;if(n.state!==Sy)return a();for(l in u)if(f=u[l],f.name===n.name){if(f.state===Ay)return pd(i);f.state===ky?(f.state=Cy,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete u[l]):+l<e&&(f.state=Cy,f.timer.stop(),delete u[l])}if(pd(function(){n.state===Ay&&(n.state=ky,n.timer.restart(o,n.delay,n.time),o(r))}),n.state=Ey,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ey){for(n.state=Ay,s=new Array(h=n.tween.length),l=0,c=-1;l<h;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(s[++c]=f);s.length=c+1}}function o(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=zy,1),i=-1,o=s.length;++i<o;)s[i].call(null,r);n.state===zy&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=Cy,n.timer.stop(),delete u[e];for(var r in u)return;delete t.__transition}var s,u=t.__transition;u[e]=n,n.timer=We(r,0,n.time)}function Di(t,e){var n,r;return function(){var i=Oi(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function ji(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Oi(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function Bi(t,e,n){var r=t._id;return t.each(function(){var t=Oi(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Ri(t,r).value[e]}}function Fi(t){return function(){this.removeAttribute(t)}}function Ui(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Vi(t,e,n){var r,i;return function(){var o=this.getAttribute(t);return o===n?null:o===r?i:i=e(r=o,n)}}function qi(t,e,n){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===r?i:i=e(r=o,n)}}function Zi(t,e,n){var r,i,o;return function(){var a,s=n(this);return null==s?void this.removeAttribute(t):(a=this.getAttribute(t),a===s?null:a===r&&s===i?o:o=e(r=a,i=s))}}function Wi(t,e,n){var r,i,o;return function(){var a,s=n(this);return null==s?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),a===s?null:a===r&&s===i?o:o=e(r=a,i=s))}}function Gi(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}function Hi(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n}function Xi(t,e){return function(){Ii(this,t).delay=+e.apply(this,arguments)}}function Yi(t,e){return e=+e,function(){Ii(this,t).delay=e}}function Ki(t,e){return function(){Oi(this,t).duration=+e.apply(this,arguments)}}function Ji(t,e){return e=+e,function(){Oi(this,t).duration=e}}function $i(t,e){if("function"!=typeof e)throw new Error;return function(){Oi(this,t).ease=e}}function Qi(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}function to(t,e,n){var r,i,o=Qi(e)?Ii:Oi;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function eo(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function no(t,e){var n,r,i;return function(){var o=iy(this).getComputedStyle(this,null),a=o.getPropertyValue(t),s=(this.style.removeProperty(t),o.getPropertyValue(t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}function ro(t){return function(){this.style.removeProperty(t)}}function io(t,e,n){var r,i;return function(){var o=iy(this).getComputedStyle(this,null).getPropertyValue(t);return o===n?null:o===r?i:i=e(r=o,n)}}function oo(t,e,n){var r,i,o;return function(){var a=iy(this).getComputedStyle(this,null),s=a.getPropertyValue(t),u=n(this);return null==u&&(this.style.removeProperty(t),u=a.getPropertyValue(t)),s===u?null:s===r&&u===i?o:o=e(r=s,i=u)}}function ao(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}function so(t){return function(){this.textContent=t}}function uo(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function lo(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function co(t){return Li().transition(t)}function ho(){return++Qy}function fo(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return e_.time=Ve(),e_;return n}function po(t,e,n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"}function mo(t,e,n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"}function vo(t){var e=t.bandwidth()/2;return t.round()&&(e=Math.round(e)),function(n){return t(n)+e}}function yo(){return!this.__axis}function _o(t,e){function n(n){var l,c=null==i?e.ticks?e.ticks.apply(e,r):e.domain():i,h=null==o?e.tickFormat?e.tickFormat.apply(e,r):a_:o,f=Math.max(a,0)+u,p=t===s_||t===l_?po:mo,d=e.range(),m=d[0]+.5,v=d[d.length-1]+.5,y=(e.bandwidth?vo:a_)(e.copy()),_=n.selection?n.selection():n,g=_.selectAll(".domain").data([null]),x=_.selectAll(".tick").data(c,e).order(),b=x.exit(),w=x.enter().append("g").attr("class","tick"),M=x.select("line"),T=x.select("text"),S=t===s_||t===c_?-1:1,E=t===c_||t===u_?(l="x","y"):(l="y","x");g=g.merge(g.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),x=x.merge(w),M=M.merge(w.append("line").attr("stroke","#000").attr(l+"2",S*a).attr(E+"1",.5).attr(E+"2",.5)),T=T.merge(w.append("text").attr("fill","#000").attr(l,S*f).attr(E,.5).attr("dy",t===s_?"0em":t===l_?"0.71em":"0.32em")),n!==_&&(g=g.transition(n),x=x.transition(n),M=M.transition(n),T=T.transition(n),b=b.transition(n).attr("opacity",h_).attr("transform",function(t){return p(y,this.parentNode.__axis||y,t)}),w.attr("opacity",h_).attr("transform",function(t){return p(this.parentNode.__axis||y,y,t)})),b.remove(),g.attr("d",t===c_||t==u_?"M"+S*s+","+m+"H0.5V"+v+"H"+S*s:"M"+m+","+S*s+"V0.5H"+v+"V"+S*s),x.attr("opacity",1).attr("transform",function(t){return p(y,y,t)}),M.attr(l+"2",S*a),T.attr(l,S*f).text(h),_.filter(yo).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===u_?"start":t===c_?"end":"middle"),_.each(function(){this.__axis=y})}var r=[],i=null,o=null,a=6,s=6,u=3;return n.scale=function(t){return arguments.length?(e=t,n):e},n.ticks=function(){return r=o_.call(arguments),n},n.tickArguments=function(t){return arguments.length?(r=null==t?[]:o_.call(t),n):r.slice()},n.tickValues=function(t){return arguments.length?(i=null==t?null:o_.call(t),n):i&&i.slice()},n.tickFormat=function(t){return arguments.length?(o=t,n):o},n.tickSize=function(t){return arguments.length?(a=s=+t,n):a},n.tickSizeInner=function(t){return arguments.length?(a=+t,n):a},n.tickSizeOuter=function(t){return arguments.length?(s=+t,n):s},n.tickPadding=function(t){return arguments.length?(u=+t,n):u},n}function go(t){return _o(s_,t)}function xo(t){return _o(u_,t)}function bo(t){return _o(l_,t)}function wo(t){return _o(c_,t)}function Mo(t,e){return t.parent===e.parent?1:2}function To(t){return t.reduce(So,0)/t.length}function So(t,e){return t+e.x}function Eo(t){return 1+t.reduce(Ao,0)}function Ao(t,e){return Math.max(t,e.y)}function ko(t){for(var e;e=t.children;)t=e[0];return t}function zo(t){for(var e;e=t.children;)t=e[e.length-1];return t}function Co(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Po(t,e){var n,r,i,o,a,s=new No(t),u=+t.value&&(s.value=t.value),l=[s];for(null==e&&(e=Io);n=l.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)l.push(r=n.children[o]=new No(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Ro)}function Lo(){return Po(this).eachBefore(Oo)}function Io(t){return t.children}function Oo(t){t.data=t.data.data}function Ro(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function No(t){this.data=t,this.depth=this.height=0,this.parent=null}function Do(t){this._=t,this.next=null}function jo(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r-e.r;return i*i+1e-6>n*n+r*r}function Bo(t,e){var n,r,i,o=null,a=t.head;switch(e.length){case 1:n=Fo(e[0]);break;case 2:n=Uo(e[0],e[1]);break;case 3:n=Vo(e[0],e[1],e[2])}for(;a;)i=a._,r=a.next,n&&jo(n,i)?o=a:(o?(t.tail=o,o.next=null):t.head=t.tail=null,e.push(i),n=Bo(t,e),e.pop(),t.head?(a.next=t.head,t.head=a):(a.next=null,t.head=t.tail=a),o=t.tail,o.next=r),a=r;return t.tail=o,n}function Fo(t){return{x:t.x,y:t.y,r:t.r}}function Uo(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,l=a-r,c=s-i,h=Math.sqrt(u*u+l*l);return{x:(n+o+u/h*c)/2,y:(r+a+l/h*c)/2,r:(h+i+s)/2}}function Vo(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,l=n.x,c=n.y,h=n.r,f=2*(r-a),p=2*(i-s),d=2*(u-o),m=r*r+i*i-o*o-a*a-s*s+u*u,v=2*(r-l),y=2*(i-c),_=2*(h-o),g=r*r+i*i-o*o-l*l-c*c+h*h,x=v*p-f*y,b=(p*g-y*m)/x-r,w=(y*d-p*_)/x,M=(v*m-f*g)/x-i,T=(f*_-v*d)/x,S=w*w+T*T-1,E=2*(b*w+M*T+o),A=b*b+M*M-o*o,k=(-E-Math.sqrt(E*E-4*S*A))/(2*S);return{x:b+w*k+r,y:M+T*k+i,r:k}}function qo(t,e,n){var r=t.x,i=t.y,o=e.r+n.r,a=t.r+n.r,s=e.x-r,u=e.y-i,l=s*s+u*u;if(l){var c=.5+((a*=a)-(o*=o))/(2*l),h=Math.sqrt(Math.max(0,2*o*(a+l)-(a-=l)*a-o*o))/(2*l);n.x=r+c*s+h*u,n.y=i+c*u-h*s}else n.x=r+a,n.y=i}function Zo(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i>n*n+r*r}function Wo(t,e,n){var r=t.x-e,i=t.y-n;return r*r+i*i}function Go(t){this._=t,this.next=null,this.previous=null}function Ho(t){if(!(i=t.length))return 0;var e,n,r,i;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;qo(n,e,r=t[2]);var o,a,s,u,l,c,h,f=e.r*e.r,p=n.r*n.r,d=r.r*r.r,m=f+p+d,v=f*e.x+p*n.x+d*r.x,y=f*e.y+p*n.y+d*r.y;e=new Go(e),n=new Go(n),r=new Go(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){if(qo(e._,n._,r=t[s]),r=new Go(r),(l=e.previous)===(u=n.next)){if(Zo(u._,r._)){e=n,n=u,--s;continue t}}else{c=u._.r,h=l._.r;do if(c<=h){if(Zo(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}u=u.next,c+=u._.r}else{if(Zo(l._,r._)){e=l,e.next=n,n.previous=e,--s;continue t}l=l.previous,h+=l._.r}while(u!==l.next)}for(r.previous=e,r.next=n,e.next=n.previous=n=r,m+=d=r._.r*r._.r,v+=d*r._.x,y+=d*r._.y,f=Wo(e._,o=v/m,a=y/m);(r=r.next)!==n;)(d=Wo(r._,o,a))<f&&(e=r,f=d);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=T_(e),s=0;s<i;++s)e=t[s],e.x-=r.x,e.y-=r.y;return r.r}function Xo(t){return null==t?null:Yo(t)}function Yo(t){if("function"!=typeof t)throw new Error;return t}function Ko(){return 0}function Jo(t){return Math.sqrt(t.value)}function $o(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Qo(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=Ho(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function ta(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function ea(t){return t.id}function na(t){return t.parentId}function ra(t,e){return t.parent===e.parent?1:2}function ia(t){var e=t.children;return e?e[0]:t.t}function oa(t){var e=t.children;return e?e[e.length-1]:t.t}function aa(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function sa(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function ua(t,e,n){return t.a.parent===e.parent?t.a:n}function la(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function ca(t){for(var e,n,r,i,o,a=new la(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new la(r[i],i)),n.parent=e;return(a.parent=new la(null,0)).children=[a],a}function ha(t,e,n,r,i,o){for(var a,s,u,l,c,h,f,p,d,m,v,y,_=[],g=e.children,x=0,b=g.length,w=e.value;x<b;){for(l=i-n,c=o-r,f=p=h=g[x].value,v=Math.max(c/l,l/c)/(w*t),y=h*h*v,m=Math.max(p/y,y/f),u=x+1;u<b;++u){if(h+=s=g[u].value,s<f&&(f=s),s>p&&(p=s),y=h*h*v,d=Math.max(p/y,y/f),d>m){h-=s;break}m=d}_.push(a={value:h,dice:l<c,children:g.slice(x,u)}),a.dice?z_(a,n,r,i,w?r+=c*h/w:o):N_(a,n,r,w?n+=l*h/w:i,o),w-=h,x=u}return _}function fa(t){return t.x+t.vx}function pa(t){return t.y+t.vy}function da(t,e){return e}function ma(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function va(t){return t.x}function ya(t){return t.y}function _a(){t.event.stopImmediatePropagation()}function ga(t,e){var n=t.document.documentElement,r=_y(t).on("dragstart.drag",null);e&&(r.on("click.drag",tg,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function xa(t,e,n,r,i,o,a,s,u,l){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=u,this._=l}function ba(){return!t.event.button}function wa(){return this.parentNode}function Ma(e){return null==e?{x:t.event.x,y:t.event.y}:e}function Ta(t){return t[0]}function Sa(t){return t[1]}function Ea(){this._=null}function Aa(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ka(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function za(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ca(t){for(;t.L;)t=t.L;return t}function Pa(t,e,n,r){var i=[null,null],o=lg.push(i)-1;return i.left=t,i.right=e,n&&Ia(i,t,e,n),r&&Ia(i,e,t,r),sg[t.index].halfedges.push(o),sg[e.index].halfedges.push(o),i}function La(t,e,n){var r=[e,n];return r.left=t,r}function Ia(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Oa(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],l=a[1],c=s[0],h=s[1],f=0,p=1,d=c-u,m=h-l;if(o=e-u,d||!(o>0)){if(o/=d,d<0){if(o<f)return;o<p&&(p=o)}else if(d>0){if(o>p)return;o>f&&(f=o)}if(o=r-u,d||!(o<0)){if(o/=d,d<0){if(o>p)return;o>f&&(f=o)}else if(d>0){if(o<f)return;o<p&&(p=o)}if(o=n-l,m||!(o>0)){if(o/=m,m<0){if(o<f)return;o<p&&(p=o)}else if(m>0){if(o>p)return;o>f&&(f=o)}if(o=i-l,m||!(o<0)){if(o/=m,m<0){if(o>p)return;o>f&&(f=o)}else if(m>0){if(o<f)return;o<p&&(p=o)}return!(f>0||p<1)||(f>0&&(t[0]=[u+f*d,l+f*m]),p<1&&(t[1]=[u+p*d,l+p*m]),!0)}}}}}function Ra(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],l=t.left,c=t.right,h=l[0],f=l[1],p=c[0],d=c[1],m=(h+p)/2,v=(f+d)/2;if(d===f){if(m<e||m>=r)return;if(h>p){if(u){if(u[1]>=i)return}else u=[m,n];o=[m,i]}else{if(u){if(u[1]<n)return}else u=[m,i];o=[m,n]}}else if(a=(h-p)/(d-f),s=v-a*m,a<-1||a>1)if(h>p){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(f<d){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function Na(t,e,n,r){for(var i,o=lg.length;o--;)Ra(i=lg[o],t,e,n,r)&&Oa(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>fg||Math.abs(i[0][1]-i[1][1])>fg)||delete lg[o]}function Da(t){return sg[t.index]={site:t,halfedges:[]}}function ja(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Ba(t,e){return e[+(e.left!==t.site)]}function Fa(t,e){return e[+(e.left===t.site)]}function Ua(){for(var t,e,n,r,i=0,o=sg.length;i<o;++i)if((t=sg[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=ja(t,lg[e[n]]);for(a.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}function Va(t,e,n,r){var i,o,a,s,u,l,c,h,f,p,d,m,v=sg.length,y=!0;for(i=0;i<v;++i)if(o=sg[i]){for(a=o.site,u=o.halfedges,s=u.length;s--;)lg[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)p=Fa(o,lg[u[s]]),d=p[0],m=p[1],c=Ba(o,lg[u[++s%l]]),h=c[0],f=c[1],(Math.abs(d-h)>fg||Math.abs(m-f)>fg)&&(u.splice(s,0,lg.push(La(a,p,Math.abs(d-t)<fg&&r-m>fg?[t,Math.abs(h-t)<fg?f:r]:Math.abs(m-r)<fg&&n-d>fg?[Math.abs(f-r)<fg?h:n,r]:Math.abs(d-n)<fg&&m-e>fg?[n,Math.abs(h-n)<fg?f:e]:Math.abs(m-e)<fg&&d-t>fg?[Math.abs(f-e)<fg?h:t,e]:null))-1),++l);l&&(y=!1)}if(y){var _,g,x,b=1/0;for(i=0,y=null;i<v;++i)(o=sg[i])&&(a=o.site,_=a[0]-t,g=a[1]-e,x=_*_+g*g,x<b&&(b=x,y=o));if(y){var w=[t,e],M=[t,r],T=[n,r],S=[n,e];y.halfedges.push(lg.push(La(a=y.site,w,M))-1,lg.push(La(a,M,T))-1,lg.push(La(a,T,S))-1,lg.push(La(a,S,w))-1)}}for(i=0;i<v;++i)(o=sg[i])&&(o.halfedges.length||delete sg[i])}function qa(){Aa(this),this.x=this.y=this.arc=this.site=this.cy=null}function Za(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,l=r[1]-s,c=o[0]-a,h=o[1]-s,f=2*(u*h-l*c);if(!(f>=-pg)){var p=u*u+l*l,d=c*c+h*h,m=(h*p-l*d)/f,v=(u*d-c*p)/f,y=cg.pop()||new qa;y.arc=t,y.site=i,y.x=m+a,y.y=(y.cy=v+s)+Math.sqrt(m*m+v*v),t.circle=y;for(var _=null,g=ug._;g;)if(y.y<g.y||y.y===g.y&&y.x<=g.x){if(!g.L){_=g.P;break}g=g.L}else{if(!g.R){_=g;break}g=g.R}ug.insert(_,y),_||(og=y)}}}}function Wa(t){var e=t.circle;e&&(e.P||(og=e.N),ug.remove(e),cg.push(e),Aa(e),t.circle=null)}function Ga(){Aa(this),this.edge=this.site=this.circle=null}function Ha(t){var e=hg.pop()||new Ga;return e.site=t,e}function Xa(t){Wa(t),ag.remove(t),hg.push(t),Aa(t)}function Ya(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];Xa(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<fg&&Math.abs(r-u.circle.cy)<fg;)o=u.P,s.unshift(u),Xa(u),u=o;s.unshift(u),Wa(u);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<fg&&Math.abs(r-l.circle.cy)<fg;)a=l.N,s.push(l),Xa(l),l=a;s.push(l),Wa(l);var c,h=s.length;for(c=1;c<h;++c)l=s[c],u=s[c-1],Ia(l.edge,u.site,l.site,i);u=s[0],l=s[h-1],l.edge=Pa(u.site,l.site,null,i),Za(u),Za(l)}function Ka(t){for(var e,n,r,i,o=t[0],a=t[1],s=ag._;s;)if(r=Ja(s,a)-o,r>fg)s=s.L;else{if(i=o-$a(s,a),!(i>fg)){r>-fg?(e=s.P,n=s):i>-fg?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}Da(t);var u=Ha(t);if(ag.insert(e,u),e||n){if(e===n)return Wa(e),n=Ha(e.site),ag.insert(u,n),u.edge=n.edge=Pa(e.site,u.site),Za(e),void Za(n);if(!n)return void(u.edge=Pa(e.site,u.site));Wa(e),Wa(n);var l=e.site,c=l[0],h=l[1],f=t[0]-c,p=t[1]-h,d=n.site,m=d[0]-c,v=d[1]-h,y=2*(f*v-p*m),_=f*f+p*p,g=m*m+v*v,x=[(v*_-p*g)/y+c,(f*g-m*_)/y+h];Ia(n.edge,l,d,x),u.edge=Pa(l,t,null,x),n.edge=Pa(t,d,null,x),Za(e),Za(n)}}function Ja(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-(1/0);n=a.site;var s=n[0],u=n[1],l=u-e;if(!l)return s;var c=s-r,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+r:(r+s)/2}function $a(t,e){var n=t.N;if(n)return Ja(n,e);var r=t.site;return r[1]===e?r[0]:1/0}function Qa(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function ts(t,e){return e[1]-t[1]||e[0]-t[0]}function es(t,e){var n,r,i,o=t.sort(ts).pop();for(lg=[],sg=new Array(t.length),ag=new Ea,ug=new Ea;;)if(i=og,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Ka(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Ya(i.arc)}if(Ua(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],l=+e[1][1];Na(a,s,u,l),Va(a,s,u,l)}this.edges=lg,this.cells=sg,ag=ug=lg=sg=null}function ns(t,e,n){this.target=t,this.type=e,this.transform=n}function rs(t,e,n){this.k=t,this.x=e,this.y=n}function is(t){return t.__zoom||vg}function os(){t.event.stopImmediatePropagation()}function as(){return!t.event.button}function ss(){var t,e,n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,t=n.width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function us(){return this.__zoom||vg}function ls(){t.event.stopImmediatePropagation()}function cs(t){return{type:t}}function hs(){return!t.event.button}function fs(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function ps(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function ds(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function ms(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function vs(){return _s(Eg)}function ys(){return _s(Ag)}function _s(e){function n(t){var n=t.property("__brush",s).selectAll(".overlay").data([cs("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",zg.overlay).merge(n).each(function(){var t=ps(this).extent;_y(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([cs("selection")]).enter().append("rect").attr("class","selection").attr("cursor",zg.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(e.handles,function(t){return t.type});i.exit().remove(),i.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return zg[t.type]}),t.each(r).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",a)}function r(){var t=_y(this),e=ps(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-f/2:e[0][0]-f/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-f/2:e[0][1]-f/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+f:f}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+f:f})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function i(t,e){return t.__brush.emitter||new o(t,e)}function o(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function a(){function n(){var t=Nv(T);!N||w||M||(Math.abs(t[0]-j[0])>Math.abs(t[1]-j[1])?M=!0:w=!0),j=t,b=!0,bg(),o()}function o(){var t;switch(g=j[0]-D[0],x=j[1]-D[1],E){case Mg:case wg:A&&(g=Math.max(L-h,Math.min(O-m,g)),f=h+g,v=m+g),k&&(x=Math.max(I-p,Math.min(R-y,x)),d=p+x,_=y+x);break;case Tg:A<0?(g=Math.max(L-h,Math.min(O-h,g)),f=h+g,v=m):A>0&&(g=Math.max(L-m,Math.min(O-m,g)),f=h,v=m+g),k<0?(x=Math.max(I-p,Math.min(R-p,x)),d=p+x,_=y):k>0&&(x=Math.max(I-y,Math.min(R-y,x)),d=p,_=y+x);break;case Sg:A&&(f=Math.max(L,Math.min(O,h-g*A)),v=Math.max(L,Math.min(O,m+g*A))),k&&(d=Math.max(I,Math.min(R,p-x*k)),_=Math.max(I,Math.min(R,y+x*k)))}v<f&&(A*=-1,t=h,h=m,m=t,t=f,f=v,v=t,S in Cg&&U.attr("cursor",zg[S=Cg[S]])),_<d&&(k*=-1,t=p,p=y,y=t,t=d,d=_,_=t,S in Pg&&U.attr("cursor",zg[S=Pg[S]])),z.selection&&(P=z.selection),w&&(f=P[0][0],v=P[1][0]),M&&(d=P[0][1],_=P[1][1]),P[0][0]===f&&P[0][1]===d&&P[1][0]===v&&P[1][1]===_||(z.selection=[[f,d],[v,_]],r.call(T),B.brush())}function a(){if(ls(),t.event.touches){if(t.event.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500),F.on("touchmove.brush touchend.brush touchcancel.brush",null)}else ga(t.event.view,b),V.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);F.attr("pointer-events","all"),U.attr("cursor",zg.overlay),z.selection&&(P=z.selection),ds(P)&&(z.selection=null,r.call(T)),B.end()}function s(){switch(t.event.keyCode){case 16:N=A&&k;break;case 18:E===Tg&&(A&&(m=v-g*A,h=f+g*A),k&&(y=_-x*k,p=d+x*k),E=Sg,o());break;case 32:E!==Tg&&E!==Sg||(A<0?m=v-g:A>0&&(h=f-g),k<0?y=_-x:k>0&&(p=d-x),E=Mg,U.attr("cursor",zg.selection),o());break;default:return}bg()}function l(){switch(t.event.keyCode){case 16:N&&(w=M=N=!1,o());break;case 18:E===Sg&&(A<0?m=v:A>0&&(h=f),k<0?y=_:k>0&&(p=d),E=Tg,o());break;case 32:E===Mg&&(t.event.altKey?(A&&(m=v-g*A,h=f+g*A),k&&(y=_-x*k,p=d+x*k),E=Sg):(A<0?m=v:A>0&&(h=f),k<0?y=_:k>0&&(p=d),E=Tg),U.attr("cursor",zg[S]),o());break;default:return}bg()}if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return bg()}else if(u)return;if(c.apply(this,arguments)){var h,f,p,d,m,v,y,_,g,x,b,w,M,T=this,S=t.event.target.__data__.type,E="selection"===(t.event.metaKey?S="overlay":S)?wg:t.event.altKey?Sg:Tg,A=e===Ag?null:Lg[S],k=e===Eg?null:Ig[S],z=ps(T),C=z.extent,P=z.selection,L=C[0][0],I=C[0][1],O=C[1][0],R=C[1][1],N=A&&k&&t.event.shiftKey,D=Nv(T),j=D,B=i(T,arguments).beforestart();"overlay"===S?z.selection=P=[[h=e===Ag?L:D[0],p=e===Eg?I:D[1]],[m=e===Ag?O:h,y=e===Eg?R:p]]:(h=P[0][0],p=P[0][1],m=P[1][0],y=P[1][1]),f=h,d=p,v=m,_=y;var F=_y(T).attr("pointer-events","none"),U=F.selectAll(".overlay").attr("cursor",zg[S]);if(t.event.touches)F.on("touchmove.brush",n,!0).on("touchend.brush touchcancel.brush",a,!0);else{var V=_y(t.event.view).on("keydown.brush",s,!0).on("keyup.brush",l,!0).on("mousemove.brush",n,!0).on("mouseup.brush",a,!0);eg(t.event.view)}ls(),Ly(T),r.call(T),B.start()}}function s(){var t=this.__brush||{selection:null};return t.extent=l.apply(this,arguments),t.dim=e,t}var u,l=fs,c=hs,h=Pe(n,"start","brush","end"),f=6;return n.move=function(t,n){t.selection?t.on("start.brush",function(){i(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){i(this,arguments).end()}).tween("brush",function(){function t(t){a.selection=1===t&&ds(l)?null:c(t),r.call(o),s.brush()}var o=this,a=o.__brush,s=i(o,arguments),u=a.selection,l=e.input("function"==typeof n?n.apply(this,arguments):n,a.extent),c=vp(u,l);return u&&l?t:t(1)}):t.each(function(){var t=this,o=arguments,a=t.__brush,s=e.input("function"==typeof n?n.apply(t,o):n,a.extent),u=i(t,o).beforestart();Ly(t),a.selection=null==s||ds(s)?null:s,r.call(t),u.start().brush().end()})},o.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0===--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){Wr(new xg(n,t,e.output(this.state.selection)),h.apply,h,[t,this.that,this.args])}},n.extent=function(t){return arguments.length?(l="function"==typeof t?t:gg([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),n):l},n.filter=function(t){return arguments.length?(c="function"==typeof t?t:gg(!!t),n):c},n.handleSize=function(t){return arguments.length?(f=+t,n):f},n.on=function(){var t=h.on.apply(h,arguments);return t===h?n:t},n}function gs(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function xs(t){return t.source}function bs(t){return t.target}function ws(t){return t.radius}function Ms(t){return t.startAngle}function Ts(t){
return t.endAngle}function Ss(){this.reset()}function Es(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function As(t){return t>1?0:t<-1?Ex:Math.acos(t)}function ks(t){return t>1?Ax:t<-1?-Ax:Math.asin(t)}function zs(t){return(t=Fx(t/2))*t}function Cs(){}function Ps(t,e){t&&Wx.hasOwnProperty(t.type)&&Wx[t.type](t,e)}function Ls(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Is(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Ls(t[n],e,1);e.polygonEnd()}function Os(){Yx.point=Ns}function Rs(){Ds(Gg,Hg)}function Ns(t,e){Yx.point=Ds,Gg=t,Hg=e,t*=Px,e*=Px,Xg=t,Yg=Rx(e=e/2+kx),Kg=Fx(e)}function Ds(t,e){t*=Px,e*=Px,e=e/2+kx;var n=t-Xg,r=n>=0?1:-1,i=r*n,o=Rx(e),a=Fx(e),s=Kg*a,u=Yg*o+s*Rx(i),l=s*r*Fx(i);Hx.add(Ox(l,u)),Xg=t,Yg=o,Kg=a}function js(t){return[Ox(t[1],t[0]),ks(t[2])]}function Bs(t){var e=t[0],n=t[1],r=Rx(n);return[r*Rx(e),r*Fx(e),Fx(n)]}function Fs(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Us(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Vs(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function qs(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Zs(t){var e=Vx(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ws(t,e){ox.push(ax=[Jg=t,Qg=t]),e<$g&&($g=e),e>tx&&(tx=e)}function Gs(t,e){var n=Bs([t*Px,e*Px]);if(ix){var r=Us(ix,n),i=[r[1],-r[0],0],o=Us(i,r);Zs(o),o=js(o);var a,s=t-ex,u=s>0?1:-1,l=o[0]*Cx*u,c=Lx(s)>180;c^(u*ex<l&&l<u*t)?(a=o[1]*Cx,a>tx&&(tx=a)):(l=(l+360)%360-180,c^(u*ex<l&&l<u*t)?(a=-o[1]*Cx,a<$g&&($g=a)):(e<$g&&($g=e),e>tx&&(tx=e))),c?t<ex?$s(Jg,t)>$s(Jg,Qg)&&(Qg=t):$s(t,Qg)>$s(Jg,Qg)&&(Jg=t):Qg>=Jg?(t<Jg&&(Jg=t),t>Qg&&(Qg=t)):t>ex?$s(Jg,t)>$s(Jg,Qg)&&(Qg=t):$s(t,Qg)>$s(Jg,Qg)&&(Jg=t)}else Ws(t,e);ix=n,ex=t}function Hs(){$x.point=Gs}function Xs(){ax[0]=Jg,ax[1]=Qg,$x.point=Ws,ix=null}function Ys(t,e){if(ix){var n=t-ex;Jx.add(Lx(n)>180?n+(n>0?360:-360):n)}else nx=t,rx=e;Yx.point(t,e),Gs(t,e)}function Ks(){Yx.lineStart()}function Js(){Ys(nx,rx),Yx.lineEnd(),Lx(Jx)>Tx&&(Jg=-(Qg=180)),ax[0]=Jg,ax[1]=Qg,ix=null}function $s(t,e){return(e-=t)<0?e+360:e}function Qs(t,e){return t[0]-e[0]}function tu(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function eu(t,e){t*=Px,e*=Px;var n=Rx(e);nu(n*Rx(t),n*Fx(t),Fx(e))}function nu(t,e,n){++sx,lx+=(t-lx)/sx,cx+=(e-cx)/sx,hx+=(n-hx)/sx}function ru(){tb.point=iu}function iu(t,e){t*=Px,e*=Px;var n=Rx(e);xx=n*Rx(t),bx=n*Fx(t),wx=Fx(e),tb.point=ou,nu(xx,bx,wx)}function ou(t,e){t*=Px,e*=Px;var n=Rx(e),r=n*Rx(t),i=n*Fx(t),o=Fx(e),a=Ox(Vx((a=bx*o-wx*i)*a+(a=wx*r-xx*o)*a+(a=xx*i-bx*r)*a),xx*r+bx*i+wx*o);ux+=a,fx+=a*(xx+(xx=r)),px+=a*(bx+(bx=i)),dx+=a*(wx+(wx=o)),nu(xx,bx,wx)}function au(){tb.point=eu}function su(){tb.point=lu}function uu(){cu(_x,gx),tb.point=eu}function lu(t,e){_x=t,gx=e,t*=Px,e*=Px,tb.point=cu;var n=Rx(e);xx=n*Rx(t),bx=n*Fx(t),wx=Fx(e),nu(xx,bx,wx)}function cu(t,e){t*=Px,e*=Px;var n=Rx(e),r=n*Rx(t),i=n*Fx(t),o=Fx(e),a=bx*o-wx*i,s=wx*r-xx*o,u=xx*i-bx*r,l=Vx(a*a+s*s+u*u),c=xx*r+bx*i+wx*o,h=l&&-As(c)/l,f=Ox(l,c);mx+=h*a,vx+=h*s,yx+=h*u,ux+=f,fx+=f*(xx+(xx=r)),px+=f*(bx+(bx=i)),dx+=f*(wx+(wx=o)),nu(xx,bx,wx)}function hu(t,e){return[t>Ex?t-zx:t<-Ex?t+zx:t,e]}function fu(t,e,n){return(t%=zx)?e||n?rb(du(t),mu(e,n)):du(t):e||n?mu(e,n):hu}function pu(t){return function(e,n){return e+=t,[e>Ex?e-zx:e<-Ex?e+zx:e,n]}}function du(t){var e=pu(t);return e.invert=pu(-t),e}function mu(t,e){function n(t,e){var n=Rx(e),s=Rx(t)*n,u=Fx(t)*n,l=Fx(e),c=l*r+s*i;return[Ox(u*o-c*a,s*r-l*i),ks(c*o+u*a)]}var r=Rx(t),i=Fx(t),o=Rx(e),a=Fx(e);return n.invert=function(t,e){var n=Rx(e),s=Rx(t)*n,u=Fx(t)*n,l=Fx(e),c=l*o-u*a;return[Ox(u*o+l*a,s*r+c*i),ks(c*r-s*i)]},n}function vu(t,e,n,r,i,o){if(n){var a=Rx(e),s=Fx(e),u=r*n;null==i?(i=e+r*zx,o=e-u/2):(i=yu(a,i),o=yu(a,o),(r>0?i<o:i>o)&&(i+=r*zx));for(var l,c=i;r>0?c>o:c<o;c-=u)l=js([a,-s*Rx(c),-s*Fx(c)]),t.point(l[0],l[1])}}function yu(t,e){e=Bs(e),e[0]-=t,Zs(e);var n=As(-e[1]);return((-e[2]<0?-n:n)+zx-Tx)%zx}function _u(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function gu(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function xu(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,l){var c=0,h=0;if(null==i||(c=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0){do l.point(0===c||3===c?t:n,c>1?r:e);while((c=(c+s+4)%4)!==h)}else l.point(o[0],o[1])}function a(r,i){return Lx(r[0]-t)<Tx?i>0?0:3:Lx(r[0]-n)<Tx?i>0?2:1:Lx(r[1]-e)<Tx?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function u(t,e){i(t,e)&&E.point(t,e)}function l(){for(var e=0,n=0,i=v.length;n<i;++n)for(var o,a,s=v[n],u=1,l=s.length,c=s[0],h=c[0],f=c[1];u<l;++u)o=h,a=f,c=s[u],h=c[0],f=c[1],a<=r?f>r&&(h-o)*(r-a)>(f-a)*(t-o)&&++e:f<=r&&(h-o)*(r-a)<(f-a)*(t-o)&&--e;return e}function c(){E=A,m=[],v=[],S=!0}function h(){var t=l(),e=S&&t,n=(m=Jl(m)).length;(e||n)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),n&&xb(m,s,t,o,a),a.polygonEnd()),E=a,m=v=y=null}function f(){k.point=d,v&&v.push(y=[]),T=!0,M=!1,b=w=NaN}function p(){m&&(d(_,g),x&&M&&A.rejoin(),m.push(A.result())),k.point=u,M&&E.lineEnd()}function d(o,a){var s=i(o,a);if(v&&y.push([o,a]),T)_=o,g=a,x=s,T=!1,s&&(E.lineStart(),E.point(o,a));else if(s&&M)E.point(o,a);else{var u=[b=Math.max(wb,Math.min(bb,b)),w=Math.max(wb,Math.min(bb,w))],l=[o=Math.max(wb,Math.min(bb,o)),a=Math.max(wb,Math.min(bb,a))];_b(u,l,t,e,n,r)?(M||(E.lineStart(),E.point(u[0],u[1])),E.point(l[0],l[1]),s||E.lineEnd(),S=!1):s&&(E.lineStart(),E.point(o,a),S=!1)}b=o,w=a,M=s}var m,v,y,_,g,x,b,w,M,T,S,E=a,A=yb(),k={point:u,lineStart:f,lineEnd:p,polygonStart:c,polygonEnd:h};return k}}function bu(){Sb.point=Mu,Sb.lineEnd=wu}function wu(){Sb.point=Sb.lineEnd=Cs}function Mu(t,e){t*=Px,e*=Px,ib=t,ob=Fx(e),ab=Rx(e),Sb.point=Tu}function Tu(t,e){t*=Px,e*=Px;var n=Fx(e),r=Rx(e),i=Lx(t-ib),o=Rx(i),a=Fx(i),s=r*a,u=ab*n-ob*r*o,l=ob*n+ab*r*o;Tb.add(Ox(Vx(s*s+u*u),l)),ib=t,ob=n,ab=r}function Su(t,e,n){var r=jl(t,e-Tx,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function Eu(t,e,n){var r=jl(t,e-Tx,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function Au(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return jl(Nx(o/v)*v,i,v).map(f).concat(jl(Nx(l/y)*y,u,y).map(p)).concat(jl(Nx(r/d)*d,n,d).filter(function(t){return Lx(t%v)>Tx}).map(c)).concat(jl(Nx(s/m)*m,a,m).filter(function(t){return Lx(t%y)>Tx}).map(h))}var n,r,i,o,a,s,u,l,c,h,f,p,d=10,m=d,v=90,y=360,_=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(o).concat(p(u).slice(1),f(i).reverse().slice(1),p(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(o=+e[0][0],i=+e[1][0],l=+e[0][1],u=+e[1][1],o>i&&(e=o,o=i,i=e),l>u&&(e=l,l=u,u=e),t.precision(_)):[[o,l],[i,u]]},t.extentMinor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),t.precision(_)):[[r,s],[n,a]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(v=+e[0],y=+e[1],t):[v,y]},t.stepMinor=function(e){return arguments.length?(d=+e[0],m=+e[1],t):[d,m]},t.precision=function(e){return arguments.length?(_=+e,c=Su(s,a,90),h=Eu(r,n,_),f=Su(l,u,90),p=Eu(o,i,_),t):_},t.extentMajor([[-180,-90+Tx],[180,90-Tx]]).extentMinor([[-180,-80-Tx],[180,80+Tx]])}function ku(){return Au()()}function zu(){Ob.point=Cu}function Cu(t,e){Ob.point=Pu,sb=lb=t,ub=cb=e}function Pu(t,e){Ib.add(cb*t-lb*e),lb=t,cb=e}function Lu(){Pu(sb,ub)}function Iu(t,e){t<Rb&&(Rb=t),t>Db&&(Db=t),e<Nb&&(Nb=e),e>jb&&(jb=e)}function Ou(t,e){Fb+=t,Ub+=e,++Vb}function Ru(){Yb.point=Nu}function Nu(t,e){Yb.point=Du,Ou(pb=t,db=e)}function Du(t,e){var n=t-pb,r=e-db,i=Vx(n*n+r*r);qb+=i*(pb+t)/2,Zb+=i*(db+e)/2,Wb+=i,Ou(pb=t,db=e)}function ju(){Yb.point=Ou}function Bu(){Yb.point=Uu}function Fu(){Vu(hb,fb)}function Uu(t,e){Yb.point=Vu,Ou(hb=pb=t,fb=db=e)}function Vu(t,e){var n=t-pb,r=e-db,i=Vx(n*n+r*r);qb+=i*(pb+t)/2,Zb+=i*(db+e)/2,Wb+=i,i=db*t-pb*e,Gb+=i*(pb+t),Hb+=i*(db+e),Xb+=3*i,Ou(pb=t,db=e)}function qu(t){this._context=t}function Zu(){this._string=[]}function Wu(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Gu(t){return t.length>1}function Hu(t,e){return((t=t.x)[0]<0?t[1]-Ax-Tx:Ax-t[1])-((e=e.x)[0]<0?e[1]-Ax-Tx:Ax-e[1])}function Xu(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Ex:-Ex,u=Lx(o-n);Lx(u-Ex)<Tx?(t.point(n,r=(r+a)/2>0?Ax:-Ax),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Ex&&(Lx(n-i)<Tx&&(n-=i*Tx),Lx(o-s)<Tx&&(o-=s*Tx),r=Yu(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function Yu(t,e,n,r){var i,o,a=Fx(t-n);return Lx(a)>Tx?Ix((Fx(e)*(o=Rx(r))*Fx(n)-Fx(r)*(i=Rx(e))*Fx(t))/(i*o*a)):(e+r)/2}function Ku(t,e,n,r){var i;if(null==t)i=n*Ax,r.point(-Ex,i),r.point(0,i),r.point(Ex,i),r.point(Ex,0),r.point(Ex,-i),r.point(0,-i),r.point(-Ex,-i),r.point(-Ex,0),r.point(-Ex,i);else if(Lx(t[0]-e[0])>Tx){var o=t[0]<e[0]?Ex:-Ex;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function Ju(t){return function(e){var n=new $u;for(var r in t)n[r]=t[r];return n.stream=e,n}}function $u(){}function Qu(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Gx(n,t.stream(Bb));var a=Bb.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,l=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,l])}function tl(t,e,n){return Qu(t,[[0,0],e],n)}function el(t){return Ju({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function nl(t,e){function n(r,i,o,a,s,u,l,c,h,f,p,d,m,v){var y=l-r,_=c-i,g=y*y+_*_;if(g>4*e&&m--){var x=a+f,b=s+p,w=u+d,M=Vx(x*x+b*b+w*w),T=ks(w/=M),S=Lx(Lx(w)-1)<Tx||Lx(o-h)<Tx?(o+h)/2:Ox(b,x),E=t(S,T),A=E[0],k=E[1],z=A-r,C=k-i,P=_*z-y*C;(P*P/g>e||Lx((y*z+_*C)/g-.5)>.3||a*f+s*p+u*d<iw)&&(n(r,i,o,a,s,u,A,k,S,x/=M,b/=M,w,m,v),v.point(A,k),n(A,k,S,x,b,w,l,c,h,f,p,d,m,v))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){y=NaN,w.point=o,e.lineStart()}function o(r,i){var o=Bs([r,i]),a=t(r,i);n(y,_,v,g,x,b,y=a[0],_=a[1],v=r,g=o[0],x=o[1],b=o[2],rw,e),e.point(y,_)}function a(){w.point=r,e.lineEnd()}function s(){i(),w.point=u,w.lineEnd=l}function u(t,e){o(c=t,e),h=y,f=_,p=g,d=x,m=b,w.point=o}function l(){n(y,_,v,g,x,b,h,f,c,p,d,m,rw,e),w.lineEnd=a,a()}var c,h,f,p,d,m,v,y,_,g,x,b,w={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),w.lineStart=s},polygonEnd:function(){e.polygonEnd(),w.lineStart=i}};return w}}function rl(t){return il(function(){return t})()}function il(t){function e(t){return t=c(t[0]*Px,t[1]*Px),[t[0]*v+s,u-t[1]*v]}function n(t){return t=c.invert((t[0]-s)/v,(u-t[1])/v),t&&[t[0]*Cx,t[1]*Cx]}function r(t,e){return t=a(t,e),[t[0]*v+s,u-t[1]*v]}function i(){c=rb(l=fu(b,w,M),a);var t=a(g,x);return s=y-t[0]*v,u=_+t[1]*v,o()}function o(){return d=m=null,e}var a,s,u,l,c,h,f,p,d,m,v=150,y=480,_=250,g=0,x=0,b=0,w=0,M=0,T=null,S=tw,E=null,A=Pb,k=.5,z=ow(r,k);return e.stream=function(t){return d&&m===t?d:d=aw(S(l,z(A(m=t))))},e.clipAngle=function(t){return arguments.length?(S=+t?ew(T=t*Px,6*Px):(T=null,tw),o()):T*Cx},e.clipExtent=function(t){return arguments.length?(A=null==t?(E=h=f=p=null,Pb):xu(E=+t[0][0],h=+t[0][1],f=+t[1][0],p=+t[1][1]),o()):null==E?null:[[E,h],[f,p]]},e.scale=function(t){return arguments.length?(v=+t,i()):v},e.translate=function(t){return arguments.length?(y=+t[0],_=+t[1],i()):[y,_]},e.center=function(t){return arguments.length?(g=t[0]%360*Px,x=t[1]%360*Px,i()):[g*Cx,x*Cx]},e.rotate=function(t){return arguments.length?(b=t[0]%360*Px,w=t[1]%360*Px,M=t.length>2?t[2]%360*Px:0,i()):[b*Cx,w*Cx,M*Cx]},e.precision=function(t){return arguments.length?(z=ow(r,k=t*t),o()):Vx(k)},e.fitExtent=function(t,n){return Qu(e,t,n)},e.fitSize=function(t,n){return tl(e,t,n)},function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,i()}}function ol(t){var e=0,n=Ex/3,r=il(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Px,n=t[1]*Px):[e*Cx,n*Cx]},i}function al(t){function e(t,e){return[t*n,Fx(e)/n]}var n=Rx(t);return e.invert=function(t,e){return[t/n,ks(e*n)]},e}function sl(t,e){function n(t,e){var n=Vx(o-2*i*Fx(e))/i;return[n*Fx(t*=i),a-n*Rx(t)]}var r=Fx(t),i=(r+Fx(e))/2;if(Lx(i)<Tx)return al(t);var o=1+r*(2*i-r),a=Vx(o)/i;return n.invert=function(t,e){var n=a-e;return[Ox(t,Lx(n))/i*Ux(n),ks((o-(t*t+n*n)*i*i)/(2*i))]},n}function ul(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function ll(t){return function(e,n){var r=Rx(e),i=Rx(n),o=t(r*i);return[o*i*Fx(e),o*Fx(n)]}}function cl(t){return function(e,n){var r=Vx(e*e+n*n),i=t(r),o=Fx(i),a=Rx(i);return[Ox(e*o,r*a),ks(r&&n*o/r)]}}function hl(t,e){return[t,jx(qx((Ax+e)/2))]}function fl(t){var e,n=rl(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(t){return arguments.length?(r(t),e&&n.clipExtent(null),n):r()},n.translate=function(t){return arguments.length?(i(t),e&&n.clipExtent(null),n):i()},n.clipExtent=function(t){if(!arguments.length)return e?null:o();if(e=null==t){var a=Ex*r(),s=i();t=[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]}return o(t),n},n.clipExtent(null)}function pl(t){return qx((Ax+t)/2)}function dl(t,e){function n(t,e){o>0?e<-Ax+Tx&&(e=-Ax+Tx):e>Ax-Tx&&(e=Ax-Tx);var n=o/Bx(pl(e),i);return[n*Fx(i*t),o-n*Rx(i*t)]}var r=Rx(t),i=t===e?Fx(t):jx(r/Rx(e))/jx(pl(e)/pl(t)),o=r*Bx(pl(t),i)/i;return i?(n.invert=function(t,e){var n=o-e,r=Ux(i)*Vx(t*t+n*n);return[Ox(t,Lx(n))/i*Ux(n),2*Ix(Bx(o/r,1/i))-Ax]},n):hl}function ml(t,e){return[t,e]}function vl(t,e){function n(t,e){var n=o-e,r=i*t;return[n*Fx(r),o-n*Rx(r)]}var r=Rx(t),i=t===e?Fx(t):(r-Rx(e))/(e-t),o=r/i+t;return Lx(i)<Tx?ml:(n.invert=function(t,e){var n=o-e;return[Ox(t,Lx(n))/i*Ux(n),o-Ux(i)*Vx(t*t+n*n)]},n)}function yl(t,e){var n=Rx(e),r=Rx(t)*n;return[n*Fx(t)/r,Fx(e)/r]}function _l(t,e,n){return 1===t&&0===e&&0===n?Pb:Ju({point:function(r,i){this.stream.point(r*t+e,i*t+n)}})}function gl(t,e){return[Rx(e)*Fx(t),Fx(e)]}function xl(t,e){var n=Rx(e),r=1+Rx(t)*n;return[n*Fx(t)/r,Fx(e)/r]}function bl(t,e){return[jx(qx((Ax+e)/2)),-t]}var wl="4.3.0",Ml=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Tl=function(t){return 1===t.length&&(t=e(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}},Sl=Tl(Ml),El=Sl.right,Al=Sl.left,kl=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},zl=function(t){return null===t?NaN:+t},Cl=function(t,e){var n,r,i=t.length,o=0,a=0,s=-1,u=0;if(null==e)for(;++s<i;)isNaN(n=zl(t[s]))||(r=n-o,o+=r/++u,a+=r*(n-o));else for(;++s<i;)isNaN(n=zl(e(t[s],s,t)))||(r=n-o,o+=r/++u,a+=r*(n-o));if(u>1)return a/(u-1)},Pl=function(t,e){var n=Cl(t,e);return n?Math.sqrt(n):n},Ll=function(t,e){var n,r,i,o=-1,a=t.length;if(null==e){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=e(t[o],o,t))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e(t[o],o,t))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},Il=Array.prototype,Ol=Il.slice,Rl=Il.map,Nl=function(t){return function(){return t}},Dl=function(t){return t},jl=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},Bl=Math.sqrt(50),Fl=Math.sqrt(10),Ul=Math.sqrt(2),Vl=function(t,e,r){var i=n(t,e,r);return jl(Math.ceil(t/i)*i,Math.floor(e/i)*i+i/2,i)},ql=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},Zl=function(){function t(t){var i,o,a=t.length,s=new Array(a);for(i=0;i<a;++i)s[i]=e(t[i],i,t);var u=n(s),l=u[0],c=u[1],h=r(s,l,c);Array.isArray(h)||(h=Vl(l,c,h));for(var f=h.length;h[0]<=l;)h.shift(),--f;for(;h[f-1]>=c;)h.pop(),--f;var p,d=new Array(f+1);for(i=0;i<=f;++i)p=d[i]=[],p.x0=i>0?h[i-1]:l,p.x1=i<f?h[i]:c;for(i=0;i<a;++i)o=s[i],l<=o&&o<=c&&d[El(h,o,0,f)].push(t[i]);return d}var e=Dl,n=Ll,r=ql;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:Nl(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:Nl([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(r="function"==typeof e?e:Nl(Array.isArray(e)?Ol.call(e):e),t):r},t},Wl=function(t,e,n){if(null==n&&(n=zl),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}},Gl=function(t,e,n){return t=Rl.call(t,zl).sort(Ml),Math.ceil((n-e)/(2*(Wl(t,.75)-Wl(t,.25))*Math.pow(t.length,-1/3)))},Hl=function(t,e,n){return Math.ceil((n-e)/(3.5*Pl(t)*Math.pow(t.length,-1/3)))},Xl=function(t,e){var n,r,i=-1,o=t.length;if(null==e){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e(t[i],i,t))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e(t[i],i,t))&&r>n&&(n=r)}return n},Yl=function(t,e){var n,r=0,i=t.length,o=-1,a=i;if(null==e)for(;++o<i;)isNaN(n=zl(t[o]))?--a:r+=n;else for(;++o<i;)isNaN(n=zl(e(t[o],o,t)))?--a:r+=n;if(a)return r/a},Kl=function(t,e){var n,r=[],i=t.length,o=-1;if(null==e)for(;++o<i;)isNaN(n=zl(t[o]))||r.push(n);else for(;++o<i;)isNaN(n=zl(e(t[o],o,t)))||r.push(n);return Wl(r.sort(Ml),.5)},Jl=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--a]=r[e];return n},$l=function(t,e){var n,r,i=-1,o=t.length;if(null==e){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e(t[i],i,t))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e(t[i],i,t))&&n>r&&(n=r)}return n},Ql=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},tc=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},ec=function(t,e){if(n=t.length){var n,r,i=0,o=0,a=t[o];for(e||(e=Ml);++i<n;)(e(r=t[i],a)<0||0!==e(a,a))&&(a=r,o=i);return 0===e(a,a)?o:void 0}},nc=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},rc=function(t,e){var n,r=0,i=t.length,o=-1;if(null==e)for(;++o<i;)(n=+t[o])&&(r+=n);else for(;++o<i;)(n=+e(t[o],o,t))&&(r+=n);return r},ic=function(t){if(!(o=t.length))return[];for(var e=-1,n=$l(t,r),i=new Array(n);++e<n;)for(var o,a=-1,s=i[e]=new Array(o);++a<o;)s[a]=t[a][e];return i},oc=function(){return ic(arguments)},ac="$";i.prototype=o.prototype={constructor:i,has:function(t){return ac+t in this},get:function(t){return this[ac+t]},set:function(t,e){return this[ac+t]=e,this},remove:function(t){var e=ac+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===ac&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===ac&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===ac&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===ac&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===ac&&++t;return t},empty:function(){for(var t in this)if(t[0]===ac)return!1;return!0},each:function(t){for(var e in this)e[0]===ac&&t(this[e],e.slice(1),this)}};var sc=function(){function t(e,i,a,s){if(i>=c.length)return null!=r?r(e):null!=n?e.sort(n):e;for(var u,l,h,f=-1,p=e.length,d=c[i++],m=o(),v=a();++f<p;)(h=m.get(u=d(l=e[f])+""))?h.push(l):m.set(u,[l]);return m.each(function(e,n){s(v,n,t(e,i,a,s))}),v}function e(t,n){if(++n>c.length)return t;var i,o=h[n-1];return null!=r&&n>=c.length?i=t.entries():(i=[],t.each(function(t,r){i.push({key:r,values:e(t,n)})})),null!=o?i.sort(function(t,e){return o(t.key,e.key)}):i}var n,r,i,c=[],h=[];return i={object:function(e){return t(e,0,a,s)},map:function(e){return t(e,0,u,l)},entries:function(n){return e(t(n,0,u,l),0)},key:function(t){return c.push(t),i},sortKeys:function(t){return h[c.length-1]=t,i},sortValues:function(t){return n=t,i},rollup:function(t){return r=t,i}}},uc=o.prototype;c.prototype=h.prototype={constructor:c,has:uc.has,add:function(t){return t+="",this[ac+t]=t,this},remove:uc.remove,clear:uc.clear,values:uc.keys,size:uc.size,empty:uc.empty,each:uc.each};var lc=function(t){var e=[];for(var n in t)e.push(n);return e},cc=function(t){var e=[];for(var n in t)e.push(t[n]);return e},hc=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},fc=function(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return Math.random()*e+t}},pc=function(t,e){var n,r;return t=null==t?0:+t,e=null==e?1:+e,function(){var i;if(null!=n)i=n,n=null;else do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*i*Math.sqrt(-2*Math.log(r)/r)}},dc=function(){var t=pc.apply(this,arguments);return function(){return Math.exp(t())}},mc=function(t){return function(){for(var e=0,n=0;n<t;++n)e+=Math.random();return e}},vc=function(t){var e=mc(t);return function(){return e()/t}},yc=function(t){return function(){return-Math.log(1-Math.random())/t}},_c=3,gc=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(_c),xc=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(_c),bc=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(_c),wc=Math.PI,Mc=wc/2,Tc=4/11,Sc=6/11,Ec=8/11,Ac=.75,kc=9/11,zc=10/11,Cc=.9375,Pc=21/22,Lc=63/64,Ic=1/Tc/Tc,Oc=1.70158,Rc=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(Oc),Nc=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(Oc),Dc=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(Oc),jc=2*Math.PI,Bc=1,Fc=.3,Uc=function t(e,n){function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=jc);return r.amplitude=function(e){return t(e,n*jc)},r.period=function(n){return t(e,n)},r}(Bc,Fc),Vc=function t(e,n){function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=jc);return r.amplitude=function(e){return t(e,n*jc)},r.period=function(n){return t(e,n)},r}(Bc,Fc),qc=function t(e,n){function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=jc);return r.amplitude=function(e){return t(e,n*jc)},r.period=function(n){return t(e,n)},r}(Bc,Fc),Zc=function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2},Wc=function(t){for(var e,n,r=-1,i=t.length,o=0,a=0,s=t[i-1],u=0;++r<i;)e=s,s=t[r],u+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return u*=3,[o/u,a/u]},Gc=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])},Hc=function(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(P),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var o=L(r),a=L(i),s=a[0]===o[0],u=a[a.length-1]===o[o.length-1],l=[];for(e=o.length-1;e>=0;--e)l.push(t[r[o[e]][2]]);for(e=+s;e<a.length-u;++e)l.push(t[r[a[e]][2]]);return l},Xc=function(t,e){for(var n,r,i=t.length,o=t[i-1],a=e[0],s=e[1],u=o[0],l=o[1],c=!1,h=0;h<i;++h)o=t[h],n=o[0],r=o[1],r>s!=l>s&&a<(u-n)*(s-r)/(l-r)+n&&(c=!c),u=n,l=r;return c},Yc=function(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],s=o[1],u=0;++r<i;)e=a,n=s,o=t[r],a=o[0],s=o[1],e-=a,n-=s,u+=Math.sqrt(e*e+n*n);return u},Kc=Math.PI,Jc=2*Kc,$c=1e-6,Qc=Jc-$c;I.prototype=O.prototype={constructor:I,moveTo:function(t,e){this._.push("M",this._x0=this._x1=+t,",",this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._.push("Z"))},lineTo:function(t,e){this._.push("L",this._x1=+t,",",this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._.push("Q",+t,",",+e,",",this._x1=+n,",",this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._.push("C",+t,",",+e,",",+n,",",+r,",",this._x1=+i,",",this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,l=o-t,c=a-e,h=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._.push("M",this._x1=t,",",this._y1=e);else if(h>$c)if(Math.abs(c*s-u*l)>$c&&i){var f=n-o,p=r-a,d=s*s+u*u,m=f*f+p*p,v=Math.sqrt(d),y=Math.sqrt(h),_=i*Math.tan((Kc-Math.acos((d+h-m)/(2*v*y)))/2),g=_/y,x=_/v;Math.abs(g-1)>$c&&this._.push("L",t+g*l,",",e+g*c),this._.push("A",i,",",i,",0,0,",+(c*f>l*p),",",this._x1=t+x*s,",",this._y1=e+x*u)}else this._.push("L",this._x1=t,",",this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,n=+n;var a=n*Math.cos(r),s=n*Math.sin(r),u=t+a,l=e+s,c=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._.push("M",u,",",l):(Math.abs(this._x1-u)>$c||Math.abs(this._y1-l)>$c)&&this._.push("L",u,",",l),n&&(h>Qc?this._.push("A",n,",",n,",0,1,",c,",",t-a,",",e-s,"A",n,",",n,",0,1,",c,",",this._x1=u,",",this._y1=l):(h<0&&(h=h%Jc+Jc),this._.push("A",n,",",n,",0,",+(h>=Kc),",",c,",",this._x1=t+n*Math.cos(i),",",this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._.push("M",this._x0=this._x1=+t,",",this._y0=this._y1=+e,"h",+n,"v",+r,"h",-n,"Z")},toString:function(){return this._.join("")}};var th=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return R(this.cover(e,n),e,n,t)},eh=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{if(!(n>t||t>i||r>e||e>o))return this;var a,s,u=i-n,l=this._root;switch(s=(e<(r+o)/2)<<1|t<(n+i)/2){case 0:do a=new Array(4),a[s]=l,l=a;while(u*=2,i=n+u,o=r+u,t>i||e>o);break;case 1:do a=new Array(4),a[s]=l,l=a;while(u*=2,n=i-u,o=r+u,n>t||e>o);break;case 2:do a=new Array(4),a[s]=l,l=a;while(u*=2,i=n+u,r=o-u,t>i||r>e);break;case 3:do a=new Array(4),a[s]=l,l=a;while(u*=2,n=i-u,r=o-u,n>t||r>e)}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},nh=function(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t},rh=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ih=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i},oh=function(t,e,n){var r,i,o,a,s,u,l,c=this._x0,h=this._y0,f=this._x1,p=this._y1,d=[],m=this._root;for(m&&d.push(new ih(m,c,h,f,p)),null==n?n=1/0:(c=t-n,h=e-n,f=t+n,p=e+n,n*=n);u=d.pop();)if(!(!(m=u.node)||(i=u.x0)>f||(o=u.y0)>p||(a=u.x1)<c||(s=u.y1)<h))if(m.length){var v=(i+a)/2,y=(o+s)/2;d.push(new ih(m[3],v,y,a,s),new ih(m[2],i,y,v,s),new ih(m[1],v,o,a,y),new ih(m[0],i,o,v,y)),(l=(e>=y)<<1|t>=v)&&(u=d[d.length-1],d[d.length-1]=d[d.length-1-l],d[d.length-1-l]=u)}else{var _=t-+this._x.call(null,m.data),g=e-+this._y.call(null,m.data),x=_*_+g*g;if(x<n){var b=Math.sqrt(n=x);c=t-b,h=e-b,f=t+b,p=e+b,r=m.data}}return r},ah=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,l,c,h,f,p=this._root,d=this._x0,m=this._y0,v=this._x1,y=this._y1;if(!p)return this;if(p.length)for(;;){if((l=o>=(s=(d+v)/2))?d=s:v=s,(c=a>=(u=(m+y)/2))?m=u:y=u,e=p,!(p=p[h=c<<1|l]))return this;if(!p.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[f]=p:this._root=p),this):(this._root=i,this)},sh=function(){return this._root},uh=function(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t},lh=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new ih(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var l=(r+o)/2,c=(i+a)/2;(n=u[3])&&s.push(new ih(n,l,c,o,a)),(n=u[2])&&s.push(new ih(n,r,c,l,a)),(n=u[1])&&s.push(new ih(n,l,i,o,c)),(n=u[0])&&s.push(new ih(n,r,i,l,c))}return this},ch=function(t){var e,n=[],r=[];for(this._root&&n.push(new ih(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,l=e.y1,c=(a+u)/2,h=(s+l)/2;(o=i[0])&&n.push(new ih(o,a,s,c,h)),(o=i[1])&&n.push(new ih(o,c,s,u,h)),(o=i[2])&&n.push(new ih(o,a,h,c,l)),(o=i[3])&&n.push(new ih(o,c,h,u,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},hh=function(t){return arguments.length?(this._x=t,this):this._x},fh=function(t){return arguments.length?(this._y=t,this):this._y},ph=F.prototype=U.prototype;ph.copy=function(){var t,e,n=new U(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=V(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=V(e));return n},ph.add=th,ph.addAll=N,ph.cover=eh,ph.data=nh,ph.extent=rh,ph.find=oh,ph.remove=ah,ph.removeAll=D,ph.root=sh,ph.size=uh,ph.visit=lh,ph.visitAfter=ch,ph.x=hh,ph.y=fh;var dh=[].slice,mh={};q.prototype=Y.prototype={constructor:q,defer:function(t){if("function"!=typeof t||this._call)throw new Error;if(null!=this._error)return this;var e=dh.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),Z(this),this},abort:function(){return null==this._error&&H(this,new Error("abort")),this},await:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=function(e,n){t.apply(null,[e].concat(n))},X(this),this},awaitAll:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=t,X(this),this}};var vh=function(t){return function(){return t}},yh=1e-12,_h=Math.PI,gh=_h/2,xh=2*_h,bh=function(){function t(){var t,l,c=+e.apply(this,arguments),h=+n.apply(this,arguments),f=o.apply(this,arguments)-gh,p=a.apply(this,arguments)-gh,d=Math.abs(p-f),m=p>f;if(u||(u=t=O()),h<c&&(l=h,h=c,c=l),h>yh)if(d>xh-yh)u.moveTo(h*Math.cos(f),h*Math.sin(f)),u.arc(0,0,h,f,p,!m),c>yh&&(u.moveTo(c*Math.cos(p),c*Math.sin(p)),u.arc(0,0,c,p,f,m));else{var v,y,_=f,g=p,x=f,b=p,w=d,M=d,T=s.apply(this,arguments)/2,S=T>yh&&(i?+i.apply(this,arguments):Math.sqrt(c*c+h*h)),E=Math.min(Math.abs(h-c)/2,+r.apply(this,arguments)),A=E,k=E;if(S>yh){var z=et(S/c*Math.sin(T)),C=et(S/h*Math.sin(T));(w-=2*z)>yh?(z*=m?1:-1,x+=z,b-=z):(w=0,x=b=(f+p)/2),(M-=2*C)>yh?(C*=m?1:-1,_+=C,g-=C):(M=0,_=g=(f+p)/2)}var P=h*Math.cos(_),L=h*Math.sin(_),I=c*Math.cos(b),R=c*Math.sin(b);if(E>yh){var N=h*Math.cos(g),D=h*Math.sin(g),j=c*Math.cos(x),B=c*Math.sin(x);if(d<_h){var F=w>yh?nt(P,L,j,B,N,D,I,R):[I,R],U=P-F[0],V=L-F[1],q=N-F[0],Z=D-F[1],W=1/Math.sin(Math.acos((U*q+V*Z)/(Math.sqrt(U*U+V*V)*Math.sqrt(q*q+Z*Z)))/2),G=Math.sqrt(F[0]*F[0]+F[1]*F[1]);A=Math.min(E,(c-G)/(W-1)),k=Math.min(E,(h-G)/(W+1))}}M>yh?k>yh?(v=rt(j,B,P,L,h,k,m),y=rt(N,D,I,R,h,k,m),u.moveTo(v.cx+v.x01,v.cy+v.y01),k<E?u.arc(v.cx,v.cy,k,Math.atan2(v.y01,v.x01),Math.atan2(y.y01,y.x01),!m):(u.arc(v.cx,v.cy,k,Math.atan2(v.y01,v.x01),Math.atan2(v.y11,v.x11),!m),
u.arc(0,0,h,Math.atan2(v.cy+v.y11,v.cx+v.x11),Math.atan2(y.cy+y.y11,y.cx+y.x11),!m),u.arc(y.cx,y.cy,k,Math.atan2(y.y11,y.x11),Math.atan2(y.y01,y.x01),!m))):(u.moveTo(P,L),u.arc(0,0,h,_,g,!m)):u.moveTo(P,L),c>yh&&w>yh?A>yh?(v=rt(I,R,N,D,c,-A,m),y=rt(P,L,j,B,c,-A,m),u.lineTo(v.cx+v.x01,v.cy+v.y01),A<E?u.arc(v.cx,v.cy,A,Math.atan2(v.y01,v.x01),Math.atan2(y.y01,y.x01),!m):(u.arc(v.cx,v.cy,A,Math.atan2(v.y01,v.x01),Math.atan2(v.y11,v.x11),!m),u.arc(0,0,c,Math.atan2(v.cy+v.y11,v.cx+v.x11),Math.atan2(y.cy+y.y11,y.cx+y.x11),m),u.arc(y.cx,y.cy,A,Math.atan2(y.y11,y.x11),Math.atan2(y.y01,y.x01),!m))):u.arc(0,0,c,b,x,m):u.lineTo(I,R)}else u.moveTo(0,0);if(u.closePath(),t)return u=null,t+""||null}var e=K,n=J,r=vh(0),i=null,o=$,a=Q,s=tt,u=null;return t.centroid=function(){var t=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-_h/2;return[Math.cos(r)*t,Math.sin(r)*t]},t.innerRadius=function(n){return arguments.length?(e="function"==typeof n?n:vh(+n),t):e},t.outerRadius=function(e){return arguments.length?(n="function"==typeof e?e:vh(+e),t):n},t.cornerRadius=function(e){return arguments.length?(r="function"==typeof e?e:vh(+e),t):r},t.padRadius=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:vh(+e),t):i},t.startAngle=function(e){return arguments.length?(o="function"==typeof e?e:vh(+e),t):o},t.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:vh(+e),t):a},t.padAngle=function(e){return arguments.length?(s="function"==typeof e?e:vh(+e),t):s},t.context=function(e){return arguments.length?(u=null==e?null:e,t):u},t};it.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var wh=function(t){return new it(t)},Mh=function(){function t(t){var s,u,l,c=t.length,h=!1;for(null==i&&(a=o(l=O())),s=0;s<=c;++s)!(s<c&&r(u=t[s],s,t))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(u,s,t),+n(u,s,t));if(l)return a=null,l+""||null}var e=ot,n=at,r=vh(!0),i=null,o=wh,a=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:vh(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:vh(+e),t):n},t.defined=function(e){return arguments.length?(r="function"==typeof e?e:vh(!!e),t):r},t.curve=function(e){return arguments.length?(o=e,null!=i&&(a=o(i)),t):o},t.context=function(e){return arguments.length?(null==e?i=a=null:a=o(i=e),t):i},t},Th=function(){function t(t){var e,c,h,f,p,d=t.length,m=!1,v=new Array(d),y=new Array(d);for(null==s&&(l=u(p=O())),e=0;e<=d;++e){if(!(e<d&&a(f=t[e],e,t))===m)if(m=!m)c=e,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),h=e-1;h>=c;--h)l.point(v[h],y[h]);l.lineEnd(),l.areaEnd()}m&&(v[e]=+n(f,e,t),y[e]=+i(f,e,t),l.point(r?+r(f,e,t):v[e],o?+o(f,e,t):y[e]))}if(p)return l=null,p+""||null}function e(){return Mh().defined(a).curve(u).context(s)}var n=ot,r=null,i=vh(0),o=at,a=vh(!0),s=null,u=wh,l=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:vh(+e),r=null,t):n},t.x0=function(e){return arguments.length?(n="function"==typeof e?e:vh(+e),t):n},t.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:vh(+e),t):r},t.y=function(e){return arguments.length?(i="function"==typeof e?e:vh(+e),o=null,t):i},t.y0=function(e){return arguments.length?(i="function"==typeof e?e:vh(+e),t):i},t.y1=function(e){return arguments.length?(o=null==e?null:"function"==typeof e?e:vh(+e),t):o},t.lineX0=t.lineY0=function(){return e().x(n).y(i)},t.lineY1=function(){return e().x(n).y(o)},t.lineX1=function(){return e().x(r).y(i)},t.defined=function(e){return arguments.length?(a="function"==typeof e?e:vh(!!e),t):a},t.curve=function(e){return arguments.length?(u=e,null!=s&&(l=u(s)),t):u},t.context=function(e){return arguments.length?(null==e?s=l=null:l=u(s=e),t):s},t},Sh=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Eh=function(t){return t},Ah=function(){function t(t){var s,u,l,c,h,f=t.length,p=0,d=new Array(f),m=new Array(f),v=+i.apply(this,arguments),y=Math.min(xh,Math.max(-xh,o.apply(this,arguments)-v)),_=Math.min(Math.abs(y)/f,a.apply(this,arguments)),g=_*(y<0?-1:1);for(s=0;s<f;++s)(h=m[d[s]=s]=+e(t[s],s,t))>0&&(p+=h);for(null!=n?d.sort(function(t,e){return n(m[t],m[e])}):null!=r&&d.sort(function(e,n){return r(t[e],t[n])}),s=0,l=p?(y-f*g)/p:0;s<f;++s,v=c)u=d[s],h=m[u],c=v+(h>0?h*l:0)+g,m[u]={data:t[u],index:s,value:h,startAngle:v,endAngle:c,padAngle:_};return m}var e=Eh,n=Sh,r=null,i=vh(0),o=vh(xh),a=vh(0);return t.value=function(n){return arguments.length?(e="function"==typeof n?n:vh(+n),t):e},t.sortValues=function(e){return arguments.length?(n=e,r=null,t):n},t.sort=function(e){return arguments.length?(r=e,n=null,t):r},t.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:vh(+e),t):i},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:vh(+e),t):o},t.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:vh(+e),t):a},t},kh=ut(wh);st.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var zh=function(){return lt(Mh().curve(kh))},Ch=function(){var t=Th().curve(kh),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return lt(n())},delete t.lineX0,t.lineEndAngle=function(){return lt(r())},delete t.lineX1,t.lineInnerRadius=function(){return lt(i())},delete t.lineY0,t.lineOuterRadius=function(){return lt(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(ut(t)):e()._curve},t},Ph={draw:function(t,e){var n=Math.sqrt(e/_h);t.moveTo(n,0),t.arc(0,0,n,0,xh)}},Lh={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Ih=Math.sqrt(1/3),Oh=2*Ih,Rh={draw:function(t,e){var n=Math.sqrt(e/Oh),r=n*Ih;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Nh=.8908130915292852,Dh=Math.sin(_h/10)/Math.sin(7*_h/10),jh=Math.sin(xh/10)*Dh,Bh=-Math.cos(xh/10)*Dh,Fh={draw:function(t,e){var n=Math.sqrt(e*Nh),r=jh*n,i=Bh*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=xh*o/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},Uh={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},Vh=Math.sqrt(3),qh={draw:function(t,e){var n=-Math.sqrt(e/(3*Vh));t.moveTo(0,2*n),t.lineTo(-Vh*n,-n),t.lineTo(Vh*n,-n),t.closePath()}},Zh=-.5,Wh=Math.sqrt(3)/2,Gh=1/Math.sqrt(12),Hh=3*(Gh/2+1),Xh={draw:function(t,e){var n=Math.sqrt(e/Hh),r=n/2,i=n*Gh,o=r,a=n*Gh+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(Zh*r-Wh*i,Wh*r+Zh*i),t.lineTo(Zh*o-Wh*a,Wh*o+Zh*a),t.lineTo(Zh*s-Wh*u,Wh*s+Zh*u),t.lineTo(Zh*r+Wh*i,Zh*i-Wh*r),t.lineTo(Zh*o+Wh*a,Zh*a-Wh*o),t.lineTo(Zh*s+Wh*u,Zh*u-Wh*s),t.closePath()}},Yh=[Ph,Lh,Rh,Uh,Fh,qh,Xh],Kh=function(){function t(){var t;if(r||(r=t=O()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),t)return r=null,t+""||null}var e=vh(Ph),n=vh(64),r=null;return t.type=function(n){return arguments.length?(e="function"==typeof n?n:vh(n),t):e},t.size=function(e){return arguments.length?(n="function"==typeof e?e:vh(+e),t):n},t.context=function(e){return arguments.length?(r=null==e?null:e,t):r},t},Jh=function(){};ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ct(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ct(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var $h=function(t){return new ht(t)};ft.prototype={areaStart:Jh,areaEnd:Jh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ct(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Qh=function(t){return new ft(t)};pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ct(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var tf=function(t){return new pt(t)};dt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var ef=function t(e){function n(t){return 1===e?new ht(t):new dt(t,e)}return n.beta=function(e){return t(+e)},n}(.85);vt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:mt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:mt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var nf=function t(e){function n(t){return new vt(t,e)}return n.tension=function(e){return t(+e)},n}(0);yt.prototype={areaStart:Jh,areaEnd:Jh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:mt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var rf=function t(e){function n(t){return new yt(t,e)}return n.tension=function(e){return t(+e)},n}(0);_t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:mt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var of=function t(e){function n(t){return new _t(t,e)}return n.tension=function(e){return t(+e)},n}(0);xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:gt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var af=function t(e){function n(t){return e?new xt(t,e):new vt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);bt.prototype={areaStart:Jh,areaEnd:Jh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:gt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var sf=function t(e){function n(t){return e?new bt(t,e):new yt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:gt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var uf=function t(e){function n(t){return e?new wt(t,e):new _t(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);Mt.prototype={areaStart:Jh,areaEnd:Jh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var lf=function(t){return new Mt(t)};kt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:At(this,this._t0,Et(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,At(this,Et(this,n=St(this,t,e)),n);break;default:At(this,this._t0,n=St(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(zt.prototype=Object.create(kt.prototype)).point=function(t,e){kt.prototype.point.call(this,e,t)},Ct.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},It.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Ot(t),i=Ot(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var cf=function(t){return new It(t)};Rt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var hf=function(t){return new Rt(t,.5)},ff=Array.prototype.slice,pf=function(t,e){if((r=t.length)>1)for(var n,r,i=1,o=t[e[0]],a=o.length;i<r;++i){n=o,o=t[e[i]];for(var s=0;s<a;++s)o[s][1]+=o[s][0]=isNaN(n[s][1])?n[s][0]:n[s][1]}},df=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n},mf=function(){function t(t){var o,a,s=e.apply(this,arguments),u=t.length,l=s.length,c=new Array(l);for(o=0;o<l;++o){for(var h,f=s[o],p=c[o]=new Array(u),d=0;d<u;++d)p[d]=h=[0,+i(t[d],f,d,t)],h.data=t[d];p.key=f}for(o=0,a=n(c);o<l;++o)c[a[o]].index=o;return r(c,a),c}var e=vh([]),n=df,r=pf,i=jt;return t.keys=function(n){return arguments.length?(e="function"==typeof n?n:vh(ff.call(n)),t):e},t.value=function(e){return arguments.length?(i="function"==typeof e?e:vh(+e),t):i},t.order=function(e){return arguments.length?(n=null==e?df:"function"==typeof e?e:vh(ff.call(e)),t):n},t.offset=function(e){return arguments.length?(r=null==e?pf:e,t):r},t},vf=function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}pf(t,e)}},yf=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}pf(t,e)}},_f=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,l=0;s<i;++s){for(var c=t[e[s]],h=c[a][1]||0,f=c[a-1][1]||0,p=(h-f)/2,d=0;d<s;++d){var m=t[e[d]],v=m[a][1]||0,y=m[a-1][1]||0;p+=v-y}u+=h,l+=p*h}n[a-1][1]+=n[a-1][0]=o,u&&(o-=l/u)}n[a-1][1]+=n[a-1][0]=o,pf(t,e)}},gf=function(t){var e=t.map(Bt);return df(t).sort(function(t,n){return e[t]-e[n]})},xf=function(t){return gf(t).reverse()},bf=function(t){var e,n,r=t.length,i=t.map(Bt),o=df(t).sort(function(t,e){return i[e]-i[t]}),a=0,s=0,u=[],l=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],l.push(n));return l.reverse().concat(u)},wf=function(t){return df(t).reverse()},Mf=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t},Tf=.7,Sf=1/Tf,Ef=/^#([0-9a-f]{3})$/,Af=/^#([0-9a-f]{6})$/,kf=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,zf=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,Cf=/^rgba\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,Pf=/^rgba\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,Lf=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,If=/^hsla\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,Of={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mf(Ut,Vt,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Mf(Ht,Gt,Ft(Ut,{brighter:function(t){return t=null==t?Sf:Math.pow(Sf,t),new Ht(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Tf:Math.pow(Tf,t),new Ht(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Mf(Jt,Kt,Ft(Ut,{brighter:function(t){return t=null==t?Sf:Math.pow(Sf,t),new Jt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Tf:Math.pow(Tf,t),new Jt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ht($t(t>=240?t-240:t+120,i,r),$t(t,i,r),$t(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Rf=Math.PI/180,Nf=180/Math.PI,Df=18,jf=.95047,Bf=1,Ff=1.08883,Uf=4/29,Vf=6/29,qf=3*Vf*Vf,Zf=Vf*Vf*Vf;Mf(ee,te,Ft(Ut,{brighter:function(t){return new ee(this.l+Df*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new ee(this.l-Df*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=Bf*re(t),e=jf*re(e),n=Ff*re(n),new Ht(ie(3.2404542*e-1.5371385*t-.4985314*n),ie(-.969266*e+1.8760108*t+.041556*n),ie(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),Mf(ue,se,Ft(Ut,{brighter:function(t){return new ue(this.h,this.c,this.l+Df*(null==t?1:t),this.opacity)},darker:function(t){return new ue(this.h,this.c,this.l-Df*(null==t?1:t),this.opacity)},rgb:function(){return Qt(this).rgb()}}));var Wf=-.14861,Gf=1.78277,Hf=-.29227,Xf=-.90649,Yf=1.97294,Kf=Yf*Xf,Jf=Yf*Gf,$f=Gf*Hf-Xf*Wf;Mf(he,ce,Ft(Ut,{brighter:function(t){return t=null==t?Sf:Math.pow(Sf,t),new he(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Tf:Math.pow(Tf,t),new he(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Rf,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Ht(255*(e+n*(Wf*r+Gf*i)),255*(e+n*(Hf*r+Xf*i)),255*(e+n*(Yf*r)),this.opacity)}}));var Qf,tp,ep,np,rp=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return fe((n-r/e)*e,a,i,o,s)}},ip=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return fe((n-r/e)*e,i,o,a,s)}},op=function(t){return function(){return t}},ap=function t(e){function n(t,e){var n=r((t=Gt(t)).r,(e=Gt(e)).r),i=r(t.g,e.g),o=r(t.b,e.b),a=r(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}var r=ve(e);return n.gamma=t,n}(1),sp=_e(rp),up=_e(ip),lp=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(r),a=new Array(r);for(n=0;n<i;++n)o[n]=vp(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}},cp=function(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}},hp=function(t,e){return t=+t,e-=t,function(n){return t+e*n}},fp=function(t,e){var n,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?r[n]=vp(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},pp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dp=new RegExp(pp.source,"g"),mp=function(t,e){var n,r,i,o=pp.lastIndex=dp.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=pp.exec(t))&&(r=dp.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:hp(n,r)})),o=dp.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?xe(u[0].x):ge(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},vp=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?op(e):("number"===r?hp:"string"===r?(n=Vt(e))?(e=n,ap):mp:e instanceof Vt?ap:e instanceof Date?cp:Array.isArray(e)?lp:isNaN(e)?fp:hp)(t,e)},yp=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}},_p=180/Math.PI,gp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},xp=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*_p,skewX:Math.atan(u)*_p,scaleX:a,scaleY:s}},bp=Me(be,"px, ","px)","deg)"),wp=Me(we,", ",")",")"),Mp=Math.SQRT2,Tp=2,Sp=4,Ep=1e-12,Ap=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],l=e[2],c=s-i,h=u-o,f=c*c+h*h;if(f<Ep)r=Math.log(l/a)/Mp,n=function(t){return[i+t*c,o+t*h,a*Math.exp(Mp*t*r)]};else{var p=Math.sqrt(f),d=(l*l-a*a+Sp*f)/(2*a*Tp*p),m=(l*l-a*a-Sp*f)/(2*l*Tp*p),v=Math.log(Math.sqrt(d*d+1)-d),y=Math.log(Math.sqrt(m*m+1)-m);r=(y-v)/Mp,n=function(t){var e=t*r,n=Te(v),s=a/(Tp*p)*(n*Ee(Mp*e+v)-Se(v));return[i+s*c,o+s*h,a*n/Te(Mp*e+v)]}}return n.duration=1e3*r,n},kp=Ae(me),zp=Ae(ye),Cp=ze(me),Pp=ze(ye),Lp=Ce(me),Ip=Ce(ye),Op=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},Rp={value:function(){}};Le.prototype=Pe.prototype={constructor:Le,on:function(t,e){var n,r=this._,i=Ie(t+"",r),o=-1,a=i.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=Re(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Re(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=Oe(r[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Le(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var Np,Dp,jp=function(t){function e(t,e){var r,i,o=n(t,function(t,n){return r?r(t,n-1):(i=t,void(r=e?De(t,e):Ne(t)))});return o.columns=i,o}function n(t,e){function n(){if(c>=l)return a;if(i)return i=!1,o;var e,n=c;if(34===t.charCodeAt(n)){for(var r=n;r++<l;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}return c=r+2,e=t.charCodeAt(r+1),13===e?(i=!0,10===t.charCodeAt(r+2)&&++c):10===e&&(i=!0),t.slice(n+1,r).replace(/""/g,'"');
}for(;c<l;){var s=1;if(e=t.charCodeAt(c++),10===e)i=!0;else if(13===e)i=!0,10===t.charCodeAt(c)&&(++c,++s);else if(e!==u)continue;return t.slice(n,c-s)}return t.slice(n)}for(var r,i,o={},a={},s=[],l=t.length,c=0,h=0;(r=n())!==a;){for(var f=[];r!==o&&r!==a;)f.push(r),r=n();e&&null==(f=e(f,h++))||s.push(f)}return s}function r(e,n){return null==n&&(n=je(e)),[n.map(a).join(t)].concat(e.map(function(e){return n.map(function(t){return a(e[t])}).join(t)})).join("\n")}function i(t){return t.map(o).join("\n")}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":s.test(t+="")?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return{parse:e,parseRows:n,format:r,formatRows:i}},Bp=jp(","),Fp=Bp.parse,Up=Bp.parseRows,Vp=Bp.format,qp=Bp.formatRows,Zp=jp("\t"),Wp=Zp.parse,Gp=Zp.parseRows,Hp=Zp.format,Xp=Zp.formatRows,Yp=function(t,e){function n(t){var e,n=c.status;if(!n&&Fe(c)||n>=200&&n<300||304===n){if(a)try{e=a.call(r,c)}catch(t){return void u.call("error",r,t)}else e=c;u.call("load",r,e)}else u.call("error",r,t)}var r,i,a,s,u=Pe("beforesend","progress","load","error"),l=o(),c=new XMLHttpRequest,h=null,f=null,p=0;if("undefined"==typeof XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(t)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=c.ontimeout=n:c.onreadystatechange=function(t){c.readyState>3&&n(t)},c.onprogress=function(t){u.call("progress",r,t)},r={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l.get(t):(null==e?l.remove(t):l.set(t,e+""),r)},mimeType:function(t){return arguments.length?(i=null==t?null:t+"",r):i},responseType:function(t){return arguments.length?(s=t,r):s},timeout:function(t){return arguments.length?(p=+t,r):p},user:function(t){return arguments.length<1?h:(h=null==t?null:t+"",r)},password:function(t){return arguments.length<1?f:(f=null==t?null:t+"",r)},response:function(t){return a=t,r},get:function(t,e){return r.send("GET",t,e)},post:function(t,e){return r.send("POST",t,e)},send:function(e,n,o){return c.open(e,t,!0,h,f),null==i||l.has("accept")||l.set("accept",i+",*/*"),c.setRequestHeader&&l.each(function(t,e){c.setRequestHeader(e,t)}),null!=i&&c.overrideMimeType&&c.overrideMimeType(i),null!=s&&(c.responseType=s),p>0&&(c.timeout=p),null==o&&"function"==typeof n&&(o=n,n=null),null!=o&&1===o.length&&(o=Be(o)),null!=o&&r.on("error",o).on("load",function(t){o(null,t)}),u.call("beforesend",r,c),c.send(null==n?null:n),r},abort:function(){return c.abort(),r},on:function(){var t=u.on.apply(u,arguments);return t===u?r:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return r.get(e)}return r},Kp=function(t,e){return function(n,r){var i=Yp(n).mimeType(t).response(e);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}},Jp=Kp("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),$p=Kp("application/json",function(t){return JSON.parse(t.responseText)}),Qp=Kp("text/plain",function(t){return t.responseText}),td=Kp("application/xml",function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e}),ed=function(t,e){return function(n,r,i){arguments.length<3&&(i=r,r=null);var o=Yp(n).mimeType(t);return o.row=function(t){return arguments.length?o.response(Ue(e,r=t)):r},o.row(r),i?o.get(i):o}},nd=ed("text/csv",Fp),rd=ed("text/tab-separated-values",Wp),id=0,od=0,ad=0,sd=1e3,ud=0,ld=0,cd=0,hd="object"==typeof performance&&performance.now?performance:Date,fd="function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){setTimeout(t,17)};Ze.prototype=We.prototype={constructor:Ze,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Ve():+n)+(null==e?0:+e),this._next||Dp===this||(Dp?Dp._next=this:Np=this,Dp=this),this._call=t,this._time=n,Ke()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ke())}};var pd=function(t,e,n){var r=new Ze;return e=null==e?0:+e,r.restart(function(n){r.stop(),t(n+e)},e,n),r},dd=function(t,e,n){var r=new Ze,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?Ve():+n,r.restart(function o(a){a+=i,r.restart(o,i+=e,n),t(a)},e,n),r)},md=new Date,vd=new Date,yd=Je(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});yd.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Je(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):yd:null};var _d=yd.range,gd=1e3,xd=6e4,bd=36e5,wd=864e5,Md=6048e5,Td=Je(function(t){t.setTime(Math.floor(t/gd)*gd)},function(t,e){t.setTime(+t+e*gd)},function(t,e){return(e-t)/gd},function(t){return t.getUTCSeconds()}),Sd=Td.range,Ed=Je(function(t){t.setTime(Math.floor(t/xd)*xd)},function(t,e){t.setTime(+t+e*xd)},function(t,e){return(e-t)/xd},function(t){return t.getMinutes()}),Ad=Ed.range,kd=Je(function(t){var e=t.getTimezoneOffset()*xd%bd;e<0&&(e+=bd),t.setTime(Math.floor((+t-e)/bd)*bd+e)},function(t,e){t.setTime(+t+e*bd)},function(t,e){return(e-t)/bd},function(t){return t.getHours()}),zd=kd.range,Cd=Je(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*xd)/wd},function(t){return t.getDate()-1}),Pd=Cd.range,Ld=$e(0),Id=$e(1),Od=$e(2),Rd=$e(3),Nd=$e(4),Dd=$e(5),jd=$e(6),Bd=Ld.range,Fd=Id.range,Ud=Od.range,Vd=Rd.range,qd=Nd.range,Zd=Dd.range,Wd=jd.range,Gd=Je(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Hd=Gd.range,Xd=Je(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Xd.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Je(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var Yd=Xd.range,Kd=Je(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*xd)},function(t,e){return(e-t)/xd},function(t){return t.getUTCMinutes()}),Jd=Kd.range,$d=Je(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*bd)},function(t,e){return(e-t)/bd},function(t){return t.getUTCHours()}),Qd=$d.range,tm=Je(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/wd},function(t){return t.getUTCDate()-1}),em=tm.range,nm=Qe(0),rm=Qe(1),im=Qe(2),om=Qe(3),am=Qe(4),sm=Qe(5),um=Qe(6),lm=nm.range,cm=rm.range,hm=im.range,fm=om.range,pm=am.range,dm=sm.range,mm=um.range,vm=Je(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),ym=vm.range,_m=Je(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});_m.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Je(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var gm,xm=_m.range,bm=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},wm=function(t){return t=bm(Math.abs(t)),t?t[1]:NaN},Mm=function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}},Tm=function(t,e){t=t.toPrecision(e);t:for(var n,r=t.length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},Sm=function(t,e){var n=bm(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(gm=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+bm(t,Math.max(0,e+o-1))[0]},Em=function(t,e){var n=bm(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Am={"":Tm,"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Em(100*t,e)},r:Em,s:Sm,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},km=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,zm=function(t){return new tn(t)};tn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Cm,Pm=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],Lm=function(t){function e(t){function e(t){var e,i,u,_=d,g=m;if("c"===p)g=v(t)+g,t="";else{t=+t;var x=(t<0||1/t<0)&&(t*=-1,!0);if(t=v(t,f),x)for(e=-1,i=t.length,x=!1;++e<i;)if(u=t.charCodeAt(e),48<u&&u<58||"x"===p&&96<u&&u<103||"X"===p&&64<u&&u<71){x=!0;break}if(_=(x?"("===s?s:"-":"-"===s||"("===s?"":s)+_,g=g+("s"===p?Pm[8+gm/3]:"")+(x&&"("===s?")":""),y)for(e=-1,i=t.length;++e<i;)if(u=t.charCodeAt(e),48>u||u>57){g=(46===u?o+t.slice(e+1):t.slice(e))+g,t=t.slice(0,e);break}}h&&!l&&(t=r(t,1/0));var b=_.length+t.length+g.length,w=b<c?new Array(c-b+1).join(n):"";switch(h&&l&&(t=r(w+t,w.length?c-g.length:1/0),w=""),a){case"<":return _+t+g+w;case"=":return _+w+t+g;case"^":return w.slice(0,b=w.length>>1)+_+t+g+w.slice(b)}return w+_+t+g}t=zm(t);var n=t.fill,a=t.align,s=t.sign,u=t.symbol,l=t.zero,c=t.width,h=t.comma,f=t.precision,p=t.type,d="$"===u?i[0]:"#"===u&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",m="$"===u?i[1]:/[%p]/.test(p)?"%":"",v=Am[p],y=!p||/[defgprs%]/.test(p);return f=null==f?p?6:12:/[gprs]/.test(p)?Math.max(1,Math.min(21,f)):Math.max(0,Math.min(20,f)),e.toString=function(){return t+""},e}function n(t,n){var r=e((t=zm(t),t.type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(wm(n)/3))),o=Math.pow(10,-i),a=Pm[8+i/3];return function(t){return r(o*t)+a}}var r=t.grouping&&t.thousands?Mm(t.grouping,t.thousands):en,i=t.currency,o=t.decimal;return{format:e,formatPrefix:n}};nn({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var Im,Om=function(t){return Math.max(0,-wm(Math.abs(t)))},Rm=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(wm(e)/3)))-wm(Math.abs(t)))},Nm=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,wm(e)-wm(t))+1},Dm={"-":"",_:" ",0:"0"},jm=/^\s*\d+/,Bm=/^%/,Fm=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;er({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Um="%Y-%m-%dT%H:%M:%S.%LZ",Vm=Date.prototype.toISOString?nr:t.utcFormat(Um),qm=+new Date("2000-01-01T00:00:00.000Z")?rr:t.utcParse(Um),Zm=Array.prototype,Wm=Zm.map,Gm=Zm.slice,Hm={name:"implicit"},Xm=function(t){return function(){return t}},Ym=function(t){return+t},Km=[0,1],Jm=function(e,r,i){var o,a=e[0],s=e[e.length-1],u=n(a,s,null==r?10:r);switch(i=zm(null==i?",f":i),i.type){case"s":var l=Math.max(Math.abs(a),Math.abs(s));return null!=i.precision||isNaN(o=Rm(u,l))||(i.precision=o),t.formatPrefix(i,l);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=Nm(u,Math.max(Math.abs(a),Math.abs(s))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=Om(u))||(i.precision=o-2*("%"===i.type))}return t.format(i)},$m=function(t,e){t=t.slice();var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t},Qm=1e3,tv=60*Qm,ev=60*tv,nv=24*ev,rv=7*nv,iv=30*nv,ov=365*nv,av=function(){return Ir(Xd,Gd,Ld,Cd,kd,Ed,Td,yd,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},sv=function(){return Ir(_m,vm,nm,tm,$d,Kd,Td,yd,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},uv=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})},lv=uv("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),cv=uv("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),hv=uv("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),fv=uv("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),pv=Ip(ce(300,.5,0),ce(-240,.5,1)),dv=Ip(ce(-100,.75,.35),ce(80,1.5,.8)),mv=Ip(ce(260,.75,.35),ce(80,1.5,.8)),vv=ce(),yv=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return vv.h=360*t-100,vv.s=1.5-1.5*e,vv.l=.8-.9*e,vv+""},_v=Or(uv("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),gv=Or(uv("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),xv=Or(uv("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),bv=Or(uv("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),wv="http://www.w3.org/1999/xhtml",Mv={svg:"http://www.w3.org/2000/svg",xhtml:wv,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Tv=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Mv.hasOwnProperty(e)?{space:Mv[e],local:t}:t},Sv=function(t){var e=Tv(t);return(e.local?Dr:Nr)(e)},Ev=0;Br.prototype=jr.prototype={constructor:Br,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Av=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var kv=document.documentElement;if(!kv.matches){var zv=kv.webkitMatchesSelector||kv.msMatchesSelector||kv.mozMatchesSelector||kv.oMatchesSelector;Av=function(t){return function(){return zv.call(this,t)}}}}var Cv=Av,Pv={};if(t.event=null,"undefined"!=typeof document){var Lv=document.documentElement;"onmouseenter"in Lv||(Pv={mouseenter:"mouseover",mouseleave:"mouseout"})}var Iv=function(t,e,n){var r,i,o=Vr(t+""),a=o.length;{if(!(arguments.length<2)){for(s=e?Zr:qr,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value}},Ov=function(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n},Rv=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},Nv=function(t){var e=Ov();return e.changedTouches&&(e=e.changedTouches[0]),Rv(t,e)},Dv=function(t){return null==t?Gr:function(){return this.querySelector(t)}},jv=function(t){"function"!=typeof t&&(t=Dv(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new Pi(r,this._parents)},Bv=function(t){return null==t?Hr:function(){return this.querySelectorAll(t)}},Fv=function(t){"function"!=typeof t&&(t=Bv(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new Pi(r,i)},Uv=function(t){"function"!=typeof t&&(t=Cv(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new Pi(r,this._parents)},Vv=function(t){return new Array(t.length)},qv=function(){return new Pi(this._enter||this._groups.map(Vv),this._parents)};Xr.prototype={constructor:Xr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Zv=function(t){return function(){return t}},Wv="$",Gv=function(t,e){if(!t)return p=new Array(this.size()),l=-1,this.each(function(t){p[++l]=t}),p;var n=e?Kr:Yr,r=this._parents,i=this._groups;"function"!=typeof t&&(t=Zv(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],h=i[l],f=h.length,p=t.call(c,c&&c.__data__,l,r),d=p.length,m=s[l]=new Array(d),v=a[l]=new Array(d),y=u[l]=new Array(f);n(c,h,m,v,y,p,e);for(var _,g,x=0,b=0;x<d;++x)if(_=m[x]){for(x>=b&&(b=x+1);!(g=v[b])&&++b<d;);_._next=g||null}}return a=new Pi(a,r),a._enter=s,a._exit=u,a},Hv=function(){return new Pi(this._exit||this._groups.map(Vv),this._parents)},Xv=function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=e[s],c=n[s],h=l.length,f=a[s]=new Array(h),p=0;p<h;++p)(u=l[p]||c[p])&&(f[p]=u);for(;s<r;++s)a[s]=e[s];return new Pi(a,this._parents)},Yv=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},Kv=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Jr);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(e)}return new Pi(i,this._parents).order()},Jv=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},$v=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},Qv=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},ty=function(){var t=0;return this.each(function(){++t}),t},ey=function(){return!this.node()},ny=function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},ry=function(t,e){var n=Tv(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Qr:$r:"function"==typeof e?n.local?ri:ni:n.local?ei:ti)(n,e))},iy=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},oy=function(t,e,n){var r;return arguments.length>1?this.each((null==e?ii:"function"==typeof e?ai:oi)(t,e,null==n?"":n)):iy(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)},ay=function(t,e){return arguments.length>1?this.each((null==e?si:"function"==typeof e?li:ui)(t,e)):this.node()[t]};fi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var sy=function(t,e){var n=ci(t+"");if(arguments.length<2){for(var r=hi(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?yi:e?mi:vi)(n,e))},uy=function(t){return arguments.length?this.each(null==t?_i:("function"==typeof t?xi:gi)(t)):this.node().textContent},ly=function(t){return arguments.length?this.each(null==t?bi:("function"==typeof t?Mi:wi)(t)):this.node().innerHTML},cy=function(){return this.each(Ti)},hy=function(){return this.each(Si)},fy=function(t){var e="function"==typeof t?t:Sv(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},py=function(t,e){var n="function"==typeof t?t:Sv(t),r=null==e?Ei:"function"==typeof e?e:Dv(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},dy=function(){return this.each(Ai)},my=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},vy=function(t,e){return this.each(("function"==typeof e?Ci:zi)(t,e))},yy=[null];Pi.prototype=Li.prototype={constructor:Pi,select:jv,selectAll:Fv,filter:Uv,data:Gv,enter:qv,exit:Hv,merge:Xv,order:Yv,sort:Kv,call:Jv,nodes:$v,node:Qv,size:ty,empty:ey,each:ny,attr:ry,style:oy,property:ay,classed:sy,text:uy,html:ly,raise:cy,lower:hy,append:fy,insert:py,remove:dy,datum:my,on:Iv,dispatch:vy};var _y=function(t){return"string"==typeof t?new Pi([[document.querySelector(t)]],[document.documentElement]):new Pi([[t]],yy)},gy=function(t){return"string"==typeof t?new Pi([document.querySelectorAll(t)],[document.documentElement]):new Pi([null==t?[]:t],yy)},xy=function(t,e,n){arguments.length<3&&(n=e,e=Ov().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return Rv(t,r);return null},by=function(t,e){null==e&&(e=Ov().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=Rv(t,e[n]);return i},wy=Pe("start","end","interrupt"),My=[],Ty=0,Sy=1,Ey=2,Ay=3,ky=4,zy=5,Cy=6,Py=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};Ni(t,n,{name:e,index:r,group:i,on:wy,tween:My,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ty})},Ly=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){e=null==e?null:e+"";for(i in o)(n=o[i]).name===e?(r=n.state>Ey&&n.state<zy,n.state=Cy,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},Iy=function(t){return this.each(function(){Ly(this,t)})},Oy=function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Ri(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?Di:ji)(n,t,e))},Ry=function(t,e){var n;return("number"==typeof e?hp:e instanceof Vt?ap:(n=Vt(e))?(e=n,ap):mp)(t,e)},Ny=function(t,e){var n=Tv(t),r="transform"===n?wp:Ry;return this.attrTween(t,"function"==typeof e?(n.local?Wi:Zi)(n,r,Bi(this,"attr."+t,e)):null==e?(n.local?Ui:Fi)(n):(n.local?qi:Vi)(n,r,e))},Dy=function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Tv(t);return this.tween(n,(r.local?Gi:Hi)(r,e))},jy=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Xi:Yi)(e,t)):Ri(this.node(),e).delay},By=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ki:Ji)(e,t)):Ri(this.node(),e).duration},Fy=function(t){var e=this._id;return arguments.length?this.each($i(e,t)):Ri(this.node(),e).ease},Uy=function(t){"function"!=typeof t&&(t=Cv(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new lo(r,this._parents,this._name,this._id)},Vy=function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=e[s],c=n[s],h=l.length,f=a[s]=new Array(h),p=0;p<h;++p)(u=l[p]||c[p])&&(f[p]=u);for(;s<r;++s)a[s]=e[s];return new lo(a,this._parents,this._name,this._id)},qy=function(t,e){var n=this._id;return arguments.length<2?Ri(this.node(),n).on.on(t):this.each(to(n,t,e))},Zy=function(){return this.on("end.remove",eo(this._id))},Wy=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Dv(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,l=r[a],c=l.length,h=o[a]=new Array(c),f=0;f<c;++f)(s=l[f])&&(u=t.call(s,s.__data__,f,l))&&("__data__"in s&&(u.__data__=s.__data__),h[f]=u,Py(h[f],e,n,f,h,Ri(s,n)));return new lo(o,this._parents,e,n)},Gy=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Bv(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,h=0;h<c;++h)if(u=l[h]){for(var f,p=t.call(u,u.__data__,h,l),d=Ri(u,n),m=0,v=p.length;m<v;++m)(f=p[m])&&Py(f,e,n,m,p,d);o.push(p),a.push(u)}return new lo(o,a,e,n)},Hy=Li.prototype.constructor,Xy=function(){return new Hy(this._groups,this._parents)},Yy=function(t,e,n){var r="transform"==(t+="")?bp:Ry;return null==e?this.styleTween(t,no(t,r)).on("end.style."+t,ro(t)):this.styleTween(t,"function"==typeof e?oo(t,r,Bi(this,"style."+t,e)):io(t,r,e),n)},Ky=function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,ao(t,e,null==n?"":n))},Jy=function(t){return this.tween("text","function"==typeof t?uo(Bi(this,"text",t)):so(null==t?"":t+""))},$y=function(){for(var t=this._name,e=this._id,n=ho(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=Ri(a,e);Py(a,t,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new lo(r,this._parents,t,n)},Qy=0,t_=Li.prototype;lo.prototype=co.prototype={constructor:lo,select:Wy,selectAll:Gy,filter:Uy,merge:Vy,selection:Xy,transition:$y,call:t_.call,nodes:t_.nodes,node:t_.node,size:t_.size,empty:t_.empty,
each:t_.each,on:qy,attr:Ny,attrTween:Dy,style:Yy,styleTween:Ky,text:Jy,remove:Zy,tween:Oy,delay:jy,duration:By,ease:Fy};var e_={time:null,delay:0,duration:250,ease:_},n_=function(t){var e,n;t instanceof lo?(e=t._id,t=t._name):(e=ho(),(n=e_).time=Ve(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&Py(a,t,e,l,s,n||fo(a,e));return new lo(r,this._parents,t,e)};Li.prototype.interrupt=Iy,Li.prototype.transition=n_;var r_=[null],i_=function(t,e){var n,r,i=t.__transition;if(i){e=null==e?null:e+"";for(r in i)if((n=i[r]).state>Sy&&n.name===e)return new lo([[t]],r_,e,+r)}return null},o_=Array.prototype.slice,a_=function(t){return t},s_=1,u_=2,l_=3,c_=4,h_=1e-6,f_=function(){function t(t){var o,a=0;t.eachAfter(function(t){var n=t.children;n?(t.x=To(n),t.y=Eo(n)):(t.x=o?a+=e(t,o):0,t.y=0,o=t)});var s=ko(t),u=zo(t),l=s.x-e(s,u)/2,c=u.x+e(u,s)/2;return t.eachAfter(i?function(e){e.x=(e.x-t.x)*n,e.y=(t.y-e.y)*r}:function(e){e.x=(e.x-l)/(c-l)*n,e.y=(1-(t.y?e.y/t.y:1))*r})}var e=Mo,n=1,r=1,i=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(e){return arguments.length?(i=!1,n=+e[0],r=+e[1],t):i?null:[n,r]},t.nodeSize=function(e){return arguments.length?(i=!0,n=+e[0],r=+e[1],t):i?[n,r]:null},t},p_=function(t){var e,n,r,i,o=this,a=[o];do for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);while(a.length);return this},d_=function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},m_=function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},v_=function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},y_=function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},__=function(t){for(var e=this,n=Co(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},g_=function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},x_=function(){var t=[];return this.each(function(e){t.push(e)}),t},b_=function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},w_=function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e};No.prototype=Po.prototype={constructor:No,each:p_,eachAfter:m_,eachBefore:d_,sum:v_,sort:y_,path:__,ancestors:g_,descendants:x_,leaves:b_,links:w_,copy:Lo};var M_=function(t){for(var e,n=(t=t.slice()).length,r=null,i=r;n;){var o=new Do(t[n-1]);i=i?i.next=o:r=o,t[e]=t[--n]}return{head:r,tail:i}},T_=function(t){return Bo(M_(t),[])},S_=function(t){return Ho(t),t},E_=function(t){return function(){return t}},A_=function(){function t(t){return t.x=n/2,t.y=r/2,e?t.eachBefore($o(e)).eachAfter(Qo(i,.5)).eachBefore(ta(1)):t.eachBefore($o(Jo)).eachAfter(Qo(Ko,1)).eachAfter(Qo(i,t.r/Math.min(n,r))).eachBefore(ta(Math.min(n,r)/(2*t.r))),t}var e=null,n=1,r=1,i=Ko;return t.radius=function(n){return arguments.length?(e=Xo(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i="function"==typeof e?e:E_(+e),t):i},t},k_=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},z_=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,l=t.value&&(r-e)/t.value;++s<u;)o=a[s],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*l},C_=function(){function t(t){var a=t.height+1;return t.x0=t.y0=i,t.x1=n,t.y1=r/a,t.eachBefore(e(r,a)),o&&t.eachBefore(k_),t}function e(t,e){return function(n){n.children&&z_(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var r=n.x0,o=n.y0,a=n.x1-i,s=n.y1-i;a<r&&(r=a=(r+a)/2),s<o&&(o=s=(o+s)/2),n.x0=r,n.y0=o,n.x1=a,n.y1=s}}var n=1,r=1,i=0,o=!1;return t.round=function(e){return arguments.length?(o=!!e,t):o},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i=+e,t):i},t},P_="$",L_={depth:-1},I_={},O_=function(){function t(t){var r,i,o,a,s,u,l,c=t.length,h=new Array(c),f={};for(i=0;i<c;++i)r=t[i],s=h[i]=new No(r),null!=(u=e(r,i,t))&&(u+="")&&(l=P_+(s.id=u),f[l]=l in f?I_:s);for(i=0;i<c;++i)if(s=h[i],u=n(t[i],i,t),null!=u&&(u+="")){if(a=f[P_+u],!a)throw new Error("missing: "+u);if(a===I_)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=L_,o.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(Ro),o.parent=null,c>0)throw new Error("cycle");return o}var e=ea,n=na;return t.id=function(n){return arguments.length?(e=Yo(n),t):e},t.parentId=function(e){return arguments.length?(n=Yo(e),t):n},t};la.prototype=Object.create(No.prototype);var R_=function(){function t(t){var r=ca(t);if(r.eachAfter(e),r.parent.m=-r.z,r.eachBefore(n),u)t.eachBefore(i);else{var l=t,c=t,h=t;t.eachBefore(function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>h.depth&&(h=t)});var f=l===c?1:o(l,c)/2,p=f-l.x,d=a/(c.x+f+p),m=s/(h.depth||1);t.eachBefore(function(t){t.x=(t.x+p)*d,t.y=t.depth*m})}return t}function e(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e){sa(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+o(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+o(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var r,i=t,a=t,s=e,u=i.parent.children[0],l=i.m,c=a.m,h=s.m,f=u.m;s=oa(s),i=ia(i),s&&i;)u=ia(u),a=oa(a),a.a=t,r=s.z+h-i.z-l+o(s._,i._),r>0&&(aa(ua(s,t,n),t,r),l+=r,c+=r),h+=s.m,l+=i.m,f+=u.m,c+=a.m;s&&!oa(a)&&(a.t=s,a.m+=h-c),i&&!ia(u)&&(u.t=i,u.m+=l-f,n=t)}return n}function i(t){t.x*=a,t.y=t.depth*s}var o=ra,a=1,s=1,u=null;return t.separation=function(e){return arguments.length?(o=e,t):o},t.size=function(e){return arguments.length?(u=!1,a=+e[0],s=+e[1],t):u?null:[a,s]},t.nodeSize=function(e){return arguments.length?(u=!0,a=+e[0],s=+e[1],t):u?[a,s]:null},t},N_=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,l=t.value&&(i-n)/t.value;++s<u;)o=a[s],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*l},D_=(1+Math.sqrt(5))/2,j_=function t(e){function n(t,n,r,i,o){ha(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(D_),B_=function(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=o,t.eachBefore(e),a=[0],r&&t.eachBefore(k_),t}function e(t){var e=a[t.depth],r=t.x0+e,i=t.y0+e,o=t.x1-e,f=t.y1-e;o<r&&(r=o=(r+o)/2),f<i&&(i=f=(i+f)/2),t.x0=r,t.y0=i,t.x1=o,t.y1=f,t.children&&(e=a[t.depth+1]=s(t)/2,r+=h(t)-e,i+=u(t)-e,o-=l(t)-e,f-=c(t)-e,o<r&&(r=o=(r+o)/2),f<i&&(i=f=(i+f)/2),n(t,r,i,o,f))}var n=j_,r=!1,i=1,o=1,a=[0],s=Ko,u=Ko,l=Ko,c=Ko,h=Ko;return t.round=function(e){return arguments.length?(r=!!e,t):r},t.size=function(e){return arguments.length?(i=+e[0],o=+e[1],t):[i,o]},t.tile=function(e){return arguments.length?(n=Yo(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(s="function"==typeof e?e:E_(+e),t):s},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop()},t.paddingTop=function(e){return arguments.length?(u="function"==typeof e?e:E_(+e),t):u},t.paddingRight=function(e){return arguments.length?(l="function"==typeof e?e:E_(+e),t):l},t.paddingBottom=function(e){return arguments.length?(c="function"==typeof e?e:E_(+e),t):c},t.paddingLeft=function(e){return arguments.length?(h="function"==typeof e?e:E_(+e),t):h},t},F_=function(t,e,n,r,i){function o(t,e,n,r,i,a,s){if(t>=e-1){var l=u[t];return l.x0=r,l.y0=i,l.x1=a,l.y1=s,void 0}for(var h=c[t],f=n/2+h,p=t+1,d=e-1;p<d;){var m=p+d>>>1;c[m]<f?p=m+1:d=m}var v=c[p]-h,y=n-v;if(s-i>a-r){var _=(i*y+s*v)/n;o(t,p,v,r,i,a,_),o(p,e,y,r,_,a,s)}else{var g=(r*y+a*v)/n;o(t,p,v,r,i,g,s),o(p,e,y,g,i,a,s)}}var a,s,u=t.children,l=u.length,c=new Array(l+1);for(c[0]=s=a=0;a<l;++a)c[a+1]=s+=u[a].value;o(0,l,t.value,e,n,r,i)},U_=function(t,e,n,r,i){(1&t.depth?N_:z_)(t,e,n,r,i)},V_=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,l,c,h=-1,f=a.length,p=t.value;++h<f;){for(s=a[h],u=s.children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?z_(s,n,r,i,r+=(o-r)*s.value/p):N_(s,n,r,n+=(i-n)*s.value/p,o),p-=s.value}else t._squarify=a=ha(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(D_),q_=function(t,e){function n(){var n,i,o=r.length,a=0,s=0;for(n=0;n<o;++n)i=r[n],a+=i.x,s+=i.y;for(a=a/o-t,s=s/o-e,n=0;n<o;++n)i=r[n],i.x-=a,i.y-=s}var r;return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){r=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n},Z_=function(t){return function(){return t}},W_=function(){return 1e-6*(Math.random()-.5)},G_=function(t){function e(){function t(t,n,r,i,o){var s=t.data,p=t.r,d=h+p;{if(!s)return n>l+d||i<l-d||r>c+d||o<c-d;if(s.index>e){var m=l-s.x-s.vx,v=c-s.y-s.vy,y=m*m+v*v;y<d*d&&(0===m&&(m=W_(),y+=m*m),0===v&&(v=W_(),y+=v*v),y=(d-(y=Math.sqrt(y)))/y*a,u.vx+=(m*=y)*(d=(p*=p)/(f+p)),u.vy+=(v*=y)*d,s.vx-=m*(d=1-d),s.vy-=v*d)}}}for(var e,r,u,l,c,h,f,p=i.length,d=0;d<s;++d)for(r=F(i,fa,pa).visitAfter(n),e=0;e<p;++e)u=i[e],h=o[e],f=h*h,l=u.x+u.vx,c=u.y+u.vy,r.visit(t)}function n(t){if(t.data)return t.r=o[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function r(){if(i){var e,n=i.length;for(o=new Array(n),e=0;e<n;++e)o[e]=+t(i[e],e,i)}}var i,o,a=1,s=1;return"function"!=typeof t&&(t=Z_(null==t?1:+t)),e.initialize=function(t){i=t,r()},e.iterations=function(t){return arguments.length?(s=+t,e):s},e.strength=function(t){return arguments.length?(a=+t,e):a},e.radius=function(n){return arguments.length?(t="function"==typeof n?n:Z_(+n),r(),e):t},e},H_=function(t){function e(t){return 1/Math.min(c[t.source.index],c[t.target.index])}function n(e){for(var n=0,r=t.length;n<m;++n)for(var i,o,a,l,c,f,p,d=0;d<r;++d)i=t[d],o=i.source,a=i.target,l=a.x+a.vx-o.x-o.vx||W_(),c=a.y+a.vy-o.y-o.vy||W_(),f=Math.sqrt(l*l+c*c),f=(f-u[d])/f*e*s[d],l*=f,c*=f,a.vx-=l*(p=h[d]),a.vy-=c*p,o.vx+=l*(p=1-p),o.vy+=c*p}function r(){if(l){var e,n,r=l.length,p=t.length,d=o(l,f);for(e=0,c=new Array(r);e<r;++e)c[e]=0;for(e=0;e<p;++e)n=t[e],n.index=e,"object"!=typeof n.source&&(n.source=ma(d,n.source)),"object"!=typeof n.target&&(n.target=ma(d,n.target)),++c[n.source.index],++c[n.target.index];for(e=0,h=new Array(p);e<p;++e)n=t[e],h[e]=c[n.source.index]/(c[n.source.index]+c[n.target.index]);s=new Array(p),i(),u=new Array(p),a()}}function i(){if(l)for(var e=0,n=t.length;e<n;++e)s[e]=+p(t[e],e,t)}function a(){if(l)for(var e=0,n=t.length;e<n;++e)u[e]=+d(t[e],e,t)}var s,u,l,c,h,f=da,p=e,d=Z_(30),m=1;return null==t&&(t=[]),n.initialize=function(t){l=t,r()},n.links=function(e){return arguments.length?(t=e,r(),n):t},n.id=function(t){return arguments.length?(f=t,n):f},n.iterations=function(t){return arguments.length?(m=+t,n):m},n.strength=function(t){return arguments.length?(p="function"==typeof t?t:Z_(+t),i(),n):p},n.distance=function(t){return arguments.length?(d="function"==typeof t?t:Z_(+t),a(),n):d},n},X_=10,Y_=Math.PI*(3-Math.sqrt(5)),K_=function(t){function e(){n(),d.call("tick",a),s<u&&(p.stop(),d.call("end",a))}function n(){var e,n,r=t.length;for(s+=(c-s)*l,f.each(function(t){t(s)}),e=0;e<r;++e)n=t[e],null==n.fx?n.x+=n.vx*=h:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=h:(n.y=n.fy,n.vy=0)}function r(){for(var e,n=0,r=t.length;n<r;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var i=X_*Math.sqrt(n),o=n*Y_;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function i(e){return e.initialize&&e.initialize(t),e}var a,s=1,u=.001,l=1-Math.pow(u,1/300),c=0,h=.6,f=o(),p=We(e),d=Pe("tick","end");return null==t&&(t=[]),r(),a={tick:n,restart:function(){return p.restart(e),a},stop:function(){return p.stop(),a},nodes:function(e){return arguments.length?(t=e,r(),f.each(i),a):t},alpha:function(t){return arguments.length?(s=+t,a):s},alphaMin:function(t){return arguments.length?(u=+t,a):u},alphaDecay:function(t){return arguments.length?(l=+t,a):+l},alphaTarget:function(t){return arguments.length?(c=+t,a):c},velocityDecay:function(t){return arguments.length?(h=1-t,a):1-h},force:function(t,e){return arguments.length>1?(null==e?f.remove(t):f.set(t,i(e)),a):f.get(t)},find:function(e,n,r){var i,o,a,s,u,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)s=t[l],i=e-s.x,o=n-s.y,a=i*i+o*o,a<r&&(u=s,r=a);return u},on:function(t,e){return arguments.length>1?(d.on(t,e),a):d.on(t)}}},J_=function(){function t(t){var e,s=i.length,u=F(i,va,ya).visitAfter(n);for(a=t,e=0;e<s;++e)o=i[e],u.visit(r)}function e(){if(i){var t,e=i.length;for(s=new Array(e),t=0;t<e;++t)s[t]=+u(i[t],t,i)}}function n(t){var e,n,r,i,o,a=0;if(t.length){for(r=i=o=0;o<4;++o)(e=t[o])&&(n=e.value)&&(a+=n,r+=n*e.x,i+=n*e.y);t.x=r/a,t.y=i/a}else{e=t,e.x=e.data.x,e.y=e.data.y;do a+=s[e.data.index];while(e=e.next)}t.value=a}function r(t,e,n,r){if(!t.value)return!0;var i=t.x-o.x,u=t.y-o.y,f=r-e,p=i*i+u*u;if(f*f/h<p)return p<c&&(0===i&&(i=W_(),p+=i*i),0===u&&(u=W_(),p+=u*u),p<l&&(p=Math.sqrt(l*p)),o.vx+=i*t.value*a/p,o.vy+=u*t.value*a/p),!0;if(!(t.length||p>=c)){(t.data!==o||t.next)&&(0===i&&(i=W_(),p+=i*i),0===u&&(u=W_(),p+=u*u),p<l&&(p=Math.sqrt(l*p)));do t.data!==o&&(f=s[t.data.index]*a/p,o.vx+=i*f,o.vy+=u*f);while(t=t.next)}}var i,o,a,s,u=Z_(-30),l=1,c=1/0,h=.81;return t.initialize=function(t){i=t,e()},t.strength=function(n){return arguments.length?(u="function"==typeof n?n:Z_(+n),e(),t):u},t.distanceMin=function(e){return arguments.length?(l=e*e,t):Math.sqrt(l)},t.distanceMax=function(e){return arguments.length?(c=e*e,t):Math.sqrt(c)},t.theta=function(e){return arguments.length?(h=e*e,t):Math.sqrt(h)},t},$_=function(t){function e(t){for(var e,n=0,a=r.length;n<a;++n)e=r[n],e.vx+=(o[n]-e.x)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)i[e]=isNaN(o[e]=+t(r[e],e,r))?0:+a(r[e],e,r)}}var r,i,o,a=Z_(.1);return"function"!=typeof t&&(t=Z_(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(a="function"==typeof t?t:Z_(+t),n(),e):a},e.x=function(r){return arguments.length?(t="function"==typeof r?r:Z_(+r),n(),e):t},e},Q_=function(t){function e(t){for(var e,n=0,a=r.length;n<a;++n)e=r[n],e.vy+=(o[n]-e.y)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)i[e]=isNaN(o[e]=+t(r[e],e,r))?0:+a(r[e],e,r)}}var r,i,o,a=Z_(.1);return"function"!=typeof t&&(t=Z_(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(a="function"==typeof t?t:Z_(+t),n(),e):a},e.y=function(r){return arguments.length?(t="function"==typeof r?r:Z_(+r),n(),e):t},e},tg=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},eg=function(t){var e=t.document.documentElement,n=_y(t).on("dragstart.drag",tg,!0);"onselectstart"in e?n.on("selectstart.drag",tg,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")},ng=function(t){return function(){return t}};xa.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var rg=function(){function e(t){t.on("mousedown.drag",n).on("touchstart.drag",o).on("touchmove.drag",a).on("touchend.drag touchcancel.drag",s).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(){if(!c&&h.apply(this,arguments)){var e=u("mouse",f.apply(this,arguments),Nv,this,arguments);e&&(_y(t.event.view).on("mousemove.drag",r,!0).on("mouseup.drag",i,!0),eg(t.event.view),_a(),l=!1,e("start"))}}function r(){tg(),l=!0,d.mouse("drag")}function i(){_y(t.event.view).on("mousemove.drag mouseup.drag",null),ga(t.event.view,l),tg(),d.mouse("end")}function o(){if(h.apply(this,arguments)){var e,n,r=t.event.changedTouches,i=f.apply(this,arguments),o=r.length;for(e=0;e<o;++e)(n=u(r[e].identifier,i,xy,this,arguments))&&(_a(),n("start"))}}function a(){var e,n,r=t.event.changedTouches,i=r.length;for(e=0;e<i;++e)(n=d[r[e].identifier])&&(tg(),n("drag"))}function s(){var e,n,r=t.event.changedTouches,i=r.length;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),e=0;e<i;++e)(n=d[r[e].identifier])&&(_a(),n("end"))}function u(n,r,i,o,a){var s,u,l,c=i(r,n),h=m.copy();if(Wr(new xa(e,"beforestart",s,n,v,c[0],c[1],0,0,h),function(){return null!=(t.event.subject=s=p.apply(o,a))&&(u=s.x-c[0]||0,l=s.y-c[1]||0,!0)}))return function t(f){var p,m=c;switch(f){case"start":d[n]=t,p=v++;break;case"end":delete d[n],--v;case"drag":c=i(r,n),p=v}Wr(new xa(e,f,s,n,p,c[0]+u,c[1]+l,c[0]-m[0],c[1]-m[1],h),h.apply,h,[f,o,a])}}var l,c,h=ba,f=wa,p=Ma,d={},m=Pe("start","drag","end"),v=0;return e.filter=function(t){return arguments.length?(h="function"==typeof t?t:ng(!!t),e):h},e.container=function(t){return arguments.length?(f="function"==typeof t?t:ng(t),e):f},e.subject=function(t){return arguments.length?(p="function"==typeof t?t:ng(t),e):p},e.on=function(){var t=m.on.apply(m,arguments);return t===m?e:t},e},ig=function(t){return function(){return t}};Ea.prototype={constructor:Ea,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Ca(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ka(this,n),t=n,n=t.U),n.C=!1,r.C=!0,za(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(za(this,n),t=n,n=t.U),n.C=!1,r.C=!0,ka(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Ca(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,ka(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,za(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ka(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,za(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ka(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,za(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var og,ag,sg,ug,lg,cg=[],hg=[],fg=1e-6,pg=1e-12;es.prototype={constructor:es,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Ba(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){for(var i,o=n.site,a=n.halfedges,s=-1,u=a.length,l=e[a[u-1]],c=l.left===o?l.right:l.left;++s<u;)i=c,l=e[a[s]],c=l.left===o?l.right:l.left,i&&c&&r<i.index&&r<c.index&&Qa(o,i,c)<0&&t.push([o.data,i.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){var r,i=this,o=i._found||0,a=i.cells[o]||i.cells[o=0],s=t-a.site[0],u=e-a.site[1],l=s*s+u*u;do a=i.cells[r=o],o=null,a.halfedges.forEach(function(n){var r=i.edges[n],s=r.left;if(s!==a.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],h=u*u+c*c;h<l&&(l=h,o=s.index)}});while(null!==o);return i._found=r,null==n||l<=n*n?a.site:null}};var dg=function(){function t(t){return new es(t.map(function(r,i){var o=[Math.round(e(r,i,t)/fg)*fg,Math.round(n(r,i,t)/fg)*fg];return o.index=i,o.data=r,o}),r)}var e=Ta,n=Sa,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:ig(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:ig(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t},mg=function(t){return function(){return t}};rs.prototype={constructor:rs,scale:function(t){return 1===t?this:new rs(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new rs(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var vg=new rs(1,0,0);is.prototype=rs.prototype;var yg=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},_g=function(){function e(t){t.on("wheel.zoom",l).on("mousedown.zoom",c).on("dblclick.zoom",h).on("touchstart.zoom",f).on("touchmove.zoom",p).on("touchend.zoom touchcancel.zoom",d).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",us)}function n(t,e){return e=Math.max(g,Math.min(x,e)),e===t.k?t:new rs(e,t.x,t.y)}function r(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new rs(t.k,r,i)}function i(t,e){var n=Math.min(0,t.invertX(e[0][0])-b)||Math.max(0,t.invertX(e[1][0])-w),r=Math.min(0,t.invertY(e[0][1])-M)||Math.max(0,t.invertY(e[1][1])-T);return n||r?t.translate(n,r):t}function o(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function a(t,e,n){t.on("start.zoom",function(){s(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){s(this,arguments).end()}).tween("zoom",function(){var t=this,r=arguments,i=s(t,r),a=_.apply(t,r),u=n||o(a),l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=t.__zoom,h="function"==typeof e?e.apply(t,r):e,f=Ap(c.invert(u).concat(l/c.k),h.invert(u).concat(l/h.k));return function(t){if(1===t)t=h;else{var e=f(t),n=l/e[2];t=new rs(n,u[0]-e[0]*n,u[1]-e[1]*n)}i.zoom(null,t)}})}function s(t,e){for(var n,r=0,i=E.length;r<i;++r)if((n=E[r]).that===t)return n;return new u(t,e)}function u(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=_.apply(t,e)}function l(){function e(){o.wheel=null,o.end()}if(y.apply(this,arguments)){var o=s(this,arguments),a=this.__zoom,u=Math.max(g,Math.min(x,a.k*Math.pow(2,-t.event.deltaY*(t.event.deltaMode?120:1)/500))),l=Nv(this);if(o.wheel)o.mouse[0][0]===l[0]&&o.mouse[0][1]===l[1]||(o.mouse[1]=a.invert(o.mouse[0]=l)),clearTimeout(o.wheel);else{if(a.k===u)return;o.mouse=[l,a.invert(l)],Ly(this),o.start()}yg(),o.wheel=setTimeout(e,z),o.zoom("mouse",i(r(n(a,u),o.mouse[0],o.mouse[1]),o.extent))}}function c(){function e(){yg(),o.moved=!0,o.zoom("mouse",i(r(o.that.__zoom,o.mouse[0]=Nv(o.that),o.mouse[1]),o.extent))}function n(){a.on("mousemove.zoom mouseup.zoom",null),ga(t.event.view,o.moved),yg(),o.end()}if(!v&&y.apply(this,arguments)){var o=s(this,arguments),a=_y(t.event.view).on("mousemove.zoom",e,!0).on("mouseup.zoom",n,!0),u=Nv(this);eg(t.event.view),os(),o.mouse=[u,this.__zoom.invert(u)],Ly(this),o.start()}}function h(){if(y.apply(this,arguments)){var o=this.__zoom,s=Nv(this),u=o.invert(s),l=o.k*(t.event.shiftKey?.5:2),c=i(r(n(o,l),s,u),_.apply(this,arguments));yg(),S>0?_y(this).transition().duration(S).call(a,c,s):_y(this).call(e.transform,c)}}function f(){if(y.apply(this,arguments)){var e,n,r,i=s(this,arguments),o=t.event.changedTouches,a=o.length;for(os(),e=0;e<a;++e)n=o[e],r=xy(this,o,n.identifier),r=[r,this.__zoom.invert(r),n.identifier],i.touch0?i.touch1||(i.touch1=r):i.touch0=r;return m&&(m=clearTimeout(m),!i.touch1)?(i.end(),h.apply(this,arguments)):void(t.event.touches.length===a&&(m=setTimeout(function(){m=null},k),Ly(this),i.start()))}}function p(){var e,o,a,u,l=s(this,arguments),c=t.event.changedTouches,h=c.length;for(yg(),m&&(m=clearTimeout(m)),e=0;e<h;++e)o=c[e],a=xy(this,c,o.identifier),l.touch0&&l.touch0[2]===o.identifier?l.touch0[0]=a:l.touch1&&l.touch1[2]===o.identifier&&(l.touch1[0]=a);if(o=l.that.__zoom,l.touch1){var f=l.touch0[0],p=l.touch0[1],d=l.touch1[0],v=l.touch1[1],y=(y=d[0]-f[0])*y+(y=d[1]-f[1])*y,_=(_=v[0]-p[0])*_+(_=v[1]-p[1])*_;o=n(o,Math.sqrt(y/_)),a=[(f[0]+d[0])/2,(f[1]+d[1])/2],u=[(p[0]+v[0])/2,(p[1]+v[1])/2]}else{if(!l.touch0)return;a=l.touch0[0],u=l.touch0[1]}l.zoom("touch",i(r(o,a,u),l.extent))}function d(){var e,n,r=s(this,arguments),i=t.event.changedTouches,o=i.length;for(os(),v&&clearTimeout(v),v=setTimeout(function(){v=null},k),e=0;e<o;++e)n=i[e],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0||r.end()}var m,v,y=as,_=ss,g=0,x=1/0,b=-x,w=x,M=b,T=w,S=250,E=[],A=Pe("start","zoom","end"),k=500,z=150;return e.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",us),t!==n?a(t,e):n.interrupt().each(function(){s(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},e.scaleBy=function(t,n){e.scaleTo(t,function(){var t=this.__zoom.k,e="function"==typeof n?n.apply(this,arguments):n;return t*e})},e.scaleTo=function(t,a){e.transform(t,function(){var t=_.apply(this,arguments),e=this.__zoom,s=o(t),u=e.invert(s),l="function"==typeof a?a.apply(this,arguments):a;return i(r(n(e,l),s,u),t)})},e.translateBy=function(t,n,r){e.transform(t,function(){return i(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof r?r.apply(this,arguments):r),_.apply(this,arguments))})},u.prototype={start:function(){return 1===++this.active&&(this.index=E.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0===--this.active&&(E.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){Wr(new ns(e,t,this.that.__zoom),A.apply,A,[t,this.that,this.args])}},e.filter=function(t){return arguments.length?(y="function"==typeof t?t:mg(!!t),e):y},e.extent=function(t){return arguments.length?(_="function"==typeof t?t:mg([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):_},e.scaleExtent=function(t){return arguments.length?(g=+t[0],x=+t[1],e):[g,x]},e.translateExtent=function(t){return arguments.length?(b=+t[0][0],w=+t[1][0],M=+t[0][1],T=+t[1][1],e):[[b,M],[w,T]]},e.duration=function(t){return arguments.length?(S=+t,e):S},e.on=function(){var t=A.on.apply(A,arguments);return t===A?e:t},e},gg=function(t){return function(){return t}},xg=function(t,e,n){this.target=t,this.type=e,this.selection=n},bg=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},wg={name:"drag"},Mg={name:"space"},Tg={name:"handle"},Sg={name:"center"},Eg={name:"x",handles:["e","w"].map(cs),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Ag={name:"y",handles:["n","s"].map(cs),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},kg={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(cs),input:function(t){return t},output:function(t){return t}},zg={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Cg={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Pg={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Lg={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ig={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},Og=function(){return _s(kg)},Rg=Math.cos,Ng=Math.sin,Dg=Math.PI,jg=Dg/2,Bg=2*Dg,Fg=Math.max,Ug=function(){function t(t){var o,a,s,u,l,c,h=t.length,f=[],p=jl(h),d=[],m=[],v=m.groups=new Array(h),y=new Array(h*h);for(o=0,l=-1;++l<h;){for(a=0,c=-1;++c<h;)a+=t[l][c];f.push(a),d.push(jl(h)),o+=a}for(n&&p.sort(function(t,e){return n(f[t],f[e])}),r&&d.forEach(function(e,n){e.sort(function(e,i){return r(t[n][e],t[n][i])})}),o=Fg(0,Bg-e*h)/o,u=o?e:Bg/h,a=0,l=-1;++l<h;){for(s=a,c=-1;++c<h;){var _=p[l],g=d[_][c],x=t[_][g],b=a,w=a+=x*o;y[g*h+_]={index:_,subindex:g,startAngle:b,endAngle:w,value:x}}v[_]={index:_,startAngle:s,endAngle:a,value:f[_]},a+=u}for(l=-1;++l<h;)for(c=l-1;++c<h;){var M=y[c*h+l],T=y[l*h+c];(M.value||T.value)&&m.push(M.value<T.value?{source:T,target:M}:{source:M,target:T})}return i?m.sort(i):m}var e=0,n=null,r=null,i=null;return t.padAngle=function(n){return arguments.length?(e=Fg(0,n),t):e},t.sortGroups=function(e){return arguments.length?(n=e,t):n},t.sortSubgroups=function(e){return arguments.length?(r=e,t):r},t.sortChords=function(e){return arguments.length?(null==e?i=null:(i=gs(e))._=e,t):i&&i._},t},Vg=Array.prototype.slice,qg=function(t){return function(){return t}},Zg=function(){function t(){var t,s=Vg.call(arguments),u=e.apply(this,s),l=n.apply(this,s),c=+r.apply(this,(s[0]=u,s)),h=i.apply(this,s)-jg,f=o.apply(this,s)-jg,p=c*Rg(h),d=c*Ng(h),m=+r.apply(this,(s[0]=l,s)),v=i.apply(this,s)-jg,y=o.apply(this,s)-jg;if(a||(a=t=O()),a.moveTo(p,d),a.arc(0,0,c,h,f),h===v&&f===y||(a.quadraticCurveTo(0,0,m*Rg(v),m*Ng(v)),a.arc(0,0,m,v,y)),a.quadraticCurveTo(0,0,p,d),a.closePath(),t)return a=null,t+""||null}var e=xs,n=bs,r=ws,i=Ms,o=Ts,a=null;return t.radius=function(e){return arguments.length?(r="function"==typeof e?e:qg(+e),t):r},t.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:qg(+e),t):i},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:qg(+e),t):o},t.source=function(n){return arguments.length?(e=n,t):e},t.target=function(e){return arguments.length?(n=e,t):n},t.context=function(e){return arguments.length?(a=null==e?null:e,t):a},t},Wg=function(){return new Ss};Ss.prototype={constructor:Ss,reset:function(){this.s=this.t=0},add:function(t){Es(Mx,t,this.t),Es(this,Mx.s,this.s),this.s?this.t+=Mx.t:this.s=Mx.t},valueOf:function(){return this.s}};var Gg,Hg,Xg,Yg,Kg,Jg,$g,Qg,tx,ex,nx,rx,ix,ox,ax,sx,ux,lx,cx,hx,fx,px,dx,mx,vx,yx,_x,gx,xx,bx,wx,Mx=new Ss,Tx=1e-6,Sx=1e-12,Ex=Math.PI,Ax=Ex/2,kx=Ex/4,zx=2*Ex,Cx=180/Ex,Px=Ex/180,Lx=Math.abs,Ix=Math.atan,Ox=Math.atan2,Rx=Math.cos,Nx=Math.ceil,Dx=Math.exp,jx=Math.log,Bx=Math.pow,Fx=Math.sin,Ux=Math.sign||function(t){return t>0?1:t<0?-1:0},Vx=Math.sqrt,qx=Math.tan,Zx={Feature:function(t,e){Ps(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Ps(n[r].geometry,e)}},Wx={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ls(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ls(n[r],e,0)},Polygon:function(t,e){Is(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Is(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Ps(n[r],e)}},Gx=function(t,e){t&&Zx.hasOwnProperty(t.type)?Zx[t.type](t,e):Ps(t,e)},Hx=Wg(),Xx=Wg(),Yx={point:Cs,lineStart:Cs,lineEnd:Cs,polygonStart:function(){Hx.reset(),Yx.lineStart=Os,Yx.lineEnd=Rs},polygonEnd:function(){var t=+Hx;Xx.add(t<0?zx+t:t),this.lineStart=this.lineEnd=this.point=Cs},sphere:function(){Xx.add(zx)}},Kx=function(t){return Xx.reset(),Gx(t,Yx),2*Xx},Jx=Wg(),$x={point:Ws,lineStart:Hs,lineEnd:Xs,polygonStart:function(){$x.point=Ys,$x.lineStart=Ks,$x.lineEnd=Js,Jx.reset(),Yx.polygonStart()},polygonEnd:function(){Yx.polygonEnd(),$x.point=Ws,$x.lineStart=Hs,$x.lineEnd=Xs,Hx<0?(Jg=-(Qg=180),$g=-(tx=90)):Jx>Tx?tx=90:Jx<-Tx&&($g=-90),
ax[0]=Jg,ax[1]=Qg}},Qx=function(t){var e,n,r,i,o,a,s;if(tx=Qg=-(Jg=$g=1/0),ox=[],Gx(t,$x),n=ox.length){for(ox.sort(Qs),e=1,r=ox[0],o=[r];e<n;++e)i=ox[e],tu(r,i[0])||tu(r,i[1])?($s(r[0],i[1])>$s(r[0],r[1])&&(r[1]=i[1]),$s(i[0],r[1])>$s(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-(1/0),n=o.length-1,e=0,r=o[n];e<=n;r=i,++e)i=o[e],(s=$s(r[1],i[0]))>a&&(a=s,Jg=i[0],Qg=r[1])}return ox=ax=null,Jg===1/0||$g===1/0?[[NaN,NaN],[NaN,NaN]]:[[Jg,$g],[Qg,tx]]},tb={sphere:Cs,point:eu,lineStart:ru,lineEnd:au,polygonStart:function(){tb.lineStart=su,tb.lineEnd=uu},polygonEnd:function(){tb.lineStart=ru,tb.lineEnd=au}},eb=function(t){sx=ux=lx=cx=hx=fx=px=dx=mx=vx=yx=0,Gx(t,tb);var e=mx,n=vx,r=yx,i=e*e+n*n+r*r;return i<Sx&&(e=fx,n=px,r=dx,ux<Tx&&(e=lx,n=cx,r=hx),i=e*e+n*n+r*r,i<Sx)?[NaN,NaN]:[Ox(n,e)*Cx,ks(r/Vx(i))*Cx]},nb=function(t){return function(){return t}},rb=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n};hu.invert=hu;var ib,ob,ab,sb,ub,lb,cb,hb,fb,pb,db,mb=function(t){function e(e){return e=t(e[0]*Px,e[1]*Px),e[0]*=Cx,e[1]*=Cx,e}return t=fu(t[0]*Px,t[1]*Px,t.length>2?t[2]*Px:0),e.invert=function(e){return e=t.invert(e[0]*Px,e[1]*Px),e[0]*=Cx,e[1]*=Cx,e},e},vb=function(){function t(t,e){n.push(t=r(t,e)),t[0]*=Cx,t[1]*=Cx}function e(){var t=i.apply(this,arguments),e=o.apply(this,arguments)*Px,u=a.apply(this,arguments)*Px;return n=[],r=fu(-t[0]*Px,-t[1]*Px,0).invert,vu(s,e,u,1),t={type:"Polygon",coordinates:[n]},n=r=null,t}var n,r,i=nb([0,0]),o=nb(90),a=nb(6),s={point:t};return e.center=function(t){return arguments.length?(i="function"==typeof t?t:nb([+t[0],+t[1]]),e):i},e.radius=function(t){return arguments.length?(o="function"==typeof t?t:nb(+t),e):o},e.precision=function(t){return arguments.length?(a="function"==typeof t?t:nb(+t),e):a},e},yb=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Cs,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},_b=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=e[0],c=e[1],h=0,f=1,p=l-s,d=c-u;if(a=n-s,p||!(a>0)){if(a/=p,p<0){if(a<h)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>h&&(h=a)}if(a=i-s,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>h&&(h=a)}else if(p>0){if(a<h)return;a<f&&(f=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<h)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>h&&(h=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>h&&(h=a)}else if(d>0){if(a<h)return;a<f&&(f=a)}return h>0&&(t[0]=s+h*p,t[1]=u+h*d),f<1&&(e[0]=s+f*p,e[1]=u+f*d),!0}}}}},gb=function(t,e){return Lx(t[0]-e[0])<Tx&&Lx(t[1]-e[1])<Tx},xb=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(gb(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}s.push(n=new _u(r,t,null,!0)),u.push(n.o=new _u(r,null,n,!1)),s.push(n=new _u(a,t,null,!1)),u.push(n.o=new _u(a,null,n,!0))}}),s.length){for(u.sort(e),gu(s),gu(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,l=f.z,p=!p}while(!f.v);i.lineEnd()}}},bb=1e9,wb=-bb,Mb=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=xu(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}},Tb=Wg(),Sb={sphere:Cs,point:Cs,lineStart:bu,lineEnd:Cs,polygonStart:Cs,polygonEnd:Cs},Eb=function(t){return Tb.reset(),Gx(t,Sb),+Tb},Ab=[null,null],kb={type:"LineString",coordinates:Ab},zb=function(t,e){return Ab[0]=t,Ab[1]=e,Eb(kb)},Cb=function(t,e){var n=t[0]*Px,r=t[1]*Px,i=e[0]*Px,o=e[1]*Px,a=Rx(r),s=Fx(r),u=Rx(o),l=Fx(o),c=a*Rx(n),h=a*Fx(n),f=u*Rx(i),p=u*Fx(i),d=2*ks(Vx(zs(o-r)+a*u*zs(i-n))),m=Fx(d),v=d?function(t){var e=Fx(t*=d)/m,n=Fx(d-t)/m,r=n*c+e*f,i=n*h+e*p,o=n*s+e*l;return[Ox(i,r)*Cx,Ox(o,Vx(r*r+i*i))*Cx]}:function(){return[n*Cx,r*Cx]};return v.distance=d,v},Pb=function(t){return t},Lb=Wg(),Ib=Wg(),Ob={point:Cs,lineStart:Cs,lineEnd:Cs,polygonStart:function(){Ob.lineStart=zu,Ob.lineEnd=Lu},polygonEnd:function(){Ob.lineStart=Ob.lineEnd=Ob.point=Cs,Lb.add(Lx(Ib)),Ib.reset()},result:function(){var t=Lb/2;return Lb.reset(),t}},Rb=1/0,Nb=Rb,Db=-Rb,jb=Db,Bb={point:Iu,lineStart:Cs,lineEnd:Cs,polygonStart:Cs,polygonEnd:Cs,result:function(){var t=[[Rb,Nb],[Db,jb]];return Db=jb=-(Nb=Rb=1/0),t}},Fb=0,Ub=0,Vb=0,qb=0,Zb=0,Wb=0,Gb=0,Hb=0,Xb=0,Yb={point:Ou,lineStart:Ru,lineEnd:ju,polygonStart:function(){Yb.lineStart=Bu,Yb.lineEnd=Fu},polygonEnd:function(){Yb.point=Ou,Yb.lineStart=Ru,Yb.lineEnd=ju},result:function(){var t=Xb?[Gb/Xb,Hb/Xb]:Wb?[qb/Wb,Zb/Wb]:Vb?[Fb/Vb,Ub/Vb]:[NaN,NaN];return Fb=Ub=Vb=qb=Zb=Wb=Gb=Hb=Xb=0,t}};qu.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,zx)}},result:Cs},Zu.prototype={_circle:Wu(4.5),pointRadius:function(t){return this._circle=Wu(t),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}}};var Kb=function(t,e){function n(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),Gx(t,r(i))),i.result()}var r,i,o=4.5;return n.area=function(t){return Gx(t,r(Ob)),Ob.result()},n.bounds=function(t){return Gx(t,r(Bb)),Bb.result()},n.centroid=function(t){return Gx(t,r(Yb)),Yb.result()},n.projection=function(e){return arguments.length?(r=null==(t=e)?Pb:e.stream,n):t},n.context=function(t){return arguments.length?(i=null==(e=t)?new Zu:new qu(t),"function"!=typeof o&&i.pointRadius(o),n):e},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),n):o},n.projection(t).context(e)},Jb=Wg(),$b=function(t,e){var n=e[0],r=e[1],i=[Fx(n),-Rx(n),0],o=0,a=0;Jb.reset();for(var s=0,u=t.length;s<u;++s)if(c=(l=t[s]).length)for(var l,c,h=l[c-1],f=h[0],p=h[1]/2+kx,d=Fx(p),m=Rx(p),v=0;v<c;++v,f=_,d=x,m=b,h=y){var y=l[v],_=y[0],g=y[1]/2+kx,x=Fx(g),b=Rx(g),w=_-f,M=w>=0?1:-1,T=M*w,S=T>Ex,E=d*x;if(Jb.add(Ox(E*M*Fx(T),m*b+E*Rx(T))),o+=S?w+M*zx:w,S^f>=n^_>=n){var A=Us(Bs(h),Bs(y));Zs(A);var k=Us(i,A);Zs(k);var z=(S^w>=0?-1:1)*ks(k[2]);(r>z||r===z&&(A[0]||A[1]))&&(a+=S^w>=0?1:-1)}}return(o<-Tx||o<Tx&&Jb<-Tx)^1&a},Qb=function(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);v.point(n[0],n[1])}function u(){b.point=s,v.lineStart()}function l(){b.point=a,v.lineEnd()}function c(t,e){m.push([t,e]);var n=i(t,e);g.point(n[0],n[1])}function h(){g.lineStart(),m=[]}function f(){c(m[0][0],m[0][1]),g.lineEnd();var t,e,n,r,i=g.clean(),a=_.result(),s=a.length;if(m.pop(),p.push(m),m=null,s)if(1&i){if(n=a[0],(e=n.length-1)>0){for(x||(o.polygonStart(),x=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else s>1&&2&i&&a.push(a.pop().concat(a.shift())),d.push(a.filter(Gu))}var p,d,m,v=e(o),y=i.invert(r[0],r[1]),_=yb(),g=e(_),x=!1,b={point:a,lineStart:u,lineEnd:l,polygonStart:function(){b.point=c,b.lineStart=h,b.lineEnd=f,d=[],p=[]},polygonEnd:function(){b.point=a,b.lineStart=u,b.lineEnd=l,d=Jl(d);var t=$b(p,y);d.length?(x||(o.polygonStart(),x=!0),xb(d,Hu,t,n,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),d=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return b}},tw=Qb(function(){return!0},Xu,Ku,[-Ex,-Ax]),ew=function(t,e){function n(n,r,i,o){vu(o,t,e,i,n,r)}function r(t,e){return Rx(t)*Rx(e)>s}function i(t){var e,n,i,s,c;return{lineStart:function(){s=i=!1,c=1},point:function(h,f){var p,d=[h,f],m=r(h,f),v=u?m?0:a(h,f):m?a(h+(h<0?Ex:-Ex),f):0;if(!e&&(s=i=m)&&t.lineStart(),m!==i&&(p=o(e,d),(gb(e,p)||gb(d,p))&&(d[0]+=Tx,d[1]+=Tx,m=r(d[0],d[1]))),m!==i)c=0,m?(t.lineStart(),p=o(d,e),t.point(p[0],p[1])):(p=o(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(l&&e&&u^m){var y;v&n||!(y=o(d,e,!0))||(c=0,u?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!m||e&&gb(e,d)||t.point(d[0],d[1]),e=d,i=m,n=v},lineEnd:function(){i&&t.lineEnd(),e=null},clean:function(){return c|(s&&i)<<1}}}function o(t,e,n){var r=Bs(t),i=Bs(e),o=[1,0,0],a=Us(r,i),u=Fs(a,a),l=a[0],c=u-l*l;if(!c)return!n&&t;var h=s*u/c,f=-s*l/c,p=Us(o,a),d=qs(o,h),m=qs(a,f);Vs(d,m);var v=p,y=Fs(d,v),_=Fs(v,v),g=y*y-_*(Fs(d,d)-1);if(!(g<0)){var x=Vx(g),b=qs(v,(-y-x)/_);if(Vs(b,d),b=js(b),!n)return b;var w,M=t[0],T=e[0],S=t[1],E=e[1];T<M&&(w=M,M=T,T=w);var A=T-M,k=Lx(A-Ex)<Tx,z=k||A<Tx;if(!k&&E<S&&(w=S,S=E,E=w),z?k?S+E>0^b[1]<(Lx(b[0]-M)<Tx?S:E):S<=b[1]&&b[1]<=E:A>Ex^(M<=b[0]&&b[0]<=T)){var C=qs(v,(-y+x)/_);return Vs(C,d),[b,js(C)]}}}function a(e,n){var r=u?t:Ex-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var s=Rx(t),u=s>0,l=Lx(s)>Tx;return Qb(r,i,n,u?[0,-t]:[-Ex,t-Ex])},nw=function(t){return{stream:Ju(t)}};$u.prototype={constructor:$u,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var rw=16,iw=Rx(30*Px),ow=function(t,e){return+e?nl(t,e):el(t)},aw=Ju({point:function(t,e){this.stream.point(t*Px,e*Px)}}),sw=function(){return ol(sl).scale(155.424).center([0,33.6442])},uw=function(){return sw().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},lw=function(){function t(t){var e=t[0],n=t[1];return s=null,i.point(e,n),s||(o.point(e,n),s)||(a.point(e,n),s)}function e(){return n=r=null,t}var n,r,i,o,a,s,u=uw(),l=sw().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=sw().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(t,e){s=[t,e]}};return t.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?l:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:u).invert(t)},t.stream=function(t){return n&&r===t?n:n=ul([u.stream(r=t),l.stream(t),c.stream(t)])},t.precision=function(t){return arguments.length?(u.precision(t),l.precision(t),c.precision(t),e()):u.precision()},t.scale=function(e){return arguments.length?(u.scale(e),l.scale(.35*e),c.scale(e),t.translate(u.translate())):u.scale()},t.translate=function(t){if(!arguments.length)return u.translate();var n=u.scale(),r=+t[0],s=+t[1];return i=u.translate(t).clipExtent([[r-.455*n,s-.238*n],[r+.455*n,s+.238*n]]).stream(h),o=l.translate([r-.307*n,s+.201*n]).clipExtent([[r-.425*n+Tx,s+.12*n+Tx],[r-.214*n-Tx,s+.234*n-Tx]]).stream(h),a=c.translate([r-.205*n,s+.212*n]).clipExtent([[r-.214*n+Tx,s+.166*n+Tx],[r-.115*n-Tx,s+.234*n-Tx]]).stream(h),e()},t.fitExtent=function(e,n){return Qu(t,e,n)},t.fitSize=function(e,n){return tl(t,e,n)},t.scale(1070)},cw=ll(function(t){return Vx(2/(1+t))});cw.invert=cl(function(t){return 2*ks(t/2)});var hw=function(){return rl(cw).scale(124.75).clipAngle(179.999)},fw=ll(function(t){return(t=As(t))&&t/Fx(t)});fw.invert=cl(function(t){return t});var pw=function(){return rl(fw).scale(79.4188).clipAngle(179.999)};hl.invert=function(t,e){return[t,2*Ix(Dx(e))-Ax]};var dw=function(){return fl(hl).scale(961/zx)},mw=function(){return ol(dl).scale(109.5).parallels([30,30])};ml.invert=ml;var vw=function(){return rl(ml).scale(152.63)},yw=function(){return ol(vl).scale(131.154).center([0,13.9389])};yl.invert=cl(Ix);var _w=function(){return rl(yl).scale(144.049).clipAngle(60)},gw=function(){function t(){return i=o=null,a}var e,n,r,i,o,a,s=1,u=0,l=0,c=Pb,h=null,f=Pb;return a={stream:function(t){return i&&o===t?i:i=c(f(o=t))},clipExtent:function(i){return arguments.length?(f=null==i?(h=e=n=r=null,Pb):xu(h=+i[0][0],e=+i[0][1],n=+i[1][0],r=+i[1][1]),t()):null==h?null:[[h,e],[n,r]]},scale:function(e){return arguments.length?(c=_l(s=+e,u,l),t()):s},translate:function(e){return arguments.length?(c=_l(s,u=+e[0],l=+e[1]),t()):[u,l]},fitExtent:function(t,e){return Qu(a,t,e)},fitSize:function(t,e){return tl(a,t,e)}}};gl.invert=cl(ks);var xw=function(){return rl(gl).scale(249.5).clipAngle(90+Tx)};xl.invert=cl(function(t){return 2*Ix(t)});var bw=function(){return rl(xl).scale(250).clipAngle(142)};bl.invert=function(t,e){return[-e,2*Ix(Dx(t))-Ax]};var ww=function(){var t=fl(bl),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)};t.version=wl,t.bisect=El,t.bisectRight=El,t.bisectLeft=Al,t.ascending=Ml,t.bisector=Tl,t.descending=kl,t.deviation=Pl,t.extent=Ll,t.histogram=Zl,t.thresholdFreedmanDiaconis=Gl,t.thresholdScott=Hl,t.thresholdSturges=ql,t.max=Xl,t.mean=Yl,t.median=Kl,t.merge=Jl,t.min=$l,t.pairs=Ql,t.permute=tc,t.quantile=Wl,t.range=jl,t.scan=ec,t.shuffle=nc,t.sum=rc,t.ticks=Vl,t.tickStep=n,t.transpose=ic,t.variance=Cl,t.zip=oc,t.entries=hc,t.keys=lc,t.values=cc,t.map=o,t.set=h,t.nest=sc,t.randomUniform=fc,t.randomNormal=pc,t.randomLogNormal=dc,t.randomBates=vc,t.randomIrwinHall=mc,t.randomExponential=yc,t.easeLinear=f,t.easeQuad=m,t.easeQuadIn=p,t.easeQuadOut=d,t.easeQuadInOut=m,t.easeCubic=_,t.easeCubicIn=v,t.easeCubicOut=y,t.easeCubicInOut=_,t.easePoly=bc,t.easePolyIn=gc,t.easePolyOut=xc,t.easePolyInOut=bc,t.easeSin=b,t.easeSinIn=g,t.easeSinOut=x,t.easeSinInOut=b,t.easeExp=T,t.easeExpIn=w,t.easeExpOut=M,t.easeExpInOut=T,t.easeCircle=A,t.easeCircleIn=S,t.easeCircleOut=E,t.easeCircleInOut=A,t.easeBounce=z,t.easeBounceIn=k,t.easeBounceOut=z,t.easeBounceInOut=C,t.easeBack=Dc,t.easeBackIn=Rc,t.easeBackOut=Nc,t.easeBackInOut=Dc,t.easeElastic=Vc,t.easeElasticIn=Uc,t.easeElasticOut=Vc,t.easeElasticInOut=qc,t.polygonArea=Zc,t.polygonCentroid=Wc,t.polygonHull=Hc,t.polygonContains=Xc,t.polygonLength=Yc,t.path=O,t.quadtree=F,t.queue=Y,t.arc=bh,t.area=Th,t.line=Mh,t.pie=Ah,t.radialArea=Ch,t.radialLine=zh,t.symbol=Kh,t.symbols=Yh,t.symbolCircle=Ph,t.symbolCross=Lh,t.symbolDiamond=Rh,t.symbolSquare=Uh,t.symbolStar=Fh,t.symbolTriangle=qh,t.symbolWye=Xh,t.curveBasisClosed=Qh,t.curveBasisOpen=tf,t.curveBasis=$h,t.curveBundle=ef,t.curveCardinalClosed=rf,t.curveCardinalOpen=of,t.curveCardinal=nf,t.curveCatmullRomClosed=sf,t.curveCatmullRomOpen=uf,t.curveCatmullRom=af,t.curveLinearClosed=lf,t.curveLinear=wh,t.curveMonotoneX=Pt,t.curveMonotoneY=Lt,t.curveNatural=cf,t.curveStep=hf,t.curveStepAfter=Dt,t.curveStepBefore=Nt,t.stack=mf,t.stackOffsetExpand=vf,t.stackOffsetNone=pf,t.stackOffsetSilhouette=yf,t.stackOffsetWiggle=_f,t.stackOrderAscending=gf,t.stackOrderDescending=xf,t.stackOrderInsideOut=bf,t.stackOrderNone=df,t.stackOrderReverse=wf,t.color=Vt,t.rgb=Gt,t.hsl=Kt,t.lab=te,t.hcl=se,t.cubehelix=ce,t.interpolate=vp,t.interpolateArray=lp,t.interpolateDate=cp,t.interpolateNumber=hp,t.interpolateObject=fp,t.interpolateRound=yp,t.interpolateString=mp,t.interpolateTransformCss=bp,t.interpolateTransformSvg=wp,t.interpolateZoom=Ap,t.interpolateRgb=ap,t.interpolateRgbBasis=sp,t.interpolateRgbBasisClosed=up,t.interpolateHsl=kp,t.interpolateHslLong=zp,t.interpolateLab=ke,t.interpolateHcl=Cp,t.interpolateHclLong=Pp,t.interpolateCubehelix=Lp,t.interpolateCubehelixLong=Ip,t.interpolateBasis=rp,t.interpolateBasisClosed=ip,t.quantize=Op,t.dispatch=Pe,t.dsvFormat=jp,t.csvParse=Fp,t.csvParseRows=Up,t.csvFormat=Vp,t.csvFormatRows=qp,t.tsvParse=Wp,t.tsvParseRows=Gp,t.tsvFormat=Hp,t.tsvFormatRows=Xp,t.request=Yp,t.html=Jp,t.json=$p,t.text=Qp,t.xml=td,t.csv=nd,t.tsv=rd,t.now=Ve,t.timer=We,t.timerFlush=Ge,t.timeout=pd,t.interval=dd,t.timeInterval=Je,t.timeMillisecond=yd,t.timeMilliseconds=_d,t.timeSecond=Td,t.timeSeconds=Sd,t.timeMinute=Ed,t.timeMinutes=Ad,t.timeHour=kd,t.timeHours=zd,t.timeDay=Cd,t.timeDays=Pd,t.timeWeek=Ld,t.timeWeeks=Bd,t.timeSunday=Ld,t.timeSundays=Bd,t.timeMonday=Id,t.timeMondays=Fd,t.timeTuesday=Od,t.timeTuesdays=Ud;t.timeWednesday=Rd;t.timeWednesdays=Vd,t.timeThursday=Nd,t.timeThursdays=qd,t.timeFriday=Dd,t.timeFridays=Zd,t.timeSaturday=jd,t.timeSaturdays=Wd,t.timeMonth=Gd,t.timeMonths=Hd,t.timeYear=Xd,t.timeYears=Yd,t.utcMillisecond=yd,t.utcMilliseconds=_d,t.utcSecond=Td,t.utcSeconds=Sd,t.utcMinute=Kd,t.utcMinutes=Jd,t.utcHour=$d,t.utcHours=Qd,t.utcDay=tm,t.utcDays=em,t.utcWeek=nm,t.utcWeeks=lm,t.utcSunday=nm,t.utcSundays=lm,t.utcMonday=rm,t.utcMondays=cm,t.utcTuesday=im,t.utcTuesdays=hm,t.utcWednesday=om,t.utcWednesdays=fm,t.utcThursday=am,t.utcThursdays=pm,t.utcFriday=sm,t.utcFridays=dm,t.utcSaturday=um,t.utcSaturdays=mm,t.utcMonth=vm,t.utcMonths=ym,t.utcYear=_m,t.utcYears=xm,t.formatLocale=Lm,t.formatDefaultLocale=nn,t.formatSpecifier=zm,t.precisionFixed=Om,t.precisionPrefix=Rm,t.precisionRound=Nm,t.isoFormat=Vm,t.isoParse=qm,t.timeFormatLocale=sn,t.timeFormatDefaultLocale=er,t.scaleBand=or,t.scalePoint=sr,t.scaleIdentity=yr,t.scaleLinear=vr,t.scaleLog=Tr,t.scaleOrdinal=ir,t.scaleImplicit=Hm,t.scalePow=Er,t.scaleSqrt=Ar,t.scaleQuantile=kr,t.scaleQuantize=zr,t.scaleThreshold=Cr,t.scaleTime=av,t.scaleUtc=sv,t.schemeCategory10=lv,t.schemeCategory20b=cv,t.schemeCategory20c=hv,t.schemeCategory20=fv,t.scaleSequential=Rr,t.interpolateCubehelixDefault=pv,t.interpolateRainbow=yv,t.interpolateWarm=dv,t.interpolateCool=mv,t.interpolateViridis=_v,t.interpolateMagma=gv,t.interpolateInferno=xv,t.interpolatePlasma=bv,t.creator=Sv,t.customEvent=Wr,t.local=jr,t.matcher=Cv,t.mouse=Nv,t.namespace=Tv,t.namespaces=Mv,t.select=_y,t.selectAll=gy,t.selection=Li,t.selector=Dv,t.selectorAll=Bv,t.touch=xy,t.touches=by,t.window=iy,t.active=i_,t.interrupt=Ly,t.transition=co,t.axisTop=go,t.axisRight=xo,t.axisBottom=bo,t.axisLeft=wo,t.cluster=f_,t.hierarchy=Po,t.pack=A_,t.packSiblings=S_,t.packEnclose=T_,t.partition=C_,t.stratify=O_,t.tree=R_,t.treemap=B_,t.treemapBinary=F_,t.treemapDice=z_,t.treemapSlice=N_,t.treemapSliceDice=U_,t.treemapSquarify=j_,t.treemapResquarify=V_,t.forceCenter=q_,t.forceCollide=G_,t.forceLink=H_,t.forceManyBody=J_,t.forceSimulation=K_,t.forceX=$_,t.forceY=Q_,t.drag=rg,t.dragDisable=eg,t.dragEnable=ga,t.voronoi=dg,t.zoom=_g,t.zoomIdentity=vg,t.zoomTransform=is,t.brush=Og,t.brushX=vs,t.brushY=ys,t.brushSelection=ms,t.chord=Ug,t.ribbon=Zg,t.geoAlbers=uw,t.geoAlbersUsa=lw,t.geoArea=Kx,t.geoAzimuthalEqualArea=hw,t.geoAzimuthalEqualAreaRaw=cw,t.geoAzimuthalEquidistant=pw,t.geoAzimuthalEquidistantRaw=fw,t.geoBounds=Qx,t.geoCentroid=eb,t.geoCircle=vb,t.geoClipExtent=Mb,t.geoConicConformal=mw,t.geoConicConformalRaw=dl,t.geoConicEqualArea=sw,t.geoConicEqualAreaRaw=sl,t.geoConicEquidistant=yw,t.geoConicEquidistantRaw=vl,t.geoDistance=zb,t.geoEquirectangular=vw,t.geoEquirectangularRaw=ml,t.geoGnomonic=_w,t.geoGnomonicRaw=yl,t.geoGraticule=Au,t.geoGraticule10=ku,t.geoIdentity=gw,t.geoInterpolate=Cb,t.geoLength=Eb,t.geoMercator=dw,t.geoMercatorRaw=hl,t.geoOrthographic=xw,t.geoOrthographicRaw=gl,t.geoPath=Kb,t.geoProjection=rl,t.geoProjectionMutator=il,t.geoRotation=mb,t.geoStereographic=bw,t.geoStereographicRaw=xl,t.geoStream=Gx,t.geoTransform=nw,t.geoTransverseMercator=ww,t.geoTransverseMercatorRaw=bl,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function i(t){return t.split(/[\/?#]/)}function o(t,e){var n=e.replace(/\?/g,"\\?").replace(/\*/g,"([^/?#]+?)").replace(/\.\./,".*"),r=new RegExp("^"+n+"$"),i=t.match(r);if(i)return i.slice(1)}function a(t,e){var n;return function(){clearTimeout(n),n=setTimeout(t,e)}}function s(t){v=a(p,1),P[S](A,v),P[S](k,v),L[S](N,d),t&&p(!0)}function u(){this.$=[],b(this),D.on("stop",this.s.bind(this)),D.on("emit",this.e.bind(this))}function l(t){return t.replace(/^\/|\/$/,"")}function c(t){return"string"==typeof t}function h(t){return(t||O.href).replace(w,"")}function f(t){return"#"===y[0]?(t||O.href||"").split(y)[1]||"":(O?h(t):t||"").replace(y,"")}function p(t){var e=0===U;if(!(C<=U)&&(U++,F.push(function(){var e=f();(t||e!==_)&&(D[z]("emit",e),_=e)}),e)){for(var n;n=F.shift();)n();U=0}}function d(t){if(!(1!==t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var e=t.target;e&&"A"!==e.nodeName;)e=e.parentNode;!e||"A"!==e.nodeName||e[E]("download")||!e[E]("href")||e.target&&"_self"!==e.target||e.href.indexOf(O.href.match(w)[0])===-1||e.href!==O.href&&(e.href.split("#")[0]===O.href.split("#")[0]||"#"!==y[0]&&0!==h(e.href).indexOf(y)||"#"===y[0]&&e.href.split(y)[0]!==O.href.split(y)[0]||!m(f(e.href),e.title||L.title))||t.preventDefault()}}function m(t,e,n){return I?(t=y+l(t),e=e||L.title,n?I.replaceState(null,e,t):I.pushState(null,e,t),L.title=e,B=!1,p(),B):D[z]("emit",f(t))}var v,y,_,g,x,b=r(n(111)),w=/^.+?\/\/+[^\/]+/,M="EventListener",T="remove"+M,S="add"+M,E="hasAttribute",A="popstate",k="hashchange",z="trigger",C=3,P="undefined"!=typeof window&&window,L="undefined"!=typeof document&&document,I=P&&history,O=P&&(I.location||P.location),R=u.prototype,N=L&&L.ontouchstart?"touchstart":"click",D=b(),j=!1,B=!1,F=[],U=0;R.m=function(t,e,n){!c(t)||e&&!c(e)?e?this.r(t,e):this.r("@",t):m(t,e,n||!1)},R.s=function(){this.off("*"),this.$=[]},R.e=function(t){this.$.concat("@").some(function(e){var n=("@"===e?g:x)(l(t),l(e));if("undefined"!=typeof n)return this[z].apply(null,[e].concat(n)),B=!0},this)},R.r=function(t,e){"@"!==t&&(t="/"+l(t),this.$.push(t)),this.on(t,e)};var V=new u,q=V.m.bind(V);q.create=function(){var t=new u,e=t.m.bind(t);return e.stop=t.s.bind(t),e},q.base=function(t){y=t||"#",_=f()},q.exec=function(){p(!0)},q.parser=function(t,e){t||e||(g=i,x=o),t&&(g=t),e&&(x=e)},q.query=function(){var t={},e=O.href||_;return e.replace(/[?&](.+?)=([^&]*)/g,function(e,n,r){t[n]=r}),t},q.stop=function(){j&&(P&&(P[T](A,v),P[T](k,v),L[T](N,d)),D[z]("stop"),j=!1)},q.start=function(t){j||(P&&("interactive"===document.readyState||"complete"===document.readyState?s(t):document.onreadystatechange=function(){"interactive"===document.readyState&&setTimeout(function(){s(t)},1)}),j=!0)},q.base(),q.parser(),t.exports=q},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-article-link",'<p if="{article}"> <a href="{article.url}" target="_blank" rel="noopener noreferrer"> {article.title} </a> </p>',"","",function(t){function e(t){return t&&t.__esModule?t:{default:t}}var r=this,i=n(92),o=e(i);this.on("update",function(){var t=r.i18n.getLocale();r.article=o.default[t][r.opts.for]})})}).call(e,n(1))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.routeToStation=e.routeToCountry=e.routeToContinent=e.routeToExplorer=e.routeToArticle=e.routeToIntro=e.station=e.country=e.continent=e.explorer=e.article=e.intro=e.STEPS=void 0;var i=n(4),o=r(i),a=(e.STEPS=["manila","scandinavia","france","usa","argentina"],e.intro=function(t){return"/"+t+"/#intro"},e.article=function(t){return"/"+t+"/#main"}),s=(e.explorer=function(t){return"/"+t+"/explore"},e.continent=function(t,e){return"/"+t+"/explore/"+e}),u=e.country=function(t,e){return"/"+t+"/explore/countries/"+e},l=e.station=function(t,e){return"/"+t+"/explore/stations/"+e};e.routeToIntro=function(t){document.location.href="/"+t+"/#intro"},e.routeToArticle=function(t){(0,o.default)(a(t))},e.routeToExplorer=function(t){(0,o.default)(a(t))},e.routeToContinent=function(t,e){(0,o.default)(s(t,e))},e.routeToCountry=function(t,e){(0,o.default)(u(t,e))},e.routeToStation=function(t,e){(0,o.default)(l(t,e))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.requestStationList=e.hideStationDetails=e.RECEIVE_STATION_LIST_DATA=e.REQUEST_STATION_LIST_DATA=e.RECEIVE_STATION_DETAILS_DATA=e.REQUEST_STATION_DETAILS_DATA=e.HIDE_STATION_DETAILS=e.SHOW_STATION_DETAILS=e.SHOW_STATION_LIST=void 0;var o=n(3),a=i(o),s=n(2),u=r(s),l=e.SHOW_STATION_LIST="SHOW_STATION_LIST",c=e.SHOW_STATION_DETAILS="SHOW_STATION_DETAILS",h=e.HIDE_STATION_DETAILS="HIDE_STATION_DETAILS",f=e.REQUEST_STATION_DETAILS_DATA="REQUEST_STATION_DETAILS_DATA",p=e.RECEIVE_STATION_DETAILS_DATA="RECEIVE_STATION_DETAILS_DATA",d=e.REQUEST_STATION_LIST_DATA="REQUEST_STATION_LIST_DATA",m=e.RECEIVE_STATION_LIST_DATA="RECEIVE_STATION_LIST_DATA",v="/data/sealevel_context_data.csv",y="/data/sealevel_viz_whole_timeseries.csv",_=function(t){var e=t.isFetchingOverviewData,n=t.items;return!(e||n)},g=function(t){var e=t.isFetchingFullData,n=t.tides;return!(e||n)},x=(e.hideStationDetails=function(){return{type:h}},function(t){return{type:c,data:t}}),b=function(t){return{type:p,data:t}},w=function(){return{type:f}},M=function(t){return u.default.mapValues(t,function(t){return(0,u.default)(t[0]).pickBy(function(t,e){return!isNaN(e)&&t}).map(function(t,e){return{tide:parseFloat(t),year:e}}).value()})},T=function(t){return function(e){e(w()),a.csv(y,function(n){var r=u.default.groupBy(n,"id"),i=M(r);e(b(i)),e(x(t))})}},S=function(t){return function(e,n){return e(g(n().explorer)?T(t):x(t))}},E=function(t){var e=t.country,n=t.continent,r=t.station;return{type:l,country:e,continent:n,station:r}},A=function(t){return{type:m,data:t}},k=function(){return{type:d}},z=function(t){return u.default.map(t,function(t,e){return{c02_emissions:t.c02_emissions,coastal_population2010_sum:t.coastal_population2010_sum,continent:t.continent,country:t.country,id:t.id,latitude:t.latitude,location:t.location,longitude:t.longitude,total_population2010_sum:t.total_population2010_sum,trend_1985_2015:t.trend_1985_2015,trend_longest:t.trend_longest,timeseries:(0,u.default)(t).pickBy(function(t,e){return!isNaN(e)&&t}).reduce(function(t,e,n){return t[n]=parseFloat(e),t},[])}})},C=function(t){return function(e){e(k()),a.csv(v,function(n){var r=z(n);e(A(r)),e(E(t))})}};e.requestStationList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n){e(_(n().explorer)?C(t):E(t)),t.station&&e(S(t.station))}}},function(t,e,n){var r=n(76);t.exports=Function.prototype.bind||r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.fetchAnimationDataIfNeeded=e.RECEIVE_ANIMATION_DATA=e.REQUEST_ANIMATION_DATA=void 0;var o=n(3),a=i(o),s=n(2),u=r(s),l=e.REQUEST_ANIMATION_DATA="REQUEST_ANIMATION_DATA",c=e.RECEIVE_ANIMATION_DATA="RECEIVE_ANIMATION_DATA",h="/data/sealevel_context_data.csv",f="/data/sealevel_viz_psmsl_1985_2015.csv",p=function(t){return!t.isFetching||!t.items},d=function(t,e){return u.default.map(e,function(e,n){var r=u.default.find(t,{id:n});return{lngLat:[r.longitude,r.latitude],timeseries:e.reduce(function(t,e){var n=e.year,r=e.tide;return t[n]=parseFloat(r),t},[])}})},m=function(t){return{type:c,data:t}},v=function(){return{type:l}},y=function(){return function(t){t(v()),a.csv(h,function(e){a.csv(f,function(n){var r=u.default.groupBy(n,"id"),i=d(e,r);return t(m(i))})})}};e.fetchAnimationDataIfNeeded=function(){return function(t,e){if(p(e().animation))return t(y())}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.SET_STEP="SET_STEP";e.setStep=function(t){return{type:n,id:t}}},function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(){for(var t,e=0,r=arguments.length,i={};e<r;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new n(i)}function n(t){this._=t}function r(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function i(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function o(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=a,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}var a={value:function(){}};n.prototype=e.prototype={constructor:n,on:function(t,e){var n,a=this._,s=r(t+"",a),u=-1,l=s.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++u<l;)if(n=(t=s[u]).type)a[n]=o(a[n],t.name,e);else if(null==e)for(n in a)a[n]=o(a[n],t.name,null);return this}for(;++u<l;)if((n=(t=s[u]).type)&&(n=i(a[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new n(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}},t.dispatch=e,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Vt.hasOwnProperty(e)?{space:Vt[e],local:t}:t}function n(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ut&&e.documentElement.namespaceURI===Ut?e.createElement(t):e.createElementNS(n,t)}}function r(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function i(t){var i=e(t);return(i.local?r:n)(i)}function o(){return new a}function a(){this._="@"+(++qt).toString(36)}function s(t,e,n){return t=u(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function u(e,n,r){return function(i){var o=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=o}}}function l(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function c(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function h(t,e,n){var r=Xt.hasOwnProperty(t.type)?s:u;return function(i,o,a){var s,u=this.__on,l=r(e,o,a);if(u)for(var c=0,h=u.length;c<h;++c)if((s=u[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=e);this.addEventListener(t.type,l,n),s={type:t.type,name:t.name,value:e,listener:l,capture:n},u?u.push(s):this.__on=[s]}}function f(t,e,n){var r,i,o=l(t+""),a=o.length;{if(!(arguments.length<2)){for(s=e?h:c,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,f=0,p=s.length;f<p;++f)for(r=0,u=s[f];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value}}function p(e,n,r,i){
var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=o}}function d(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function m(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function v(t){var e=d();return e.changedTouches&&(e=e.changedTouches[0]),m(t,e)}function y(){}function _(t){return null==t?y:function(){return this.querySelector(t)}}function g(t){"function"!=typeof t&&(t=_(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new Rt(r,this._parents)}function x(){return[]}function b(t){return null==t?x:function(){return this.querySelectorAll(t)}}function w(t){"function"!=typeof t&&(t=b(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new Rt(r,i)}function M(t){"function"!=typeof t&&(t=Ht(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new Rt(r,this._parents)}function T(t){return new Array(t.length)}function S(){return new Rt(this._enter||this._groups.map(T),this._parents)}function E(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function A(t){return function(){return t}}function k(t,e,n,r,i,o){for(var a,s=0,u=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new E(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function z(t,e,n,r,i,o,a){var s,u,l,c={},h=e.length,f=o.length,p=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(p[s]=l=Kt+a.call(u,u.__data__,s,e),l in c?i[s]=u:c[l]=u);for(s=0;s<f;++s)l=Kt+a.call(t,o[s],s,o),(u=c[l])?(r[s]=u,u.__data__=o[s],c[l]=null):n[s]=new E(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&c[p[s]]===u&&(i[s]=u)}function C(t,e){if(!t)return p=new Array(this.size()),l=-1,this.each(function(t){p[++l]=t}),p;var n=e?z:k,r=this._parents,i=this._groups;"function"!=typeof t&&(t=A(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],h=i[l],f=h.length,p=t.call(c,c&&c.__data__,l,r),d=p.length,m=s[l]=new Array(d),v=a[l]=new Array(d),y=u[l]=new Array(f);n(c,h,m,v,y,p,e);for(var _,g,x=0,b=0;x<d;++x)if(_=m[x]){for(x>=b&&(b=x+1);!(g=v[b])&&++b<d;);_._next=g||null}}return a=new Rt(a,r),a._enter=s,a._exit=u,a}function P(){return new Rt(this._exit||this._groups.map(T),this._parents)}function L(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=e[s],c=n[s],h=l.length,f=a[s]=new Array(h),p=0;p<h;++p)(u=l[p]||c[p])&&(f[p]=u);for(;s<r;++s)a[s]=e[s];return new Rt(a,this._parents)}function I(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this}function O(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=R);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(e)}return new Rt(i,this._parents).order()}function R(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function N(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function D(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function j(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function B(){var t=0;return this.each(function(){++t}),t}function F(){return!this.node()}function U(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this}function V(t){return function(){this.removeAttribute(t)}}function q(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Z(t,e){return function(){this.setAttribute(t,e)}}function W(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function G(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function H(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function X(t,n){var r=e(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((null==n?r.local?q:V:"function"==typeof n?r.local?H:G:r.local?W:Z)(r,n))}function Y(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function K(t){return function(){this.style.removeProperty(t)}}function J(t,e,n){return function(){this.style.setProperty(t,e,n)}}function $(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Q(t,e,n){var r;return arguments.length>1?this.each((null==e?K:"function"==typeof e?$:J)(t,e,null==n?"":n)):Y(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)}function tt(t){return function(){delete this[t]}}function et(t,e){return function(){this[t]=e}}function nt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function rt(t,e){return arguments.length>1?this.each((null==e?tt:"function"==typeof e?nt:et)(t,e)):this.node()[t]}function it(t){return t.trim().split(/^|\s+/)}function ot(t){return t.classList||new at(t)}function at(t){this._node=t,this._names=it(t.getAttribute("class")||"")}function st(t,e){for(var n=ot(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ut(t,e){for(var n=ot(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function lt(t){return function(){st(this,t)}}function ct(t){return function(){ut(this,t)}}function ht(t,e){return function(){(e.apply(this,arguments)?st:ut)(this,t)}}function ft(t,e){var n=it(t+"");if(arguments.length<2){for(var r=ot(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?ht:e?lt:ct)(n,e))}function pt(){this.textContent=""}function dt(t){return function(){this.textContent=t}}function mt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function vt(t){return arguments.length?this.each(null==t?pt:("function"==typeof t?mt:dt)(t)):this.node().textContent}function yt(){this.innerHTML=""}function _t(t){return function(){this.innerHTML=t}}function gt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function xt(t){return arguments.length?this.each(null==t?yt:("function"==typeof t?gt:_t)(t)):this.node().innerHTML}function bt(){this.nextSibling&&this.parentNode.appendChild(this)}function wt(){return this.each(bt)}function Mt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tt(){return this.each(Mt)}function St(t){var e="function"==typeof t?t:i(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Et(){return null}function At(t,e){var n="function"==typeof t?t:i(t),r=null==e?Et:"function"==typeof e?e:_(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function kt(){var t=this.parentNode;t&&t.removeChild(this)}function zt(){return this.each(kt)}function Ct(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Pt(t,e,n){var r=Y(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Lt(t,e){return function(){return Pt(this,t,e)}}function It(t,e){return function(){return Pt(this,t,e.apply(this,arguments))}}function Ot(t,e){return this.each(("function"==typeof e?It:Lt)(t,e))}function Rt(t,e){this._groups=t,this._parents=e}function Nt(){return new Rt([[document.documentElement]],Jt)}function Dt(t){return"string"==typeof t?new Rt([[document.querySelector(t)]],[document.documentElement]):new Rt([[t]],Jt)}function jt(t){return"string"==typeof t?new Rt([document.querySelectorAll(t)],[document.documentElement]):new Rt([null==t?[]:t],Jt)}function Bt(t,e,n){arguments.length<3&&(n=e,e=d().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return m(t,r);return null}function Ft(t,e){null==e&&(e=d().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=m(t,e[n]);return i}var Ut="http://www.w3.org/1999/xhtml",Vt={svg:"http://www.w3.org/2000/svg",xhtml:Ut,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},qt=0;a.prototype=o.prototype={constructor:a,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Zt=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var Wt=document.documentElement;if(!Wt.matches){var Gt=Wt.webkitMatchesSelector||Wt.msMatchesSelector||Wt.mozMatchesSelector||Wt.oMatchesSelector;Zt=function(t){return function(){return Gt.call(this,t)}}}}var Ht=Zt,Xt={};if(t.event=null,"undefined"!=typeof document){var Yt=document.documentElement;"onmouseenter"in Yt||(Xt={mouseenter:"mouseover",mouseleave:"mouseout"})}E.prototype={constructor:E,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Kt="$";at.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Jt=[null];Rt.prototype=Nt.prototype={constructor:Rt,select:g,selectAll:w,filter:M,data:C,enter:S,exit:P,merge:L,order:I,sort:O,call:N,nodes:D,node:j,size:B,empty:F,each:U,attr:X,style:Q,property:rt,classed:ft,text:vt,html:xt,raise:wt,lower:Tt,append:St,insert:At,remove:zt,datum:Ct,on:f,dispatch:Ot},t.creator=i,t.local=o,t.matcher=Ht,t.mouse=v,t.namespace=e,t.namespaces=Vt,t.select=Dt,t.selectAll=jt,t.selection=Nt,t.selector=_,t.selectorAll=b,t.touch=Bt,t.touches=Ft,t.window=Y,t.customEvent=p,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){"use strict";var r=n(105),i=n(75),o="function"==typeof Symbol&&"symbol"==typeof Symbol(),a=Object.prototype.toString,s=function(t){return"function"==typeof t&&"[object Function]"===a.call(t)},u=function(){var t={};try{Object.defineProperty(t,"x",{enumerable:!1,value:t});for(var e in t)return!1;return t.x===t}catch(t){return!1}},l=Object.defineProperty&&u(),c=function(t,e,n,r){(!(e in t)||s(r)&&r())&&(l?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},h=function(t,e){var n=arguments.length>2?arguments[2]:{},a=r(e);o&&(a=a.concat(Object.getOwnPropertySymbols(e))),i(a,function(r){c(t,r,e[r],n[r])})};h.supportsDescriptors=!!l,t.exports=h},function(t,e){t.exports="<p>Neben dem steigenden oder sinkendem Meer zeigt die Visualisierung auch den weltweiten Ausstoß von Kohlendioxid. Der verstärkte Ausstoß dieses Gases seit der Industrialisierung hat dazu beigetragen, dass sich die Erde im vergangen Jahrhundert um ein Grad erwärmt hat. Die Ozeane haben diese zusätzliche Wärme zu 80 Prozent absorbiert. Wärmeres Wasser dehnt sich stärker aus, benötigt mehr Platz. Die Folge: Die Meere überfluten Küstenstriche.</p> <p>Bei einem wärmerem Klima wird das ewige Eis immer dünner. Die Pole sind massiv vom Klimawandel betroffen, die Gletscher schrumpfen und die Wassermasse der Ozeane wird entsprechend grösser.</p> "},function(t,e){t.exports="<p>En plus de localiser les endroits où la mer monte et descend, cette visualisation montre aussi les émissions de CO₂ dans le monde. L&#39;augmentation des émissions de ce gaz depuis l&#39;industrialisation a participé au réchauffement d&#39;un degré de la terre lors du siècle dernier. L&#39;océan a absorbé 80 % de cette chaleur supplémentaire. Des eaux plus chaudes s&#39;étendent plus fortement car elles ont besoin de plus d&#39;espace. Conséquence : les mers inondent les bandes côtières.</p> <p>Avec un climat plus chaud, les glaces éternelles se réduisent en peau de chagrin. Les pôles nord et sud sont en première ligne face au réchauffement climatique, les glaciers fondent et la masse d&#39;eau des océans s&#39;agrandit en conséquence.</p> "},function(t,e){"use strict";var n=Function.prototype.toString,r=/^\s*class /,i=function(t){try{var e=n.call(t),i=e.replace(/\/\/.*\n/g,""),o=i.replace(/\/\*[.\s\S]*\*\//g,""),a=o.replace(/\n/gm," ").replace(/ {2}/g," ");return r.test(a)}catch(t){return!1}},o=function(t){try{return!i(t)&&(n.call(t),!0)}catch(t){return!1}},a=Object.prototype.toString,s="[object Function]",u="[object GeneratorFunction]",l="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(l)return o(t);if(i(t))return!1;var e=a.call(t);return e===s||e===u}},function(t,e,n){var r=n(102),i=r.Symbol;t.exports=i},function(t,e,n){function r(t){if(!a(t)||i(t)!=s)return!1;var e=o(t);if(null===e)return!0;var n=h.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}var i=n(96),o=n(98),a=n(103),s="[object Object]",u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,f=c.call(Object);t.exports=r},function(t,e,n){var r,r;(function(e,n){!function(e){t.exports=e()}(function(){var t;return function t(e,n,i){function o(s,u){if(!n[s]){if(!e[s]){var l="function"==typeof r&&r;if(!u&&l)return r(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){var n=e[s][1][t];return o(n?n:t)},h,h.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,n,r){!function(e,i){"object"==typeof r&&"undefined"!=typeof n?n.exports=i():"function"==typeof t&&t.amd?t(i):e.glMatrix=i()}(this,function(){"use strict";function t(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}function e(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function n(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function r(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function i(){var t=new Float32Array(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function o(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t}function a(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t}function s(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function u(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function l(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function h(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],p=e[11],d=e[12],m=e[13],v=e[14],y=e[15],_=n*s-r*a,g=n*u-i*a,x=n*l-o*a,b=r*u-i*s,w=r*l-o*s,M=i*l-o*u,T=c*m-h*d,S=c*v-f*d,E=c*y-p*d,A=h*v-f*m,k=h*y-p*m,z=f*y-p*v,C=_*z-g*k+x*A+b*E-w*S+M*T;return C?(C=1/C,t[0]=(s*z-u*k+l*A)*C,t[1]=(i*k-r*z-o*A)*C,t[2]=(m*M-v*w+y*b)*C,t[3]=(f*w-h*M-p*b)*C,t[4]=(u*E-a*z-l*S)*C,t[5]=(n*z-i*E+o*S)*C,t[6]=(v*x-d*M-y*g)*C,t[7]=(c*M-f*x+p*g)*C,t[8]=(a*k-s*E+l*T)*C,t[9]=(r*E-n*k-o*T)*C,t[10]=(d*w-m*x+y*_)*C,t[11]=(h*x-c*w-p*_)*C,t[12]=(s*S-a*A-u*T)*C,t[13]=(n*A-r*S+i*T)*C,t[14]=(m*g-d*b-v*_)*C,t[15]=(c*b-h*g+f*_)*C,t):null}function f(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],m=e[12],v=e[13],y=e[14],_=e[15],g=n[0],x=n[1],b=n[2],w=n[3];return t[0]=g*r+x*s+b*h+w*m,t[1]=g*i+x*u+b*f+w*v,t[2]=g*o+x*l+b*p+w*y,t[3]=g*a+x*c+b*d+w*_,g=n[4],x=n[5],b=n[6],w=n[7],t[4]=g*r+x*s+b*h+w*m,t[5]=g*i+x*u+b*f+w*v,t[6]=g*o+x*l+b*p+w*y,t[7]=g*a+x*c+b*d+w*_,g=n[8],x=n[9],b=n[10],w=n[11],t[8]=g*r+x*s+b*h+w*m,t[9]=g*i+x*u+b*f+w*v,t[10]=g*o+x*l+b*p+w*y,t[11]=g*a+x*c+b*d+w*_,g=n[12],x=n[13],b=n[14],w=n[15],t[12]=g*r+x*s+b*h+w*m,t[13]=g*i+x*u+b*f+w*v,t[14]=g*o+x*l+b*p+w*y,t[15]=g*a+x*c+b*d+w*_,t}function p(t,e,n){var r,i,o,a,s,u,l,c,h,f,p,d,m=n[0],v=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*y+e[12],t[13]=e[1]*m+e[5]*v+e[9]*y+e[13],t[14]=e[2]*m+e[6]*v+e[10]*y+e[14],t[15]=e[3]*m+e[7]*v+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=f,t[10]=p,t[11]=d,t[12]=r*m+s*v+h*y+e[12],t[13]=i*m+u*v+f*y+e[13],t[14]=o*m+l*v+p*y+e[14],t[15]=a*m+c*v+d*y+e[15]),t}function d(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function m(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=u*i+f*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=f*i-u*r,t}function v(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=u*i+f*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=f*i-u*r,t}function y(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t}function _(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t}var g=(t(),n(),{vec3:{transformMat3:e},vec4:{transformMat4:r},mat2:{create:i,rotate:o,scale:a},mat3:{create:s,fromRotation:u},mat4:{create:l,identity:c,translate:p,scale:d,multiply:f,perspective:y,rotateX:m,rotateZ:v,invert:h,ortho:_}});return g})},{}],2:[function(e,n,r){!function(e,i){"object"==typeof r&&"undefined"!=typeof n?n.exports=i():"function"==typeof t&&t.amd?t(i):e.ShelfPack=i()}(this,function(){function t(t,e,n){n=n||{},this.w=t||64,this.h=e||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function e(t,e,n){this.x=0,this.y=t,this.w=this.free=e,this.h=n}function n(t,e,n,r,i,o,a){this.id=t,this.x=e,this.y=n,this.w=r,this.h=i,this.maxw=o||r,this.maxh=a||i,this.refcount=0}return t.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var n,r,i,o,a=[],s=0;s<t.length;s++)if(n=t[s].w||t[s].width,r=t[s].h||t[s].height,i=t[s].id,n&&r){if(o=this.packOne(n,r,i),!o)continue;e.inPlace&&(t[s].x=o.x,t[s].y=o.y,t[s].id=o.id),a.push(o)}if(this.shelves.length>0){for(var u=0,l=0,c=0;c<this.shelves.length;c++){var h=this.shelves[c];l+=h.h,u=Math.max(h.w-h.free,u)}this.resize(u,l)}return a},t.prototype.packOne=function(t,n,r){var i,o,a,s,u={freebin:-1,shelf:-1,waste:1/0},l=0;if("string"==typeof r||"number"==typeof r){if(i=this.getBin(r))return this.ref(i),i;"number"==typeof r&&(this.maxId=Math.max(r,this.maxId))}else r=++this.maxId;for(s=0;s<this.freebins.length;s++){if(i=this.freebins[s],n===i.maxh&&t===i.maxw)return this.allocFreebin(s,t,n,r);n>i.maxh||t>i.maxw||n<=i.maxh&&t<=i.maxw&&(a=i.maxw*i.maxh-t*n,a<u.waste&&(u.waste=a,u.freebin=s))}for(s=0;s<this.shelves.length;s++)if(o=this.shelves[s],l+=o.h,!(t>o.free)){if(n===o.h)return this.allocShelf(s,t,n,r);n>o.h||n<o.h&&(a=(o.h-n)*t,a<u.waste&&(u.freebin=-1,u.waste=a,u.shelf=s))}if(u.freebin!==-1)return this.allocFreebin(u.freebin,t,n,r);if(u.shelf!==-1)return this.allocShelf(u.shelf,t,n,r);if(n<=this.h-l&&t<=this.w)return o=new e(l,this.w,n),this.allocShelf(this.shelves.push(o)-1,t,n,r);if(this.autoResize){var c,h,f,p;return c=h=this.h,f=p=this.w,(f<=c||t>f)&&(p=2*Math.max(t,f)),(c<f||n>c)&&(h=2*Math.max(n,c)),this.resize(p,h),this.packOne(t,n,r)}return null},t.prototype.allocFreebin=function(t,e,n,r){var i=this.freebins.splice(t,1)[0];return i.id=r,i.w=e,i.h=n,i.refcount=0,this.bins[r]=i,this.ref(i),i},t.prototype.allocShelf=function(t,e,n,r){var i=this.shelves[t],o=i.alloc(e,n,r);return this.bins[r]=o,this.ref(o),o},t.prototype.getBin=function(t){return this.bins[t]},t.prototype.ref=function(t){if(1===++t.refcount){var e=t.h;this.stats[e]=(0|this.stats[e])+1}return t.refcount},t.prototype.unref=function(t){return 0===t.refcount?0:(0===--t.refcount&&(this.stats[t.h]--,delete this.bins[t.id],this.freebins.push(t)),t.refcount)},t.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},t.prototype.resize=function(t,e){this.w=t,this.h=e;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(t);return!0},e.prototype.alloc=function(t,e,r){if(t>this.free||e>this.h)return null;var i=this.x;return this.x+=t,this.free-=t,new n(r,i,this.y,t,e,t,this.h)},e.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},t})},{}],3:[function(t,e,n){function r(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}e.exports=r,r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){"undefined"==typeof e&&(e=1e-6);var n,r,i,o,a;for(i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if(n=0,r=1,i=t,i<n)return n;if(i>r)return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},{}],4:[function(e,n,r){!function(e,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof t&&t.amd?t(["exports"],i):i(e.WhooTS=e.WhooTS||{})}(this,function(t){function e(t,e,r,i,o,a){a=a||{};var s=t+"?"+["bbox="+n(r,i,o),"format="+(a.format||"image/png"),"service="+(a.service||"WMS"),"version="+(a.version||"1.1.1"),"request="+(a.request||"GetMap"),"srs="+(a.srs||"EPSG:3857"),"width="+(a.width||256),"height="+(a.height||256),"layers="+e].join("&");return s}function n(t,e,n){e=Math.pow(2,n)-e-1;var i=r(256*t,256*e,n),o=r(256*(t+1),256*(e+1),n);return i[0]+","+i[1]+","+o[0]+","+o[1]}function r(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n),i=t*r-2*Math.PI*6378137/2,o=e*r-2*Math.PI*6378137/2;return[i,o]}t.getURL=e,t.getTileBBox=n,t.getMercCoords=r,Object.defineProperty(t,"__esModule",{value:!0})})},{}],5:[function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r=e&&e.length,o=r?e[0]*n:t.length,s=i(t,0,o,n,!0),u=[];if(!s)return u;var l,c,f,p,d,m,v;if(r&&(s=h(t,e,s,n)),t.length>80*n){l=f=t[0],c=p=t[1];for(var y=n;y<o;y+=n)d=t[y],m=t[y+1],d<l&&(l=d),m<c&&(c=m),d>f&&(f=d),m>p&&(p=m);v=Math.max(f-l,p-c)}return a(s,u,n,l,c,v),u}function i(t,e,n,r,i){var o,a;if(i===P(t,e,n,r)>0)for(o=e;o<n;o+=r)a=k(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=k(o,t[o],t[o+1],a);return a&&w(a,a.next)&&(z(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do if(n=!1,r.steiner||!w(r,r.next)&&0!==b(r.prev,r,r.next))r=r.next;else{if(z(r),r=e=r.prev,r===r.next)return null;n=!0}while(n||r!==e);return e}function a(t,e,n,r,i,h,f){if(t){!f&&h&&m(t,r,i,h);for(var p,d,v=t;t.prev!==t.next;)if(p=t.prev,d=t.next,h?u(t,r,i,h):s(t))e.push(p.i/n),e.push(t.i/n),e.push(d.i/n),z(t),t=d.next,v=d.next;else if(t=d,t===v){f?1===f?(t=l(t,e,n),a(t,e,n,r,i,h,2)):2===f&&c(t,e,n,r,i,h):a(o(t),e,n,r,i,h,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(b(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(g(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&b(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,a=t.next;if(b(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=y(s,u,e,n,r),f=y(l,c,e,n,r),p=t.nextZ;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&g(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&g(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function l(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!w(i,o)&&M(i,r,r.next,o)&&S(i,o)&&S(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),z(r),z(r.next),r=t=o),r=r.next}while(r!==t);return r}function c(t,e,n,r,i,s){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&x(u,l)){var c=A(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,e,n,r,i,s),void a(c,e,n,r,i,s)}l=l.next}u=u.next}while(u!==t)}function h(t,e,n,r){var a,s,u,l,c,h=[];for(a=0,s=e.length;a<s;a++)u=e[a]*r,l=a<s-1?e[a+1]*r:t.length,c=i(t,u,l,r,!1),c===c.next&&(c.steiner=!0),h.push(_(c));for(h.sort(f),a=0;a<h.length;a++)p(h[a],n),n=o(n,n.next);return n}function f(t,e){return t.x-e.x}function p(t,e){if(e=d(t,e)){var n=A(e,t);o(n,n.next)}}function d(t,e){var n,r=e,i=t.x,o=t.y,a=-(1/0);do{if(o<=r.y&&o>=r.next.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,h=n.y,f=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&g(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),(u<f||u===f&&r.x>n.x)&&S(r,t)&&(n=r,f=u)),r=r.next;return n}function m(t,e,n,r){var i=t;do null===i.z&&(i.z=y(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,v(i)}function v(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0===s?(i=r,r=r.nextZ,u--):0!==u&&r?n.z<=r.z?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--):(i=n,n=n.nextZ,s--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1);return t}function y(t,e,n,r,i){return t=32767*(t-n)/i,e=32767*(e-r)/i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function _(t){var e=t,n=t;do e.x<n.x&&(n=e),e=e.next;while(e!==t);return n}function g(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!T(t,e)&&S(t,e)&&S(e,t)&&E(t,e)}function b(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function w(t,e){return t.x===e.x&&t.y===e.y}function M(t,e,n,r){return!!(w(t,e)&&w(n,r)||w(t,r)&&w(n,e))||b(t,e,n)>0!=b(t,e,r)>0&&b(n,r,t)>0!=b(n,r,e)>0}function T(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&M(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function S(t,e){return b(t.prev,t,t.next)<0?b(t,e,t.next)>=0&&b(t,t.prev,e)>=0:b(t,e,t.prev)<0||b(t,t.next,e)<0}function E(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function A(t,e){var n=new C(t.i,t.x,t.y),r=new C(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function k(t,e,n,r){var i=new C(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function z(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}e.exports=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(P(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(P(t,l,c,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},{}],6:[function(t,e,n){function r(t){if("Polygon"===t.type)return i(t.coordinates);if("MultiPolygon"===t.type){for(var e=0,n=0;n<t.coordinates.length;n++)e+=i(t.coordinates[n]);return e}return null}function i(t){var e=0;if(t&&t.length>0){e+=Math.abs(o(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(o(t[n]))}return e}function o(t){var e=0;if(t.length>2){for(var n,r,i=0;i<t.length-1;i++)n=t[i],r=t[i+1],e+=a(r[0]-n[0])*(2+Math.sin(a(n[1]))+Math.sin(a(r[1])));e=e*s.RADIUS*s.RADIUS/2}return e}function a(t){return t*Math.PI/180}var s=t("wgs84");e.exports.geometry=r,e.exports.ring=o},{wgs84:42}],7:[function(t,e,n){function r(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(i(r,e)),t;case"Feature":return t.geometry=r(t.geometry,e),t;case"Polygon":case"MultiPolygon":return o(t,e);default:return t}}function i(t,e){return function(n){return t(n,e)}}function o(t,e){return"Polygon"===t.type?t.coordinates=a(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(i(a,e))),t}function a(t,e){e=!!e,t[0]=s(t[0],!e);for(var n=1;n<t.length;n++)t[n]=s(t[n],e);return t}function s(t,e){return u(t)===e?t:t.reverse()}function u(t){return l.ring(t)>=0}var l=t("geojson-area");e.exports=r},{"geojson-area":6}],8:[function(t,e,n){"use strict";function r(t,e,n,r,a,u,l,c){if(n/=e,r/=e,l>=n&&c<=r)return t;if(l>r||c<n)return null;for(var h=[],f=0;f<t.length;f++){var p,d,m=t[f],v=m.geometry,y=m.type;if(p=m.min[a],d=m.max[a],p>=n&&d<=r)h.push(m);else if(!(p>r||d<n)){var _=1===y?i(v,n,r,a):o(v,n,r,a,u,3===y);_.length&&h.push(s(m.tags,y,_,m.id))}}return h.length?h:null}function i(t,e,n,r){for(var i=[],o=0;o<t.length;o++){var a=t[o],s=a[r];s>=e&&s<=n&&i.push(a)}return i}function o(t,e,n,r,i,o){for(var s=[],u=0;u<t.length;u++){var l,c,h,f=0,p=0,d=null,m=t[u],v=m.area,y=m.dist,_=m.outer,g=m.length,x=[];for(c=0;c<g-1;c++)l=d||m[c],d=m[c+1],f=p||l[r],p=d[r],f<e?p>n?(x.push(i(l,d,e),i(l,d,n)),o||(x=a(s,x,v,y,_))):p>=e&&x.push(i(l,d,e)):f>n?p<e?(x.push(i(l,d,n),i(l,d,e)),o||(x=a(s,x,v,y,_))):p<=n&&x.push(i(l,d,n)):(x.push(l),p<e?(x.push(i(l,d,e)),o||(x=a(s,x,v,y,_))):p>n&&(x.push(i(l,d,n)),
o||(x=a(s,x,v,y,_))));l=m[g-1],f=l[r],f>=e&&f<=n&&x.push(l),h=x[x.length-1],o&&h&&(x[0][0]!==h[0]||x[0][1]!==h[1])&&x.push(x[0]),a(s,x,v,y,_)}return s}function a(t,e,n,r,i){return e.length&&(e.area=n,e.dist=r,void 0!==i&&(e.outer=i),t.push(e)),[]}e.exports=r;var s=t("./feature")},{"./feature":10}],9:[function(t,e,n){"use strict";function r(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)i(n,t.features[r],e);else"Feature"===t.type?i(n,t,e):i(n,{geometry:t},e);return n}function i(t,e,n){if(null!==e.geometry){var r,s,u,c,h=e.geometry,f=h.type,p=h.coordinates,d=e.properties,m=e.id;if("Point"===f)t.push(l(d,1,[a(p)],m));else if("MultiPoint"===f)t.push(l(d,1,o(p),m));else if("LineString"===f)t.push(l(d,2,[o(p,n)],m));else if("MultiLineString"===f||"Polygon"===f){for(u=[],r=0;r<p.length;r++)c=o(p[r],n),"Polygon"===f&&(c.outer=0===r),u.push(c);t.push(l(d,"Polygon"===f?3:2,u,m))}else if("MultiPolygon"===f){for(u=[],r=0;r<p.length;r++)for(s=0;s<p[r].length;s++)c=o(p[r][s],n),c.outer=0===s,u.push(c);t.push(l(d,3,u,m))}else{if("GeometryCollection"!==f)throw new Error("Input data is not a valid GeoJSON object.");for(r=0;r<h.geometries.length;r++)i(t,{geometry:h.geometries[r],properties:d},n)}}}function o(t,e){for(var n=[],r=0;r<t.length;r++)n.push(a(t[r]));return e&&(u(n,e),s(n)),n}function a(t){var e=Math.sin(t[1]*Math.PI/180),n=t[0]/360+.5,r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r=r<0?0:r>1?1:r,[n,r,0]}function s(t){for(var e,n,r=0,i=0,o=0;o<t.length-1;o++)e=n||t[o],n=t[o+1],r+=e[0]*n[1]-n[0]*e[1],i+=Math.abs(n[0]-e[0])+Math.abs(n[1]-e[1]);t.area=Math.abs(r/2),t.dist=i}e.exports=r;var u=t("./simplify"),l=t("./feature")},{"./feature":10,"./simplify":12}],10:[function(t,e,n){"use strict";function r(t,e,n,r){var o={id:r||null,type:e,geometry:n,tags:t||null,min:[1/0,1/0],max:[-(1/0),-(1/0)]};return i(o),o}function i(t){var e=t.geometry,n=t.min,r=t.max;if(1===t.type)o(n,r,e);else for(var i=0;i<e.length;i++)o(n,r,e[i]);return t}function o(t,e,n){for(var r,i=0;i<n.length;i++)r=n[i],t[0]=Math.min(r[0],t[0]),e[0]=Math.max(r[0],e[0]),t[1]=Math.min(r[1],t[1]),e[1]=Math.max(r[1],e[1])}e.exports=r},{}],11:[function(t,e,n){"use strict";function r(t,e){return new i(t,e)}function i(t,e){e=this.options=u(Object.create(this.options),e);var n=e.debug;n&&console.time("preprocess data");var r=1<<e.maxZoom,i=c(t,e.tolerance/(r*e.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=p(i,e.buffer/e.extent,a),i.length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function o(t,e,n){return 32*((1<<t)*n+e)+t}function a(t,e,n){return[n,(n-t[0])*(e[1]-t[1])/(e[0]-t[0])+t[1],1]}function s(t,e,n){return[(n-t[1])*(e[0]-t[0])/(e[1]-t[1])+t[0],n,1]}function u(t,e){for(var n in e)t[n]=e[n];return t}function l(t,e,n){var r=t.source;if(1!==r.length)return!1;var i=r[0];if(3!==i.type||i.geometry.length>1)return!1;var o=i.geometry[0].length;if(5!==o)return!1;for(var a=0;a<o;a++){var s=h.point(i.geometry[0][a],e,t.z2,t.x,t.y);if(s[0]!==-n&&s[0]!==e+n||s[1]!==-n&&s[1]!==e+n)return!1}return!0}e.exports=r;var c=t("./convert"),h=t("./transform"),f=t("./clip"),p=t("./wrap"),d=t("./tile");i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},i.prototype.splitTile=function(t,e,n,r,i,u,c){for(var h=[t,e,n,r],p=this.options,m=p.debug,v=null;h.length;){r=h.pop(),n=h.pop(),e=h.pop(),t=h.pop();var y=1<<e,_=o(e,n,r),g=this.tiles[_],x=e===p.maxZoom?0:p.tolerance/(y*p.extent);if(!g&&(m>1&&console.time("creation"),g=this.tiles[_]=d(t,y,n,r,x,e===p.maxZoom),this.tileCoords.push({z:e,x:n,y:r}),m)){m>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,g.numFeatures,g.numPoints,g.numSimplified),console.timeEnd("creation"));var b="z"+e;this.stats[b]=(this.stats[b]||0)+1,this.total++}if(g.source=t,i){if(e===p.maxZoom||e===i)continue;var w=1<<i-e;if(n!==Math.floor(u/w)||r!==Math.floor(c/w))continue}else if(e===p.indexMaxZoom||g.numPoints<=p.indexMaxPoints)continue;if(p.solidChildren||!l(g,p.extent,p.buffer)){g.source=null,m>1&&console.time("clipping");var M,T,S,E,A,k,z=.5*p.buffer/p.extent,C=.5-z,P=.5+z,L=1+z;M=T=S=E=null,A=f(t,y,n-z,n+P,0,a,g.min[0],g.max[0]),k=f(t,y,n+C,n+L,0,a,g.min[0],g.max[0]),A&&(M=f(A,y,r-z,r+P,1,s,g.min[1],g.max[1]),T=f(A,y,r+C,r+L,1,s,g.min[1],g.max[1])),k&&(S=f(k,y,r-z,r+P,1,s,g.min[1],g.max[1]),E=f(k,y,r+C,r+L,1,s,g.min[1],g.max[1])),m>1&&console.timeEnd("clipping"),t.length&&(h.push(M||[],e+1,2*n,2*r),h.push(T||[],e+1,2*n,2*r+1),h.push(S||[],e+1,2*n+1,2*r),h.push(E||[],e+1,2*n+1,2*r+1))}else i&&(v=e)}return v},i.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,a=r.debug,s=1<<t;e=(e%s+s)%s;var u=o(t,e,n);if(this.tiles[u])return h.tile(this.tiles[u],i);a>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var c,f=t,p=e,d=n;!c&&f>0;)f--,p=Math.floor(p/2),d=Math.floor(d/2),c=this.tiles[o(f,p,d)];if(!c||!c.source)return null;if(a>1&&console.log("found parent tile z%d-%d-%d",f,p,d),l(c,i,r.buffer))return h.tile(c,i);a>1&&console.time("drilling down");var m=this.splitTile(c.source,f,p,d,t,e,n);if(a>1&&console.timeEnd("drilling down"),null!==m){var v=1<<t-m;u=o(m,Math.floor(e/v),Math.floor(n/v))}return this.tiles[u]?h.tile(this.tiles[u],i):null}},{"./clip":8,"./convert":9,"./tile":13,"./transform":14,"./wrap":15}],12:[function(t,e,n){"use strict";function r(t,e){var n,r,o,a,s=e*e,u=t.length,l=0,c=u-1,h=[];for(t[l][2]=1,t[c][2]=1;c;){for(r=0,n=l+1;n<c;n++)o=i(t[n],t[l],t[c]),o>r&&(a=n,r=o);r>s?(t[a][2]=r,h.push(l),h.push(a),l=a):(c=h.pop(),l=h.pop())}}function i(t,e,n){var r=e[0],i=e[1],o=n[0],a=n[1],s=t[0],u=t[1],l=o-r,c=a-i;if(0!==l||0!==c){var h=((s-r)*l+(u-i)*c)/(l*l+c*c);h>1?(r=o,i=a):h>0&&(r+=l*h,i+=c*h)}return l=s-r,c=u-i,l*l+c*c}e.exports=r},{}],13:[function(t,e,n){"use strict";function r(t,e,n,r,o,a){for(var s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z2:e,transformed:!1,min:[2,1],max:[-1,0]},u=0;u<t.length;u++){s.numFeatures++,i(s,t[u],o,a);var l=t[u].min,c=t[u].max;l[0]<s.min[0]&&(s.min[0]=l[0]),l[1]<s.min[1]&&(s.min[1]=l[1]),c[0]>s.max[0]&&(s.max[0]=c[0]),c[1]>s.max[1]&&(s.max[1]=c[1])}return s}function i(t,e,n,r){var i,a,s,u,l=e.geometry,c=e.type,h=[],f=n*n;if(1===c)for(i=0;i<l.length;i++)h.push(l[i]),t.numPoints++,t.numSimplified++;else for(i=0;i<l.length;i++)if(s=l[i],r||!(2===c&&s.dist<n||3===c&&s.area<f)){var p=[];for(a=0;a<s.length;a++)u=s[a],(r||u[2]>f)&&(p.push(u),t.numSimplified++),t.numPoints++;3===c&&o(p,s.outer),h.push(p)}else t.numPoints+=s.length;if(h.length){var d={geometry:h,type:c,tags:e.tags||null};null!==e.id&&(d.id=e.id),t.features.push(d)}}function o(t,e){var n=a(t);n<0===e&&t.reverse()}function a(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],n=t[a],r+=(n[0]-e[0])*(e[1]+n[1]);return r}e.exports=r},{}],14:[function(t,e,n){"use strict";function r(t,e){if(t.transformed)return t;var n,r,o,a=t.z2,s=t.x,u=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],c=l.geometry,h=l.type;if(1===h)for(r=0;r<c.length;r++)c[r]=i(c[r],e,a,s,u);else for(r=0;r<c.length;r++){var f=c[r];for(o=0;o<f.length;o++)f[o]=i(f[o],e,a,s,u)}}return t.transformed=!0,t}function i(t,e,n,r,i){var o=Math.round(e*(t[0]*n-r)),a=Math.round(e*(t[1]*n-i));return[o,a]}n.tile=r,n.point=i},{}],15:[function(t,e,n){"use strict";function r(t,e,n){var r=t,o=a(t,1,-1-e,e,0,n,-1,2),s=a(t,1,1-e,2+e,0,n,-1,2);return(o||s)&&(r=a(t,1,-e,1+e,0,n,-1,2)||[],o&&(r=i(o,1).concat(r)),s&&(r=r.concat(i(s,-1)))),r}function i(t,e){for(var n=[],r=0;r<t.length;r++){var i,a=t[r],u=a.type;if(1===u)i=o(a.geometry,e);else{i=[];for(var l=0;l<a.geometry.length;l++)i.push(o(a.geometry[l],e))}n.push(s(a.tags,u,i,a.id))}return n}function o(t,e){var n=[];n.area=t.area,n.dist=t.dist;for(var r=0;r<t.length;r++)n.push([t[r][0]+e,t[r][1],t[r][2]]);return n}var a=t("./clip"),s=t("./feature");e.exports=r},{"./clip":8,"./feature":10}],16:[function(t,e,n){"use strict";function r(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var o=new Int32Array(this.arrayBuffer);t=o[0],e=o[1],n=o[2],this.d=e+2*n;for(var a=0;a<this.d*this.d;a++){var s=o[i+a],u=o[i+a+1];r.push(s===u?null:o.subarray(s,u))}var l=o[i+r.length],c=o[i+r.length+1];this.keys=o.subarray(l,c),this.bboxes=o.subarray(c),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var h=0;h<this.d*this.d;h++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var f=n/e*t;this.min=-f,this.max=t+f}e.exports=r;var i=3;r.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},r.prototype.query=function(t,e,n,r){var i=this.min,o=this.max;if(t<=i&&e<=i&&o<=n&&o<=r)return Array.prototype.slice.call(this.keys);var a=[],s={};return this._forEachCell(t,e,n,r,this._queryCell,a,s),a},r.prototype._queryCell=function(t,e,n,r,i,o,a){var s=this.cells[i];if(null!==s)for(var u=this.keys,l=this.bboxes,c=0;c<s.length;c++){var h=s[c];if(void 0===a[h]){var f=4*h;t<=l[f+2]&&e<=l[f+3]&&n>=l[f+0]&&r>=l[f+1]?(a[h]=!0,o.push(u[h])):a[h]=!1}}},r.prototype._forEachCell=function(t,e,n,r,i,o,a){for(var s=this._convertToCellCoord(t),u=this._convertToCellCoord(e),l=this._convertToCellCoord(n),c=this._convertToCellCoord(r),h=s;h<=l;h++)for(var f=u;f<=c;f++){var p=this.d*f+h;if(i.call(this,t,e,n,r,p,o,a))return}},r.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=i+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var o=new Int32Array(e+n+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var a=e,s=0;s<t.length;s++){var u=t[s];o[i+s]=a,o.set(u,a),a+=u.length}return o[i+t.length]=a,o.set(this.keys,a),a+=this.keys.length,o[i+t.length+1]=a,o.set(this.bboxes,a),a+=this.bboxes.length,o.buffer}},{}],17:[function(t,e,n){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=l}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+p]=255&a,p+=d,a/=256,l-=8);t[n+p-d]|=128*m}},{}],18:[function(t,e,n){"use strict";function r(t,e,n,r,o){return new i(t,e,n,r,o)}function i(t,e,n,r,i){e=e||o,n=n||a,i=i||Array,this.nodeSize=r||64,this.points=t,this.ids=new i(t.length),this.coords=new i(2*t.length);for(var u=0;u<t.length;u++)this.ids[u]=u,this.coords[2*u]=e(t[u]),this.coords[2*u+1]=n(t[u]);s(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function o(t){return t[0]}function a(t){return t[1]}var s=t("./sort"),u=t("./range"),l=t("./within");e.exports=r,i.prototype={range:function(t,e,n,r){return u(this.ids,this.coords,t,e,n,r,this.nodeSize)},within:function(t,e,n){return l(this.ids,this.coords,t,e,n,this.nodeSize)}}},{"./range":19,"./sort":20,"./within":21}],19:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var h=l.pop(),f=l.pop(),p=l.pop();if(f-p<=a)for(var d=p;d<=f;d++)s=e[2*d],u=e[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(t[d]);else{var m=Math.floor((p+f)/2);s=e[2*m],u=e[2*m+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(t[m]);var v=(h+1)%2;(0===h?n<=s:r<=u)&&(l.push(p),l.push(m-1),l.push(v)),(0===h?i>=s:o>=u)&&(l.push(m+1),l.push(f),l.push(v))}}return c}e.exports=r},{}],20:[function(t,e,n){"use strict";function r(t,e,n,o,a,s){if(!(a-o<=n)){var u=Math.floor((o+a)/2);i(t,e,u,o,a,s%2),r(t,e,n,o,u-1,s+1),r(t,e,n,u+1,a,s+1)}}function i(t,e,n,r,a,s){for(;a>r;){if(a-r>600){var u=a-r+1,l=n-r+1,c=Math.log(u),h=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*h*(u-h)/u)*(l-u/2<0?-1:1),p=Math.max(r,Math.floor(n-l*h/u+f)),d=Math.min(a,Math.floor(n+(u-l)*h/u+f));i(t,e,n,p,d,s)}var m=e[2*n+s],v=r,y=a;for(o(t,e,r,n),e[2*a+s]>m&&o(t,e,r,a);v<y;){for(o(t,e,v,y),v++,y--;e[2*v+s]<m;)v++;for(;e[2*y+s]>m;)y--}e[2*r+s]===m?o(t,e,r,y):(y++,o(t,e,y,a)),y<=n&&(r=y+1),n<=y&&(a=y-1)}}function o(t,e,n,r){a(t,n,r),a(e,2*n,2*r),a(e,2*n+1,2*r+1)}function a(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}e.exports=r},{}],21:[function(t,e,n){"use strict";function r(t,e,n,r,o,a){for(var s=[0,t.length-1,0],u=[],l=o*o;s.length;){var c=s.pop(),h=s.pop(),f=s.pop();if(h-f<=a)for(var p=f;p<=h;p++)i(e[2*p],e[2*p+1],n,r)<=l&&u.push(t[p]);else{var d=Math.floor((f+h)/2),m=e[2*d],v=e[2*d+1];i(m,v,n,r)<=l&&u.push(t[d]);var y=(c+1)%2;(0===c?n-o<=m:r-o<=v)&&(s.push(f),s.push(d-1),s.push(y)),(0===c?n+o>=m:r+o>=v)&&(s.push(d+1),s.push(h),s.push(y))}}return u}function i(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}e.exports=r},{}],22:[function(t,e,n){"use strict";function r(t){return!!(i()&&o()&&a()&&s()&&u()&&l()&&c()&&h(t&&t.failIfMajorPerformanceCaveat))}function i(){return"undefined"!=typeof window&&"undefined"!=typeof document}function o(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function a(){return Function.prototype&&Function.prototype.bind}function s(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function u(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function l(){return"Worker"in window}function c(){return"Uint8ClampedArray"in window}function h(t){return void 0===p[t]&&(p[t]=f(t)),p[t]}function f(t){var e=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.probablySupportsContext?e.probablySupportsContext("webgl",n)||e.probablySupportsContext("experimental-webgl",n):e.supportsContext?e.supportsContext("webgl",n)||e.supportsContext("experimental-webgl",n):e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}"undefined"!=typeof e&&e.exports?e.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r);var p={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],23:[function(t,e,n){(function(t){function e(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return n=e(r(n.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(t){var i=n.isAbsolute(t),o="/"===a(t,-1);return t=e(r(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var i=r(t.split("/")),o=r(e.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}for(var l=[],u=s;u<i.length;u++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:27}],24:[function(t,e,n){"use strict";function r(t){var e;t&&t.length&&(e=t,t=e.length);var n=new Uint8Array(t||0);return e&&n.set(e),n.readUInt32LE=o.readUInt32LE,n.writeUInt32LE=o.writeUInt32LE,n.readInt32LE=o.readInt32LE,n.writeInt32LE=o.writeInt32LE,n.readFloatLE=o.readFloatLE,n.writeFloatLE=o.writeFloatLE,n.readDoubleLE=o.readDoubleLE,n.writeDoubleLE=o.writeDoubleLE,n.toString=o.toString,n.write=o.write,n.slice=o.slice,n.copy=o.copy,n._isBuffer=!0,n}function i(t){for(var e,n,r=t.length,i=[],o=0;o<r;o++){if(e=t.charCodeAt(o),e>55295&&e<57344){if(!n){e>56319||o+1===r?i.push(239,191,189):n=e;continue}if(e<56320){i.push(239,191,189),n=e;continue}e=n-55296<<10|e-56320|65536,n=null}else n&&(i.push(239,191,189),n=null);e<128?i.push(e):e<2048?i.push(e>>6|192,63&e|128):e<65536?i.push(e>>12|224,e>>6&63|128,63&e|128):i.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}return i}e.exports=r;var o,a,s,u=t("ieee754");o={readUInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},writeUInt32LE:function(t,e){this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24},readInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+(this[t+3]<<24)},readFloatLE:function(t){return u.read(this,t,!0,23,4)},readDoubleLE:function(t){return u.read(this,t,!0,52,8)},writeFloatLE:function(t,e){return u.write(this,t,e,!0,23,4)},writeDoubleLE:function(t,e){return u.write(this,t,e,!0,52,8)},toString:function(t,e,n){var r="",i="";e=e||0,n=Math.min(this.length,n||this.length);for(var o=e;o<n;o++){var a=this[o];a<=127?(r+=decodeURIComponent(i)+String.fromCharCode(a),i=""):i+="%"+a.toString(16)}return r+=decodeURIComponent(i)},write:function(t,e){for(var n=t===a?s:i(t),r=0;r<n.length;r++)this[e+r]=n[r]},slice:function(t,e){return this.subarray(t,e)},copy:function(t,e){e=e||0;for(var n=0;n<this.length;n++)t[e+n]=this[n]}},o.writeInt32LE=o.writeUInt32LE,r.byteLength=function(t){return a=t,s=i(t),s.length},r.isBuffer=function(t){return!(!t||!t._isBuffer)}},{ieee754:17}],25:[function(t,n,r){(function(e){"use strict";function r(t){this.buf=v.isBuffer(t)?t:new v(t||0),this.pos=0,this.length=this.buf.length}function i(t,e){var n,r=e.buf;if(n=r[e.pos++],t+=268435456*(127&n),n<128)return t;if(n=r[e.pos++],t+=34359738368*(127&n),n<128)return t;if(n=r[e.pos++],t+=4398046511104*(127&n),n<128)return t;if(n=r[e.pos++],t+=562949953421312*(127&n),n<128)return t;if(n=r[e.pos++],t+=72057594037927940*(127&n),n<128)return t;if(n=r[e.pos++],t+=0x8000000000000000*(127&n),n<128)return t;throw new Error("Expected varint not more than 10 bytes")}function o(t,e){e.realloc(10);for(var n=e.pos+10;t>=1;){if(e.pos>=n)throw new Error("Given varint doesn't fit into 10 bytes");var r=255&t;e.buf[e.pos++]=r|(t>=128?128:0),t/=128}}function a(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function s(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function u(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function l(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function c(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function h(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function f(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function m(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}n.exports=r;var v=e.Buffer||t("./buffer");r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var y=4294967296,_=1/y,g=Math.pow(2,63);r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=this.buf.readUInt32LE(this.pos);return this.pos+=4,t},readSFixed32:function(){var t=this.buf.readInt32LE(this.pos);return this.pos+=4,t},readFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*y;return this.pos+=8,t},readSFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*y;return this.pos+=8,t},readFloat:function(){var t=this.buf.readFloatLE(this.pos);return this.pos+=4,t},readDouble:function(){var t=this.buf.readDoubleLE(this.pos);return this.pos+=8,t},readVarint:function(){var t,e,n=this.buf;return e=n[this.pos++],t=127&e,e<128?t:(e=n[this.pos++],t|=(127&e)<<7,e<128?t:(e=n[this.pos++],t|=(127&e)<<14,e<128?t:(e=n[this.pos++],t|=(127&e)<<21,e<128?t:i(t,this))))},readVarint64:function(){var t=this.pos,e=this.readVarint();if(e<g)return e;for(var n=this.pos-2;255===this.buf[n];)n--;n<t&&(n=t),e=0;for(var r=0;r<n-t+1;r++){var i=127&~this.buf[t+r];e+=r<4?i<<7*r:i*Math.pow(2,7*r)}return-e-1},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.buf.toString("utf8",this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.slice(this.pos,t);return this.pos=t,e},readPackedVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readVarint());return e},readPackedSVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(t){var e=7&t;if(e===r.Varint)for(;this.buf[this.pos++]>127;);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos;else if(e===r.Fixed32)this.pos+=4;else{if(e!==r.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new v(e);this.buf.copy(n),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(t){this.realloc(4),this.buf.writeUInt32LE(t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),this.buf.writeInt32LE(t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(t&-1,this.pos),this.buf.writeUInt32LE(Math.floor(t*_),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(t&-1,this.pos),this.buf.writeInt32LE(Math.floor(t*_),this.pos+4),this.pos+=8},writeVarint:function(t){return t=+t,t>268435455?void o(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),void(t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127)))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t);var e=v.byteLength(t);this.writeVarint(e),this.realloc(e),this.buf.write(t,this.pos),this.pos+=e},writeFloat:function(t){this.realloc(4),this.buf.writeFloatLE(t,this.pos),this.pos+=4},writeDouble:function(t){this.realloc(8),this.buf.writeDoubleLE(t,this.pos),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&a(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,r.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,s,e)},writePackedSVarint:function(t,e){this.writeMessage(t,u,e)},writePackedBoolean:function(t,e){this.writeMessage(t,h,e)},writePackedFloat:function(t,e){this.writeMessage(t,l,e)},writePackedDouble:function(t,e){this.writeMessage(t,c,e)},writePackedFixed32:function(t,e){this.writeMessage(t,f,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,p,e)},writePackedFixed64:function(t,e){this.writeMessage(t,d,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,m,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":24}],26:[function(t,e,n){"use strict";function r(t,e){this.x=t,this.y=e}e.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},{}],27:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===r||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function a(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function s(){v&&d&&(v=!1,d.length?m=d.concat(m):y=-1,m.length&&u())}function u(){if(!v){var t=o(s);v=!0;for(var e=m.length;e;){for(d=m,m=[];++y<e;)d&&d[y].run();y=-1,e=m.length}d=null,v=!1,a(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var h,f,p=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:r}catch(t){h=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var d,m=[],v=!1,y=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new l(t,e)),1!==m.length||v||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],28:[function(t,e,n){"use strict";function r(t,e,n,a,s){for(n=n||0,a=a||t.length-1,s=s||o;a>n;){if(a-n>600){var u=a-n+1,l=e-n+1,c=Math.log(u),h=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*h*(u-h)/u)*(l-u/2<0?-1:1),p=Math.max(n,Math.floor(e-l*h/u+f)),d=Math.min(a,Math.floor(e+(u-l)*h/u+f));r(t,e,p,d,s)}var m=t[e],v=n,y=a;for(i(t,n,e),s(t[a],m)>0&&i(t,n,a);v<y;){for(i(t,v,y),v++,y--;s(t[v],m)<0;)v++;for(;s(t[y],m)>0;)y--}0===s(t[n],m)?i(t,n,y):(y++,i(t,y,a)),y<=e&&(n=y+1),e<=y&&(a=y-1)}}function i(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function o(t,e){return t<e?-1:t>e?1:0}e.exports=r},{}],29:[function(t,e,n){"use strict";function r(t){return new i(t)}function i(t){this.options=p(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function o(t,e,n,r){return{x:t,y:e,zoom:1/0,id:r,numPoints:n}}function a(t,e){var n=t.geometry.coordinates;return o(l(n[0]),c(n[1]),1,e)}function s(t){return{type:"Feature",properties:u(t),geometry:{type:"Point",coordinates:[h(t.x),f(t.y)]}}}function u(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return{cluster:!0,point_count:e,point_count_abbreviated:n}}function l(t){return t/360+.5}function c(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;
return n<0?0:n>1?1:n}function h(t){return 360*(t-.5)}function f(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function p(t,e){for(var n in e)t[n]=e[n];return t}function d(t){return t.x}function m(t){return t.y}var v=t("kdbush");e.exports=r,i.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;var r=t.map(a);e&&console.timeEnd(n);for(var i=this.options.maxZoom;i>=this.options.minZoom;i--){var o=+Date.now();this.trees[i+1]=v(r,d,m,this.options.nodeSize,Float32Array),r=this._cluster(r,i),e&&console.log("z%d: %d clusters in %dms",i,r.length,+Date.now()-o)}return this.trees[this.options.minZoom]=v(r,d,m,this.options.nodeSize,Float32Array),e&&console.timeEnd("total time"),this},getClusters:function(t,e){for(var n=this.trees[this._limitZoom(e)],r=n.range(l(t[0]),c(t[3]),l(t[2]),c(t[1])),i=[],o=0;o<r.length;o++){var a=n.points[r[o]];i.push(a.id!==-1?this.points[a.id]:s(a))}return i},getTile:function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options.extent,a=this.options.radius,s=a/o,u=(n-s)/i,l=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((e-s)/i,u,(e+1+s)/i,l),r.points,e,n,i,c),0===e&&this._addTileFeatures(r.range(1-s/i,u,1,l),r.points,i,n,i,c),e===i-1&&this._addTileFeatures(r.range(0,u,s/i,l),r.points,-1,n,i,c),c.features.length?c:null},_addTileFeatures:function(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=e[t[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*i-n)),Math.round(this.options.extent*(s.y*i-r))]],tags:s.id!==-1?this.points[s.id].properties:u(s)})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,e)),i=0;i<t.length;i++){var a=t[i];if(!(a.zoom<=e)){a.zoom=e;for(var s=this.trees[e+1],u=s.within(a.x,a.y,r),l=!1,c=a.numPoints,h=a.x*c,f=a.y*c,p=0;p<u.length;p++){var d=s.points[u[p]];e<d.zoom&&(l=!0,d.zoom=e,h+=d.x*d.numPoints,f+=d.y*d.numPoints,c+=d.numPoints)}n.push(l?o(h/c,f/c,c,-1):a)}}return n}}},{kdbush:18}],30:[function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||i,t)for(var n=Math.floor(this.length/2);n>=0;n--)this._down(n)}function i(t,e){return t<e?-1:t>e?1:0}function o(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}e.exports=r,r.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){var t=this.data[0];return this.data[0]=this.data[this.length-1],this.length--,this.data.pop(),this._down(0),t},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare;t>0;){var r=Math.floor((t-1)/2);if(!(n(e[t],e[r])<0))break;o(e,r,t),t=r}},_down:function(t){for(var e=this.data,n=this.compare,r=this.length;;){var i=2*t+1,a=i+1,s=t;if(i<r&&n(e[i],e[s])<0&&(s=i),a<r&&n(e[a],e[s])<0&&(s=a),s===t)return;o(e,s,t),t=s}}}},{}],31:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],32:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],33:[function(t,n,r){(function(e,n){function i(t,e){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(e)?n.showHidden=e:e&&r._extend(n,e),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,t,n.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,e,n){if(t.customInspect&&e&&E(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return g(i)||(i=u(t,i,n)),i}var o=l(t,e);if(o)return o;var a=Object.keys(e),m=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),S(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(e);if(0===a.length){if(E(e)){var v=e.name?": "+e.name:"";return t.stylize("[Function"+v+"]","special")}if(w(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(T(e))return t.stylize(Date.prototype.toString.call(e),"date");if(S(e))return c(e)}var y="",_=!1,x=["{","}"];if(d(e)&&(_=!0,x=["[","]"]),E(e)){var b=e.name?": "+e.name:"";y=" [Function"+b+"]"}if(w(e)&&(y=" "+RegExp.prototype.toString.call(e)),T(e)&&(y=" "+Date.prototype.toUTCString.call(e)),S(e)&&(y=" "+c(e)),0===a.length&&(!_||0==e.length))return x[0]+y+x[1];if(n<0)return w(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var M;return M=_?h(t,e,n,m,a):a.map(function(r){return f(t,e,n,m,r,_)}),t.seen.pop(),p(M,y,x)}function l(t,e){if(b(e))return t.stylize("undefined","undefined");if(g(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return _(e)?t.stylize(""+e,"number"):m(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)P(e,String(a))?o.push(f(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(t,e,n,r,i,!0))}),o}function f(t,e,n,r,i,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},l.get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),P(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(l.value)<0?(s=v(n)?u(t,l.value,null):u(t,l.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return null==t}function _(t){return"number"==typeof t}function g(t){return"string"==typeof t}function x(t){return"symbol"==typeof t}function b(t){return void 0===t}function w(t){return M(t)&&"[object RegExp]"===k(t)}function M(t){return"object"==typeof t&&null!==t}function T(t){return M(t)&&"[object Date]"===k(t)}function S(t){return M(t)&&("[object Error]"===k(t)||t instanceof Error)}function E(t){return"function"==typeof t}function A(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function k(t){return Object.prototype.toString.call(t)}function z(t){return t<10?"0"+t.toString(10):t.toString(10)}function C(){var t=new Date,e=[z(t.getHours()),z(t.getMinutes()),z(t.getSeconds())].join(":");return[t.getDate(),R[t.getMonth()],e].join(" ")}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var L=/%[sdj%]/g;r.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(t).replace(L,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),s=r[n];n<o;s=r[++n])a+=v(s)||!M(s)?" "+s:" "+i(s);return a},r.deprecate=function(t,i){function o(){if(!a){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),a=!0}return t.apply(this,arguments)}if(b(n.process))return function(){return r.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var a=!1;return o};var I,O={};r.debuglog=function(t){if(b(I)&&(I=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!O[t])if(new RegExp("\\b"+t+"\\b","i").test(I)){var n=e.pid;O[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else O[t]=function(){};return O[t]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=m,r.isNull=v,r.isNullOrUndefined=y,r.isNumber=_,r.isString=g,r.isSymbol=x,r.isUndefined=b,r.isRegExp=w,r.isObject=M,r.isDate=T,r.isError=S,r.isFunction=E,r.isPrimitive=A,r.isBuffer=t("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",C(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!M(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":32,_process:27,inherits:31}],34:[function(t,e,n){e.exports.VectorTile=t("./lib/vectortile.js"),e.exports.VectorTileFeature=t("./lib/vectortilefeature.js"),e.exports.VectorTileLayer=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":35,"./lib/vectortilefeature.js":36,"./lib/vectortilelayer.js":37}],35:[function(t,e,n){"use strict";function r(t,e){this.layers=t.readFields(i,{},e)}function i(t,e,n){if(3===t){var r=new o(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}var o=t("./vectortilelayer");e.exports=r},{"./vectortilelayer":37}],36:[function(t,e,n){"use strict";function r(t,e,n,r,o){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=o,t.readFields(i,this,e)}function i(t,e,n){1==t?e.id=n.readVarint():2==t?o(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function o(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}function a(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=s(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}function s(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],n=t[a],r+=(n.x-e.x)*(e.y+n.y);return r}var u=t("point-geometry");e.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(!i){var l=t.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new u(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},r.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-(1/0),u=1/0,l=-(1/0);t.pos<e;){if(!r){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)i+=t.readSVarint(),o+=t.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},r.prototype.toGeoJSON=function(t,e,n){function i(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+c)/u;t[e]=[360*(n.x+l)/u-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var o,s,u=this.extent*Math.pow(2,n),l=this.extent*t,c=this.extent*e,h=this.loadGeometry(),f=r.types[this.type];switch(this.type){case 1:var p=[];for(o=0;o<h.length;o++)p[o]=h[o][0];h=p,i(h);break;case 2:for(o=0;o<h.length;o++)i(h[o]);break;case 3:for(h=a(h),o=0;o<h.length;o++)for(s=0;s<h[o].length;s++)i(h[o][s])}1===h.length?h=h[0]:f="Multi"+f;var d={type:"Feature",geometry:{type:f,coordinates:h},properties:this.properties};return"id"in this&&(d.id=this.id),d}},{"point-geometry":26}],37:[function(t,e,n){"use strict";function r(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(i,this,e),this.length=this._features.length}function i(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(o(n))}function o(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}var a=t("./vectortilefeature.js");e.exports=r,r.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":36}],38:[function(t,e,n){function r(t){var e=[];for(var n in t.layers)e.push(o(t.layers[n]));var r=new c;return h.tile.write({layers:e},r),r.finish()}function i(t){var e={};for(var n in t)e[n]=new f(t[n].features),e[n].name=n;return r({layers:e})}function o(t){for(var e={name:t.name||"",version:t.version||1,extent:t.extent||4096,keys:[],values:[],features:[]},n={},r={},i=0;i<t.length;i++){var o=t.feature(i);o.geometry=u(o.loadGeometry());var a=[];for(var s in o.properties){var c=n[s];"undefined"==typeof c&&(e.keys.push(s),c=e.keys.length-1,n[s]=c);var h=l(o.properties[s]),f=r[h.key];"undefined"==typeof f&&(e.values.push(h),f=e.values.length-1,r[h.key]=f),a.push(c),a.push(f)}o.tags=a,e.features.push(o)}return e}function a(t,e){return(e<<3)+(7&t)}function s(t){return t<<1^t>>31}function u(t){for(var e=[],n=0,r=0,i=t.length,o=0;o<i;o++){var u=t[o];e.push(a(1,1));for(var l=0;l<u.length;l++){1===l&&e.push(a(2,u.length-1));var c=u[l].x-n,h=u[l].y-r;e.push(s(c),s(h)),n+=c,r+=h}}return e}function l(t){var e,n=typeof t;return"string"===n?e={string_value:t}:"boolean"===n?e={bool_value:t}:"number"===n?e=t%1!==0?{double_value:t}:t<0?{sint_value:t}:{uint_value:t}:(t=JSON.stringify(t),e={string_value:t}),e.key=n+":"+t,e}var c=t("pbf"),h=t("./vector-tile-pb"),f=t("./lib/geojson_wrapper");e.exports=r,e.exports.fromVectorTileJs=r,e.exports.fromGeojsonVt=i,e.exports.GeoJSONWrapper=f},{"./lib/geojson_wrapper":39,"./vector-tile-pb":40,pbf:25}],39:[function(t,e,n){"use strict";function r(t){this.features=t,this.length=t.length}function i(t){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=4096}var o=t("point-geometry"),a=t("vector-tile").VectorTileFeature;e.exports=r,r.prototype.feature=function(t){return new i(this.features[t])},i.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],r=[],i=0;i<n.length;i++)r.push(new o(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},i.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-(1/0),r=1/0,i=-(1/0),o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},i.prototype.toGeoJSON=a.prototype.toGeoJSON},{"point-geometry":26,"vector-tile":34}],40:[function(t,e,n){"use strict";function r(t,e){return t.readFields(i,{layers:[]},e)}function i(t,e,n){3===t&&e.layers.push(f(n,n.readVarint()+n.pos))}function o(t,e){var n;if(void 0!==t.layers)for(n=0;n<t.layers.length;n++)e.writeMessage(3,d,t.layers[n])}function a(t,e){return t.readFields(s,{},e)}function s(t,e,n){1===t?e.string_value=n.readString():2===t?e.float_value=n.readFloat():3===t?e.double_value=n.readDouble():4===t?e.int_value=n.readVarint():5===t?e.uint_value=n.readVarint():6===t?e.sint_value=n.readSVarint():7===t&&(e.bool_value=n.readBoolean())}function u(t,e){void 0!==t.string_value&&e.writeStringField(1,t.string_value),void 0!==t.float_value&&e.writeFloatField(2,t.float_value),void 0!==t.double_value&&e.writeDoubleField(3,t.double_value),void 0!==t.int_value&&e.writeVarintField(4,t.int_value),void 0!==t.uint_value&&e.writeVarintField(5,t.uint_value),void 0!==t.sint_value&&e.writeSVarintField(6,t.sint_value),void 0!==t.bool_value&&e.writeBooleanField(7,t.bool_value)}function l(t,e){var n=t.readFields(c,{},e);return void 0===n.type&&(n.type="Unknown"),n}function c(t,e,n){1===t?e.id=n.readVarint():2===t?e.tags=n.readPackedVarint():3===t?e.type=n.readVarint():4===t&&(e.geometry=n.readPackedVarint())}function h(t,e){void 0!==t.id&&e.writeVarintField(1,t.id),void 0!==t.tags&&e.writePackedVarint(2,t.tags),void 0!==t.type&&e.writeVarintField(3,t.type),void 0!==t.geometry&&e.writePackedVarint(4,t.geometry)}function f(t,e){return t.readFields(p,{features:[],keys:[],values:[]},e)}function p(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():2===t?e.features.push(l(n,n.readVarint()+n.pos)):3===t?e.keys.push(n.readString()):4===t?e.values.push(a(n,n.readVarint()+n.pos)):5===t&&(e.extent=n.readVarint())}function d(t,e){void 0!==t.version&&e.writeVarintField(15,t.version),void 0!==t.name&&e.writeStringField(1,t.name);var n;if(void 0!==t.features)for(n=0;n<t.features.length;n++)e.writeMessage(2,h,t.features[n]);if(void 0!==t.keys)for(n=0;n<t.keys.length;n++)e.writeStringField(3,t.keys[n]);if(void 0!==t.values)for(n=0;n<t.values.length;n++)e.writeMessage(4,u,t.values[n]);void 0!==t.extent&&e.writeVarintField(5,t.extent)}var m=n.tile={read:r,write:o};m.GeomType={Unknown:0,Point:1,LineString:2,Polygon:3},m.value={read:a,write:u},m.feature={read:l,write:h},m.layer={read:f,write:d}},{}],41:[function(t,e,n){var r=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;e.exports=function(t,e){function n(t){v[t]=!0;for(var e in i[t][1]){var r=i[t][1][e];v[r]||n(r)}}for(var s,u=Object.keys(o),l=0,c=u.length;l<c;l++){var h=u[l],f=o[h].exports;if(f===t||f&&f.default===t){s=h;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var p={},l=0,c=u.length;l<c;l++){var h=u[l];p[h]=h}i[s]=[Function(["require","module","exports"],"("+t+")(self)"),p]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),m={};m[s]=s,i[d]=[Function(["require"],"var f = require("+a(s)+");(f.default ? f.default : f)(self);"),m];var v={};n(d);var y="("+r+")({"+Object.keys(v).map(function(t){return a(t)+":["+i[t][0]+","+a(i[t][1])+"]"}).join(",")+"},{},["+a(d)+"])",_=window.URL||window.webkitURL||window.mozURL||window.msURL,g=new Blob([y],{type:"text/javascript"});if(e&&e.bare)return g;var x=_.createObjectURL(g),b=new Worker(x);return b.objectURL=x,b}},{}],42:[function(t,e,n){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],43:[function(t,e,n){e.exports={version:"0.37.0"}},{}],44:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t){var i=t[r].paintVertexArray;if(0!==i.length){var o=i.serialize(e),a=i.constructor.serialize();n[r]={array:o,type:a}}}return n}var i=t("./program_configuration"),o=t("./vertex_array_type"),a=function(t,e){this.vertexOffset=t,this.primitiveOffset=e,this.vertexLength=0,this.primitiveLength=0},s=function(t,e,n){var r=this;this.globalProperties={zoom:n};var a=o(t.layoutAttributes);this.layoutVertexArray=new a;var s=t.elementArrayType;s&&(this.elementArray=new s);var u=t.elementArrayType2;u&&(this.elementArray2=new u),this.layerData={};for(var l=0,c=e;l<c.length;l+=1){var h=c[l],f=i.createDynamic(t.paintAttributes||[],h,n);r.layerData[h.id]={layer:h,programConfiguration:f,paintVertexArray:new f.PaintVertexArray,paintPropertyStatistics:f.createPaintPropertyStatistics()}}this.segments=[],this.segments2=[]};s.prototype.prepareSegment=function(t){var e=this.segments[this.segments.length-1];return(!e||e.vertexLength+t>s.MAX_VERTEX_ARRAY_LENGTH)&&(e=new a(this.layoutVertexArray.length,this.elementArray.length),this.segments.push(e)),e},s.prototype.prepareSegment2=function(t){var e=this.segments2[this.segments2.length-1];return(!e||e.vertexLength+t>s.MAX_VERTEX_ARRAY_LENGTH)&&(e=new a(this.layoutVertexArray.length,this.elementArray2.length),this.segments2.push(e)),e},s.prototype.populatePaintArrays=function(t){var e=this;for(var n in e.layerData){var r=e.layerData[n];0!==r.paintVertexArray.bytesPerElement&&r.programConfiguration.populatePaintArray(r.layer,r.paintVertexArray,r.paintPropertyStatistics,e.layoutVertexArray.length,e.globalProperties,t)}},s.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},s.prototype.serialize=function(t){return{layoutVertexArray:this.layoutVertexArray.serialize(t),elementArray:this.elementArray&&this.elementArray.serialize(t),elementArray2:this.elementArray2&&this.elementArray2.serialize(t),paintVertexArrays:r(this.layerData,t),segments:this.segments,segments2:this.segments2}},s.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,e.exports=s},{"./program_configuration":58,"./vertex_array_type":60}],45:[function(t,e,n){"use strict";var r=t("./array_group"),i=t("./buffer_group"),o=t("../util/util"),a=function(t,e){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,t.arrays?this.buffers=new i(e,t.layers,t.zoom,t.arrays):this.arrays=new r(e,t.layers,t.zoom)};a.prototype.populate=function(t,e){for(var n=this,r=0,i=t;r<i.length;r+=1){var o=i[r];n.layers[0].filter(o)&&(n.addFeature(o),e.featureIndex.insert(o,n.index))}},a.prototype.getPaintPropertyStatistics=function(){return o.mapObject(this.arrays.layerData,function(t){return t.paintPropertyStatistics})},a.prototype.isEmpty=function(){return this.arrays.isEmpty()},a.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map(function(t){return t.id}),arrays:this.arrays.serialize(t)}},a.prototype.destroy=function(){this.buffers&&(this.buffers.destroy(),this.buffers=null)},e.exports=a,a.deserialize=function(t,e){if(e){for(var n={},r=0,i=t;r<i.length;r+=1){var a=i[r],s=a.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==s.length)for(var u=s[0].createBucket(o.extend({layers:s},a)),l=0,c=s;l<c.length;l+=1){var h=c[l];n[h.id]=u}}return n}}},{"../util/util":215,"./array_group":44,"./buffer_group":52}],46:[function(t,e,n){"use strict";function r(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}var i=t("../bucket"),o=t("../element_array_type"),a=t("../load_geometry"),s=t("../extent"),u={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],elementArrayType:o(),paintAttributes:[{property:"circle-color",type:"Uint8"},{property:"circle-radius",type:"Uint16",multiplier:10},{property:"circle-blur",type:"Uint16",multiplier:10},{property:"circle-opacity",type:"Uint8",multiplier:255},{property:"circle-stroke-color",type:"Uint8"},{property:"circle-stroke-width",type:"Uint16",multiplier:10},{property:"circle-stroke-opacity",type:"Uint8",multiplier:255}]},l=function(t){function e(e){t.call(this,e,u)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this.arrays,n=0,i=a(t);n<i.length;n+=1)for(var o=i[n],u=0,l=o;u<l.length;u+=1){var c=l[u],h=c.x,f=c.y;if(!(h<0||h>=s||f<0||f>=s)){var p=e.prepareSegment(4),d=p.vertexLength;r(e.layoutVertexArray,h,f,-1,-1),r(e.layoutVertexArray,h,f,1,-1),r(e.layoutVertexArray,h,f,1,1),r(e.layoutVertexArray,h,f,-1,1),e.elementArray.emplaceBack(d,d+1,d+2),e.elementArray.emplaceBack(d,d+3,d+2),p.vertexLength+=4,p.primitiveLength+=2}}e.populatePaintArrays(t.properties)},e}(i);l.programInterface=u,e.exports=l},{"../bucket":45,"../element_array_type":53,"../extent":54,"../load_geometry":56}],47:[function(t,e,n){"use strict";var r=t("../bucket"),i=t("../element_array_type"),o=t("../load_geometry"),a=t("earcut"),s=t("../../util/classify_rings"),u=500,l={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],elementArrayType:i(3),elementArrayType2:i(2),paintAttributes:[{property:"fill-color",type:"Uint8"},{property:"fill-outline-color",type:"Uint8"},{property:"fill-opacity",type:"Uint8",multiplier:255}]},c=function(t){function e(e){t.call(this,e,l)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this.arrays,n=0,r=s(o(t),u);n<r.length;n+=1){for(var i=r[n],l=0,c=0,h=i;c<h.length;c+=1){var f=h[c];l+=f.length}for(var p=e.prepareSegment(l),d=p.vertexLength,m=[],v=[],y=0,_=i;y<_.length;y+=1){var g=_[y];if(0!==g.length){g!==i[0]&&v.push(m.length/2);var x=e.prepareSegment2(g.length),b=x.vertexLength;e.layoutVertexArray.emplaceBack(g[0].x,g[0].y),e.elementArray2.emplaceBack(b+g.length-1,b),m.push(g[0].x),m.push(g[0].y);for(var w=1;w<g.length;w++)e.layoutVertexArray.emplaceBack(g[w].x,g[w].y),e.elementArray2.emplaceBack(b+w-1,b+w),m.push(g[w].x),m.push(g[w].y);x.vertexLength+=g.length,x.primitiveLength+=g.length}}for(var M=a(m,v),T=0;T<M.length;T+=3)e.elementArray.emplaceBack(d+M[T],d+M[T+1],d+M[T+2]);p.vertexLength+=l,p.primitiveLength+=M.length/3}e.populatePaintArrays(t.properties)},e}(r);c.programInterface=l,e.exports=c},{"../../util/classify_rings":198,"../bucket":45,"../element_array_type":53,"../load_geometry":56,earcut:5}],48:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*p)+a,i*p*2,o*p*2,Math.round(s))}function i(t,e){return t.x===e.x&&(t.x<0||t.x>u)||t.y===e.y&&(t.y<0||t.y>u)}var o=t("../bucket"),a=t("../element_array_type"),s=t("../load_geometry"),u=t("../extent"),l=t("earcut"),c=t("../../util/classify_rings"),h=500,f={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_normal",components:3,type:"Int16"},{name:"a_edgedistance",components:1,type:"Int16"}],elementArrayType:a(3),paintAttributes:[{property:"fill-extrusion-base",type:"Uint16"},{property:"fill-extrusion-height",type:"Uint16"},{property:"fill-extrusion-color",type:"Uint8"}]},p=Math.pow(2,13),d=function(t){function e(e){t.call(this,e,f)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this.arrays,n=0,o=c(s(t),h);n<o.length;n+=1){for(var a=o[n],u=0,f=0,p=a;f<p.length;f+=1){var d=p[f];u+=d.length}for(var m=e.prepareSegment(5*u),v=[],y=[],_=[],g=0,x=a;g<x.length;g+=1){var b=x[g];if(0!==b.length){b!==a[0]&&y.push(v.length/2);for(var w=0,M=0;M<b.length;M++){var T=b[M];if(r(e.layoutVertexArray,T.x,T.y,0,0,1,1,0),_.push(m.vertexLength++),M>=1){var S=b[M-1];if(!i(T,S)){var E=T.sub(S)._perp()._unit();r(e.layoutVertexArray,T.x,T.y,E.x,E.y,0,0,w),r(e.layoutVertexArray,T.x,T.y,E.x,E.y,0,1,w),w+=S.dist(T),r(e.layoutVertexArray,S.x,S.y,E.x,E.y,0,0,w),r(e.layoutVertexArray,S.x,S.y,E.x,E.y,0,1,w);var A=m.vertexLength;e.elementArray.emplaceBack(A,A+1,A+2),e.elementArray.emplaceBack(A+1,A+2,A+3),m.vertexLength+=4,m.primitiveLength+=2}}v.push(T.x),v.push(T.y)}}}for(var k=l(v,y),z=0;z<k.length;z+=3)e.elementArray.emplaceBack(_[k[z]],_[k[z+1]],_[k[z+2]]);m.primitiveLength+=k.length/3}e.populatePaintArrays(t.properties)},e}(o);d.programInterface=f,e.exports=d},{"../../util/classify_rings":198,"../bucket":45,"../element_array_type":53,"../extent":54,"../load_geometry":56,earcut:5}],49:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){t.emplaceBack(e.x<<1|r,e.y<<1|i,Math.round(l*n.x)+128,Math.round(l*n.y)+128,(0===o?0:o<0?-1:1)+1|(a*p&63)<<2,a*p>>6)}var i=t("../bucket"),o=t("../element_array_type"),a=t("../load_geometry"),s=t("../extent"),u=t("vector-tile").VectorTileFeature,l=63,c=Math.cos(37.5*(Math.PI/180)),h=15,f=15,p=.5,d=Math.pow(2,f-1)/p,m={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],paintAttributes:[{property:"line-color",type:"Uint8"},{property:"line-blur",multiplier:10,type:"Uint8"},{property:"line-opacity",multiplier:10,type:"Uint8"},{property:"line-gap-width",multiplier:10,type:"Uint8",name:"a_gapwidth"},{property:"line-offset",multiplier:1,type:"Int8"}],elementArrayType:o()},v=function(t){function e(e){t.call(this,e,m)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this,n=this.layers[0].layout,r=n["line-join"],i=n["line-cap"],o=n["line-miter-limit"],s=n["line-round-limit"],u=0,l=a(t,f);u<l.length;u+=1){var c=l[u];e.addLine(c,t,r,i,o,s)}},e.prototype.addLine=function(t,e,n,r,i,o){for(var a=this,l=e.properties,f="Polygon"===u.types[e.type],p=t.length;p>=2&&t[p-1].equals(t[p-2]);)p--;for(var d=0;d<p-1&&t[d].equals(t[d+1]);)d++;if(!(p<(f?3:2))){"bevel"===n&&(i=1.05);var m=h*(s/(512*this.overscaling)),v=t[d],y=this.arrays,_=y.prepareSegment(10*p);this.distance=0;var g,x,b,w,M,T,S,E=r,A=f?"butt":r,k=!0;this.e1=this.e2=this.e3=-1,f&&(g=t[p-2],M=v.sub(g)._unit()._perp());for(var z=d;z<p;z++)if(b=f&&z===p-1?t[d+1]:t[z+1],!b||!t[z].equals(b)){M&&(w=M),g&&(x=g),g=t[z],M=b?b.sub(g)._unit()._perp():w,w=w||M;var C=w.add(M);0===C.x&&0===C.y||C._unit();var P=C.x*M.x+C.y*M.y,L=0!==P?1/P:1/0,I=P<c&&x&&b;if(I&&z>d){var O=g.dist(x);if(O>2*m){var R=g.sub(g.sub(x)._mult(m/O)._round());a.distance+=R.dist(x),a.addCurrentVertex(R,a.distance,w.mult(1),0,0,!1,_),x=R}}var N=x&&b,D=N?n:b?E:A;if(N&&"round"===D&&(L<o?D="miter":L<=2&&(D="fakeround")),"miter"===D&&L>i&&(D="bevel"),"bevel"===D&&(L>2&&(D="flipbevel"),L<i&&(D="miter")),x&&(a.distance+=g.dist(x)),"miter"===D)C._mult(L),a.addCurrentVertex(g,a.distance,C,0,0,!1,_);else if("flipbevel"===D){if(L>100)C=M.clone().mult(-1);else{var j=w.x*M.y-w.y*M.x>0?-1:1,B=L*w.add(M).mag()/w.sub(M).mag();C._perp()._mult(B*j)}a.addCurrentVertex(g,a.distance,C,0,0,!1,_),a.addCurrentVertex(g,a.distance,C.mult(-1),0,0,!1,_)}else if("bevel"===D||"fakeround"===D){var F=w.x*M.y-w.y*M.x>0,U=-Math.sqrt(L*L-1);if(F?(S=0,T=U):(T=0,S=U),k||a.addCurrentVertex(g,a.distance,w,T,S,!1,_),"fakeround"===D){for(var V=Math.floor(8*(.5-(P-.5))),q=void 0,Z=0;Z<V;Z++)q=M.mult((Z+1)/(V+1))._add(w)._unit(),a.addPieSliceVertex(g,a.distance,q,F,_);a.addPieSliceVertex(g,a.distance,C,F,_);for(var W=V-1;W>=0;W--)q=w.mult((W+1)/(V+1))._add(M)._unit(),a.addPieSliceVertex(g,a.distance,q,F,_)}b&&a.addCurrentVertex(g,a.distance,M,-T,-S,!1,_)}else"butt"===D?(k||a.addCurrentVertex(g,a.distance,w,0,0,!1,_),b&&a.addCurrentVertex(g,a.distance,M,0,0,!1,_)):"square"===D?(k||(a.addCurrentVertex(g,a.distance,w,1,1,!1,_),a.e1=a.e2=-1),b&&a.addCurrentVertex(g,a.distance,M,-1,-1,!1,_)):"round"===D&&(k||(a.addCurrentVertex(g,a.distance,w,0,0,!1,_),a.addCurrentVertex(g,a.distance,w,1,1,!0,_),a.e1=a.e2=-1),b&&(a.addCurrentVertex(g,a.distance,M,-1,-1,!0,_),a.addCurrentVertex(g,a.distance,M,0,0,!1,_)));if(I&&z<p-1){var G=g.dist(b);if(G>2*m){var H=g.add(b.sub(g)._mult(m/G)._round());a.distance+=H.dist(g),a.addCurrentVertex(H,a.distance,M.mult(1),0,0,!1,_),g=H}}k=!1}y.populatePaintArrays(l)}},e.prototype.addCurrentVertex=function(t,e,n,i,o,a,s){var u,l=a?1:0,c=this.arrays,h=c.layoutVertexArray,f=c.elementArray;u=n.clone(),i&&u._sub(n.perp()._mult(i)),r(h,t,u,l,0,i,e),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(f.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),o&&u._sub(n.perp()._mult(o)),r(h,t,u,l,1,-o,e),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(f.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,
e>d/2&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,i,o,a,s))},e.prototype.addPieSliceVertex=function(t,e,n,i,o){var a=i?1:0;n=n.mult(i?-1:1);var s=this.arrays,u=s.layoutVertexArray,l=s.elementArray;r(u,t,n,0,a,0,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(l.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),i?this.e2=this.e3:this.e1=this.e3},e}(i);v.programInterface=m,e.exports=v},{"../bucket":45,"../element_array_type":53,"../extent":54,"../load_geometry":56,"vector-tile":34}],50:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s,u,l,c,h){t.emplaceBack(e,n,Math.round(64*r),Math.round(64*i),o/4,a/4,p(10*(c||0),h%256),p(10*(u||0),10*Math.min(l||25,25)),s?s[0]:void 0,s?s[1]:void 0,s?s[2]:void 0)}function i(t,e,n,r,i){return t.emplaceBack(e.x,e.y,Math.round(n.x),Math.round(n.y),10*r,10*i)}function o(t,e,n){var r={isFeatureConstant:e.isLayoutValueFeatureConstant(n),isZoomConstant:e.isLayoutValueZoomConstant(n)};if(r.isFeatureConstant&&(r.layoutSize=e.getLayoutValue(n,{zoom:t+1})),!r.isZoomConstant){for(var i=e.getLayoutValueStopZoomLevels(n),o=0;o<i.length&&i[o]<=t;)o++;o=Math.max(0,o-1);for(var a=o;a<i.length&&i[a]<t+1;)a++;a=Math.min(i.length-1,a),r.coveringZoomRange=[i[o],i[a]],e.isLayoutValueFeatureConstant(n)&&(r.coveringStopValues=[e.getLayoutValue(n,{zoom:i[o]}),e.getLayoutValue(n,{zoom:i[a]})]),r.functionBase=e.getLayoutProperty(n).base,"undefined"==typeof r.functionBase&&(r.functionBase=1),r.functionType=e.getLayoutProperty(n).type||"exponential"}return r}function a(t,e){return t.isLayoutValueZoomConstant(e)&&!t.isLayoutValueFeatureConstant(e)?[{name:"a_size",components:1,type:"Uint16"}]:t.isLayoutValueZoomConstant(e)||t.isLayoutValueFeatureConstant(e)?[]:[{name:"a_size",components:3,type:"Uint16"}]}function s(t,e,n,r,i){return t.isLayoutValueZoomConstant(r)&&!t.isLayoutValueFeatureConstant(r)?[10*t.getLayoutValue(r,{},i)]:t.isLayoutValueZoomConstant(r)||t.isLayoutValueFeatureConstant(r)?null:[10*t.getLayoutValue(r,{zoom:n[0]},i),10*t.getLayoutValue(r,{zoom:n[1]},i),10*t.getLayoutValue(r,{zoom:1+e},i)]}var u=t("point-geometry"),l=t("../array_group"),c=t("../buffer_group"),h=t("../element_array_type"),f=t("../extent"),p=t("../../shaders/encode_attribute").packUint8ToFloat,d=t("../../symbol/anchor"),m=t("../../symbol/get_anchors"),v=t("../../util/token"),y=t("../../symbol/quads"),_=t("../../symbol/shaping"),g=t("../../symbol/transform_text"),x=t("../../symbol/mergelines"),b=t("../../symbol/clip_line"),w=t("../../util/util"),M=t("../../util/script_detection"),T=t("../load_geometry"),S=t("../../symbol/collision_feature"),E=t("../../util/find_pole_of_inaccessibility"),A=t("../../util/classify_rings"),k=t("vector-tile").VectorTileFeature,z=_.shapeText,C=_.shapeIcon,P=_.WritingMode,L=y.getGlyphQuads,I=y.getIconQuads,O=h(),R=[{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}],N={glyph:{layoutAttributes:R,elementArrayType:O,paintAttributes:[{name:"a_fill_color",property:"text-color",type:"Uint8"},{name:"a_halo_color",property:"text-halo-color",type:"Uint8"},{name:"a_halo_width",property:"text-halo-width",type:"Uint16",multiplier:10},{name:"a_halo_blur",property:"text-halo-blur",type:"Uint16",multiplier:10},{name:"a_opacity",property:"text-opacity",type:"Uint8",multiplier:255}]},icon:{layoutAttributes:R,elementArrayType:O,paintAttributes:[{name:"a_fill_color",property:"icon-color",type:"Uint8"},{name:"a_halo_color",property:"icon-halo-color",type:"Uint8"},{name:"a_halo_width",property:"icon-halo-width",type:"Uint16",multiplier:10},{name:"a_halo_blur",property:"icon-halo-blur",type:"Uint16",multiplier:10},{name:"a_opacity",property:"icon-opacity",type:"Uint8",multiplier:255}]},collisionBox:{layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}],elementArrayType:h(2)}},D=function(t){var e=this;this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,this.sdfIcons=t.sdfIcons,this.iconsNeedLinear=t.iconsNeedLinear,this.fontstack=t.fontstack;var n=this.layers[0];if(this.symbolInterfaces={glyph:w.extend({},N.glyph,{layoutAttributes:[].concat(N.glyph.layoutAttributes,a(n,"text-size"))}),icon:w.extend({},N.icon,{layoutAttributes:[].concat(N.icon.layoutAttributes,a(n,"icon-size"))}),collisionBox:w.extend({},N.collisionBox,{layoutAttributes:[].concat(N.collisionBox.layoutAttributes)})},t.arrays){this.buffers={};for(var r in t.arrays)t.arrays[r]&&(e.buffers[r]=new c(e.symbolInterfaces[r],t.layers,t.zoom,t.arrays[r]));this.textSizeData=t.textSizeData,this.iconSizeData=t.iconSizeData}else this.textSizeData=o(this.zoom,n,"text-size"),this.iconSizeData=o(this.zoom,n,"icon-size")};D.prototype.populate=function(t,e){var n=this,r=this.layers[0],i=r.layout,o=i["text-font"],a=(!r.isLayoutValueFeatureConstant("text-field")||i["text-field"])&&o,s=!r.isLayoutValueFeatureConstant("icon-image")||i["icon-image"];if(this.features=[],a||s){for(var u=e.iconDependencies,l=e.glyphDependencies,c=l[o]=l[o]||{},h={zoom:this.zoom},f=0;f<t.length;f++){var p=t[f];if(r.filter(p)){var d=void 0;a&&(d=r.getLayoutValue("text-field",h,p.properties),r.isLayoutValueFeatureConstant("text-field")&&(d=v(p.properties,d)),d=g(d,r,h,p.properties));var m=void 0;if(s&&(m=r.getLayoutValue("icon-image",h,p.properties),r.isLayoutValueFeatureConstant("icon-image")&&(m=v(p.properties,m))),(d||m)&&(n.features.push({text:d,icon:m,index:f,sourceLayerIndex:p.sourceLayerIndex,geometry:T(p),properties:p.properties,type:k.types[p.type]}),m&&(u[m]=!0),d))for(var y=0;y<d.length;y++)c[d.charCodeAt(y)]=!0}}"line"===i["symbol-placement"]&&(this.features=x(this.features))}},D.prototype.isEmpty=function(){return this.arrays.icon.isEmpty()&&this.arrays.glyph.isEmpty()&&this.arrays.collisionBox.isEmpty()},D.prototype.getPaintPropertyStatistics=function(){for(var t=this,e={},n=0,r=t.layers;n<r.length;n+=1){var i=r[n];e[i.id]=w.extend({},t.arrays.icon.layerData[i.id].paintPropertyStatistics,t.arrays.glyph.layerData[i.id].paintPropertyStatistics)}return e},D.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map(function(t){return t.id}),sdfIcons:this.sdfIcons,iconsNeedLinear:this.iconsNeedLinear,textSizeData:this.textSizeData,iconSizeData:this.iconSizeData,fontstack:this.fontstack,arrays:w.mapObject(this.arrays,function(e){return e.isEmpty()?null:e.serialize(t)})}},D.prototype.destroy=function(){this.buffers&&(this.buffers.icon&&this.buffers.icon.destroy(),this.buffers.glyph&&this.buffers.glyph.destroy(),this.buffers.collisionBox&&this.buffers.collisionBox.destroy(),this.buffers=null)},D.prototype.createArrays=function(){var t=this;this.arrays=w.mapObject(this.symbolInterfaces,function(e){return new l(e,t.layers,t.zoom)})},D.prototype.prepare=function(t,e){var n=this;this.symbolInstances=[];var r=512*this.overscaling;this.tilePixelRatio=f/r,this.compareText={},this.iconsNeedLinear=!1;var i=this.layers[0].layout,o=.5,a=.5;switch(i["text-anchor"]){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(i["text-anchor"]){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}for(var s="right"===i["text-justify"]?1:"left"===i["text-justify"]?0:.5,u=24,l=i["text-line-height"]*u,c="line"!==i["symbol-placement"]?i["text-max-width"]*u:0,h=i["text-letter-spacing"]*u,p=this.fontstack=i["text-font"].join(","),d="map"===i["text-rotation-alignment"]&&"line"===i["symbol-placement"],m=0,v=n.features;m<v.length;m+=1){var y=v[m],_=void 0;if(y.text){var g=M.allowsVerticalWritingMode(y.text),x=n.layers[0].getLayoutValue("text-offset",{zoom:n.zoom},y.properties).map(function(t){return t*u});_={},_[P.horizontal]=z(y.text,t[p],c,l,o,a,s,h,x,u,P.horizontal),_[P.vertical]=g&&d&&z(y.text,t[p],c,l,o,a,s,h,x,u,P.vertical)}else _={};var b=void 0;if(y.icon){var T=e[y.icon],S=n.layers[0].getLayoutValue("icon-offset",{zoom:n.zoom},y.properties);b=C(T,S),T&&(void 0===n.sdfIcons?n.sdfIcons=T.sdf:n.sdfIcons!==T.sdf&&w.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),1!==T.pixelRatio?n.iconsNeedLinear=!0:0===i["icon-rotate"]&&n.layers[0].isLayoutValueFeatureConstant("icon-rotate")||(n.iconsNeedLinear=!0))}(_[P.horizontal]||b)&&n.addFeature(y,_,b)}},D.prototype.addFeature=function(t,e,n){var r=this,i=this.layers[0].getLayoutValue("text-size",{zoom:this.zoom+1},t.properties),o=this.layers[0].getLayoutValue("icon-size",{zoom:this.zoom+1},t.properties),a=this.layers[0].getLayoutValue("text-size",{zoom:18},t.properties);void 0===a&&(a=i);var s=this.layers[0].layout,u=24,l=i/u,c=this.tilePixelRatio*l,h=this.tilePixelRatio*a/u,p=this.tilePixelRatio*o,v=this.tilePixelRatio*s["symbol-spacing"],y=s["symbol-avoid-edges"],_=s["text-padding"]*this.tilePixelRatio,g=s["icon-padding"]*this.tilePixelRatio,x=s["text-max-angle"]/180*Math.PI,w="map"===s["text-rotation-alignment"]&&"line"===s["symbol-placement"],M="map"===s["icon-rotation-alignment"]&&"line"===s["symbol-placement"],T=s["text-allow-overlap"]||s["icon-allow-overlap"]||s["text-ignore-placement"]||s["icon-ignore-placement"],S=s["symbol-placement"],k=v/2,z=function(i,o){var a=!(o.x<0||o.x>f||o.y<0||o.y>f);if(!y||a){var s=a||T;r.addSymbolInstance(o,i,e,n,r.layers[0],s,r.collisionBoxArray,t.index,t.sourceLayerIndex,r.index,c,_,w,p,g,M,{zoom:r.zoom},t.properties)}};if("line"===S)for(var C=0,L=b(t.geometry,0,0,f,f);C<L.length;C+=1)for(var I=L[C],O=m(I,v,x,e[P.vertical]||e[P.horizontal],n,u,h,r.overscaling,f),R=0,N=O;R<N.length;R+=1){var D=N[R],j=e[P.horizontal];j&&r.anchorIsTooClose(j.text,k,D)||z(I,D)}else if("Polygon"===t.type)for(var B=0,F=A(t.geometry,0);B<F.length;B+=1){var U=F[B],V=E(U,16);z(U[0],new d(V.x,V.y,0))}else if("LineString"===t.type)for(var q=0,Z=t.geometry;q<Z.length;q+=1){var W=Z[q];z(W,new d(W[0].x,W[0].y,0))}else if("Point"===t.type)for(var G=0,H=t.geometry;G<H.length;G+=1)for(var X=H[G],Y=0,K=X;Y<K.length;Y+=1){var J=K[Y];z([J],new d(J.x,J.y,0))}},D.prototype.anchorIsTooClose=function(t,e,n){var r=this.compareText;if(t in r){for(var i=r[t],o=i.length-1;o>=0;o--)if(n.dist(i[o])<e)return!0}else r[t]=[];return r[t].push(n),!1},D.prototype.place=function(t,e){var n=this;this.createArrays();var r=this.layers[0],i=r.layout,o=t.maxScale,a="map"===i["text-rotation-alignment"]&&"line"===i["symbol-placement"],u="map"===i["icon-rotation-alignment"]&&"line"===i["symbol-placement"],l=i["text-allow-overlap"]||i["icon-allow-overlap"]||i["text-ignore-placement"]||i["icon-ignore-placement"];if(l){var c=t.angle,h=Math.sin(c),f=Math.cos(c);this.symbolInstances.sort(function(t,e){var n=h*t.anchor.x+f*t.anchor.y|0,r=h*e.anchor.x+f*e.anchor.y|0;return n-r||e.featureIndex-t.featureIndex})}for(var p=0,d=n.symbolInstances;p<d.length;p+=1){var m=d[p],v={boxStartIndex:m.textBoxStartIndex,boxEndIndex:m.textBoxEndIndex},y={boxStartIndex:m.iconBoxStartIndex,boxEndIndex:m.iconBoxEndIndex},_=!(m.textBoxStartIndex===m.textBoxEndIndex),g=!(m.iconBoxStartIndex===m.iconBoxEndIndex),x=i["text-optional"]||!_,b=i["icon-optional"]||!g,w=_?t.placeCollisionFeature(v,i["text-allow-overlap"],i["symbol-avoid-edges"]):t.minScale,M=g?t.placeCollisionFeature(y,i["icon-allow-overlap"],i["symbol-avoid-edges"]):t.minScale;if(x||b?!b&&w?w=Math.max(M,w):!x&&M&&(M=Math.max(M,w)):M=w=Math.max(M,w),_&&(t.insertCollisionFeature(v,w,i["text-ignore-placement"]),w<=o)){var T=s(r,n.zoom,n.textSizeData.coveringZoomRange,"text-size",m.featureProperties);n.addSymbols(n.arrays.glyph,m.glyphQuads,w,T,i["text-keep-upright"],a,t.angle,m.featureProperties,m.writingModes)}if(g&&(t.insertCollisionFeature(y,M,i["icon-ignore-placement"]),M<=o)){var S=s(r,n.zoom,n.iconSizeData.coveringZoomRange,"icon-size",m.featureProperties);n.addSymbols(n.arrays.icon,m.iconQuads,M,S,i["icon-keep-upright"],u,t.angle,m.featureProperties)}}e&&this.addToDebugBuffers(t)},D.prototype.addSymbols=function(t,e,n,i,o,a,s,u,l){for(var c=t.elementArray,h=t.layoutVertexArray,f=this.zoom,p=Math.max(Math.log(n)/Math.LN2+f,0),d=0,m=e;d<m.length;d+=1){var v=m[d],y=(v.anchorAngle+s+Math.PI)%(2*Math.PI);if(l&P.vertical){if(a&&v.writingMode===P.vertical){if(o&&a&&y<=5*Math.PI/4||y>7*Math.PI/4)continue}else if(o&&a&&y<=3*Math.PI/4||y>5*Math.PI/4)continue}else if(o&&a&&(y<=Math.PI/2||y>3*Math.PI/2))continue;var _=v.tl,g=v.tr,x=v.bl,b=v.br,w=v.tex,M=v.anchorPoint,T=Math.max(f+Math.log(v.minScale)/Math.LN2,p),S=Math.min(f+Math.log(v.maxScale)/Math.LN2,25);if(!(S<=T)){T===p&&(T=0);var E=Math.round(v.glyphAngle/(2*Math.PI)*256),A=t.prepareSegment(4),k=A.vertexLength;r(h,M.x,M.y,_.x,_.y,w.x,w.y,i,T,S,p,E),r(h,M.x,M.y,g.x,g.y,w.x+w.w,w.y,i,T,S,p,E),r(h,M.x,M.y,x.x,x.y,w.x,w.y+w.h,i,T,S,p,E),r(h,M.x,M.y,b.x,b.y,w.x+w.w,w.y+w.h,i,T,S,p,E),c.emplaceBack(k,k+1,k+2),c.emplaceBack(k+1,k+2,k+3),A.vertexLength+=4,A.primitiveLength+=2}}t.populatePaintArrays(u)},D.prototype.addToDebugBuffers=function(t){for(var e=this,n=this.arrays.collisionBox,r=n.layoutVertexArray,o=n.elementArray,a=-t.angle,s=t.yStretch,l=0,c=e.symbolInstances;l<c.length;l+=1){var h=c[l];h.textCollisionFeature={boxStartIndex:h.textBoxStartIndex,boxEndIndex:h.textBoxEndIndex},h.iconCollisionFeature={boxStartIndex:h.iconBoxStartIndex,boxEndIndex:h.iconBoxEndIndex};for(var f=0;f<2;f++){var p=h[0===f?"textCollisionFeature":"iconCollisionFeature"];if(p)for(var d=p.boxStartIndex;d<p.boxEndIndex;d++){var m=e.collisionBoxArray.get(d),v=m.anchorPoint,y=new u(m.x1,m.y1*s)._rotate(a),_=new u(m.x2,m.y1*s)._rotate(a),g=new u(m.x1,m.y2*s)._rotate(a),x=new u(m.x2,m.y2*s)._rotate(a),b=Math.max(0,Math.min(25,e.zoom+Math.log(m.maxScale)/Math.LN2)),w=Math.max(0,Math.min(25,e.zoom+Math.log(m.placementScale)/Math.LN2)),M=n.prepareSegment(4),T=M.vertexLength;i(r,v,y,b,w),i(r,v,_,b,w),i(r,v,x,b,w),i(r,v,g,b,w),o.emplaceBack(T,T+1),o.emplaceBack(T+1,T+2),o.emplaceBack(T+2,T+3),o.emplaceBack(T+3,T),M.vertexLength+=4,M.primitiveLength+=4}}}},D.prototype.addSymbolInstance=function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,m,v,y){var _,g,x=[],b=[];for(var M in n){var T=parseInt(M,10);n[T]&&(b=b.concat(o?L(t,n[T],c,e,i,f,v,y):[]),_=new S(a,e,t,s,u,l,n[T],c,h,f,!1))}var E=_?_.boxStartIndex:this.collisionBoxArray.length,A=_?_.boxEndIndex:this.collisionBoxArray.length;r&&(x=o?I(t,r,p,e,i,m,n[P.horizontal],v,y):[],g=new S(a,e,t,s,u,l,r,p,d,m,!0));var k=g?g.boxStartIndex:this.collisionBoxArray.length,z=g?g.boxEndIndex:this.collisionBoxArray.length;A>D.MAX_INSTANCES&&w.warnOnce("Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),z>D.MAX_INSTANCES&&w.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");var C=(n[P.vertical]?P.vertical:0)|(n[P.horizontal]?P.horizontal:0);this.symbolInstances.push({textBoxStartIndex:E,textBoxEndIndex:A,iconBoxStartIndex:k,iconBoxEndIndex:z,glyphQuads:b,iconQuads:x,anchor:t,featureIndex:s,featureProperties:y,writingModes:C})},D.programInterfaces=N,D.MAX_INSTANCES=65535,e.exports=D},{"../../shaders/encode_attribute":81,"../../symbol/anchor":160,"../../symbol/clip_line":162,"../../symbol/collision_feature":164,"../../symbol/get_anchors":166,"../../symbol/mergelines":169,"../../symbol/quads":170,"../../symbol/shaping":171,"../../symbol/transform_text":173,"../../util/classify_rings":198,"../../util/find_pole_of_inaccessibility":204,"../../util/script_detection":211,"../../util/token":214,"../../util/util":215,"../array_group":44,"../buffer_group":52,"../element_array_type":53,"../extent":54,"../load_geometry":56,"point-geometry":26,"vector-tile":34}],51:[function(t,e,n){"use strict";var r={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT"},i=function(t,e,n){this.arrayBuffer=t.arrayBuffer,this.length=t.length,this.attributes=e.members,this.itemSize=e.bytesPerElement,this.type=n,this.arrayType=e};i.fromStructArray=function(t,e){return new i(t.serialize(),t.constructor.serialize(),e)},i.prototype.bind=function(t){var e=t[this.type];this.buffer?t.bindBuffer(e,this.buffer):(this.gl=t,this.buffer=t.createBuffer(),t.bindBuffer(e,this.buffer),t.bufferData(e,this.arrayBuffer,t.STATIC_DRAW),this.arrayBuffer=null)},i.prototype.enableAttributes=function(t,e){for(var n=this,r=0;r<this.attributes.length;r++){var i=n.attributes[r],o=e[i.name];void 0!==o&&t.enableVertexAttribArray(o)}},i.prototype.setVertexAttribPointers=function(t,e,n){for(var i=this,o=0;o<this.attributes.length;o++){var a=i.attributes[o],s=e[a.name];void 0!==s&&t.vertexAttribPointer(s,a.components,t[r[a.type]],!1,i.arrayType.bytesPerElement,a.offset+(i.arrayType.bytesPerElement*n||0))}},i.prototype.destroy=function(){this.buffer&&this.gl.deleteBuffer(this.buffer)},i.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"},e.exports=i},{}],52:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("./buffer"),o=t("./program_configuration"),a=t("./vertex_array_type"),s=t("../render/vertex_array_object"),u=function(t,e,n,u){var l=this,c=a(t.layoutAttributes);this.layoutVertexBuffer=new i(u.layoutVertexArray,c.serialize(),i.BufferType.VERTEX),u.elementArray&&(this.elementBuffer=new i(u.elementArray,t.elementArrayType.serialize(),i.BufferType.ELEMENT)),u.elementArray2&&(this.elementBuffer2=new i(u.elementArray2,t.elementArrayType2.serialize(),i.BufferType.ELEMENT)),this.layerData={};for(var h=0,f=e;h<f.length;h+=1){var p=f[h],d=u.paintVertexArrays&&u.paintVertexArrays[p.id],m=o.createDynamic(t.paintAttributes||[],p,n),v=d?new i(d.array,d.type,i.BufferType.VERTEX):null;l.layerData[p.id]={programConfiguration:m,paintVertexBuffer:v}}this.segments=u.segments,this.segments2=u.segments2;for(var y=0,_=[l.segments,l.segments2];y<_.length;y+=1)for(var g=_[y],x=0,b=g||[];x<b.length;x+=1){var w=b[x];w.vaos=r.mapObject(l.layerData,function(){return new s})}};u.prototype.destroy=function(){var t=this;this.layoutVertexBuffer.destroy(),this.elementBuffer&&this.elementBuffer.destroy(),this.elementBuffer2&&this.elementBuffer2.destroy();for(var e in t.layerData){var n=t.layerData[e].paintVertexBuffer;n&&n.destroy()}for(var r=0,i=[t.segments,t.segments2];r<i.length;r+=1)for(var o=i[r],a=0,s=o||[];a<s.length;a+=1){var u=s[a];for(var l in u.vaos)u.vaos[l].destroy()}},e.exports=u},{"../render/vertex_array_object":80,"../util/util":215,"./buffer":51,"./program_configuration":58,"./vertex_array_type":60}],53:[function(t,e,n){"use strict";function r(t){return i({members:[{type:"Uint16",name:"vertices",components:t||3}]})}var i=t("../util/struct_array");e.exports=r},{"../util/struct_array":213}],54:[function(t,e,n){"use strict";e.exports=8192},{}],55:[function(t,e,n){"use strict";function r(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function i(t,e){return e-t}function o(t,e){return e>0?e+2*t:t}function a(t,e,n,r,i){if(!e[0]&&!e[1])return t;e=u.convert(e),"viewport"===n&&e._rotate(-r);for(var o=[],a=0;a<t.length;a++){for(var s=t[a],l=[],c=0;c<s.length;c++)l.push(s[c].sub(e._mult(i)));o.push(l)}return o}function s(t,e){for(var n=[],r=new u(0,0),i=0;i<t.length;i++){for(var o=t[i],a=[],s=0;s<o.length;s++){var l=o[s-1],c=o[s],h=o[s+1],f=0===s?r:c.sub(l)._unit()._perp(),p=s===o.length-1?r:h.sub(c)._unit()._perp(),d=f._add(p)._unit(),m=d.x*p.x+d.y*p.y;d._mult(1/m),a.push(d._mult(e)._add(c))}n.push(a)}return n}var u=t("point-geometry"),l=t("./load_geometry"),c=t("./extent"),h=t("../style-spec/feature_filter"),f=t("../util/struct_array"),p=t("grid-index"),d=t("../util/dictionary_coder"),m=t("vector-tile"),v=t("pbf"),y=t("../util/vectortile_to_geojson"),_=t("../util/util").arraysIntersect,g=t("../util/intersection_tests"),x=g.multiPolygonIntersectsBufferedMultiPoint,b=g.multiPolygonIntersectsMultiPolygon,w=g.multiPolygonIntersectsBufferedMultiLine,M=f({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]}),T=function(t,e,n){if(t.grid){var r=t,i=e;t=r.coord,e=r.overscaling,this.grid=new p(r.grid),this.featureIndexArray=new M(r.featureIndexArray),this.rawTileData=i,this.bucketLayerIDs=r.bucketLayerIDs,this.paintPropertyStatistics=r.paintPropertyStatistics}else this.grid=new p(c,16,0),this.featureIndexArray=new M;this.coord=t,this.overscaling=e,this.x=t.x,this.y=t.y,this.z=t.z-Math.log(e)/Math.LN2,this.setCollisionTile(n)};T.prototype.insert=function(t,e){var n=this,r=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(t.index,t.sourceLayerIndex,e);for(var i=l(t),o=0;o<i.length;o++){for(var a=i[o],s=[1/0,1/0,-(1/0),-(1/0)],u=0;u<a.length;u++){var c=a[u];s[0]=Math.min(s[0],c.x),s[1]=Math.min(s[1],c.y),s[2]=Math.max(s[2],c.x),s[3]=Math.max(s[3],c.y)}n.grid.insert(r,s[0],s[1],s[2],s[3])}},T.prototype.setCollisionTile=function(t){this.collisionTile=t},T.prototype.serialize=function(t){var e=this.grid.toArrayBuffer();return t&&t.push(e),{coord:this.coord,overscaling:this.overscaling,grid:e,featureIndexArray:this.featureIndexArray.serialize(t),bucketLayerIDs:this.bucketLayerIDs,paintPropertyStatistics:this.paintPropertyStatistics}},T.prototype.query=function(t,e){var n=this;this.vtLayers||(this.vtLayers=new m.VectorTile(new v(this.rawTileData)).layers,this.sourceLayerCoder=new d(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));var a={},s=t.params||{},l=c/t.tileSize/t.scale,f=h(s.filter),p=0;for(var y in e)if(n.hasLayer(y)){var _=e[y],g=0;if("line"===_.type){var x=o(n.getPaintValue("line-width",_),n.getPaintValue("line-gap-width",_)),b=n.getPaintValue("line-offset",_),w=n.getPaintValue("line-translate",_);g=x/2+Math.abs(b)+r(w)}else"fill"===_.type?g=r(n.getPaintValue("fill-translate",_)):"fill-extrusion"===_.type?g=r(n.getPaintValue("fill-extrusion-translate",_)):"circle"===_.type&&(g=n.getPaintValue("circle-radius",_)+r(n.getPaintValue("circle-translate",_)));p=Math.max(p,g*l)}for(var M=t.queryGeometry.map(function(t){return t.map(function(t){return new u(t.x,t.y)})}),T=1/0,S=1/0,E=-(1/0),A=-(1/0),k=0;k<M.length;k++)for(var z=M[k],C=0;C<z.length;C++){var P=z[C];T=Math.min(T,P.x),S=Math.min(S,P.y),E=Math.max(E,P.x),A=Math.max(A,P.y)}var L=this.grid.query(T-p,S-p,E+p,A+p);L.sort(i),this.filterMatching(a,L,this.featureIndexArray,M,f,s.layers,e,t.bearing,l);var I=this.collisionTile.queryRenderedSymbols(M,t.scale);return I.sort(),this.filterMatching(a,I,this.collisionTile.collisionBoxArray,M,f,s.layers,e,t.bearing,l),a},T.prototype.filterMatching=function(t,e,n,r,i,u,c,h,f){for(var p,d=this,m=0;m<e.length;m++){var v=e[m];if(v!==p){p=v;var g=n.get(v),M=d.bucketLayerIDs[g.bucketIndex];if(!u||_(u,M)){var T=d.sourceLayerCoder.decode(g.sourceLayerIndex),S=d.vtLayers[T],E=S.feature(g.featureIndex);if(i(E))for(var A=null,k=0;k<M.length;k++){var z=M[k];if(!(u&&u.indexOf(z)<0)){var C=c[z];if(C){var P=void 0;if("symbol"!==C.type)if(A||(A=l(E)),"line"===C.type){P=a(r,d.getPaintValue("line-translate",C,E),d.getPaintValue("line-translate-anchor",C,E),h,f);var L=f/2*o(d.getPaintValue("line-width",C,E),d.getPaintValue("line-gap-width",C,E)),I=d.getPaintValue("line-offset",C,E);if(I&&(A=s(A,I*f)),!w(P,A,L))continue}else if("fill"===C.type||"fill-extrusion"===C.type){var O=C.type;if(P=a(r,d.getPaintValue(O+"-translate",C,E),d.getPaintValue(O+"-translate-anchor",C,E),h,f),!b(P,A))continue}else if("circle"===C.type){P=a(r,d.getPaintValue("circle-translate",C,E),d.getPaintValue("circle-translate-anchor",C,E),h,f);var R=d.getPaintValue("circle-radius",C,E)*f;if(!x(P,A,R))continue}var N=new y(E,d.z,d.x,d.y);N.layer=C.serialize();var D=t[z];void 0===D&&(D=t[z]=[]),D.push(N)}}}}}}},T.prototype.hasLayer=function(t){var e=this;for(var n in e.bucketLayerIDs)for(var r=0,i=e.bucketLayerIDs[n];r<i.length;r+=1){var o=i[r];if(t===o)return!0}return!1},T.prototype.getPaintValue=function(t,e,n){var r=e.isPaintValueFeatureConstant(t);if(r||n){var i=n?n.properties:{};return e.getPaintValue(t,{zoom:this.z},i)}return this.paintPropertyStatistics[e.id][t].max},e.exports=T},{"../style-spec/feature_filter":105,"../util/dictionary_coder":200,"../util/intersection_tests":207,"../util/struct_array":213,"../util/util":215,"../util/vectortile_to_geojson":216,"./extent":54,"./load_geometry":56,"grid-index":16,pbf:25,"point-geometry":26,"vector-tile":34}],56:[function(t,e,n){"use strict";function r(t){return{min:-1*Math.pow(2,t-1),max:Math.pow(2,t-1)-1}}var i=t("../util/util"),o=t("./extent"),a={15:r(15),16:r(16)};e.exports=function(t,e){for(var n=a[e||16],r=o/t.extent,s=t.loadGeometry(),u=0;u<s.length;u++)for(var l=s[u],c=0;c<l.length;c++){var h=l[c];h.x=Math.round(h.x*r),h.y=Math.round(h.y*r),(h.x<n.min||h.x>n.max||h.y<n.min||h.y>n.max)&&i.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return s}},{"../util/util":215,"./extent":54}],57:[function(t,e,n){"use strict";var r=t("../util/struct_array"),i=r({members:[{name:"a_pos",type:"Int16",components:2}]});e.exports=i},{"../util/struct_array":213}],58:[function(t,e,n){"use strict";function r(t,e,n,r){if(!t.zoomStops)return e.getPaintValue(t.property,n,r);var i=t.zoomStops.map(function(i){return e.getPaintValue(t.property,a.extend({},n,{zoom:i}),r)});return 1===i.length?i[0]:i}function i(t,e){var n=t.name;n||(n=t.property.replace(e.type+"-","").replace(/-/g,"_"));var r="color"===e._paintSpecifications[t.property].type;return a.extend({name:"a_"+n,components:r?4:1,multiplier:r?255:1,dimensions:r?4:1},t)}var o=t("./vertex_array_type"),a=t("../util/util"),s=function(){this.attributes=[],this.uniforms=[],this.interpolationUniforms=[],this.pragmas={vertex:{},fragment:{}},this.cacheKey=""};s.createDynamic=function(t,e,n){for(var r=new s,a=0,u=t;a<u.length;a+=1){var l=u[a],c=i(l,e),h=c.name.slice(2);e.isPaintValueFeatureConstant(c.property)?r.addZoomAttribute(h,c):e.isPaintValueZoomConstant(c.property)?r.addPropertyAttribute(h,c):r.addZoomAndPropertyAttribute(h,c,e,n)}return r.PaintVertexArray=o(r.attributes),r},s.createStatic=function(t){for(var e=new s,n=0,r=t;n<r.length;n+=1){var i=r[n];e.addUniform(i,"u_"+i)}return e},s.prototype.addUniform=function(t,e){var n=this.getPragmas(t);n.define.push("uniform {precision} {type} "+e+";"),n.initialize.push("{precision} {type} "+t+" = "+e+";"),this.cacheKey+="/u_"+t},s.prototype.addZoomAttribute=function(t,e){this.uniforms.push(e),this.addUniform(t,e.name)},s.prototype.addPropertyAttribute=function(t,e){var n=this.getPragmas(t);this.attributes.push(e),n.define.push("varying {precision} {type} "+t+";"),n.vertex.define.push("attribute {precision} {type} "+e.name+";"),n.vertex.initialize.push(t+" = "+e.name+" / "+e.multiplier+".0;"),this.cacheKey+="/a_"+t},s.prototype.addZoomAndPropertyAttribute=function(t,e,n,r){var i=this,o=this.getPragmas(t);o.define.push("varying {precision} {type} "+t+";");var s=n.getPaintValueStopZoomLevels(e.property),u=0;if(s.length>4)for(;u<s.length-2&&s[u]<r;)u++;var l="u_"+t+"_t";o.vertex.define.push("uniform lowp float "+l+";"),this.interpolationUniforms.push({name:l,property:e.property,stopOffset:u});for(var c=[],h=0;h<4;h++)c.push(s[Math.min(u+h,s.length-1)]);var f=[];if(1===e.components)this.attributes.push(a.extend({},e,{components:4,zoomStops:c})),o.vertex.define.push("attribute {precision} vec4 "+e.name+";"),f.push(e.name);else for(var p=0;p<4;p++){var d=e.name+p;f.push(d),i.attributes.push(a.extend({},e,{name:d,zoomStops:[c[p]]})),o.vertex.define.push("attribute {precision} {type} "+d+";")}o.vertex.initialize.push(t+" = evaluate_zoom_function_"+e.components+"(            "+f.join(", ")+", "+l+") / "+e.multiplier+".0;"),this.cacheKey+="/z_"+t},s.prototype.getPragmas=function(t){return this.pragmas[t]||(this.pragmas[t]={define:[],initialize:[]},this.pragmas[t].fragment={define:[],initialize:[]},this.pragmas[t].vertex={define:[],initialize:[]}),this.pragmas[t]},s.prototype.applyPragmas=function(t,e){var n=this;return t.replace(/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,function(t,r,i,o,a){return n.pragmas[a][r].concat(n.pragmas[a][e][r]).join("\n").replace(/{type}/g,o).replace(/{precision}/g,i)})},s.prototype.createPaintPropertyStatistics=function(){for(var t=this,e={},n=0,r=t.attributes;n<r.length;n+=1){var i=r[n];1===i.dimensions&&(e[i.property]={max:-(1/0)})}return e},s.prototype.populatePaintArray=function(t,e,n,i,o,a){var s=this,u=e.length;e.resize(i);for(var l=0,c=s.attributes;l<c.length;l+=1)for(var h=c[l],f=r(h,t,o,a),p=u;p<i;p++){var d=e.get(p);if(4===h.components)for(var m=0;m<4;m++)d[h.name+m]=f[m]*h.multiplier;else d[h.name]=f*h.multiplier;if(1===h.dimensions){var v=n[h.property];v.max=Math.max(v.max,1===h.components?f:Math.max.apply(Math,f))}}},s.prototype.setUniforms=function(t,e,n,r){for(var i=this,o=0,a=i.uniforms;o<a.length;o+=1){var s=a[o],u=n.getPaintValue(s.property,r);4===s.components?t.uniform4fv(e[s.name],u):t.uniform1f(e[s.name],u)}for(var l=0,c=i.interpolationUniforms;l<c.length;l+=1){var h=c[l],f=n.getPaintInterpolationT(h.property,r);t.uniform1f(e[h.name],Math.max(0,Math.min(3,f-h.stopOffset)))}},e.exports=s},{"../util/util":215,"./vertex_array_type":60}],59:[function(t,e,n){"use strict";var r=t("../util/struct_array"),i=r({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]});e.exports=i},{"../util/struct_array":213}],60:[function(t,e,n){"use strict";function r(t){return i({members:t,alignment:4})}var i=t("../util/struct_array");e.exports=r},{"../util/struct_array":213}],61:[function(t,e,n){"use strict";var r=function(t,e,n){this.column=t,this.row=e,this.zoom=n};r.prototype.clone=function(){return new r(this.column,this.row,this.zoom)},r.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},r.prototype.sub=function(t){return this.clone()._sub(t)},r.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},r.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this},e.exports=r},{}],62:[function(t,e,n){"use strict";var r=t("../util/util").wrap,i=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};i.prototype.wrap=function(){return new i(r(this.lng,-180,180),this.lat)},i.prototype.toArray=function(){return[this.lng,this.lat]},i.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},i.convert=function(t){if(t instanceof i)return t;if(Array.isArray(t)&&2===t.length)return new i(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new i(Number(t.lng),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},e.exports=i},{"../util/util":215}],63:[function(t,e,n){"use strict";var r=t("./lng_lat"),i=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};i.prototype.setNorthEast=function(t){return this._ne=r.convert(t),this},i.prototype.setSouthWest=function(t){return this._sw=r.convert(t),this},i.prototype.extend=function(t){var e,n,o=this._sw,a=this._ne;if(t instanceof r)e=t,n=t;else{if(!(t instanceof i))return Array.isArray(t)?t.every(Array.isArray)?this.extend(i.convert(t)):this.extend(r.convert(t)):this;if(e=t._sw,n=t._ne,!e||!n)return this}return o||a?(o.lng=Math.min(e.lng,o.lng),o.lat=Math.min(e.lat,o.lat),a.lng=Math.max(n.lng,a.lng),a.lat=Math.max(n.lat,a.lat)):(this._sw=new r(e.lng,e.lat),this._ne=new r(n.lng,n.lat)),this},i.prototype.getCenter=function(){return new r((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},i.prototype.getSouthWest=function(){return this._sw},i.prototype.getNorthEast=function(){return this._ne},i.prototype.getNorthWest=function(){return new r(this.getWest(),this.getNorth())},i.prototype.getSouthEast=function(){return new r(this.getEast(),this.getSouth())},i.prototype.getWest=function(){return this._sw.lng},i.prototype.getSouth=function(){
return this._sw.lat},i.prototype.getEast=function(){return this._ne.lng},i.prototype.getNorth=function(){return this._ne.lat},i.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},i.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},i.convert=function(t){return!t||t instanceof i?t:new i(t)},e.exports=i},{"./lng_lat":62}],64:[function(t,e,n){"use strict";var r=t("./lng_lat"),i=t("point-geometry"),o=t("./coordinate"),a=t("../util/util"),s=t("../style-spec/util/interpolate"),u=t("../source/tile_coord"),l=t("../data/extent"),c=t("@mapbox/gl-matrix"),h=c.vec4,f=c.mat4,p=c.mat2,d=function(t,e,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new r(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0},m={minZoom:{},maxZoom:{},renderWorldCopies:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};m.minZoom.get=function(){return this._minZoom},m.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},m.maxZoom.get=function(){return this._maxZoom},m.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},m.renderWorldCopies.get=function(){return this._renderWorldCopies},m.worldSize.get=function(){return this.tileSize*this.scale},m.centerPoint.get=function(){return this.size._div(2)},m.size.get=function(){return new i(this.width,this.height)},m.bearing.get=function(){return-this.angle/Math.PI*180},m.bearing.set=function(t){var e=-a.wrap(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=p.create(),p.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},m.pitch.get=function(){return this._pitch/Math.PI*180},m.pitch.set=function(t){var e=a.clamp(t,0,60)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},m.fov.get=function(){return this._fov/Math.PI*180},m.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},m.zoom.get=function(){return this._zoom},m.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},m.center.get=function(){return this._center},m.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},d.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},d.prototype.getVisibleWrappedCoordinates=function(t){for(var e=this.pointCoordinate(new i(0,0),0),n=this.pointCoordinate(new i(this.width,0),0),r=Math.floor(e.column),o=Math.floor(n.column),a=[t],s=r;s<=o;s++)0!==s&&a.push(new u(t.z,t.x,t.y,s));return a},d.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),n=e;if(e<t.minzoom)return[];e>t.maxzoom&&(e=t.maxzoom);var r=this.pointCoordinate(this.centerPoint,e),o=new i(r.column-.5,r.row-.5),a=[this.pointCoordinate(new i(0,0),e),this.pointCoordinate(new i(this.width,0),e),this.pointCoordinate(new i(this.width,this.height),e),this.pointCoordinate(new i(0,this.height),e)];return u.cover(e,a,t.reparseOverscaled?n:e,this._renderWorldCopies).sort(function(t,e){return o.dist(t)-o.dist(e)})},d.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},m.unmodified.get=function(){return this._unmodified},d.prototype.zoomScale=function(t){return Math.pow(2,t)},d.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},d.prototype.project=function(t){return new i(this.lngX(t.lng),this.latY(t.lat))},d.prototype.unproject=function(t){return new r(this.xLng(t.x),this.yLat(t.y))},m.x.get=function(){return this.lngX(this.center.lng)},m.y.get=function(){return this.latY(this.center.lat)},m.point.get=function(){return new i(this.x,this.y)},d.prototype.lngX=function(t){return(180+t)*this.worldSize/360},d.prototype.latY=function(t){var e=180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360));return(180-e)*this.worldSize/360},d.prototype.xLng=function(t){return 360*t/this.worldSize-180},d.prototype.yLat=function(t){var e=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90},d.prototype.setLocationAtPoint=function(t,e){var n=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},d.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},d.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},d.prototype.locationCoordinate=function(t){return new o(this.lngX(t.lng)/this.tileSize,this.latY(t.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},d.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new r(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},d.prototype.pointCoordinate=function(t,e){void 0===e&&(e=this.tileZoom);var n=0,r=[t.x,t.y,0,1],i=[t.x,t.y,1,1];h.transformMat4(r,r,this.pixelMatrixInverse),h.transformMat4(i,i,this.pixelMatrixInverse);var a=r[3],u=i[3],l=r[0]/a,c=i[0]/u,f=r[1]/a,p=i[1]/u,d=r[2]/a,m=i[2]/u,v=d===m?0:(n-d)/(m-d);return new o(s(l,c,v)/this.tileSize,s(f,p,v)/this.tileSize,this.zoom)._zoomTo(e)},d.prototype.coordinatePoint=function(t){var e=t.zoomTo(this.zoom),n=[e.column*this.tileSize,e.row*this.tileSize,0,1];return h.transformMat4(n,n,this.pixelMatrix),new i(n[0]/n[3],n[1]/n[3])},d.prototype.calculatePosMatrix=function(t,e){var n=t.toCoordinate(e),r=this.worldSize/this.zoomScale(n.zoom),i=f.identity(new Float64Array(16));return f.translate(i,i,[n.column*r,n.row*r,0]),f.scale(i,i,[r/l,r/l,1]),f.multiply(i,this.projMatrix,i),new Float32Array(i)},d.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,n,r,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;o=this.latY(h[1]),a=this.latY(h[0]),t=a-o<l.y?l.y/(a-o):0}if(this.lngRange){var f=this.lngRange;s=this.lngX(f[0]),u=this.lngX(f[1]),e=u-s<l.x?l.x/(u-s):0}var p=Math.max(e||0,t||0);if(p)return this.center=this.unproject(new i(e?(u+s)/2:this.x,t?(a+o)/2:this.y)),this.zoom+=this.scaleZoom(p),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var d=this.y,m=l.y/2;d-m<o&&(r=o+m),d+m>a&&(r=a-m)}if(this.lngRange){var v=this.x,y=l.x/2;v-y<s&&(n=s+y),v+y>u&&(n=u-y)}void 0===n&&void 0===r||(this.center=this.unproject(new i(void 0!==n?n:this.x,void 0!==r?r:this.y))),this._unmodified=c,this._constraining=!1}},d.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,e=Math.PI/2+this._pitch,n=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-e-t),r=Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance,i=1.01*r,o=new Float64Array(16);f.perspective(o,this._fov,this.width/this.height,1,i),f.scale(o,o,[1,-1,1]),f.translate(o,o,[0,0,-this.cameraToCenterDistance]),f.rotateX(o,o,this._pitch),f.rotateZ(o,o,this.angle),f.translate(o,o,[-this.x,-this.y,0]);var a=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));if(f.scale(o,o,[1,1,a,1]),this.projMatrix=o,o=f.create(),f.scale(o,o,[this.width/2,-this.height/2,1]),f.translate(o,o,[1,-1,0]),this.pixelMatrix=f.multiply(new Float64Array(16),o,this.projMatrix),o=f.invert(new Float64Array(16),this.pixelMatrix),!o)throw new Error("failed to invert matrix");this.pixelMatrixInverse=o}},Object.defineProperties(d.prototype,m),e.exports=d},{"../data/extent":54,"../source/tile_coord":96,"../style-spec/util/interpolate":123,"../util/util":215,"./coordinate":61,"./lng_lat":62,"@mapbox/gl-matrix":1,"point-geometry":26}],65:[function(t,e,n){"use strict";var r=t("./util/browser"),i=e.exports={};i.version=t("../package.json").version,i.workerCount=Math.max(Math.floor(r.hardwareConcurrency/2),1),i.Map=t("./ui/map"),i.NavigationControl=t("./ui/control/navigation_control"),i.GeolocateControl=t("./ui/control/geolocate_control"),i.AttributionControl=t("./ui/control/attribution_control"),i.ScaleControl=t("./ui/control/scale_control"),i.FullscreenControl=t("./ui/control/fullscreen_control"),i.Popup=t("./ui/popup"),i.Marker=t("./ui/marker"),i.Style=t("./style/style"),i.LngLat=t("./geo/lng_lat"),i.LngLatBounds=t("./geo/lng_lat_bounds"),i.Point=t("point-geometry"),i.Evented=t("./util/evented"),i.supported=t("./util/browser").supported;var o=t("./util/config");i.config=o;var a=t("./source/rtl_text_plugin");i.setRTLTextPlugin=a.setRTLTextPlugin,Object.defineProperty(i,"accessToken",{get:function(){return o.ACCESS_TOKEN},set:function(t){o.ACCESS_TOKEN=t}})},{"../package.json":43,"./geo/lng_lat":62,"./geo/lng_lat_bounds":63,"./source/rtl_text_plugin":91,"./style/style":149,"./ui/control/attribution_control":176,"./ui/control/fullscreen_control":177,"./ui/control/geolocate_control":178,"./ui/control/navigation_control":180,"./ui/control/scale_control":181,"./ui/map":190,"./ui/marker":191,"./ui/popup":192,"./util/browser":195,"./util/config":199,"./util/evented":203,"point-geometry":26}],66:[function(t,e,n){"use strict";function r(t,e,n){var r=t.gl,o=t.transform,a=o.tileSize,s=n.paint["background-color"],u=n.paint["background-pattern"],l=n.paint["background-opacity"],c=!u&&1===s[3]&&1===l;if(t.isOpaquePass===c){r.disable(r.STENCIL_TEST),t.setDepthSublayer(0);var h;u?(h=t.useProgram("fillPattern",t.basicFillProgramConfiguration),i.prepare(u,t,h),t.tileExtentPatternVAO.bind(r,h,t.tileExtentBuffer)):(h=t.useProgram("fill",t.basicFillProgramConfiguration),r.uniform4fv(h.u_color,s),t.tileExtentVAO.bind(r,h,t.tileExtentBuffer)),r.uniform1f(h.u_opacity,l);for(var f=o.coveringTiles({tileSize:a}),p=0,d=f;p<d.length;p+=1){var m=d[p];u&&i.setTile({coord:m,tileSize:a},t,h),r.uniformMatrix4fv(h.u_matrix,!1,t.transform.calculatePosMatrix(m)),r.drawArrays(r.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}}}var i=t("./pattern");e.exports=r},{"./pattern":78}],67:[function(t,e,n){"use strict";function r(t,e,n,r){if(!t.isOpaquePass){var o=t.gl;t.setDepthSublayer(0),t.depthMask(!1),o.disable(o.STENCIL_TEST);for(var a=0;a<r.length;a++){var s=r[a],u=e.getTile(s),l=u.getBucket(n);if(l){var c=l.buffers,h=c.layerData[n.id],f=h.programConfiguration,p=t.useProgram("circle",f);f.setUniforms(o,p,n,{zoom:t.transform.zoom}),"map"===n.paint["circle-pitch-scale"]?(o.uniform1i(p.u_scale_with_map,!0),o.uniform2f(p.u_extrude_scale,t.transform.pixelsToGLUnits[0]*t.transform.cameraToCenterDistance,t.transform.pixelsToGLUnits[1]*t.transform.cameraToCenterDistance)):(o.uniform1i(p.u_scale_with_map,!1),o.uniform2fv(p.u_extrude_scale,t.transform.pixelsToGLUnits)),o.uniform1f(p.u_devicepixelratio,i.devicePixelRatio),o.uniformMatrix4fv(p.u_matrix,!1,t.translatePosMatrix(s.posMatrix,u,n.paint["circle-translate"],n.paint["circle-translate-anchor"]));for(var d=0,m=c.segments;d<m.length;d+=1){var v=m[d];v.vaos[n.id].bind(o,p,c.layoutVertexBuffer,c.elementBuffer,h.paintVertexBuffer,v.vertexOffset),o.drawElements(o.TRIANGLES,3*v.primitiveLength,o.UNSIGNED_SHORT,3*v.primitiveOffset*2)}}}}}var i=t("../util/browser");e.exports=r},{"../util/browser":195}],68:[function(t,e,n){"use strict";function r(t,e,n,r){var i=t.gl;i.enable(i.STENCIL_TEST);for(var o=t.useProgram("collisionBox"),a=0;a<r.length;a++){var s=r[a],u=e.getTile(s),l=u.getBucket(n);if(l){var c=l.buffers.collisionBox;if(c){i.uniformMatrix4fv(o.u_matrix,!1,s.posMatrix),t.enableTileClippingMask(s),t.lineWidth(1),i.uniform1f(o.u_scale,Math.pow(2,t.transform.zoom-u.coord.z)),i.uniform1f(o.u_zoom,10*t.transform.zoom),i.uniform1f(o.u_maxzoom,10*(u.coord.z+1));for(var h=0,f=c.segments;h<f.length;h+=1){var p=f[h];p.vaos[n.id].bind(i,o,c.layoutVertexBuffer,c.elementBuffer,null,p.vertexOffset),i.drawElements(i.LINES,2*p.primitiveLength,i.UNSIGNED_SHORT,2*p.primitiveOffset*2)}}}}}e.exports=r},{}],69:[function(t,e,n){"use strict";function r(t,e,n){for(var r=0;r<n.length;r++)i(t,e,n[r])}function i(t,e,n){var r=t.gl;r.disable(r.STENCIL_TEST),t.lineWidth(1*a.devicePixelRatio);var i=n.posMatrix,f=t.useProgram("debug");r.uniformMatrix4fv(f.u_matrix,!1,i),r.uniform4f(f.u_color,1,0,0,1),t.debugVAO.bind(r,f,t.debugBuffer),r.drawArrays(r.LINE_STRIP,0,t.debugBuffer.length);for(var p=o(n.toString(),50,200,5),d=new h,m=0;m<p.length;m+=2)d.emplaceBack(p[m],p[m+1]);var v=l.fromStructArray(d,l.BufferType.VERTEX),y=new c;y.bind(r,f,v),r.uniform4f(f.u_color,1,1,1,1);for(var _=e.getTile(n).tileSize,g=u/(Math.pow(2,t.transform.zoom-n.z)*_),x=[[-1,-1],[-1,1],[1,-1],[1,1]],b=0;b<x.length;b++){var w=x[b];r.uniformMatrix4fv(f.u_matrix,!1,s.translate([],i,[g*w[0],g*w[1],0])),r.drawArrays(r.LINES,0,v.length)}r.uniform4f(f.u_color,0,0,0,1),r.uniformMatrix4fv(f.u_matrix,!1,i),r.drawArrays(r.LINES,0,v.length)}function o(t,e,n,r){r=r||1;var i,o,a,s,u,l,c,h,p=[];for(i=0,o=t.length;i<o;i++)if(u=f[t[i]]){for(h=null,a=0,s=u[1].length;a<s;a+=2)u[1][a]===-1&&u[1][a+1]===-1?h=null:(l=e+u[1][a]*r,c=n-u[1][a+1]*r,h&&p.push(h.x,h.y,l,c),h={x:l,y:c});e+=u[0]*r}return p}var a=t("../util/browser"),s=t("@mapbox/gl-matrix").mat4,u=t("../data/extent"),l=t("../data/buffer"),c=t("./vertex_array_object"),h=t("../data/pos_array");e.exports=r;var f={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}},{"../data/buffer":51,"../data/extent":54,"../data/pos_array":57,"../util/browser":195,"./vertex_array_object":80,"@mapbox/gl-matrix":1}],70:[function(t,e,n){"use strict";function r(t,e,n,r){var s=t.gl;s.enable(s.STENCIL_TEST);var u=!n.paint["fill-pattern"]&&n.isPaintValueFeatureConstant("fill-color")&&n.isPaintValueFeatureConstant("fill-opacity")&&1===n.paint["fill-color"][3]&&1===n.paint["fill-opacity"];t.isOpaquePass===u&&(t.setDepthSublayer(1),i(t,e,n,r,o)),!t.isOpaquePass&&n.paint["fill-antialias"]&&(t.lineWidth(2),t.depthMask(!1),t.setDepthSublayer(n.getPaintProperty("fill-outline-color")?2:0),i(t,e,n,r,a))}function i(t,e,n,r,i){for(var o=!0,a=0,s=r;a<s.length;a+=1){var u=s[a],l=e.getTile(u),c=l.getBucket(n);c&&(t.enableTileClippingMask(u),i(t,e,n,l,u,c.buffers,o),o=!1)}}function o(t,e,n,r,i,o,a){for(var u=t.gl,l=o.layerData[n.id],c=s("fill",n.paint["fill-pattern"],t,l,n,r,i,a),h=0,f=o.segments;h<f.length;h+=1){var p=f[h];p.vaos[n.id].bind(u,c,o.layoutVertexBuffer,o.elementBuffer,l.paintVertexBuffer,p.vertexOffset),u.drawElements(u.TRIANGLES,3*p.primitiveLength,u.UNSIGNED_SHORT,3*p.primitiveOffset*2)}}function a(t,e,n,r,i,o,a){var u=t.gl,l=o.layerData[n.id],c=n.paint["fill-pattern"]&&!n.getPaintProperty("fill-outline-color"),h=s("fillOutline",c,t,l,n,r,i,a);u.uniform2f(h.u_world,u.drawingBufferWidth,u.drawingBufferHeight);for(var f=0,p=o.segments2;f<p.length;f+=1){var d=p[f];d.vaos[n.id].bind(u,h,o.layoutVertexBuffer,o.elementBuffer2,l.paintVertexBuffer,d.vertexOffset),u.drawElements(u.LINES,2*d.primitiveLength,u.UNSIGNED_SHORT,2*d.primitiveOffset*2)}}function s(t,e,n,r,i,o,a,s){var l,c=n.currentProgram;return e?(l=n.useProgram(t+"Pattern",r.programConfiguration),(s||l!==c)&&(r.programConfiguration.setUniforms(n.gl,l,i,{zoom:n.transform.zoom}),u.prepare(i.paint["fill-pattern"],n,l)),u.setTile(o,n,l)):(l=n.useProgram(t,r.programConfiguration),(s||l!==c)&&r.programConfiguration.setUniforms(n.gl,l,i,{zoom:n.transform.zoom})),n.gl.uniformMatrix4fv(l.u_matrix,!1,n.translatePosMatrix(a.posMatrix,o,i.paint["fill-translate"],i.paint["fill-translate-anchor"])),l}var u=t("./pattern");e.exports=r},{"./pattern":78}],71:[function(t,e,n){"use strict";function r(t,e,n,r){if(0!==n.paint["fill-extrusion-opacity"]){var a=t.gl;a.disable(a.STENCIL_TEST),a.enable(a.DEPTH_TEST),t.depthMask(!0);var s=new i(a,t,n);s.bindFramebuffer(),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);for(var u=0;u<r.length;u++)o(t,e,n,r[u]);s.unbindFramebuffer(),s.renderToMap()}}function i(t,e,n){this.gl=t,this.width=e.width,this.height=e.height,this.painter=e,this.layer=n,this.texture=null,this.fbo=null,this.fbos=this.painter.preFbos[this.width]&&this.painter.preFbos[this.width][this.height]}function o(t,e,n,r){if(!t.isOpaquePass){var i=e.getTile(r),o=i.getBucket(n);if(o){var s=o.buffers,u=t.gl,l=n.paint["fill-extrusion-pattern"],c=s.layerData[n.id],f=c.programConfiguration,p=t.useProgram(l?"fillExtrusionPattern":"fillExtrusion",f);f.setUniforms(u,p,n,{zoom:t.transform.zoom}),l&&(h.prepare(l,t,p),h.setTile(i,t,p),u.uniform1f(p.u_height_factor,-Math.pow(2,r.z)/i.tileSize/8)),t.gl.uniformMatrix4fv(p.u_matrix,!1,t.translatePosMatrix(r.posMatrix,i,n.paint["fill-extrusion-translate"],n.paint["fill-extrusion-translate-anchor"])),a(p,t);for(var d=0,m=s.segments;d<m.length;d+=1){var v=m[d];v.vaos[n.id].bind(u,p,s.layoutVertexBuffer,s.elementBuffer,c.paintVertexBuffer,v.vertexOffset),u.drawElements(u.TRIANGLES,3*v.primitiveLength,u.UNSIGNED_SHORT,3*v.primitiveOffset*2)}}}}function a(t,e){var n=e.gl,r=e.style.light,i=r.calculated.position,o=[i.x,i.y,i.z],a=f.create();"viewport"===r.calculated.anchor&&f.fromRotation(a,-e.transform.angle),d.transformMat3(o,o,a),n.uniform3fv(t.u_lightpos,o),n.uniform1f(t.u_lightintensity,r.calculated.intensity),n.uniform3fv(t.u_lightcolor,r.calculated.color.slice(0,3))}var s=t("@mapbox/gl-matrix"),u=t("../data/buffer"),l=t("./vertex_array_object"),c=t("../data/pos_array"),h=t("./pattern"),f=s.mat3,p=s.mat4,d=s.vec3;e.exports=r,i.prototype.bindFramebuffer=function(){var t=this.gl;if(this.texture=this.painter.getViewportTexture(this.width,this.height),t.activeTexture(t.TEXTURE1),this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),this.texture.width=this.width,this.texture.height=this.height),this.fbos)this.fbo=this.fbos.pop(),t.bindFramebuffer(t.FRAMEBUFFER,this.fbo),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0);else{this.fbo=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.fbo);var e=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,e),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,this.width,this.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0)}},i.prototype.unbindFramebuffer=function(){this.painter.bindDefaultFramebuffer(),this.fbos?this.fbos.push(this.fbo):(this.painter.preFbos[this.width]||(this.painter.preFbos[this.width]={}),this.painter.preFbos[this.width][this.height]=[this.fbo]),this.painter.saveViewportTexture(this.texture)},i.prototype.renderToMap=function(){var t=this.gl,e=this.painter,n=e.useProgram("extrusionTexture");t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.texture),t.uniform1f(n.u_opacity,this.layer.paint["fill-extrusion-opacity"]),t.uniform1i(n.u_image,1),t.uniformMatrix4fv(n.u_matrix,!1,p.ortho(p.create(),0,e.width,e.height,0,0,1)),t.disable(t.DEPTH_TEST),t.uniform2f(n.u_world,t.drawingBufferWidth,t.drawingBufferHeight);var r=new c;r.emplaceBack(0,0),r.emplaceBack(1,0),r.emplaceBack(0,1),r.emplaceBack(1,1);var i=u.fromStructArray(r,u.BufferType.VERTEX),o=new l;o.bind(t,n,i),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.enable(t.DEPTH_TEST)}},{"../data/buffer":51,"../data/pos_array":57,"./pattern":78,"./vertex_array_object":80,"@mapbox/gl-matrix":1}],72:[function(t,e,n){"use strict";function r(t,e,n,r,a,s,u,l,c){var h,f,p,d,m=e.gl,v=a.paint["line-dasharray"],y=a.paint["line-pattern"];if(l||c){var _=1/o(n,1,e.transform.tileZoom);if(v){h=e.lineAtlas.getDash(v.from,"round"===a.layout["line-cap"]),f=e.lineAtlas.getDash(v.to,"round"===a.layout["line-cap"]);var g=h.width*v.fromScale,x=f.width*v.toScale;m.uniform2f(t.u_patternscale_a,_/g,-h.height/2),m.uniform2f(t.u_patternscale_b,_/x,-f.height/2),m.uniform1f(t.u_sdfgamma,e.lineAtlas.width/(256*Math.min(g,x)*i.devicePixelRatio)/2)}else if(y){if(p=e.spriteAtlas.getPosition(y.from,!0),d=e.spriteAtlas.getPosition(y.to,!0),!p||!d)return;m.uniform2f(t.u_pattern_size_a,p.size[0]*y.fromScale/_,d.size[1]),m.uniform2f(t.u_pattern_size_b,d.size[0]*y.toScale/_,d.size[1])}m.uniform2f(t.u_gl_units_to_pixels,1/e.transform.pixelsToGLUnits[0],1/e.transform.pixelsToGLUnits[1])}l&&(v?(m.uniform1i(t.u_image,0),m.activeTexture(m.TEXTURE0),e.lineAtlas.bind(m),m.uniform1f(t.u_tex_y_a,h.y),m.uniform1f(t.u_tex_y_b,f.y),m.uniform1f(t.u_mix,v.t)):y&&(m.uniform1i(t.u_image,0),m.activeTexture(m.TEXTURE0),e.spriteAtlas.bind(m,!0),m.uniform2fv(t.u_pattern_tl_a,p.tl),m.uniform2fv(t.u_pattern_br_a,p.br),m.uniform2fv(t.u_pattern_tl_b,d.tl),m.uniform2fv(t.u_pattern_br_b,d.br),m.uniform1f(t.u_fade,y.t)),m.uniform1f(t.u_width,a.paint["line-width"])),e.enableTileClippingMask(s);var b=e.translatePosMatrix(s.posMatrix,n,a.paint["line-translate"],a.paint["line-translate-anchor"]);m.uniformMatrix4fv(t.u_matrix,!1,b),m.uniform1f(t.u_ratio,1/o(n,1,e.transform.zoom));for(var w=0,M=r.segments;w<M.length;w+=1){var T=M[w];T.vaos[a.id].bind(m,t,r.layoutVertexBuffer,r.elementBuffer,u.paintVertexBuffer,T.vertexOffset),m.drawElements(m.TRIANGLES,3*T.primitiveLength,m.UNSIGNED_SHORT,3*T.primitiveOffset*2)}}var i=t("../util/browser"),o=t("../source/pixels_to_tile_units");e.exports=function(t,e,n,i){if(!t.isOpaquePass){t.setDepthSublayer(0),t.depthMask(!1);var o=t.gl;if(o.enable(o.STENCIL_TEST),!(n.paint["line-width"]<=0))for(var a,s=n.paint["line-dasharray"]?"lineSDF":n.paint["line-pattern"]?"linePattern":"line",u=!0,l=0,c=i;l<c.length;l+=1){var h=c[l],f=e.getTile(h),p=f.getBucket(n);if(p){var d=p.buffers.layerData[n.id],m=t.currentProgram,v=t.useProgram(s,d.programConfiguration),y=u||v!==m,_=a!==f.coord.z;y&&d.programConfiguration.setUniforms(t.gl,v,n,{zoom:t.transform.zoom}),r(v,t,f,p.buffers,n,h,d,y,_),a=f.coord.z,u=!1}}}}},{"../source/pixels_to_tile_units":88,"../util/browser":195}],73:[function(t,e,n){"use strict";function r(t,e,n,r){if(!t.isOpaquePass){var o=t.gl;o.enable(o.DEPTH_TEST),t.depthMask(!0),o.depthFunc(o.LESS);for(var a=r.length&&r[0].z,s=0;s<r.length;s++){var u=r[s];t.setDepthSublayer(u.z-a),i(t,e,n,u)}o.depthFunc(o.LEQUAL)}}function i(t,e,n,r){var i=t.gl;i.disable(i.STENCIL_TEST);var l=e.getTile(r),c=t.transform.calculatePosMatrix(r,e.getSource().maxzoom);l.registerFadeDuration(t.style.animationLoop,n.paint["raster-fade-duration"]);var h=t.useProgram("raster");i.uniformMatrix4fv(h.u_matrix,!1,c),i.uniform1f(h.u_brightness_low,n.paint["raster-brightness-min"]),i.uniform1f(h.u_brightness_high,n.paint["raster-brightness-max"]),i.uniform1f(h.u_saturation_factor,s(n.paint["raster-saturation"])),i.uniform1f(h.u_contrast_factor,a(n.paint["raster-contrast"])),i.uniform3fv(h.u_spin_weights,o(n.paint["raster-hue-rotate"]));var f,p,d=l.sourceCache&&l.sourceCache.findLoadedParent(r,0,{}),m=u(l,d,n,t.transform);i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,l.texture),i.activeTexture(i.TEXTURE1),d?(i.bindTexture(i.TEXTURE_2D,d.texture),f=Math.pow(2,d.coord.z-l.coord.z),p=[l.coord.x*f%1,l.coord.y*f%1]):i.bindTexture(i.TEXTURE_2D,l.texture),i.uniform2fv(h.u_tl_parent,p||[0,0]),i.uniform1f(h.u_scale_parent,f||1),i.uniform1f(h.u_buffer_scale,1),i.uniform1f(h.u_fade_t,m.mix),i.uniform1f(h.u_opacity,m.opacity*n.paint["raster-opacity"]),i.uniform1i(h.u_image0,0),i.uniform1i(h.u_image1,1);var v=l.boundsBuffer||t.rasterBoundsBuffer,y=l.boundsVAO||t.rasterBoundsVAO;y.bind(i,h,v),i.drawArrays(i.TRIANGLE_STRIP,0,v.length)}function o(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}function a(t){return t>0?1/(1-t):1+t}function s(t){return t>0?1-1/(1.001-t):-t}function u(t,e,n,r){var i=n.paint["raster-fade-duration"];if(t.sourceCache&&i>0){var o=Date.now(),a=(o-t.timeAdded)/i,s=e?(o-e.timeAdded)/i:-1,u=t.sourceCache.getSource(),c=r.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!e||Math.abs(e.coord.z-c)>Math.abs(t.coord.z-c),f=h&&t.refreshedUponExpiration?1:l.clamp(h?a:1-s,0,1);return t.refreshedUponExpiration&&a>=1&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}var l=t("../util/util");e.exports=r},{"../util/util":215}],74:[function(t,e,n){"use strict";function r(t,e,n,r){if(!t.isOpaquePass){var o=!(n.layout["text-allow-overlap"]||n.layout["icon-allow-overlap"]||n.layout["text-ignore-placement"]||n.layout["icon-ignore-placement"]),a=t.gl;
o?a.disable(a.STENCIL_TEST):a.enable(a.STENCIL_TEST),t.setDepthSublayer(0),t.depthMask(!1),i(t,e,n,r,!1,n.paint["icon-translate"],n.paint["icon-translate-anchor"],n.layout["icon-rotation-alignment"],n.layout["icon-rotation-alignment"]),i(t,e,n,r,!0,n.paint["text-translate"],n.paint["text-translate-anchor"],n.layout["text-rotation-alignment"],n.layout["text-pitch-alignment"]),e.map.showCollisionBoxes&&c(t,e,n,r)}}function i(t,e,n,r,i,s,u,l,c){if(i||!t.style.sprite||t.style.sprite.loaded()){var h=t.gl,f="map"===l,p="map"===c,d=p;d?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST);for(var m,v,y=0,_=r;y<_.length;y+=1){var g=_[y],x=e.getTile(g),b=x.getBucket(n);if(b){var w=i?b.buffers.glyph:b.buffers.icon;if(w&&w.segments.length){var M=w.layerData[n.id],T=M.programConfiguration,S=i||b.sdfIcons,E=i?b.textSizeData:b.iconSizeData;m&&b.fontstack===v||(m=t.useProgram(S?"symbolSDF":"symbolIcon",T),T.setUniforms(h,m,n,{zoom:t.transform.zoom}),o(m,t,n,g.z,i,S,f,p,b.fontstack,b.iconsNeedLinear,E)),t.enableTileClippingMask(g),h.uniformMatrix4fv(m.u_matrix,!1,t.translatePosMatrix(g.posMatrix,x,s,u)),a(m,T,t,n,x,w,i,S,p),v=b.fontstack}}}d||h.enable(h.DEPTH_TEST)}}function o(t,e,n,r,i,o,a,s,c,h,p){var d=e.gl,m=e.transform;if(d.uniform1i(t.u_rotate_with_map,a),d.uniform1i(t.u_pitch_with_map,s),d.activeTexture(d.TEXTURE0),d.uniform1i(t.u_texture,0),d.uniform1f(t.u_is_text,i?1:0),i){var v=c&&e.glyphSource.getGlyphAtlas(c);if(!v)return;v.updateTexture(d),d.uniform2f(t.u_texsize,v.width/4,v.height/4)}else{var y=e.options.rotating||e.options.zooming,_=!n.isLayoutValueFeatureConstant("icon-size")||!n.isLayoutValueZoomConstant("icon-size")||1!==n.getLayoutValue("icon-size",{zoom:m.zoom}),g=_||l.devicePixelRatio!==e.spriteAtlas.pixelRatio||h,x=s||m.pitch;e.spriteAtlas.bind(d,o||y||g||x),d.uniform2f(t.u_texsize,e.spriteAtlas.width/4,e.spriteAtlas.height/4)}if(d.activeTexture(d.TEXTURE1),e.frameHistory.bind(d),d.uniform1i(t.u_fadetexture,1),d.uniform1f(t.u_zoom,m.zoom),d.uniform1f(t.u_pitch,m.pitch/360*2*Math.PI),d.uniform1f(t.u_bearing,m.bearing/360*2*Math.PI),d.uniform1f(t.u_aspect_ratio,m.width/m.height),d.uniform1i(t.u_is_size_zoom_constant,p.isZoomConstant?1:0),d.uniform1i(t.u_is_size_feature_constant,p.isFeatureConstant?1:0),p.isZoomConstant||p.isFeatureConstant)if(p.isFeatureConstant&&!p.isZoomConstant){var b;if("interval"===p.functionType)b=n.getLayoutValue(i?"text-size":"icon-size",{zoom:m.zoom});else{var w="interval"===p.functionType?0:f(m.zoom,p.functionBase,p.coveringZoomRange[0],p.coveringZoomRange[1]),M=p.coveringStopValues[0],T=p.coveringStopValues[1];b=M+(T-M)*u.clamp(w,0,1)}d.uniform1f(t.u_size,b),d.uniform1f(t.u_layout_size,p.layoutSize)}else p.isFeatureConstant&&p.isZoomConstant&&d.uniform1f(t.u_size,p.layoutSize);else{var S=f(m.zoom,p.functionBase,p.coveringZoomRange[0],p.coveringZoomRange[1]);d.uniform1f(t.u_size_t,u.clamp(S,0,1))}}function a(t,e,n,r,i,o,a,u,l){var c=n.gl,f=n.transform;if(l){var p=h(i,1,f.zoom);c.uniform2f(t.u_extrude_scale,p,p)}else{var d=f.cameraToCenterDistance;c.uniform2f(t.u_extrude_scale,f.pixelsToGLUnits[0]*d,f.pixelsToGLUnits[1]*d)}if(u){var m=(a?"text":"icon")+"-halo-width",v=!r.isPaintValueFeatureConstant(m)||r.paint[m],y=(l?Math.cos(f._pitch):1)*f.cameraToCenterDistance;c.uniform1f(t.u_gamma_scale,y),v&&(c.uniform1f(t.u_is_halo,1),s(o,r,c,t)),c.uniform1f(t.u_is_halo,0)}s(o,r,c,t)}function s(t,e,n,r){for(var i=t.layerData[e.id],o=i&&i.paintVertexBuffer,a=0,s=t.segments;a<s.length;a+=1){var u=s[a];u.vaos[e.id].bind(n,r,t.layoutVertexBuffer,t.elementBuffer,o,u.vertexOffset),n.drawElements(n.TRIANGLES,3*u.primitiveLength,n.UNSIGNED_SHORT,3*u.primitiveOffset*2)}}var u=t("../util/util"),l=t("../util/browser"),c=t("./draw_collision_debug"),h=t("../source/pixels_to_tile_units"),f=t("../style-spec/function").interpolationFactor;e.exports=r},{"../source/pixels_to_tile_units":88,"../style-spec/function":107,"../util/browser":195,"../util/util":215,"./draw_collision_debug":68}],75:[function(t,e,n){"use strict";var r=function(){this.changeTimes=new Float64Array(256),this.changeOpacities=new Uint8Array(256),this.opacities=new Uint8ClampedArray(256),this.array=new Uint8Array(this.opacities.buffer),this.previousZoom=0,this.firstFrame=!0};r.prototype.record=function(t,e,n){var r=this;this.firstFrame&&(t=0,this.firstFrame=!1),e=Math.floor(10*e);var i;if(e<this.previousZoom)for(i=e+1;i<=this.previousZoom;i++)r.changeTimes[i]=t,r.changeOpacities[i]=r.opacities[i];else for(i=e;i>this.previousZoom;i--)r.changeTimes[i]=t,r.changeOpacities[i]=r.opacities[i];for(i=0;i<256;i++){var o=t-r.changeTimes[i],a=255*(n?o/n:1);i<=e?r.opacities[i]=r.changeOpacities[i]+a:r.opacities[i]=r.changeOpacities[i]-a}this.changed=!0,this.previousZoom=e},r.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.changed&&(t.texSubImage2D(t.TEXTURE_2D,0,0,0,256,1,t.ALPHA,t.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,256,1,0,t.ALPHA,t.UNSIGNED_BYTE,this.array))},e.exports=r},{}],76:[function(t,e,n){"use strict";var r=t("../util/util"),i=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};i.prototype.setSprite=function(t){this.sprite=t},i.prototype.getDash=function(t,e){var n=t.join(",")+e;return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},i.prototype.addDash=function(t,e){var n=this,i=e?7:0,o=2*i+1,a=128;if(this.nextRow+o>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var s=0,u=0;u<t.length;u++)s+=t[u];for(var l=this.width/s,c=l/2,h=t.length%2===1,f=-i;f<=i;f++)for(var p=n.nextRow+i+f,d=n.width*p,m=h?-t[t.length-1]:0,v=t[0],y=1,_=0;_<this.width;_++){for(;v<_/l;)m=v,v+=t[y],h&&y===t.length-1&&(v+=t[0]),y++;var g=Math.abs(_-m*l),x=Math.abs(_-v*l),b=Math.min(g,x),w=y%2===1,M=void 0;if(e){var T=i?f/i*(c+1):0;if(w){var S=c-Math.abs(T);M=Math.sqrt(b*b+S*S)}else M=c-Math.sqrt(b*b+T*T)}else M=(w?1:-1)*b;n.data[3+4*(d+_)]=Math.max(0,Math.min(255,M+a))}var E={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:s};return this.nextRow+=o,this.dirty=!0,E},i.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))},e.exports=i},{"../util/util":215}],77:[function(t,e,n){"use strict";var r=t("../util/browser"),i=t("@mapbox/gl-matrix").mat4,o=t("./frame_history"),a=t("../source/source_cache"),s=t("../data/extent"),u=t("../source/pixels_to_tile_units"),l=t("../util/util"),c=t("../data/buffer"),h=t("./vertex_array_object"),f=t("../data/raster_bounds_array"),p=t("../data/pos_array"),d=t("../data/program_configuration"),m=t("./shaders"),v={symbol:t("./draw_symbol"),circle:t("./draw_circle"),line:t("./draw_line"),fill:t("./draw_fill"),"fill-extrusion":t("./draw_fill_extrusion"),raster:t("./draw_raster"),background:t("./draw_background"),debug:t("./draw_debug")},y=function(t,e){this.gl=t,this.transform=e,this.reusableTextures={tiles:{},viewport:null},this.preFbos={},this.frameHistory=new o,this.setup(),this.numSublayers=a.maxUnderzooming+a.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE),this.basicFillProgramConfiguration=d.createStatic(["color","opacity"]),this.emptyProgramConfiguration=new d};y.prototype.resize=function(t,e){var n=this.gl;this.width=t*r.devicePixelRatio,this.height=e*r.devicePixelRatio,n.viewport(0,0,this.width,this.height)},y.prototype.setup=function(){var t=this.gl;t.verbose=!0,t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.STENCIL_TEST),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),this._depthMask=!1,t.depthMask(!1);var e=new p;e.emplaceBack(0,0),e.emplaceBack(s,0),e.emplaceBack(0,s),e.emplaceBack(s,s),this.tileExtentBuffer=c.fromStructArray(e,c.BufferType.VERTEX),this.tileExtentVAO=new h,this.tileExtentPatternVAO=new h;var n=new p;n.emplaceBack(0,0),n.emplaceBack(s,0),n.emplaceBack(s,s),n.emplaceBack(0,s),n.emplaceBack(0,0),this.debugBuffer=c.fromStructArray(n,c.BufferType.VERTEX),this.debugVAO=new h;var r=new f;r.emplaceBack(0,0,0,0),r.emplaceBack(s,0,32767,0),r.emplaceBack(0,s,0,32767),r.emplaceBack(s,s,32767,32767),this.rasterBoundsBuffer=c.fromStructArray(r,c.BufferType.VERTEX),this.rasterBoundsVAO=new h,this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))},y.prototype.clearColor=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},y.prototype.clearStencil=function(){var t=this.gl;t.clearStencil(0),t.stencilMask(255),t.clear(t.STENCIL_BUFFER_BIT)},y.prototype.clearDepth=function(){var t=this.gl;t.clearDepth(1),this.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT)},y.prototype._renderTileClippingMasks=function(t){var e=this,n=this.gl;n.colorMask(!1,!1,!1,!1),this.depthMask(!1),n.disable(n.DEPTH_TEST),n.enable(n.STENCIL_TEST),n.stencilMask(255),n.stencilOp(n.KEEP,n.KEEP,n.REPLACE);var r=1;this._tileClippingMaskIDs={};for(var i=0,o=t;i<o.length;i+=1){var a=o[i],s=e._tileClippingMaskIDs[a.id]=r++;n.stencilFunc(n.ALWAYS,s,255);var u=e.useProgram("fill",e.basicFillProgramConfiguration);n.uniformMatrix4fv(u.u_matrix,!1,a.posMatrix),e.tileExtentVAO.bind(n,u,e.tileExtentBuffer),n.drawArrays(n.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}n.stencilMask(0),n.colorMask(!0,!0,!0,!0),this.depthMask(!0),n.enable(n.DEPTH_TEST)},y.prototype.enableTileClippingMask=function(t){var e=this.gl;e.stencilFunc(e.EQUAL,this._tileClippingMaskIDs[t.id],255)},y.prototype.prepareBuffers=function(){},y.prototype.bindDefaultFramebuffer=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},y.prototype.render=function(t,e){if(this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.spriteAtlas=t.spriteAtlas,this.spriteAtlas.setSprite(t.sprite),this.glyphSource=t.glyphSource,this.frameHistory.record(Date.now(),this.transform.zoom,t.getTransition().duration),this.prepareBuffers(),this.clearColor(),this.clearDepth(),this.showOverdrawInspector(e.showOverdrawInspector),this.depthRange=(t._order.length+2)*this.numSublayers*this.depthEpsilon,this.isOpaquePass=!0,this.renderPass(),this.isOpaquePass=!1,this.renderPass(),this.options.showTileBoundaries){var n=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];n&&v.debug(this,n,n.getVisibleCoordinates())}},y.prototype.renderPass=function(){var t,e,n=this,r=this.style._order;this.currentLayer=this.isOpaquePass?r.length-1:0,this.isOpaquePass?this._showOverdrawInspector||this.gl.disable(this.gl.BLEND):this.gl.enable(this.gl.BLEND);for(var i=0;i<r.length;i++){var o=n.style._layers[r[n.currentLayer]];o.source!==(t&&t.id)&&(t=n.style.sourceCaches[o.source],e=[],t&&(t.prepare&&t.prepare(),n.clearStencil(),e=t.getVisibleCoordinates(),t.getSource().isTileClipped&&n._renderTileClippingMasks(e)),n.isOpaquePass||e.reverse()),n.renderLayer(n,t,o,e),n.currentLayer+=n.isOpaquePass?-1:1}},y.prototype.depthMask=function(t){t!==this._depthMask&&(this._depthMask=t,this.gl.depthMask(t))},y.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,v[n.type](t,e,n,r))},y.prototype.setDepthSublayer=function(t){var e=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,n=e-1+this.depthRange;this.gl.depthRange(n,e)},y.prototype.translatePosMatrix=function(t,e,n,r){if(!n[0]&&!n[1])return t;if("viewport"===r){var o=Math.sin(-this.transform.angle),a=Math.cos(-this.transform.angle);n=[n[0]*a-n[1]*o,n[0]*o+n[1]*a]}var s=[u(e,n[0],this.transform.zoom),u(e,n[1],this.transform.zoom),0],l=new Float32Array(16);return i.translate(l,t,s),l},y.prototype.saveTileTexture=function(t){var e=this.reusableTextures.tiles[t.size];e?e.push(t):this.reusableTextures.tiles[t.size]=[t]},y.prototype.saveViewportTexture=function(t){this.reusableTextures.viewport=t},y.prototype.getTileTexture=function(t){var e=this.reusableTextures.tiles[t];return e&&e.length>0?e.pop():null},y.prototype.getViewportTexture=function(t,e){var n=this.reusableTextures.viewport;if(n)return n.width===t&&n.height===e?n:(this.gl.deleteTexture(n),void(this.reusableTextures.viewport=null))},y.prototype.lineWidth=function(t){this.gl.lineWidth(l.clamp(t,this.lineWidthRange[0],this.lineWidthRange[1]))},y.prototype.showOverdrawInspector=function(t){if(t||this._showOverdrawInspector){this._showOverdrawInspector=t;var e=this.gl;if(t){e.blendFunc(e.CONSTANT_COLOR,e.ONE);var n=8,r=1/n;e.blendColor(r,r,r,0),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)}else e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}},y.prototype.createProgram=function(t,e){var n=this.gl,i=n.createProgram(),o=m[t],a="#define MAPBOX_GL_JS\n#define DEVICE_PIXEL_RATIO "+r.devicePixelRatio.toFixed(1)+"\n";this._showOverdrawInspector&&(a+="#define OVERDRAW_INSPECTOR;\n");var s=e.applyPragmas(a+m.prelude.fragmentSource+o.fragmentSource,"fragment"),u=e.applyPragmas(a+m.prelude.vertexSource+o.vertexSource,"vertex"),l=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(l,s),n.compileShader(l),n.attachShader(i,l);var c=n.createShader(n.VERTEX_SHADER);n.shaderSource(c,u),n.compileShader(c),n.attachShader(i,c),n.linkProgram(i);for(var h=n.getProgramParameter(i,n.ACTIVE_ATTRIBUTES),f={program:i,numAttributes:h},p=0;p<h;p++){var d=n.getActiveAttrib(i,p);f[d.name]=n.getAttribLocation(i,d.name)}for(var v=n.getProgramParameter(i,n.ACTIVE_UNIFORMS),y=0;y<v;y++){var _=n.getActiveUniform(i,y);f[_.name]=n.getUniformLocation(i,_.name)}return f},y.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=this.createProgram(t,e)),this.cache[n]},y.prototype.useProgram=function(t,e){var n=this.gl,r=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.currentProgram!==r&&(n.useProgram(r.program),this.currentProgram=r),r},e.exports=y},{"../data/buffer":51,"../data/extent":54,"../data/pos_array":57,"../data/program_configuration":58,"../data/raster_bounds_array":59,"../source/pixels_to_tile_units":88,"../source/source_cache":93,"../util/browser":195,"../util/util":215,"./draw_background":66,"./draw_circle":67,"./draw_debug":69,"./draw_fill":70,"./draw_fill_extrusion":71,"./draw_line":72,"./draw_raster":73,"./draw_symbol":74,"./frame_history":75,"./shaders":79,"./vertex_array_object":80,"@mapbox/gl-matrix":1}],78:[function(t,e,n){"use strict";var r=t("../source/pixels_to_tile_units");n.prepare=function(t,e,n){var r=e.gl,i=e.spriteAtlas.getPosition(t.from,!0),o=e.spriteAtlas.getPosition(t.to,!0);i&&o&&(r.uniform1i(n.u_image,0),r.uniform2fv(n.u_pattern_tl_a,i.tl),r.uniform2fv(n.u_pattern_br_a,i.br),r.uniform2fv(n.u_pattern_tl_b,o.tl),r.uniform2fv(n.u_pattern_br_b,o.br),r.uniform1f(n.u_mix,t.t),r.uniform2fv(n.u_pattern_size_a,i.size),r.uniform2fv(n.u_pattern_size_b,o.size),r.uniform1f(n.u_scale_a,t.fromScale),r.uniform1f(n.u_scale_b,t.toScale),r.activeTexture(r.TEXTURE0),e.spriteAtlas.bind(r,!0))},n.setTile=function(t,e,n){var i=e.gl;i.uniform1f(n.u_tile_units_to_pixels,1/r(t,1,e.transform.tileZoom));var o=Math.pow(2,t.coord.z),a=t.tileSize*Math.pow(2,e.transform.tileZoom)/o,s=a*(t.coord.x+t.coord.w*o),u=a*t.coord.y;i.uniform2f(n.u_pixel_coord_upper,s>>16,u>>16),i.uniform2f(n.u_pixel_coord_lower,65535&s,65535&u)}},{"../source/pixels_to_tile_units":88}],79:[function(t,e,n){"use strict";t("path");e.exports={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\nfloat evaluate_zoom_function_1(const vec4 values, const float t) {\n    if (t < 1.0) {\n        return mix(values[0], values[1], t);\n    } else if (t < 2.0) {\n        return mix(values[1], values[2], t - 1.0);\n    } else {\n        return mix(values[2], values[3], t - 2.0);\n    }\n}\nvec4 evaluate_zoom_function_4(const vec4 value0, const vec4 value1, const vec4 value2, const vec4 value3, const float t) {\n    if (t < 1.0) {\n        return mix(value0, value1, t);\n    } else if (t < 2.0) {\n        return mix(value1, value2, t - 1.0);\n    } else {\n        return mix(value2, value3, t - 2.0);\n    }\n}\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\n\n// To minimize the number of attributes needed in the mapbox-gl-native shaders,\n// we encode a 4-component color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    float extrude_length = length(v_extrude);\n    float antialiased_blur = -max(blur, v_antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform vec2 u_extrude_scale;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    vec2 extrude = v_extrude * (radius + stroke_width) * u_extrude_scale;\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\n\n    if (u_scale_with_map) {\n        gl_Position.xy += extrude;\n    } else {\n        gl_Position.xy += extrude * gl_Position.w;\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    v_antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n}\n"},collisionBox:{fragmentSource:"uniform float u_zoom;\nuniform float u_maxzoom;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\n\n    if (v_placement_zoom > u_zoom) {\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n    }\n\n    if (u_zoom >= v_max_zoom) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\n    }\n\n    if (v_placement_zoom >= u_maxzoom) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\n    }\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_data;\n\nuniform mat4 u_matrix;\nuniform float u_scale;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos + a_extrude / u_scale, 0.0, 1.0);\n\n    v_max_zoom = a_data.x;\n    v_placement_zoom = a_data.y;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, step(32767.0, a_pos.x), 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float ed = a_edgedistance; // use each attrib in order to not trip a VAO assert\n    float t = mod(a_normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(a_normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{
fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(a_normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = a_normal.x == 1.0 && a_normal.y == 0.0 && a_normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(a_edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(a_normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_width;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset; \n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a, u_pattern_br_a, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b, u_pattern_br_b, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_width;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset; \n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma, 0.5 + u_sdfgamma, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\nuniform mediump float u_width;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset;\n \n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos0 = (((a_texture_pos / 32767.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:'\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\n\n// icon-size data (see symbol_sdf.vertex.glsl for more)\nattribute vec3 a_size;\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform mediump float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform mediump float u_size; // used when size is both zoom and feature constant\nuniform mediump float u_layout_size; // used when size is feature constant\n\n#pragma mapbox: define lowp float opacity\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform bool u_is_text;\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    mediump vec2 label_data = unpack_float(a_data[2]);\n    mediump float a_labelminzoom = label_data[0];\n    mediump vec2 a_zoom = unpack_float(a_data[3]);\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    float size;\n    // In order to accommodate placing labels around corners in\n    // symbol-placement: line, each glyph in a label could have multiple\n    // "quad"s only one of which should be shown at a given zoom level.\n    // The min/max zoom assigned to each quad is based on the font size at\n    // the vector tile\'s zoom level, which might be different than at the\n    // currently rendered zoom level if text-size is zoom-dependent.\n    // Thus, we compensate for this difference by calculating an adjustment\n    // based on the scale of rendered text size relative to layout text size.\n    mediump float layoutSize;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n        layoutSize = a_size[2] / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n        layoutSize = size;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n        layoutSize = u_layout_size;\n    } else {\n        size = u_size;\n        layoutSize = u_size;\n    }\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    mediump float zoomAdjust = log2(size / layoutSize);\n    mediump float adjustedZoom = (u_zoom - zoomAdjust) * 10.0;\n    // result: z = 0 if a_minzoom <= adjustedZoom < a_maxzoom, and 1 otherwise\n    mediump float z = 2.0 - step(a_minzoom, adjustedZoom) - (1.0 - step(a_maxzoom, adjustedZoom));\n\n    vec2 extrude = fontScale * u_extrude_scale * (a_offset / 64.0);\n    if (u_rotate_with_map) {\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    } else {\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n'},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\nvarying float v_size;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    float fontScale = u_is_text ? v_size / 24.0 : v_size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, v_tex).a;\n    lowp float fade_alpha = texture2D(u_fadetexture, v_fade_tex).a;\n    highp float gamma_scaled = gamma * v_gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist) * fade_alpha;\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature),\n//   layoutSize == text-size(layoutZoomLevel, feature) ]\nattribute vec3 a_size;\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform mediump float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform mediump float u_size; // used when size is both zoom and feature constant\nuniform mediump float u_layout_size; // used when size is feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform bool u_is_text;\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform bool u_pitch_with_map;\nuniform mediump float u_pitch;\nuniform mediump float u_bearing;\nuniform mediump float u_aspect_ratio;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\nvarying float v_size;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n\n    mediump vec2 label_data = unpack_float(a_data[2]);\n    mediump float a_labelminzoom = label_data[0];\n    mediump float a_labelangle = label_data[1];\n\n    mediump vec2 a_zoom = unpack_float(a_data[3]);\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // In order to accommodate placing labels around corners in\n    // symbol-placement: line, each glyph in a label could have multiple\n    // \"quad\"s only one of which should be shown at a given zoom level.\n    // The min/max zoom assigned to each quad is based on the font size at\n    // the vector tile's zoom level, which might be different than at the\n    // currently rendered zoom level if text-size is zoom-dependent.\n    // Thus, we compensate for this difference by calculating an adjustment\n    // based on the scale of rendered text size relative to layout text size.\n    mediump float layoutSize;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        v_size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n        layoutSize = a_size[2] / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        v_size = a_size[0] / 10.0;\n        layoutSize = v_size;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        v_size = u_size;\n        layoutSize = u_layout_size;\n    } else {\n        v_size = u_size;\n        layoutSize = u_size;\n    }\n\n    float fontScale = u_is_text ? v_size / 24.0 : v_size;\n\n    mediump float zoomAdjust = log2(v_size / layoutSize);\n    mediump float adjustedZoom = (u_zoom - zoomAdjust) * 10.0;\n    // result: z = 0 if a_minzoom <= adjustedZoom < a_maxzoom, and 1 otherwise\n    // Used below to move the vertex out of the clip space for when the current\n    // zoom is out of the glyph's zoom range.\n    mediump float z = 2.0 - step(a_minzoom, adjustedZoom) - (1.0 - step(a_maxzoom, adjustedZoom));\n\n    // pitch-alignment: map\n    // rotation-alignment: map | viewport\n    if (u_pitch_with_map) {\n        lowp float angle = u_rotate_with_map ? (a_labelangle / 256.0 * 2.0 * PI) : u_bearing;\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, asin, -1.0 * asin, acos);\n        vec2 offset = RotationMatrix * a_offset;\n        vec2 extrude = fontScale * u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: map\n    } else if (u_rotate_with_map) {\n        // foreshortening factor to apply on pitched maps\n        // as a label goes from horizontal <=> vertical in angle\n        // it goes from 0% foreshortening to up to around 70% foreshortening\n        lowp float pitchfactor = 1.0 - cos(u_pitch * sin(u_pitch * 0.75));\n\n        lowp float lineangle = a_labelangle / 256.0 * 2.0 * PI;\n\n        // use the lineangle to position points a,b along the line\n        // project the points and calculate the label angle in projected space\n        // this calculation allows labels to be rendered unskewed on pitched maps\n        vec4 a = u_matrix * vec4(a_pos, 0, 1);\n        vec4 b = u_matrix * vec4(a_pos + vec2(cos(lineangle),sin(lineangle)), 0, 1);\n        lowp float angle = atan((b[1]/b[3] - a[1]/a[3])/u_aspect_ratio, b[0]/b[3] - a[0]/a[3]);\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, -1.0 * asin, asin, acos);\n\n        vec2 offset = RotationMatrix * (vec2((1.0-pitchfactor)+(pitchfactor*cos(angle*2.0)), 1.0) * a_offset);\n        vec2 extrude = fontScale * u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: viewport\n    } else {\n        vec2 extrude = fontScale * u_extrude_scale * (a_offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_gamma_scale = gl_Position.w;\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"}}},{path:23}],80:[function(t,e,n){"use strict";var r=function(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundElementBuffer=null,this.boundVertexOffset=null,
this.vao=null};r.prototype.bind=function(t,e,n,r,i,o){void 0===t.extVertexArrayObject&&(t.extVertexArrayObject=t.getExtension("OES_vertex_array_object"));var a=!this.vao||this.boundProgram!==e||this.boundVertexBuffer!==n||this.boundVertexBuffer2!==i||this.boundElementBuffer!==r||this.boundVertexOffset!==o;!t.extVertexArrayObject||a?(this.freshBind(t,e,n,r,i,o),this.gl=t):t.extVertexArrayObject.bindVertexArrayOES(this.vao)},r.prototype.freshBind=function(t,e,n,r,i,o){var a,s=e.numAttributes;if(t.extVertexArrayObject)this.vao&&this.destroy(),this.vao=t.extVertexArrayObject.createVertexArrayOES(),t.extVertexArrayObject.bindVertexArrayOES(this.vao),a=0,this.boundProgram=e,this.boundVertexBuffer=n,this.boundVertexBuffer2=i,this.boundElementBuffer=r,this.boundVertexOffset=o;else{a=t.currentNumAttributes||0;for(var u=s;u<a;u++)t.disableVertexAttribArray(u)}n.enableAttributes(t,e),i&&i.enableAttributes(t,e),n.bind(t),n.setVertexAttribPointers(t,e,o),i&&(i.bind(t),i.setVertexAttribPointers(t,e,o)),r&&r.bind(t),t.currentNumAttributes=s},r.prototype.destroy=function(){this.vao&&(this.gl.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},e.exports=r},{}],81:[function(t,e,n){"use strict";var r=t("../util/util");n.packUint8ToFloat=function(t,e){return t=r.clamp(Math.floor(t),0,255),e=r.clamp(Math.floor(e),0,255),256*t+e}},{"../util/util":215}],82:[function(t,e,n){"use strict";var r=t("./image_source"),i=t("../util/window"),o=function(t){function e(e,n,r,i){t.call(this,e,n,r,i),this.options=n,this.animate=!n.hasOwnProperty("animate")||n.animate}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){if(this.canvas=this.canvas||i.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions())return this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero."));var t;this.play=function(){t=this.map.style.animationLoop.set(1/0),this.map._rerender()},this.pause=function(){this.map.style.animationLoop.cancel(t)},this._finishLoading()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.canvas&&this.animate&&this.play())},e.prototype.prepare=function(){var t=!1;this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||this.tile&&this._prepareImage(this.map.painter.gl,this.canvas,t)},e.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},e.prototype._hasInvalidDimensions=function(){for(var t=this,e=0,n=[t.canvas.width,t.canvas.height];e<n.length;e+=1){var r=n[e];if(isNaN(r)||r<=0)return!0}return!1},e}(r);e.exports=o},{"../util/window":197,"./image_source":86}],83:[function(t,e,n){"use strict";function r(t){var e=a.document.createElement("a");return e.href=t,e.href}var i=t("../util/evented"),o=t("../util/util"),a=t("../util/window"),s=t("../data/extent"),u=function(t){function e(e,n,r,i){t.call(this),n=n||{},this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=r,this.setEventedParent(i),this._data=n.data,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type);var a=s/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:s,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:Math.min(n.clusterMaxZoom,this.maxzoom-1)||this.maxzoom-1,extent:s,radius:(n.clusterRadius||50)*a,log:!1}},n.workerOptions)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(e){return e?void t.fire("error",{error:e}):void t.fire("data",{dataType:"source",sourceDataType:"metadata"})})},e.prototype.onAdd=function(t){this.load(),this.map=t},e.prototype.setData=function(t){var e=this;return this._data=t,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){return t?e.fire("error",{error:t}):void e.fire("data",{dataType:"source",sourceDataType:"content"})}),this},e.prototype._updateWorkerData=function(t){var e=this,n=o.extend({},this.workerOptions),i=this._data;"string"==typeof i?n.url=r(i):n.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n){e._loaded=!0,t(n)})},e.prototype.loadTile=function(t,e){var n=this,r=t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,i={type:this.type,uid:t.uid,coord:t.coord,zoom:t.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,overscaling:r,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};t.workerID=this.dispatcher.send("loadTile",i,function(r,i){if(t.unloadVectorData(),!t.aborted)return r?e(r):(t.loadVectorData(i,n.map.painter),t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(n)),e(null))},this.workerID)},e.prototype.abortTile=function(t){t.aborted=!0},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},function(){},t.workerID)},e.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id},function(){})},e.prototype.serialize=function(){return{type:this.type,data:this._data}},e}(i);e.exports=u},{"../data/extent":54,"../util/evented":203,"../util/util":215,"../util/window":197}],84:[function(t,e,n){"use strict";var r=t("../util/ajax"),i=t("geojson-rewind"),o=t("./geojson_wrapper"),a=t("vt-pbf"),s=t("supercluster"),u=t("geojson-vt"),l=t("./vector_tile_worker_source"),c=function(t){function e(e,n,r){t.call(this,e,n),r&&(this.loadGeoJSON=r),this._geoJSONIndexes={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadVectorData=function(t,e){var n=t.source,r=t.coord;if(!this._geoJSONIndexes[n])return e(null,null);var i=this._geoJSONIndexes[n].getTile(Math.min(r.z,t.maxZoom),r.x,r.y);if(!i)return e(null,null);var s=new o(i.features);s.name="_geojsonTileLayer";var u=a({layers:{_geojsonTileLayer:s}});0===u.byteOffset&&u.byteLength===u.buffer.byteLength||(u=new Uint8Array(u)),s.rawData=u.buffer,e(null,s)},e.prototype.loadData=function(t,e){var n=function(n,r){var o=this;return n?e(n):"object"!=typeof r?e(new Error("Input data is not a valid GeoJSON object.")):(i(r,!0),void this._indexData(r,t,function(n,r){return n?e(n):(o._geoJSONIndexes[t.source]=r,void e(null))}))}.bind(this);this.loadGeoJSON(t,n)},e.prototype.loadGeoJSON=function(t,e){if(t.url)r.getJSON(t.url,e);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(t){return e(new Error("Input data is not a valid GeoJSON object."))}}},e.prototype.removeSource=function(t){this._geoJSONIndexes[t.source]&&delete this._geoJSONIndexes[t.source]},e.prototype._indexData=function(t,e,n){try{e.cluster?n(null,s(e.superclusterOptions).load(t.features)):n(null,u(t,e.geojsonVtOptions))}catch(t){return n(t)}},e}(l);e.exports=c},{"../util/ajax":194,"./geojson_wrapper":85,"./vector_tile_worker_source":98,"geojson-rewind":7,"geojson-vt":11,supercluster:29,"vt-pbf":38}],85:[function(t,e,n){"use strict";var r=t("point-geometry"),i=t("vector-tile").VectorTileFeature,o=t("../data/extent"),a=function(t){var e=this;if(this.type=t.type,1===t.type){this.rawGeometry=[];for(var n=0;n<t.geometry.length;n++)e.rawGeometry.push([t.geometry[n]])}else this.rawGeometry=t.geometry;this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10)),this.extent=o};a.prototype.loadGeometry=function(){var t=this,e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var i=e[n],o=[],a=0;a<i.length;a++)o.push(new r(i[a][0],i[a][1]));t.geometry.push(o)}return this.geometry},a.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-(1/0),r=1/0,i=-(1/0),o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},a.prototype.toGeoJSON=function(){i.prototype.toGeoJSON.call(this)};var s=function(t){this.features=t,this.length=t.length,this.extent=o};s.prototype.feature=function(t){return new a(this.features[t])},e.exports=s},{"../data/extent":54,"point-geometry":26,"vector-tile":34}],86:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/window"),o=t("./tile_coord"),a=t("../geo/lng_lat"),s=t("point-geometry"),u=t("../util/evented"),l=t("../util/ajax"),c=t("../data/extent"),h=t("../data/raster_bounds_array"),f=t("../data/buffer"),p=t("../render/vertex_array_object"),d=function(t){function e(e,n,r,i){t.call(this),this.id=e,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.setEventedParent(i),this.options=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,l.getImage(this.options.url,function(e,n){return e?t.fire("error",{error:e}):(t.image=n,void t._finishLoading())})},e.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire("data",{dataType:"source",sourceDataType:"metadata"}))},e.prototype.onAdd=function(t){this.load(),this.map=t,this.image&&this.setCoordinates(this.coordinates)},e.prototype.setCoordinates=function(t){this.coordinates=t;var e=this.map,n=t.map(function(t){return e.transform.locationCoordinate(a.convert(t)).zoomTo(0)}),i=this.centerCoord=r.getCoordinatesCenter(n);return i.column=Math.floor(i.column),i.row=Math.floor(i.row),this.coord=new o(i.zoom,i.column,i.row),this.minzoom=this.maxzoom=i.zoom,this._tileCoords=n.map(function(t){var e=t.zoomTo(i.zoom);return new s(Math.round((e.column-i.column)*c),Math.round((e.row-i.row)*c))}),this.fire("data",{dataType:"source",sourceDataType:"content"}),this},e.prototype._setTile=function(t){this.tile=t;var e=32767,n=new h;n.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0),n.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,e,0),n.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,e),n.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,e,e),this.tile.buckets={},this.tile.boundsBuffer=f.fromStructArray(n,f.BufferType.VERTEX),this.tile.boundsVAO=new p},e.prototype.prepare=function(){this.tile&&this.image&&this._prepareImage(this.map.painter.gl,this.image)},e.prototype._prepareImage=function(t,e,n){"loaded"!==this.tile.state?(this.tile.state="loaded",this.tile.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.tile.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)):n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e):(e instanceof i.HTMLVideoElement||e instanceof i.ImageData||e instanceof i.HTMLCanvasElement)&&(t.bindTexture(t.TEXTURE_2D,this.tile.texture),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e))},e.prototype.loadTile=function(t,e){this.coord&&this.coord.toString()===t.coord.toString()?(this._setTile(t),e(null)):(t.state="errored",e(null))},e.prototype.serialize=function(){return{type:"image",urls:this.url,coordinates:this.coordinates}},e}(u);e.exports=d},{"../data/buffer":51,"../data/extent":54,"../data/raster_bounds_array":59,"../geo/lng_lat":62,"../render/vertex_array_object":80,"../util/ajax":194,"../util/evented":203,"../util/util":215,"../util/window":197,"./tile_coord":96,"point-geometry":26}],87:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/ajax"),o=t("../util/browser"),a=t("../util/mapbox").normalizeSourceURL;e.exports=function(t,e){var n=function(t,n){if(t)return e(t);var i=r.pick(n,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);n.vector_layers&&(i.vectorLayers=n.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(t){return t.id})),e(null,i)};t.url?i.getJSON(a(t.url),n):o.frame(n.bind(null,null,t))}},{"../util/ajax":194,"../util/browser":195,"../util/mapbox":210,"../util/util":215}],88:[function(t,e,n){"use strict";var r=t("../data/extent");e.exports=function(t,e,n){return e*(r/(t.tileSize*Math.pow(2,n-t.coord.z)))}},{"../data/extent":54}],89:[function(t,e,n){"use strict";function r(t,e){var n=t.coord,r=e.coord;return n.z-r.z||n.y-r.y||n.w-r.w||n.x-r.x}function i(t){for(var e=t[0]||{},n=1;n<t.length;n++){var r=t[n];for(var i in r){var o=r[i],a=e[i];if(void 0===a)a=e[i]=o;else for(var s=0;s<o.length;s++)a.push(o[s])}}return e}var o=t("./tile_coord");n.rendered=function(t,e,n,o,a,s){var u=t.tilesIn(n);u.sort(r);for(var l=[],c=0;c<u.length;c++){var h=u[c];h.tile.featureIndex&&l.push(h.tile.featureIndex.query({queryGeometry:h.queryGeometry,scale:h.scale,tileSize:h.tile.tileSize,bearing:s,params:o},e))}return i(l)},n.source=function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),r=[],i={},a=0;a<n.length;a++){var s=n[a],u=new o(Math.min(s.sourceMaxZoom,s.coord.z),s.coord.x,s.coord.y,0).id;i[u]||(i[u]=!0,s.querySourceFeatures(r,e))}return r}},{"./tile_coord":96}],90:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/ajax"),o=t("../util/evented"),a=t("./load_tilejson"),s=t("../util/mapbox").normalizeTileURL,u=t("./tile_bounds"),l=function(t){function e(e,n,i,o){t.call(this),this.id=e,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this.options=n,r.extend(this,r.pick(n,["url","scheme","tileSize"]))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),a(this.options,function(e,n){return e?t.fire("error",e):(r.extend(t,n),t.setBounds(n.bounds),t.fire("data",{dataType:"source",sourceDataType:"metadata"}),void t.fire("data",{dataType:"source",sourceDataType:"content"}))})},e.prototype.onAdd=function(t){this.load(),this.map=t},e.prototype.setBounds=function(t){this.bounds=t,t&&(this.tileBounds=new u(t,this.minzoom,this.maxzoom))},e.prototype.serialize=function(){return{type:"raster",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds}},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t,this.maxzoom)},e.prototype.loadTile=function(t,e){function n(n,r){if(delete t.request,t.aborted)return this.state="unloaded",e(null);if(n)return this.state="errored",e(n);this.map._refreshExpiredTiles&&t.setExpiryData(r),delete r.cacheControl,delete r.expires;var i=this.map.painter.gl;t.texture=this.map.painter.getTileTexture(r.width),t.texture?(i.bindTexture(i.TEXTURE_2D,t.texture),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,r)):(t.texture=i.createTexture(),i.bindTexture(i.TEXTURE_2D,t.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.map.painter.extTextureFilterAnisotropic&&i.texParameterf(i.TEXTURE_2D,this.map.painter.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this.map.painter.extTextureFilterAnisotropicMax),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,r),t.texture.size=r.width),i.generateMipmap(i.TEXTURE_2D),t.state="loaded",e(null)}var r=s(t.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);t.request=i.getImage(r,n.bind(this))},e.prototype.abortTile=function(t){t.request&&(t.request.abort(),delete t.request)},e.prototype.unloadTile=function(t){t.texture&&this.map.painter.saveTileTexture(t.texture)},e}(o);e.exports=l},{"../util/ajax":194,"../util/evented":203,"../util/mapbox":210,"../util/util":215,"./load_tilejson":87,"./tile_bounds":95}],91:[function(t,e,n){"use strict";var r=t("../util/ajax"),i=t("../util/evented"),o=t("../util/window"),a=!1,s=null;e.exports.evented=new i,e.exports.registerForPluginAvailability=function(t){return s?t(s,e.exports.errorCallback):e.exports.evented.once("pluginAvailable",t),t},e.exports.setRTLTextPlugin=function(t,n){if(a)throw new Error("setRTLTextPlugin cannot be called multiple times.");a=!0,e.exports.errorCallback=n,r.getArrayBuffer(t,function(t,r){t?n(t):(s=o.URL.createObjectURL(new o.Blob([r.data]),{type:"text/javascript"}),e.exports.evented.fire("pluginAvailable",{pluginBlobURL:s,errorCallback:n}))})}},{"../util/ajax":194,"../util/evented":203,"../util/window":197}],92:[function(t,e,n){"use strict";var r=t("../util/util"),i={vector:t("../source/vector_tile_source"),raster:t("../source/raster_tile_source"),geojson:t("../source/geojson_source"),video:t("../source/video_source"),image:t("../source/image_source"),canvas:t("../source/canvas_source")};n.create=function(t,e,n,o){if(e=new i[e.type](t,e,n,o),e.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+e.id);return r.bindAll(["load","abort","unload","serialize","prepare"],e),e},n.getType=function(t){return i[t]},n.setType=function(t,e){i[t]=e}},{"../source/canvas_source":82,"../source/geojson_source":83,"../source/image_source":86,"../source/raster_tile_source":90,"../source/vector_tile_source":97,"../source/video_source":99,"../util/util":215}],93:[function(t,e,n){"use strict";function r(t,e,n){var r=n.zoomTo(Math.min(t.z,e));return{x:(r.column-(t.x+t.w*Math.pow(2,t.z)))*p,y:(r.row-t.y)*p}}function i(t,e){return t%32-e%32}function o(t){return"raster"===t||"image"===t||"video"===t}var a=t("./source"),s=t("./tile"),u=t("../util/evented"),l=t("./tile_coord"),c=t("../util/lru_cache"),h=t("../geo/coordinate"),f=t("../util/util"),p=t("../data/extent"),d=function(t){function e(e,n,r){t.call(this),this.id=e,this.dispatcher=r,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("error",function(){this._sourceErrored=!0}),this._source=a.create(e,n,r,this),this._tiles={},this._cache=new c(0,this.unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._isIdRenderable=this._isIdRenderable.bind(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onAdd=function(t){this.map=t,this._source&&this._source.onAdd&&this._source.onAdd(t)},e.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},e.prototype.loaded=function(){var t=this;if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var e in t._tiles){var n=t._tiles[e];if("loaded"!==n.state&&"errored"!==n.state)return!1}return!0},e.prototype.getSource=function(){return this._source},e.prototype.loadTile=function(t,e){return this._source.loadTile(t,e)},e.prototype.unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t)},e.prototype.abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t)},e.prototype.serialize=function(){return this._source.serialize()},e.prototype.prepare=function(){if(this._sourceLoaded&&this._source.prepare)return this._source.prepare()},e.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(i)},e.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},e.prototype._isIdRenderable=function(t){return this._tiles[t].hasData()&&!this._coveredTiles[t]},e.prototype.reload=function(){var t=this;this._cache.reset();for(var e in t._tiles)t.reloadTile(e,"reloading")},e.prototype.reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this.loadTile(n,this._tileLoaded.bind(this,n,t,e)))},e.prototype._tileLoaded=function(t,e,n,r){return r?(t.state="errored",void(404!==r.status&&this._source.fire("error",{tile:t,error:r}))):(t.sourceCache=this,t.timeAdded=(new Date).getTime(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),this._source.fire("data",{dataType:"source",tile:t,coord:t.coord}),void(this.map&&(this.map.painter.tileExtentVAO.vao=null)))},e.prototype.getTile=function(t){return this.getTileByID(t.id)},e.prototype.getTileByID=function(t){return this._tiles[t]},e.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},e.prototype.findLoadedChildren=function(t,e,n){var r=this,i=!1;for(var o in r._tiles){var a=r._tiles[o];if(!(n[o]||!a.hasData()||a.coord.z<=t.z||a.coord.z>e)){var s=Math.pow(2,Math.min(a.coord.z,r._source.maxzoom)-Math.min(t.z,r._source.maxzoom));if(Math.floor(a.coord.x/s)===t.x&&Math.floor(a.coord.y/s)===t.y)for(n[o]=!0,i=!0;a&&a.coord.z-1>t.z;){var u=a.coord.parent(r._source.maxzoom).id;a=r._tiles[u],a&&a.hasData()&&(delete n[o],n[u]=!0)}}}return i},e.prototype.findLoadedParent=function(t,e,n){for(var r=this,i=t.z-1;i>=e;i--){t=t.parent(r._source.maxzoom);var o=r._tiles[t.id];if(o&&o.hasData())return n[t.id]=!0,o;if(r._cache.has(t.id))return n[t.id]=!0,r._cache.getWithoutRemoving(t.id)}},e.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/t.tileSize)+1,n=Math.ceil(t.height/t.tileSize)+1,r=e*n,i=5;this._cache.setMaxSize(Math.floor(r*i))},e.prototype.update=function(t){var n=this;if(this.transform=t,this._sourceLoaded){var r,i,a,s;this.updateCacheSize(t);var u=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),c=Math.max(u-e.maxOverzooming,this._source.minzoom),h=Math.max(u+e.maxUnderzooming,this._source.minzoom),p={};this._coveredTiles={};var d;for(this.used?this._source.coord?d=t.getVisibleWrappedCoordinates(this._source.coord):(d=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(d=d.filter(function(t){return n._source.hasTile(t)}))):d=[],r=0;r<d.length;r++)i=d[r],a=n.addTile(i),p[i.id]=!0,a.hasData()||n.findLoadedChildren(i,h,p)||(s=n.findLoadedParent(i,c,p),s&&n.addTile(s.coord));var m={};if(o(this._source.type))for(var v=Object.keys(p),y=0;y<v.length;y++){var _=v[y];i=l.fromID(_),a=n._tiles[_],a&&("undefined"==typeof a.fadeEndTime||a.fadeEndTime>=Date.now())&&(n.findLoadedChildren(i,h,p)&&(p[_]=!0),s=n.findLoadedParent(i,c,m),s&&n.addTile(s.coord))}var g;for(g in m)p[g]||(n._coveredTiles[g]=!0);for(g in m)p[g]=!0;var x=f.keysDifference(this._tiles,p);for(r=0;r<x.length;r++)n.removeTile(+x[r])}},e.prototype.addTile=function(t){var e=this._tiles[t.id];if(e)return e;var n=t.wrapped();e=this._tiles[n.id],e||(e=this._cache.get(n.id),e&&(e.redoPlacement(this._source),this._cacheTimers[n.id]&&(clearTimeout(this._cacheTimers[n.id]),this._cacheTimers[n.id]=void 0,this._setTileReloadTimer(n.id,e))));var r=Boolean(e);if(!r){var i=t.z,o=i>this._source.maxzoom?Math.pow(2,i-this._source.maxzoom):1;e=new s(n,this._source.tileSize*o,this._source.maxzoom),this.loadTile(e,this._tileLoaded.bind(this,e,t.id,e.state))}return e.uses++,this._tiles[t.id]=e,r||this._source.fire("dataloading",{tile:e,coord:e.coord,dataType:"source"}),e},e.prototype._setTileReloadTimer=function(t,e){var n=this,r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){n.reloadTile(t,"expired"),n._timers[t]=void 0},r))},e.prototype._setCacheInvalidationTimer=function(t,e){var n=this,r=e.getExpiryTimeout();r&&(this._cacheTimers[t]=setTimeout(function(){n._cache.remove(t),n._cacheTimers[t]=void 0},r))},e.prototype.removeTile=function(t){var e=this._tiles[t];if(e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),this._timers[t]=void 0),!(e.uses>0)))if(e.hasData()){var n=e.coord.wrapped().id;this._cache.add(n,e),this._setCacheInvalidationTimer(n,e)}else e.aborted=!0,this.abortTile(e),this.unloadTile(e)},e.prototype.clearTiles=function(){var t=this;for(var e in t._tiles)t.removeTile(e);this._cache.reset()},e.prototype.tilesIn=function(t){for(var e=this,n={},i=this.getIds(),o=1/0,a=1/0,s=-(1/0),u=-(1/0),c=t[0].zoom,f=0;f<t.length;f++){var d=t[f];o=Math.min(o,d.column),a=Math.min(a,d.row),s=Math.max(s,d.column),u=Math.max(u,d.row)}for(var m=0;m<i.length;m++){var v=e._tiles[i[m]],y=l.fromID(i[m]),_=[r(y,v.sourceMaxZoom,new h(o,a,c)),r(y,v.sourceMaxZoom,new h(s,u,c))];if(_[0].x<p&&_[0].y<p&&_[1].x>=0&&_[1].y>=0){for(var g=[],x=0;x<t.length;x++)g.push(r(y,v.sourceMaxZoom,t[x]));var b=n[v.coord.id];void 0===b&&(b=n[v.coord.id]={tile:v,coord:y,queryGeometry:[],scale:Math.pow(2,e.transform.zoom-v.coord.z)}),b.queryGeometry.push(g)}}var w=[];for(var M in n)w.push(n[M]);return w},e.prototype.redoPlacement=function(){for(var t=this,e=this.getIds(),n=0;n<e.length;n++){var r=t.getTileByID(e[n]);r.redoPlacement(t._source)}},e.prototype.getVisibleCoordinates=function(){for(var t=this,e=this.getRenderableIds().map(l.fromID),n=0,r=e;n<r.length;n+=1){var i=r[n];i.posMatrix=t.transform.calculatePosMatrix(i,t._source.maxzoom)}return e},e}(u);d.maxOverzooming=10,d.maxUnderzooming=3,e.exports=d},{"../data/extent":54,"../geo/coordinate":61,"../util/evented":203,"../util/lru_cache":209,"../util/util":215,"./source":92,"./tile":94,"./tile_coord":96}],94:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../data/bucket"),o=t("../data/feature_index"),a=t("vector-tile"),s=t("pbf"),u=t("../util/vectortile_to_geojson"),l=t("../style-spec/feature_filter"),c=t("../symbol/collision_tile"),h=t("../symbol/collision_box"),f=3e4,p=function(t,e,n){this.coord=t,this.uid=r.uniqueId(),this.uses=0,this.tileSize=e,this.sourceMaxZoom=n,this.buckets={},this.expirationTime=null,this.expiredRequestCount=0,this.state="loading"};p.prototype.registerFadeDuration=function(t,e){var n=e+this.timeAdded;n<Date.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n,t.set(this.fadeEndTime-Date.now()))},p.prototype.loadVectorData=function(t,e){this.hasData()&&this.unloadVectorData(),this.state="loaded",t&&(t.rawTileData&&(this.rawTileData=t.rawTileData),this.collisionBoxArray=new h(t.collisionBoxArray),this.collisionTile=new c(t.collisionTile,this.collisionBoxArray),this.featureIndex=new o(t.featureIndex,this.rawTileData,this.collisionTile),this.buckets=i.deserialize(t.buckets,e.style))},p.prototype.reloadSymbolData=function(t,e){var n=this;if("unloaded"!==this.state){this.collisionTile=new c(t.collisionTile,this.collisionBoxArray),this.featureIndex.setCollisionTile(this.collisionTile);for(var o in n.buckets){var a=n.buckets[o];"symbol"===a.layers[0].type&&(a.destroy(),delete n.buckets[o])}r.extend(this.buckets,i.deserialize(t.buckets,e))}},p.prototype.unloadVectorData=function(){var t=this;for(var e in t.buckets)t.buckets[e].destroy();this.buckets={},this.collisionBoxArray=null,this.collisionTile=null,this.featureIndex=null,this.state="unloaded"},p.prototype.redoPlacement=function(t){var e=this;if("vector"===t.type||"geojson"===t.type)return"loaded"!==this.state?void(this.redoWhenDone=!0):void(this.collisionTile&&(this.state="reloading",t.dispatcher.send("redoPlacement",{type:t.type,uid:this.uid,source:t.id,angle:t.map.transform.angle,pitch:t.map.transform.pitch,showCollisionBoxes:t.map.showCollisionBoxes},function(n,r){e.reloadSymbolData(r,t.map.style),t.map&&(t.map.painter.tileExtentVAO.vao=null),e.state="loaded",e.redoWhenDone&&(e.redoWhenDone=!1,e.redoPlacement(t))},this.workerID)))},p.prototype.getBucket=function(t){return this.buckets[t.id]},p.prototype.querySourceFeatures=function(t,e){var n=this;if(this.rawTileData){this.vtLayers||(this.vtLayers=new a.VectorTile(new s(this.rawTileData)).layers);var r=this.vtLayers._geojsonTileLayer||this.vtLayers[e.sourceLayer];if(r)for(var i=l(e&&e.filter),o={z:this.coord.z,x:this.coord.x,y:this.coord.y},c=0;c<r.length;c++){var h=r.feature(c);if(i(h)){var f=new u(h,n.coord.z,n.coord.x,n.coord.y);f.tile=o,t.push(f)}}}},p.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},p.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=r.parseCacheControl(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var i=Date.now(),o=!1;if(this.expirationTime>i)o=!1;else if(e)if(this.expirationTime<e)o=!0;else{var a=this.expirationTime-e;a?this.expirationTime=i+Math.max(a,f):o=!0}else o=!0;o?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},p.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},e.exports=p},{"../data/bucket":45,"../data/feature_index":55,"../style-spec/feature_filter":105,"../symbol/collision_box":163,"../symbol/collision_tile":165,"../util/util":215,"../util/vectortile_to_geojson":216,pbf:25,"vector-tile":34}],95:[function(t,e,n){"use strict";var r=t("../geo/lng_lat_bounds"),i=t("../util/util").clamp,o=function(t,e,n){this.bounds=r.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=n||24};o.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},o.prototype.contains=function(t,e){var n=e?Math.min(t.z,e):t.z,r={minX:Math.floor(this.lngX(this.bounds.getWest(),n)),minY:Math.floor(this.latY(this.bounds.getNorth(),n)),maxX:Math.ceil(this.lngX(this.bounds.getEast(),n)),maxY:Math.ceil(this.latY(this.bounds.getSouth(),n))},i=t.x>=r.minX&&t.x<r.maxX&&t.y>=r.minY&&t.y<r.maxY;return i},o.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},o.prototype.latY=function(t,e){var n=i(Math.sin(Math.PI/180*t),-.9999,.9999),r=Math.pow(2,e)/(2*Math.PI);return Math.pow(2,e-1)+.5*Math.log((1+n)/(1-n))*-r},e.exports=o},{"../geo/lng_lat_bounds":63,"../util/util":215}],96:[function(t,e,n){"use strict";function r(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function i(t,e,n,r,i){var o=Math.max(n,Math.floor(e.y0)),a=Math.min(r,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var u=t.dx/t.dy,l=e.dx/e.dy,c=t.dx>0,h=e.dx<0,f=o;f<a;f++){var p=u*Math.max(0,Math.min(t.dy,f+c-t.y0))+t.x0,d=l*Math.max(0,Math.min(e.dy,f+h-e.y0))+e.x0;i(Math.floor(d),Math.ceil(p),f)}}function o(t,e,n,o,a,s){var u,l=r(t,e),c=r(e,n),h=r(n,t);l.dy>c.dy&&(u=l,l=c,c=u),l.dy>h.dy&&(u=l,l=h,h=u),c.dy>h.dy&&(u=c,c=h,h=u),l.dy&&i(h,l,o,a,s),c.dy&&i(h,c,o,a,s)}function a(t,e,n){for(var r,i="",o=t;o>0;o--)r=1<<o-1,i+=(e&r?1:0)+(n&r?2:0);return i}var s=t("@mapbox/whoots-js"),u=t("../geo/coordinate"),l=function(t,e,n,r){isNaN(r)&&(r=0),this.z=+t,this.x=+e,this.y=+n,this.w=+r,r*=2,r<0&&(r=r*-1-1);var i=1<<this.z;this.id=32*(i*i*r+i*this.y+this.x)+this.z,this.posMatrix=null};l.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},l.prototype.toCoordinate=function(t){var e=Math.min(this.z,void 0===t?this.z:t),n=Math.pow(2,e),r=this.y,i=this.x+n*this.w;return new u(i,r,e)},l.prototype.url=function(t,e,n){var r=s.getTileBBox(this.x,this.y,this.z),i=a(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",Math.min(this.z,e||this.z)).replace("{x}",this.x).replace("{y}","tms"===n?Math.pow(2,this.z)-this.y-1:this.y).replace("{quadkey}",i).replace("{bbox-epsg-3857}",r);
},l.prototype.parent=function(t){return 0===this.z?null:this.z>t?new l(this.z-1,this.x,this.y,this.w):new l(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},l.prototype.wrapped=function(){return new l(this.z,this.x,this.y,0)},l.prototype.children=function(t){if(this.z>=t)return[new l(this.z+1,this.x,this.y,this.w)];var e=this.z+1,n=2*this.x,r=2*this.y;return[new l(e,n,r,this.w),new l(e,n+1,r,this.w),new l(e,n,r+1,this.w),new l(e,n+1,r+1,this.w)]},l.cover=function(t,e,n,r){function i(t,e,i){var o,u,c,h;if(i>=0&&i<=a)for(o=t;o<e;o++)u=Math.floor(o/a),c=(o%a+a)%a,0!==u&&r!==!0||(h=new l(n,c,i,u),s[h.id]=h)}void 0===r&&(r=!0);var a=1<<t,s={};return o(e[0],e[1],e[2],0,a,i),o(e[2],e[3],e[0],0,a,i),Object.keys(s).map(function(t){return s[t]})},l.fromID=function(t){var e=t%32,n=1<<e,r=(t-e)/32,i=r%n,o=(r-i)/n%n,a=Math.floor(r/(n*n));return a%2!==0&&(a=a*-1-1),a/=2,new l(e,i,o,a)},e.exports=l},{"../geo/coordinate":61,"@mapbox/whoots-js":4}],97:[function(t,e,n){"use strict";var r=t("../util/evented"),i=t("../util/util"),o=t("./load_tilejson"),a=t("../util/mapbox").normalizeTileURL,s=t("./tile_bounds"),u=function(t){function e(e,n,r,o){if(t.call(this),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,i.extend(this,i.pick(n,["url","scheme","tileSize"])),this._options=i.extend({type:"vector"},n),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),o(this._options,function(e,n){return e?void t.fire("error",e):(i.extend(t,n),t.setBounds(n.bounds),t.fire("data",{dataType:"source",sourceDataType:"metadata"}),void t.fire("data",{dataType:"source",sourceDataType:"content"}))})},e.prototype.setBounds=function(t){this.bounds=t,t&&(this.tileBounds=new s(t,this.minzoom,this.maxzoom))},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t,this.maxzoom)},e.prototype.onAdd=function(t){this.load(),this.map=t},e.prototype.serialize=function(){return i.extend({},this._options)},e.prototype.loadTile=function(t,e){function n(n,r){if(!t.aborted){if(n)return e(n);this.map._refreshExpiredTiles&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(this)),e(null),t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)}}var r=t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,i={url:a(t.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),uid:t.uid,coord:t.coord,zoom:t.coord.z,tileSize:this.tileSize*r,type:this.type,source:this.id,overscaling:r,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};t.workerID&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=e:this.dispatcher.send("reloadTile",i,n.bind(this),t.workerID):t.workerID=this.dispatcher.send("loadTile",i,n.bind(this))},e.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},e}(r);e.exports=u},{"../util/evented":203,"../util/mapbox":210,"../util/util":215,"./load_tilejson":87,"./tile_bounds":95}],98:[function(t,e,n){"use strict";var r=t("../util/ajax"),i=t("vector-tile"),o=t("pbf"),a=t("./worker_tile"),s=t("../util/util"),u=function(t,e,n){this.actor=t,this.layerIndex=e,n&&(this.loadVectorData=n),this.loading={},this.loaded={}};u.prototype.loadTile=function(t,e){function n(t,n){return delete this.loading[r][i],t?e(t):n?(o.vectorTile=n,o.parse(n,this.layerIndex,this.actor,function(t,r,i){if(t)return e(t);var o={};n.expires&&(o.expires=n.expires),n.cacheControl&&(o.cacheControl=n.cacheControl),e(null,s.extend({rawTileData:n.rawData},r,o),i)}),this.loaded[r]=this.loaded[r]||{},void(this.loaded[r][i]=o)):e(null,null)}var r=t.source,i=t.uid;this.loading[r]||(this.loading[r]={});var o=this.loading[r][i]=new a(t);o.abort=this.loadVectorData(t,n.bind(this))},u.prototype.reloadTile=function(t,e){function n(t,n){if(this.reloadCallback){var r=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,o.layerIndex,o.actor,r)}e(t,n)}var r=this.loaded[t.source],i=t.uid,o=this;if(r&&r[i]){var a=r[i];"parsing"===a.status?a.reloadCallback=e:"done"===a.status&&a.parse(a.vectorTile,this.layerIndex,this.actor,n.bind(a))}},u.prototype.abortTile=function(t){var e=this.loading[t.source],n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort(),delete e[n])},u.prototype.removeTile=function(t){var e=this.loaded[t.source],n=t.uid;e&&e[n]&&delete e[n]},u.prototype.loadVectorData=function(t,e){function n(t,n){if(t)return e(t);var r=new i.VectorTile(new o(n.data));r.rawData=n.data,r.cacheControl=n.cacheControl,r.expires=n.expires,e(t,r)}var a=r.getArrayBuffer(t.url,n.bind(this));return function(){a.abort()}},u.prototype.redoPlacement=function(t,e){var n=this.loaded[t.source],r=this.loading[t.source],i=t.uid;if(n&&n[i]){var o=n[i],a=o.redoPlacement(t.angle,t.pitch,t.showCollisionBoxes);a.result&&e(null,a.result,a.transferables)}else r&&r[i]&&(r[i].angle=t.angle)},e.exports=u},{"../util/ajax":194,"../util/util":215,"./worker_tile":101,pbf:25,"vector-tile":34}],99:[function(t,e,n){"use strict";var r=t("../util/ajax"),i=t("./image_source"),o=function(t){function e(e,n,r,i){t.call(this,e,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this,e=this.options;this.urls=e.urls,r.getVideo(e.urls,function(e,n){if(e)return t.fire("error",{error:e});t.video=n,t.video.loop=!0;var r;t.video.addEventListener("playing",function(){r=t.map.style.animationLoop.set(1/0),t.map._rerender()}),t.video.addEventListener("pause",function(){t.map.style.animationLoop.cancel(r)}),t.map&&t.video.play(),t._finishLoading()})},e.prototype.getVideo=function(){return this.video},e.prototype.onAdd=function(t){this.map||(this.load(),this.map=t,this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){!this.tile||this.video.readyState<2||this._prepareImage(this.map.painter.gl,this.video)},e.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},e}(i);e.exports=o},{"../util/ajax":194,"./image_source":86}],100:[function(t,e,n){"use strict";var r=t("../util/actor"),i=t("../style/style_layer_index"),o=t("./vector_tile_worker_source"),a=t("./geojson_worker_source"),s=t("./rtl_text_plugin"),u=function(t){var e=this;this.self=t,this.actor=new r(t,this),this.layerIndexes={},this.workerSourceTypes={vector:o,geojson:a},this.workerSources={},this.self.registerWorkerSource=function(t,n){if(e.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');e.workerSourceTypes[t]=n},this.self.registerRTLTextPlugin=function(t){if(s.applyArabicShaping||s.processBidirectionalText)throw new Error("RTL text plugin already registered.");s.applyArabicShaping=t.applyArabicShaping,s.processBidirectionalText=t.processBidirectionalText}};u.prototype.setLayers=function(t,e){this.getLayerIndex(t).replace(e)},u.prototype.updateLayers=function(t,e){this.getLayerIndex(t).update(e.layers,e.removedIds,e.symbolOrder)},u.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type).loadTile(e,n)},u.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type).reloadTile(e,n)},u.prototype.abortTile=function(t,e){this.getWorkerSource(t,e.type).abortTile(e)},u.prototype.removeTile=function(t,e){this.getWorkerSource(t,e.type).removeTile(e)},u.prototype.removeSource=function(t,e){var n=this.getWorkerSource(t,e.type);void 0!==n.removeSource&&n.removeSource(e)},u.prototype.redoPlacement=function(t,e,n){this.getWorkerSource(t,e.type).redoPlacement(e,n)},u.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t)}},u.prototype.loadRTLTextPlugin=function(t,e,n){try{s.applyArabicShaping||s.processBidirectionalText||this.self.importScripts(e)}catch(t){n(t)}},u.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e},u.prototype.getWorkerSource=function(t,e){var n=this;if(this.workerSources[t]||(this.workerSources[t]={}),!this.workerSources[t][e]){var r={send:function(e,r,i,o){n.actor.send(e,r,i,o,t)}};this.workerSources[t][e]=new this.workerSourceTypes[e](r,this.getLayerIndex(t))}return this.workerSources[t][e]},e.exports=function(t){return new u(t)}},{"../style/style_layer_index":157,"../util/actor":193,"./geojson_worker_source":84,"./rtl_text_plugin":91,"./vector_tile_worker_source":98}],101:[function(t,e,n){"use strict";function r(t,e){for(var n=0,r=t.layers;n<r.length;n+=1){var i=r[n];i.recalculate(e)}}function i(t,e){return t.filter(function(t){return!t.isEmpty()}).map(function(t){return t.serialize(e)})}var o=t("../data/feature_index"),a=t("../symbol/collision_tile"),s=t("../symbol/collision_box"),u=t("../util/dictionary_coder"),l=t("../util/util"),c=function(t){this.coord=t.coord,this.uid=t.uid,this.zoom=t.zoom,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=t.overscaling,this.angle=t.angle,this.pitch=t.pitch,this.showCollisionBoxes=t.showCollisionBoxes};c.prototype.parse=function(t,e,n,c){var h=this;t.layers||(t={layers:{_geojsonTileLayer:t}}),this.status="parsing",this.data=t,this.collisionBoxArray=new s;var f=new u(Object.keys(t.layers).sort()),p=new o(this.coord,this.overscaling);p.bucketLayerIDs={};var d={},m=0,v={featureIndex:p,iconDependencies:{},glyphDependencies:{}},y=e.familiesBySource[this.source];for(var _ in y){var g=t.layers[_];if(g){1===g.version&&l.warnOnce('Vector tile source "'+h.source+'" layer "'+_+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var x=f.encode(_),b=[],w=0;w<g.length;w++){var M=g.feature(w);M.index=w,M.sourceLayerIndex=x,b.push(M)}for(var T=0,S=y[_];T<S.length;T+=1){var E=S[T],A=E[0];if(!(A.minzoom&&h.zoom<A.minzoom||A.maxzoom&&h.zoom>=A.maxzoom||A.layout&&"none"===A.layout.visibility)){for(var k=0,z=E;k<z.length;k+=1){var C=z[k];C.recalculate(h.zoom)}var P=d[A.id]=A.createBucket({index:m,layers:E,zoom:h.zoom,overscaling:h.overscaling,collisionBoxArray:h.collisionBoxArray});P.populate(b,v),p.bucketLayerIDs[m]=E.map(function(t){return t.id}),m++}}}}var L=function(t){h.status="done",p.paintPropertyStatistics={};for(var e in d)l.extend(p.paintPropertyStatistics,d[e].getPaintPropertyStatistics());var n=[];c(null,{buckets:i(l.values(d),n),featureIndex:p.serialize(n),collisionTile:t.serialize(n),collisionBoxArray:h.collisionBoxArray.serialize()},n)};this.symbolBuckets=[];for(var I=e.symbolOrder.length-1;I>=0;I--){var O=d[e.symbolOrder[I]];O&&h.symbolBuckets.push(O)}if(0===this.symbolBuckets.length)return L(new a(this.angle,this.pitch,this.collisionBoxArray));var R=0,N=Object.keys(v.iconDependencies),D=l.mapObject(v.glyphDependencies,function(t){return Object.keys(t).map(Number)}),j=function(t){if(t)return c(t);if(R++,2===R){for(var e=new a(h.angle,h.pitch,h.collisionBoxArray),n=0,i=h.symbolBuckets;n<i.length;n+=1){var o=i[n];r(o,h.zoom),o.prepare(D,N),o.place(e,h.showCollisionBoxes)}L(e)}};Object.keys(D).length?n.send("getGlyphs",{uid:this.uid,stacks:D},function(t,e){D=e,j(t)}):j(),N.length?n.send("getIcons",{icons:N},function(t,e){N=e,j(t)}):j()},c.prototype.redoPlacement=function(t,e,n){var o=this;if(this.angle=t,this.pitch=e,"done"!==this.status)return{};for(var s=new a(this.angle,this.pitch,this.collisionBoxArray),u=0,l=o.symbolBuckets;u<l.length;u+=1){var c=l[u];r(c,o.zoom),c.place(s,n)}var h=[];return{result:{buckets:i(this.symbolBuckets,h),collisionTile:s.serialize(h)},transferables:h}},e.exports=c},{"../data/feature_index":55,"../symbol/collision_box":163,"../symbol/collision_tile":165,"../util/dictionary_coder":200,"../util/util":215}],102:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)"ref"!==r&&(n[r]=t[r]);return o.forEach(function(t){t in e&&(n[t]=e[t])}),n}function i(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=r(t[i],e[t[i].ref]));return t}var o=t("./util/ref_properties");e.exports=i},{"./util/ref_properties":125}],103:[function(t,e,n){"use strict";function r(t,e,n,r){t=t||{},e=e||{};var i;for(i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)||(n.push({command:c.removeSource,args:[i]}),r[i]=!0));for(i in e)e.hasOwnProperty(i)&&(t.hasOwnProperty(i)?l(t[i],e[i])||(n.push({command:c.removeSource,args:[i]}),n.push({command:c.addSource,args:[i,e[i]]}),r[i]=!0):n.push({command:c.addSource,args:[i,e[i]]}))}function i(t,e,n,r,i,o){t=t||{},e=e||{};var a;for(a in t)t.hasOwnProperty(a)&&(l(t[a],e[a])||n.push({command:o,args:[r,a,e[a],i]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(l(t[a],e[a])||n.push({command:o,args:[r,a,e[a],i]}))}function o(t){return t.id}function a(t,e){return t[e.id]=e,t}function s(t,e,n){t=t||[],e=e||[];var r,s,u,h,f,p,d,m=t.map(o),v=e.map(o),y=t.reduce(a,{}),_=e.reduce(a,{}),g=m.slice(),x=Object.create(null);for(r=0,s=0;r<m.length;r++)u=m[r],_.hasOwnProperty(u)?s++:(n.push({command:c.removeLayer,args:[u]}),g.splice(g.indexOf(u,s),1));for(r=0,s=0;r<v.length;r++)u=v[v.length-1-r],g[g.length-1-r]!==u&&(y.hasOwnProperty(u)?(n.push({command:c.removeLayer,args:[u]}),g.splice(g.lastIndexOf(u,g.length-s),1)):s++,p=g[g.length-r],n.push({command:c.addLayer,args:[_[u],p]}),g.splice(g.length-r,0,u),x[u]=!0);for(r=0;r<v.length;r++)if(u=v[r],h=y[u],f=_[u],!x[u]&&!l(h,f))if(l(h.source,f.source)&&l(h["source-layer"],f["source-layer"])&&l(h.type,f.type)){i(h.layout,f.layout,n,u,null,c.setLayoutProperty),i(h.paint,f.paint,n,u,null,c.setPaintProperty),l(h.filter,f.filter)||n.push({command:c.setFilter,args:[u,f.filter]}),l(h.minzoom,f.minzoom)&&l(h.maxzoom,f.maxzoom)||n.push({command:c.setLayerZoomRange,args:[u,f.minzoom,f.maxzoom]});for(d in h)h.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?i(h[d],f[d],n,u,d.slice(6),c.setPaintProperty):l(h[d],f[d])||n.push({command:c.setLayerProperty,args:[u,d,f[d]]}));for(d in f)f.hasOwnProperty(d)&&!h.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?i(h[d],f[d],n,u,d.slice(6),c.setPaintProperty):l(h[d],f[d])||n.push({command:c.setLayerProperty,args:[u,d,f[d]]}))}else n.push({command:c.removeLayer,args:[u]}),p=g[g.lastIndexOf(u)+1],n.push({command:c.addLayer,args:[f,p]})}function u(t,e){if(!t)return[{command:c.setStyle,args:[e]}];var n=[];try{if(!l(t.version,e.version))return[{command:c.setStyle,args:[e]}];l(t.center,e.center)||n.push({command:c.setCenter,args:[e.center]}),l(t.zoom,e.zoom)||n.push({command:c.setZoom,args:[e.zoom]}),l(t.bearing,e.bearing)||n.push({command:c.setBearing,args:[e.bearing]}),l(t.pitch,e.pitch)||n.push({command:c.setPitch,args:[e.pitch]}),l(t.sprite,e.sprite)||n.push({command:c.setSprite,args:[e.sprite]}),l(t.glyphs,e.glyphs)||n.push({command:c.setGlyphs,args:[e.glyphs]}),l(t.transition,e.transition)||n.push({command:c.setTransition,args:[e.transition]}),l(t.light,e.light)||n.push({command:c.setLight,args:[e.light]});var i={},o=[];r(t.sources,e.sources,o,i);var a=[];t.layers&&t.layers.forEach(function(t){i[t.source]?n.push({command:c.removeLayer,args:[t.id]}):a.push(t)}),n=n.concat(o),s(a,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:c.setStyle,args:[e]}]}return n}var l=t("lodash.isequal"),c={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};e.exports=u,e.exports.operations=c},{"lodash.isequal":116}],104:[function(t,e,n){"use strict";function r(t,e){this.message=(t?t+": ":"")+i.apply(i,Array.prototype.slice.call(arguments,2)),null!==e&&void 0!==e&&e.__line__&&(this.line=e.__line__)}var i=t("util").format;e.exports=r},{util:33}],105:[function(t,e,n){"use strict";function r(t){return new Function("f","var p = (f && f.properties || {}); return "+i(t))}function i(t){if(!t)return"true";var e=t[0];if(t.length<=1)return"any"===e?"false":"true";var n="=="===e?a(t[1],t[2],"===",!1):"!="===e?a(t[1],t[2],"!==",!1):"<"===e||">"===e||"<="===e||">="===e?a(t[1],t[2],e,!0):"any"===e?s(t.slice(1),"||"):"all"===e?s(t.slice(1),"&&"):"none"===e?c(s(t.slice(1),"||")):"in"===e?u(t[1],t.slice(2)):"!in"===e?c(u(t[1],t.slice(2))):"has"===e?l(t[1]):"!has"===e?c(l(t[1])):"true";return"("+n+")"}function o(t){return"$type"===t?"f.type":"$id"===t?"f.id":"p["+JSON.stringify(t)+"]"}function a(t,e,n,r){var i=o(t),a="$type"===t?f.indexOf(e):JSON.stringify(e);return(r?"typeof "+i+"=== typeof "+a+"&&":"")+i+n+a}function s(t,e){return t.map(i).join(e)}function u(t,e){"$type"===t&&(e=e.map(function(t){return f.indexOf(t)}));var n=JSON.stringify(e.sort(h)),r=o(t);return e.length<=200?n+".indexOf("+r+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+r+", "+n+",0,"+(e.length-1)+")"}function l(t){return"$id"===t?'"id" in f':JSON.stringify(t)+" in p"}function c(t){return"!("+t+")"}function h(t,e){return t<e?-1:t>e?1:0}e.exports=r;var f=["Unknown","Point","LineString","Polygon"]},{}],106:[function(t,e,n){"use strict";function r(t){return t>y?Math.pow(t,1/3):t/v+d}function i(t){return t>m?t*t*t:v*(t-d)}function o(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function a(t){return t/=255,t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function s(t){var e=a(t[0]),n=a(t[1]),i=a(t[2]),o=r((.4124564*e+.3575761*n+.1804375*i)/h),s=r((.2126729*e+.7151522*n+.072175*i)/f),u=r((.0193339*e+.119192*n+.9503041*i)/p);return[116*s-16,500*(o-s),200*(s-u),t[3]]}function u(t){var e=(t[0]+16)/116,n=isNaN(t[1])?e:e+t[1]/500,r=isNaN(t[2])?e:e-t[2]/200;return e=f*i(e),n=h*i(n),r=p*i(r),[o(3.2404542*n-1.5371385*e-.4985314*r),o(-.969266*n+1.8760108*e+.041556*r),o(.0556434*n-.2040259*e+1.0572252*r),t[3]]}function l(t){var e=s(t),n=e[0],r=e[1],i=e[2],o=Math.atan2(i,r)*g;return[o<0?o+360:o,Math.sqrt(r*r+i*i),n,t[3]]}function c(t){var e=t[0]*_,n=t[1],r=t[2];return u([r,Math.cos(e)*n,Math.sin(e)*n,t[3]])}var h=.95047,f=1,p=1.08883,d=4/29,m=6/29,v=3*m*m,y=m*m*m,_=Math.PI/180,g=180/Math.PI;e.exports={lab:{forward:s,reverse:u},hcl:{forward:l,reverse:c}}},{}],107:[function(t,e,n){"use strict";function r(t){return t}function i(t,e){var n,c="color"===e.type;if(h(t)){var f=t.stops&&"object"==typeof t.stops[0][0],v=f||void 0!==t.property,y=f||!v,_=t.type||("interpolated"===e.function?"exponential":"interval");c&&(t=m({},t),t.stops&&(t.stops=t.stops.map(function(t){return[t[0],d(t[1])]})),t.default?t.default=d(t.default):t.default=d(e.default));var g,x,b;if("exponential"===_)g=u;else if("interval"===_)g=s;else if("categorical"===_){g=a,x=Object.create(null);for(var w=0,M=t.stops;w<M.length;w+=1){var T=M[w];x[T[0]]=T[1]}b=typeof t.stops[0][0]}else{if("identity"!==_)throw new Error('Unknown function type "'+_+'"');g=l}var S;if(t.colorSpace&&"rgb"!==t.colorSpace){if(!p[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);var E=p[t.colorSpace];t=JSON.parse(JSON.stringify(t));for(var A=0;A<t.stops.length;A++)t.stops[A]=[t.stops[A][0],E.forward(t.stops[A][1])];S=E.reverse}else S=r;if(f){for(var k={},z=[],C=0;C<t.stops.length;C++){var P=t.stops[C],L=P[0].zoom;void 0===k[L]&&(k[L]={zoom:L,type:t.type,property:t.property,default:t.default,stops:[]},z.push(L)),k[L].stops.push([P[0].value,P[1]])}for(var I=[],O=0,R=z;O<R.length;O+=1){var N=R[O];I.push([k[N].zoom,i(k[N],e)])}n=function(n,r){return S(u({stops:I,base:t.base},e,n)(n,r))},n.isFeatureConstant=!1,n.isZoomConstant=!1}else y?(n=function(n){return S(g(t,e,n,x,b))},n.isFeatureConstant=!0,n.isZoomConstant=!1):(n=function(n,r){var i=r[t.property];return void 0===i?o(t.default,e.default):S(g(t,e,i,x,b))},n.isFeatureConstant=!1,n.isZoomConstant=!0)}else c&&t&&(t=d(t)),n=function(){return t},n.isFeatureConstant=!0,n.isZoomConstant=!0;return n}function o(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function a(t,e,n,r,i){var a=typeof n===i?r[n]:void 0;return o(a,t.default,e.default)}function s(t,e,n){if("number"!==v(n))return o(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=c(t.stops,n);return t.stops[i][1]}function u(t,e,n){var i=void 0!==t.base?t.base:1;if("number"!==v(n))return o(t.default,e.default);var a=t.stops.length;if(1===a)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[a-1][0])return t.stops[a-1][1];var s=c(t.stops,n),u=f(n,i,t.stops[s][0],t.stops[s+1][0]),l=t.stops[s][1],h=t.stops[s+1][1],p=y[e.type]||r;return"function"==typeof l?function(){var t=l.apply(void 0,arguments),e=h.apply(void 0,arguments);if(void 0!==t&&void 0!==e)return p(t,e,u)}:p(l,h,u)}function l(t,e,n){return"color"===e.type?n=d(n):v(n)!==e.type&&(n=void 0),o(n,t.default,e.default)}function c(t,e){for(var n,r,i=t.length,o=0,a=i-1,s=0;o<=a;){if(s=Math.floor((o+a)/2),n=t[s][0],r=t[s+1][0],e===n||e>n&&e<r)return s;n<e?o=s+1:n>e&&(a=s-1)}return Math.max(s-1,0)}function h(t){return"object"==typeof t&&(t.stops||"identity"===t.type)}function f(t,e,n,r){var i=r-n,o=t-n;return 1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var p=t("./color_spaces"),d=t("../util/parse_color"),m=t("../util/extend"),v=t("../util/get_type"),y=t("../util/interpolate");e.exports=i,e.exports.isFunctionDefinition=h,e.exports.interpolationFactor=f,e.exports.findStopLessThanOrEqualTo=c},{"../util/extend":121,"../util/get_type":122,"../util/interpolate":123,"../util/parse_color":124,"./color_spaces":106}],108:[function(t,e,n){"use strict";function r(t){return a(o.map(function(e){return t[e]}))}function i(t){for(var e={},n=0;n<t.length;n++){var i=r(t[n]),o=e[i];o||(o=e[i]=[]),o.push(t[n])}var a=[];for(var s in e)a.push(e[s]);return a}var o=t("./util/ref_properties"),a=t("fast-stable-stringify");e.exports=i},{"./util/ref_properties":125,"fast-stable-stringify":110}],109:[function(t,e,n){function r(t){return t=Math.round(t),t<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function o(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function a(t){return i("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function s(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function u(t){var e=t.replace(/ /g,"").toLowerCase();if(e in l)return l[e].slice();if("#"===e[0]){if(4===e.length){var n=parseInt(e.substr(1),16);return n>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null}if(7===e.length){var n=parseInt(e.substr(1),16);return n>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null}return null}var i=e.indexOf("("),u=e.indexOf(")");if(i!==-1&&u+1===e.length){var c=e.substr(0,i),h=e.substr(i+1,u-(i+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return null;f=a(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),f];case"hsla":if(4!==h.length)return null;f=a(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,d=a(h[1]),m=a(h[2]),v=m<=.5?m*(d+1):m+d-m*d,y=2*m-v;return[r(255*s(y,v,p+1/3)),r(255*s(y,v,p)),r(255*s(y,v,p-1/3)),f];default:return null}}return null}var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{n.parseCSSColor=u}catch(t){}},{}],110:[function(t,e,n){function r(t){var e,n,i,l,c,h;switch(typeof t){case"object":if(null===t)return null;if(o(t)){for(i="[",n=t.length-1,e=0;e<n;e++)i+=r(t[e])+",";return n>-1&&(i+=r(t[e])),i+"]"}for(l=a(t).sort(),n=l.length,i="{",c=l[e=0],h=n>0&&void 0!==t[c];e<n;)h?(i+='"'+c.replace(s,u)+'":'+r(t[c]),c=l[++e],h=e<n&&void 0!==t[c],h&&(i+=",")):(c=l[++e],h=e<n&&void 0!==t[c]);return i+"}";case"undefined":return null;case"string":return'"'+t.replace(s,u)+'"';default:return t}}var i={}.toString,o=Array.isArray||function(t){return"[object Array]"===i.call(t)},a=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},s=/[\u0000-\u001f"\\]/g,u=function(t){var e=t.charCodeAt(0);switch(e){case 34:return'\\"';case 92:return"\\\\";case 12:return"\\f";case 10:return"\\n";case 13:return"\\r";case 9:return"\\t";case 8:return"\\b";default:return e>15?"\\u00"+e.toString(16):"\\u000"+e.toString(16)}};e.exports=function(t){if(void 0!==t)return""+r(t)},e.exports.stringSearch=s,e.exports.stringReplace=u},{}],111:[function(t,e,n){function r(t){return!!t&&"object"==typeof t}function i(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function o(t,e,n,i,s,u){return t===e||(null==t||null==e||!c(t)&&!r(e)?t!==t&&e!==e:a(t,e,o,n,i,s,u))}function a(t,e,n,r,i,o,a){var c=h(t),p=h(e),v=m,y=m;c||(v=S.call(t),v==d?v=x:v!=x&&(c=f(t))),p||(y=S.call(e),y==d?y=x:y!=x&&(p=f(e)));var _=v==x,g=y==x,b=v==y;if(b&&!c&&!_)return u(t,e,v);if(!i){var w=_&&T.call(t,"__wrapped__"),M=g&&T.call(e,"__wrapped__");if(w||M)return n(w?t.value():t,M?e.value():e,r,i,o,a)}if(!b)return!1;o||(o=[]),a||(a=[]);for(var E=o.length;E--;)if(o[E]==t)return a[E]==e;o.push(t),a.push(e);var A=(c?s:l)(t,e,n,r,i,o,a);return o.pop(),a.pop(),A}function s(t,e,n,r,o,a,s){var u=-1,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;for(;++u<l;){var h=t[u],f=e[u],p=r?r(o?f:h,o?h:f,u):void 0;if(void 0!==p){if(p)continue;return!1}if(o){if(!i(e,function(t){return h===t||n(h,t,r,o,a,s)}))return!1}else if(h!==f&&!n(h,f,r,o,a,s))return!1}return!0}function u(t,e,n){switch(n){case v:case y:return+t==+e;case _:return t.name==e.name&&t.message==e.message;case g:return t!=+t?e!=+e:t==+e;case b:case w:return t==e+""}return!1}function l(t,e,n,r,i,o,a){var s=p(t),u=s.length,l=p(e),c=l.length;if(u!=c&&!i)return!1;for(var h=u;h--;){var f=s[h];if(!(i?f in e:T.call(e,f)))return!1}for(var d=i;++h<u;){f=s[h];var m=t[f],v=e[f],y=r?r(i?v:m,i?m:v,f):void 0;if(!(void 0===y?n(m,v,r,i,o,a):y))return!1;d||(d="constructor"==f)}if(!d){var _=t.constructor,g=e.constructor;if(_!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof g&&g instanceof g))return!1}return!0}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var h=t("lodash.isarray"),f=t("lodash.istypedarray"),p=t("lodash.keys"),d="[object Arguments]",m="[object Array]",v="[object Boolean]",y="[object Date]",_="[object Error]",g="[object Number]",x="[object Object]",b="[object RegExp]",w="[object String]",M=Object.prototype,T=M.hasOwnProperty,S=M.toString;e.exports=o},{"lodash.isarray":115,"lodash.istypedarray":117,"lodash.keys":118}],112:[function(t,e,n){function r(t,e,n){if("function"!=typeof t)return i;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function i(t){return t}e.exports=r},{}],113:[function(t,e,n){function r(t){return!!t&&"object"==typeof t}function i(t,e){var n=null==t?void 0:t[e];return s(n)?n:void 0}function o(t){return a(t)&&p.call(t)==u}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null!=t&&(o(t)?d.test(h.call(t)):r(t)&&l.test(t))}var u="[object Function]",l=/^\[object .+?Constructor\]$/,c=Object.prototype,h=Function.prototype.toString,f=c.hasOwnProperty,p=c.toString,d=RegExp("^"+h.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},{}],114:[function(t,e,n){function r(t){
return o(t)&&m.call(t,"callee")&&(!y.call(t,"callee")||v.call(t)==h)}function i(t){return null!=t&&s(t.length)&&!a(t)}function o(t){return l(t)&&i(t)}function a(t){var e=u(t)?v.call(t):"";return e==f||e==p}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){return!!t&&"object"==typeof t}var c=9007199254740991,h="[object Arguments]",f="[object Function]",p="[object GeneratorFunction]",d=Object.prototype,m=d.hasOwnProperty,v=d.toString,y=d.propertyIsEnumerable;e.exports=r},{}],115:[function(t,e,n){function r(t){return!!t&&"object"==typeof t}function i(t,e){var n=null==t?void 0:t[e];return u(n)?n:void 0}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=_}function a(t){return s(t)&&m.call(t)==c}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return null!=t&&(a(t)?v.test(p.call(t)):r(t)&&h.test(t))}var l="[object Array]",c="[object Function]",h=/^\[object .+?Constructor\]$/,f=Object.prototype,p=Function.prototype.toString,d=f.hasOwnProperty,m=f.toString,v=RegExp("^"+p.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=i(Array,"isArray"),_=9007199254740991,g=y||function(t){return r(t)&&o(t.length)&&m.call(t)==l};e.exports=g},{}],116:[function(t,e,n){function r(t,e,n,r){n="function"==typeof n?o(n,r,3):void 0;var a=n?n(t,e):void 0;return void 0===a?i(t,e,n):!!a}var i=t("lodash._baseisequal"),o=t("lodash._bindcallback");e.exports=r},{"lodash._baseisequal":111,"lodash._bindcallback":112}],117:[function(t,e,n){function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function i(t){return!!t&&"object"==typeof t}function o(t){return i(t)&&r(t.length)&&!!P[I.call(t)]}var a=9007199254740991,s="[object Arguments]",u="[object Array]",l="[object Boolean]",c="[object Date]",h="[object Error]",f="[object Function]",p="[object Map]",d="[object Number]",m="[object Object]",v="[object RegExp]",y="[object Set]",_="[object String]",g="[object WeakMap]",x="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",M="[object Float64Array]",T="[object Int8Array]",S="[object Int16Array]",E="[object Int32Array]",A="[object Uint8Array]",k="[object Uint8ClampedArray]",z="[object Uint16Array]",C="[object Uint32Array]",P={};P[w]=P[M]=P[T]=P[S]=P[E]=P[A]=P[k]=P[z]=P[C]=!0,P[s]=P[u]=P[x]=P[l]=P[b]=P[c]=P[h]=P[f]=P[p]=P[d]=P[m]=P[v]=P[y]=P[_]=P[g]=!1;var L=Object.prototype,I=L.toString;e.exports=o},{}],118:[function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}function i(t){return null!=t&&a(_(t))}function o(t,e){return t="number"==typeof t||p.test(t)?+t:-1,e=null==e?y:e,t>-1&&t%1==0&&t<e}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=y}function s(t){for(var e=l(t),n=e.length,r=n&&t.length,i=!!r&&a(r)&&(f(t)||h(t)),s=-1,u=[];++s<n;){var c=e[s];(i&&o(c,r)||m.call(t,c))&&u.push(c)}return u}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(f(t)||h(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,s=Array(e),l=e>0;++r<e;)s[r]=r+"";for(var c in t)l&&o(c,e)||"constructor"==c&&(i||!m.call(t,c))||s.push(c);return s}var c=t("lodash._getnative"),h=t("lodash.isarguments"),f=t("lodash.isarray"),p=/^\d+$/,d=Object.prototype,m=d.hasOwnProperty,v=c(Object,"keys"),y=9007199254740991,_=r("length"),g=v?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&i(t)?s(t):u(t)?v(t):[]}:s;e.exports=g},{"lodash._getnative":113,"lodash.isarguments":114,"lodash.isarray":115}],119:[function(t,e,n){"use strict";e.exports=t("./v8.json")},{"./v8.json":120}],120:[function(t,e,n){e.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image","source_canvas"],source_tile:{type:{required:!0,type:"enum",values:{vector:{},raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean",default:"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},"fill-extrusion":{},raster:{},background:{}}},metadata:{type:"*"},ref:{type:"string"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_fill-extrusion","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_fill-extrusion","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,maximum:65535,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,maximum:65535,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],121:[function(t,e,n){"use strict";e.exports=function(t){for(var e=arguments,n=1;n<arguments.length;n++){var r=e[n];for(var i in r)t[i]=r[i]}return t}},{}],122:[function(t,e,n){"use strict";e.exports=function(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}},{}],123:[function(t,e,n){"use strict";function r(t,e,n){return t*(1-n)+e*n}e.exports=r,r.number=r,r.vec2=function(t,e,n){return[r(t[0],e[0],n),r(t[1],e[1],n)]},r.color=function(t,e,n){return[r(t[0],e[0],n),r(t[1],e[1],n),r(t[2],e[2],n),r(t[3],e[3],n)]},r.array=function(t,e,n){return t.map(function(t,i){return r(t,e[i],n)})}},{}],124:[function(t,e,n){"use strict";var r=t("csscolorparser").parseCSSColor;e.exports=function(t){if("string"==typeof t){var e=r(t);if(!e)return;return[e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]]}return Array.isArray(t)?t:void 0}},{csscolorparser:109}],125:[function(t,e,n){"use strict";e.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],126:[function(t,e,n){"use strict";e.exports=function(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}},{}],127:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("../util/extend");e.exports=function(e){var n=t("./validate_function"),a=t("./validate_object"),s={"*":function(){return[]},array:t("./validate_array"),boolean:t("./validate_boolean"),number:t("./validate_number"),color:t("./validate_color"),constants:t("./validate_constants"),enum:t("./validate_enum"),filter:t("./validate_filter"),function:t("./validate_function"),layer:t("./validate_layer"),object:t("./validate_object"),source:t("./validate_source"),light:t("./validate_light"),string:t("./validate_string")},u=e.value,l=e.valueSpec,c=e.key,h=e.styleSpec,f=e.style;if("string"===i(u)&&"@"===u[0]){if(h.$version>7)return[new r(c,u,"constants have been deprecated as of v8")];if(!(u in f.constants))return[new r(c,u,'constant "%s" not found',u)];e=o({},e,{value:f.constants[u]})}return l.function&&"object"===i(u)?n(e):l.type&&s[l.type]?s[l.type](e):a(o({},e,{valueSpec:l.type?h[l.type]:l}))}},{"../error/validation_error":104,"../util/extend":121,"../util/get_type":122,"./validate_array":128,"./validate_boolean":129,"./validate_color":130,"./validate_constants":131,"./validate_enum":132,"./validate_filter":133,"./validate_function":134,"./validate_layer":136,"./validate_light":138,"./validate_number":139,"./validate_object":140,"./validate_source":143,"./validate_string":144}],128:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("./validate"),o=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.valueSpec,a=t.style,s=t.styleSpec,u=t.key,l=t.arrayElementValidator||i;if("array"!==r(e))return[new o(u,e,"array expected, %s found",r(e))];if(n.length&&e.length!==n.length)return[new o(u,e,"array length %d expected, length %d found",n.length,e.length)];if(n["min-length"]&&e.length<n["min-length"])return[new o(u,e,"array length at least %d expected, length %d found",n["min-length"],e.length)];var c={type:n.value};s.$version<7&&(c.function=n.function),"object"===r(n.value)&&(c=n.value);for(var h=[],f=0;f<e.length;f++)h=h.concat(l({array:e,arrayIndex:f,value:e[f],valueSpec:c,style:a,styleSpec:s,key:u+"["+f+"]"}));return h}},{"../error/validation_error":104,"../util/get_type":122,"./validate":127}],129:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,o=r(e);return"boolean"!==o?[new i(n,e,"boolean expected, %s found",o)]:[]}},{"../error/validation_error":104,"../util/get_type":122}],130:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("csscolorparser").parseCSSColor;e.exports=function(t){var e=t.key,n=t.value,a=i(n);return"string"!==a?[new r(e,n,"color expected, %s found",a)]:null===o(n)?[new r(e,n,'color expected, "%s" found',n)]:[]}},{"../error/validation_error":104,"../util/get_type":122,csscolorparser:109}],131:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type");e.exports=function(t){var e=t.key,n=t.value,o=t.styleSpec;if(o.$version>7)return n?[new r(e,n,"constants have been deprecated as of v8")]:[];var a=i(n);if("object"!==a)return[new r(e,n,"object expected, %s found",a)];var s=[];for(var u in n)"@"!==u[0]&&s.push(new r(e+"."+u,n[u],'constants must start with "@"'));return s}},{"../error/validation_error":104,"../util/get_type":122}],132:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/unbundle_jsonlint");e.exports=function(t){var e=t.key,n=t.value,o=t.valueSpec,a=[];return Array.isArray(o.values)?o.values.indexOf(i(n))===-1&&a.push(new r(e,n,"expected one of [%s], %s found",o.values.join(", "),n)):Object.keys(o.values).indexOf(i(n))===-1&&a.push(new r(e,n,"expected one of [%s], %s found",Object.keys(o.values).join(", "),n)),a}},{"../error/validation_error":104,"../util/unbundle_jsonlint":126}],133:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("./validate_enum"),o=t("../util/get_type"),a=t("../util/unbundle_jsonlint");e.exports=function t(e){var n,s=e.value,u=e.key,l=e.styleSpec,c=[];if("array"!==o(s))return[new r(u,s,"array expected, %s found",o(s))];if(s.length<1)return[new r(u,s,"filter array must have at least 1 element")];switch(c=c.concat(i({key:u+"[0]",value:s[0],valueSpec:l.filter_operator,style:e.style,styleSpec:e.styleSpec})),a(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&"$type"===a(s[1])&&c.push(new r(u,s,'"$type" cannot be use with operator "%s"',s[0]));case"==":case"!=":3!==s.length&&c.push(new r(u,s,'filter array for operator "%s" must have 3 elements',s[0]));case"in":case"!in":s.length>=2&&(n=o(s[1]),"string"!==n&&c.push(new r(u+"[1]",s[1],"string expected, %s found",n)));for(var h=2;h<s.length;h++)n=o(s[h]),"$type"===a(s[1])?c=c.concat(i({key:u+"["+h+"]",value:s[h],valueSpec:l.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&c.push(new r(u+"["+h+"]",s[h],"string, number, or boolean expected, %s found",n));break;case"any":case"all":case"none":for(var f=1;f<s.length;f++)c=c.concat(t({key:u+"["+f+"]",value:s[f],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=o(s[1]),2!==s.length?c.push(new r(u,s,'filter array for "%s" operator must have 2 elements',s[0])):"string"!==n&&c.push(new r(u+"[1]",s[1],"string expected, %s found",n))}return c}},{"../error/validation_error":104,"../util/get_type":122,"../util/unbundle_jsonlint":126,"./validate_enum":132}],134:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("./validate"),a=t("./validate_object"),s=t("./validate_array"),u=t("./validate_number"),l=t("../util/unbundle_jsonlint");e.exports=function(t){function e(t){if("identity"===v)return[new r(t.key,t.value,'identity function may not have a "stops" property')];var e=[],o=t.value;return e=e.concat(s({key:t.key,value:o,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:n})),"array"===i(o)&&0===o.length&&e.push(new r(t.key,o,"array must have at least one stop")),e}function n(t){var e=[],n=t.value,s=t.key;if("array"!==i(n))return[new r(s,n,"array expected, %s found",i(n))];if(2!==n.length)return[new r(s,n,"array length %d expected, length %d found",2,n.length)];if(x){if("object"!==i(n[0]))return[new r(s,n,"object expected, %s found",i(n[0]))];if(void 0===n[0].zoom)return[new r(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new r(s,n,"object stop key must have value")];if(d&&d>l(n[0].zoom))return[new r(s,n[0].zoom,"stop zoom values must appear in ascending order")];l(n[0].zoom)!==d&&(d=l(n[0].zoom),p=void 0,y={}),e=e.concat(a({key:s+"[0]",value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:u,value:c}}))}else e=e.concat(c({key:s+"[0]",value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec}));return e.concat(o({key:s+"[1]",value:n[1],valueSpec:m,style:t.style,styleSpec:t.styleSpec}))}function c(t){var e=i(t.value),n=l(t.value);if(f){if(e!==f)return[new r(t.key,t.value,"%s stop domain type must match previous stop domain type %s",e,f)]}else f=e;if("number"!==e&&"string"!==e&&"boolean"!==e)return[new r(t.key,t.value,"stop domain value must be a number, string, or boolean")];if("number"!==e&&"categorical"!==v){var o="number expected, %s found";return m["property-function"]&&void 0===v&&(o+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new r(t.key,t.value,o,e)]}return"categorical"!==v||"number"!==e||isFinite(n)&&Math.floor(n)===n?"number"===e&&void 0!==p&&n<p?[new r(t.key,t.value,"stop domain values must appear in ascending order")]:(p=n,"categorical"===v&&n in y?[new r(t.key,t.value,"stop domain values must be unique")]:(y[n]=!0,[])):[new r(t.key,t.value,"integer expected, found %s",n)]}function h(t){return o({key:t.key,value:t.value,valueSpec:m,style:t.style,styleSpec:t.styleSpec})}var f,p,d,m=t.valueSpec,v=l(t.value.type),y={},_="categorical"!==v&&void 0===t.value.property,g=!_,x="array"===i(t.value.stops)&&"array"===i(t.value.stops[0])&&"object"===i(t.value.stops[0][0]),b=a({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:e,default:h}});return"identity"===v&&_&&b.push(new r(t.key,t.value,'missing required property "property"')),"identity"===v||t.value.stops||b.push(new r(t.key,t.value,'missing required property "stops"')),
"exponential"===v&&"piecewise-constant"===t.valueSpec.function&&b.push(new r(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(g&&!t.valueSpec["property-function"]?b.push(new r(t.key,t.value,"property functions not supported")):_&&!t.valueSpec["zoom-function"]&&b.push(new r(t.key,t.value,"zoom functions not supported"))),"categorical"!==v&&!x||void 0!==t.value.property||b.push(new r(t.key,t.value,'"property" property is required')),b}},{"../error/validation_error":104,"../util/get_type":122,"../util/unbundle_jsonlint":126,"./validate":127,"./validate_array":128,"./validate_number":139,"./validate_object":140}],135:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("./validate_string");e.exports=function(t){var e=t.value,n=t.key,o=i(t);return o.length?o:(e.indexOf("{fontstack}")===-1&&o.push(new r(n,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&o.push(new r(n,e,'"glyphs" url must include a "{range}" token')),o)}},{"../error/validation_error":104,"./validate_string":144}],136:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/unbundle_jsonlint"),o=t("./validate_object"),a=t("./validate_filter"),s=t("./validate_paint_property"),u=t("./validate_layout_property"),l=t("../util/extend");e.exports=function(t){var e=[],n=t.value,c=t.key,h=t.style,f=t.styleSpec;n.type||n.ref||e.push(new r(c,n,'either "type" or "ref" is required'));var p=i(n.type),d=i(n.ref);if(n.id)for(var m=i(n.id),v=0;v<t.arrayIndex;v++){var y=h.layers[v];i(y.id)===m&&e.push(new r(c,n.id,'duplicate layer id "%s", previously used at line %d',n.id,y.id.__line__))}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new r(c,n[t],'"%s" is prohibited for ref layers',t))});var _;h.layers.forEach(function(t){i(t.id)===d&&(_=t)}),_?_.ref?e.push(new r(c,n.ref,"ref cannot reference another ref layer")):p=i(_.type):e.push(new r(c,n.ref,'ref layer "%s" not found',d))}else if("background"!==p)if(n.source){var g=h.sources&&h.sources[n.source],x=g&&i(g.type);g?"vector"===x&&"raster"===p?e.push(new r(c,n.source,'layer "%s" requires a raster source',n.id)):"raster"===x&&"raster"!==p?e.push(new r(c,n.source,'layer "%s" requires a vector source',n.id)):"vector"!==x||n["source-layer"]||e.push(new r(c,n,'layer "%s" must specify a "source-layer"',n.id)):e.push(new r(c,n.source,'source "%s" not found',n.source))}else e.push(new r(c,n,'missing required property "source"'));return e=e.concat(o({key:c,value:n,valueSpec:f.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},filter:a,layout:function(t){return o({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return u(l({layerType:p},t))}}})},paint:function(t){return o({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return s(l({layerType:p},t))}}})}}}))}},{"../error/validation_error":104,"../util/extend":121,"../util/unbundle_jsonlint":126,"./validate_filter":133,"./validate_layout_property":137,"./validate_object":140,"./validate_paint_property":141}],137:[function(t,e,n){"use strict";var r=t("./validate_property");e.exports=function(t){return r(t,"layout")}},{"./validate_property":142}],138:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.value,n=t.styleSpec,a=n.light,s=t.style,u=[],l=i(e);if(void 0===e)return u;if("object"!==l)return u=u.concat([new r("light",e,"object expected, %s found",l)]);for(var c in e){var h=c.match(/^(.*)-transition$/);u=h&&a[h[1]]&&a[h[1]].transition?u.concat(o({key:c,value:e[c],valueSpec:n.transition,style:s,styleSpec:n})):a[c]?u.concat(o({key:c,value:e[c],valueSpec:a[c],style:s,styleSpec:n})):u.concat([new r(c,e[c],'unknown property "%s"',c)])}return u}},{"../error/validation_error":104,"../util/get_type":122,"./validate":127}],139:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.value,o=t.valueSpec,a=r(n);return"number"!==a?[new i(e,n,"number expected, %s found",a)]:"minimum"in o&&n<o.minimum?[new i(e,n,"%s is less than the minimum value %s",n,o.minimum)]:"maximum"in o&&n>o.maximum?[new i(e,n,"%s is greater than the maximum value %s",n,o.maximum)]:[]}},{"../error/validation_error":104,"../util/get_type":122}],140:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.key,n=t.value,a=t.valueSpec||{},s=t.objectElementValidators||{},u=t.style,l=t.styleSpec,c=[],h=i(n);if("object"!==h)return[new r(e,n,"object expected, %s found",h)];for(var f in n){var p=f.split(".")[0],d=a[p]||a["*"],m=void 0;if(s[p])m=s[p];else if(a[p])m=o;else if(s["*"])m=s["*"];else{if(!a["*"]){c.push(new r(e,n[f],'unknown property "%s"',f));continue}m=o}c=c.concat(m({key:(e?e+".":e)+f,value:n[f],valueSpec:d,style:u,styleSpec:l,object:n,objectKey:f}))}for(var v in a)a[v].required&&void 0===a[v].default&&void 0===n[v]&&c.push(new r(e,n,'missing required property "%s"',v));return c}},{"../error/validation_error":104,"../util/get_type":122,"./validate":127}],141:[function(t,e,n){"use strict";var r=t("./validate_property");e.exports=function(t){return r(t,"paint")}},{"./validate_property":142}],142:[function(t,e,n){"use strict";var r=t("./validate"),i=t("../error/validation_error"),o=t("../util/get_type");e.exports=function(t,e){var n=t.key,a=t.style,s=t.styleSpec,u=t.value,l=t.objectKey,c=s[e+"_"+t.layerType];if(!c)return[];var h=l.match(/^(.*)-transition$/);if("paint"===e&&h&&c[h[1]]&&c[h[1]].transition)return r({key:n,value:u,valueSpec:s.transition,style:a,styleSpec:s});var f=t.valueSpec||c[l];if(!f)return[new i(n,u,'unknown property "%s"',l)];var p;if("string"===o(u)&&f["property-function"]&&!f.tokens&&(p=/^{([^}]+)}$/.exec(u)))return[new i(n,u,'"%s" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": %s` }`.',l,JSON.stringify(p[1]))];var d=[];return"symbol"===t.layerType&&"text-field"===l&&a&&!a.glyphs&&d.push(new i(n,u,'use of "text-field" requires a style "glyphs" property')),d.concat(r({key:t.key,value:u,valueSpec:f,style:a,styleSpec:s}))}},{"../error/validation_error":104,"../util/get_type":122,"./validate":127}],143:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/unbundle_jsonlint"),o=t("./validate_object"),a=t("./validate_enum");e.exports=function(t){var e=t.value,n=t.key,s=t.styleSpec,u=t.style;if(!e.type)return[new r(n,e,'"type" is required')];var l=i(e.type),c=[];switch(l){case"vector":case"raster":if(c=c.concat(o({key:n,value:e,valueSpec:s.source_tile,style:t.style,styleSpec:s})),"url"in e)for(var h in e)["type","url","tileSize"].indexOf(h)<0&&c.push(new r(n+"."+h,e[h],'a source with a "url" property may not include a "%s" property',h));return c;case"geojson":return o({key:n,value:e,valueSpec:s.source_geojson,style:u,styleSpec:s});case"video":return o({key:n,value:e,valueSpec:s.source_video,style:u,styleSpec:s});case"image":return o({key:n,value:e,valueSpec:s.source_image,style:u,styleSpec:s});case"canvas":return o({key:n,value:e,valueSpec:s.source_canvas,style:u,styleSpec:s});default:return a({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","geojson","video","image","canvas"]},style:u,styleSpec:s})}}},{"../error/validation_error":104,"../util/unbundle_jsonlint":126,"./validate_enum":132,"./validate_object":140}],144:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,o=r(e);return"string"!==o?[new i(n,e,"string expected, %s found",o)]:[]}},{"../error/validation_error":104,"../util/get_type":122}],145:[function(t,e,n){"use strict";function r(t,e){e=e||u;var n=[];return n=n.concat(s({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:l,"*":function(){return[]}}})),e.$version>7&&t.constants&&(n=n.concat(a({key:"constants",value:t.constants,style:t,styleSpec:e}))),i(n)}function i(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function o(t){return function(){return i(t.apply(this,arguments))}}var a=t("./validate/validate_constants"),s=t("./validate/validate"),u=t("./reference/latest"),l=t("./validate/validate_glyphs_url");r.source=o(t("./validate/validate_source")),r.light=o(t("./validate/validate_light")),r.layer=o(t("./validate/validate_layer")),r.filter=o(t("./validate/validate_filter")),r.paintProperty=o(t("./validate/validate_paint_property")),r.layoutProperty=o(t("./validate/validate_layout_property")),e.exports=r},{"./reference/latest":119,"./validate/validate":127,"./validate/validate_constants":131,"./validate/validate_filter":133,"./validate/validate_glyphs_url":135,"./validate/validate_layer":136,"./validate/validate_layout_property":137,"./validate/validate_light":138,"./validate/validate_paint_property":141,"./validate/validate_source":143}],146:[function(t,e,n){"use strict";var r=function(){this.n=0,this.times=[]};r.prototype.stopped=function(){return this.times=this.times.filter(function(t){return t.time>=(new Date).getTime()}),!this.times.length},r.prototype.set=function(t){return this.times.push({id:this.n,time:t+(new Date).getTime()}),this.n++},r.prototype.cancel=function(t){this.times=this.times.filter(function(e){return e.id!==t})},e.exports=r},{}],147:[function(t,e,n){"use strict";var r=t("../util/evented"),i=t("../util/ajax"),o=t("../util/browser"),a=t("../util/mapbox").normalizeSpriteURL,s=function(){this.x=0,this.y=0,this.width=0,this.height=0,this.pixelRatio=1,this.sdf=!1},u=function(t){function e(e,n){var r=this;t.call(this),this.base=e,this.retina=o.devicePixelRatio>1,this.setEventedParent(n);var s=this.retina?"@2x":"";i.getJSON(a(e,s,".json"),function(t,e){return t?void r.fire("error",{error:t}):(r.data=e,void(r.imgData&&r.fire("data",{dataType:"style"})))}),i.getImage(a(e,s,".png"),function(t,e){return t?void r.fire("error",{error:t}):(r.imgData=o.getImageData(e),r.width=e.width,void(r.data&&r.fire("data",{dataType:"style"})))})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toJSON=function(){return this.base},e.prototype.loaded=function(){return!(!this.data||!this.imgData)},e.prototype.resize=function(){var t=this;if(o.devicePixelRatio>1!==this.retina){var n=new e(this.base);n.on("data",function(){t.data=n.data,t.imgData=n.imgData,t.width=n.width,t.retina=n.retina})}},e.prototype.getSpritePosition=function(t){if(!this.loaded())return new s;var e=this.data&&this.data[t];return e&&this.imgData?e:new s},e}(r);e.exports=u},{"../util/ajax":194,"../util/browser":195,"../util/evented":203,"../util/mapbox":210}],148:[function(t,e,n){"use strict";var r=t("../style-spec/reference/latest"),i=t("../util/util"),o=t("../util/evented"),a=t("./validate_style"),s=t("./style_declaration"),u=t("./style_transition"),l="-transition",c=function(t){function e(e){t.call(this),this.properties=["anchor","color","position","intensity"],this._specifications=r.light,this.set(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){var e=this;if(!this._validate(a.light,t)){this._declarations={},this._transitions={},this._transitionOptions={},this.calculated={},t=i.extend({anchor:this._specifications.anchor.default,color:this._specifications.color.default,position:this._specifications.position.default,intensity:this._specifications.intensity.default},t);for(var n=0,r=e.properties;n<r.length;n+=1){var o=r[n];e._declarations[o]=new s(e._specifications[o],t[o])}return this}},e.prototype.getLight=function(){return{anchor:this.getLightProperty("anchor"),color:this.getLightProperty("color"),position:this.getLightProperty("position"),intensity:this.getLightProperty("intensity")}},e.prototype.getLightProperty=function(t){return i.endsWith(t,l)?this._transitionOptions[t]:this._declarations[t]&&this._declarations[t].value},e.prototype.getLightValue=function(t,e){if("position"===t){var n=this._transitions[t].calculate(e),r=i.sphericalToCartesian(n);return{x:r[0],y:r[1],z:r[2]}}return this._transitions[t].calculate(e)},e.prototype.setLight=function(t){var e=this;if(!this._validate(a.light,t))for(var n in t){var r=t[n];i.endsWith(n,l)?e._transitionOptions[n]=r:null===r||void 0===r?delete e._declarations[n]:e._declarations[n]=new s(e._specifications[n],r)}},e.prototype.recalculate=function(t){var e=this;for(var n in e._declarations)e.calculated[n]=e.getLightValue(n,{zoom:t})},e.prototype._applyLightDeclaration=function(t,e,n,r,o){var a=n.transition?this._transitions[t]:void 0,c=this._specifications[t];if(null!==e&&void 0!==e||(e=new s(c,c.default)),!a||a.declaration.json!==e.json){var h=i.extend({duration:300,delay:0},r,this.getLightProperty(t+l)),f=this._transitions[t]=new u(c,e,a,h);f.instant()||(f.loopID=o.set(f.endTime-Date.now())),a&&o.cancel(a.loopID)}},e.prototype.updateLightTransitions=function(t,e,n){var r,i=this;for(r in i._declarations)i._applyLightDeclaration(r,i._declarations[r],t,e,n)},e.prototype._validate=function(t,e){return a.emitErrors(this,t.call(a,i.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:r})))},e}(o);e.exports=c},{"../style-spec/reference/latest":119,"../util/evented":203,"../util/util":215,"./style_declaration":150,"./style_transition":158,"./validate_style":159}],149:[function(t,e,n){"use strict";var r=t("../util/evented"),i=t("./style_layer"),o=t("./image_sprite"),a=t("./light"),s=t("../symbol/glyph_source"),u=t("../symbol/sprite_atlas"),l=t("../render/line_atlas"),c=t("../util/util"),h=t("../util/ajax"),f=t("../util/mapbox"),p=t("../util/browser"),d=t("../util/dispatcher"),m=t("./animation_loop"),v=t("./validate_style"),y=t("../source/source"),_=t("../source/query_features"),g=t("../source/source_cache"),x=t("../style-spec/reference/latest"),b=t("../style-spec/function"),w=t("../util/global_worker_pool"),M=t("../style-spec/deref"),T=t("../style-spec/diff"),S=t("../source/rtl_text_plugin"),E=c.pick(T.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition"]),A=c.pick(T.operations,["setCenter","setZoom","setBearing","setPitch"]),k=function(t){function e(e,n,r){var i=this;t.call(this),this.map=n,this.animationLoop=n&&n.animationLoop||new m,this.dispatcher=new d(w(),this),this.spriteAtlas=new u(1024,1024),this.spriteAtlas.setEventedParent(this),this.lineAtlas=new l(256,512),this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory={},this._loaded=!1,c.bindAll(["_redoPlacement"],this),this._resetUpdates(),r=c.extend({validate:"string"!=typeof e||!f.isMapboxURL(e)},r),this.setEventedParent(n),this.fire("dataloading",{dataType:"style"});var a=this;this._rtlTextPluginCallback=S.registerForPluginAvailability(function(t){a.dispatcher.broadcast("loadRTLTextPlugin",t.pluginBlobURL,t.errorCallback);for(var e in a.sourceCaches)a.sourceCaches[e].reload()});var y=function(t,e){if(t)return void i.fire("error",{error:t});if(!r.validate||!v.emitErrors(i,v(e))){i._loaded=!0,i.stylesheet=e,i.updateClasses();for(var n in e.sources)i.addSource(n,e.sources[n],r);e.sprite&&(i.sprite=new o(e.sprite,i)),i.glyphSource=new s(e.glyphs),i._resolve(),i.fire("data",{dataType:"style"}),i.fire("style.load")}};"string"==typeof e?h.getJSON(f.normalizeStyleURL(e),y):p.frame(y.bind(this,null,e)),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=i.sourceCaches[t.sourceId].getSource();if(e&&e.vectorLayerIds)for(var n in i._layers){var r=i._layers[n];r.source===e.id&&i._validateLayer(r)}}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(t.sourceLayer&&e){var n=e.getSource();("geojson"===n.type||n.vectorLayerIds&&n.vectorLayerIds.indexOf(t.sourceLayer)===-1)&&this.fire("error",{error:new Error('Source layer "'+t.sourceLayer+'" does not exist on source "'+n.id+'" as specified by style layer "'+t.id+'"')})}},e.prototype.loaded=function(){var t=this;if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in t.sourceCaches)if(!t.sourceCaches[e].loaded())return!1;return!(this.sprite&&!this.sprite.loaded())},e.prototype._resolve=function(){var t=this,e=M(this.stylesheet.layers);this._order=e.map(function(t){return t.id}),this._layers={};for(var n=0,r=e;n<r.length;n+=1){var o=r[n];o=i.create(o),o.setEventedParent(t,{layer:{id:o.id}}),t._layers[o.id]=o}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new a(this.stylesheet.light)},e.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},e.prototype._applyClasses=function(t,e){var n=this;if(this._loaded){t=t||[],e=e||{transition:!0};var r=this.stylesheet.transition||{},i=this._updatedAllPaintProps?this._layers:this._updatedPaintProps;for(var o in i){var a=n._layers[o],s=n._updatedPaintProps[o];if(n._updatedAllPaintProps||s.all)a.updatePaintTransitions(t,e,r,n.animationLoop,n.zoomHistory);else for(var u in s)n._layers[o].updatePaintTransition(u,t,e,r,n.animationLoop,n.zoomHistory)}this.light.updateLightTransitions(e,r,this.animationLoop)}},e.prototype._recalculate=function(t){var e=this;if(this._loaded){for(var n in e.sourceCaches)e.sourceCaches[n].used=!1;this._updateZoomHistory(t);for(var r=0,i=e._order;r<i.length;r+=1){var o=i[r],a=e._layers[o];a.recalculate(t),!a.isHidden(t)&&a.source&&(e.sourceCaches[a.source].used=!0)}this.light.recalculate(t);var s=300;Math.floor(this.z)!==Math.floor(t)&&this.animationLoop.set(s),this.z=t}},e.prototype._updateZoomHistory=function(t){var e=this.zoomHistory;void 0===e.lastIntegerZoom&&(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=0,e.lastZoom=t),Math.floor(e.lastZoom)<Math.floor(t)?(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=Date.now()):Math.floor(e.lastZoom)>Math.floor(t)&&(e.lastIntegerZoom=Math.floor(t+1),e.lastIntegerZoomTime=Date.now()),e.lastZoom=t},e.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},e.prototype.update=function(t,e){var n=this;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(r.length||i.length||this._updatedSymbolOrder)&&this._updateWorkerLayers(r,i);for(var o in n._updatedSources){var a=n._updatedSources[o];"reload"===a?n._reloadSource(o):"clear"===a&&n._clearSource(o)}this._applyClasses(t,e),this._resetUpdates(),this.fire("data",{dataType:"style"})}},e.prototype._updateWorkerLayers=function(t,e){var n=this,r=this._updatedSymbolOrder?this._order.filter(function(t){return"symbol"===n._layers[t].type}):null;this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e,symbolOrder:r})},e.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSymbolOrder=!1,this._updatedSources={},this._updatedPaintProps={},this._updatedAllPaintProps=!1},e.prototype.setState=function(t){var e=this;if(this._checkLoaded(),v.emitErrors(this,v(t)))return!1;t=c.extend({},t),t.layers=M(t.layers);var n=T(this.serialize(),t).filter(function(t){return!(t.command in A)});if(0===n.length)return!1;var r=n.filter(function(t){return!(t.command in E)});if(r.length>0)throw new Error("Unimplemented: "+r.map(function(t){return t.command}).join(", ")+".");return n.forEach(function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)}),this.stylesheet=t,!0},e.prototype.addSource=function(t,e,n){var r=this;if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(e)+".");var i=["vector","raster","geojson","video","image","canvas"],o=i.indexOf(e.type)>=0;if(!o||!this._validate(v.source,"sources."+t,e,null,n)){var a=this.sourceCaches[t]=new g(t,e,this.dispatcher);a.style=this,a.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:a.serialize(),sourceId:t}}),a.onAdd(this.map),this._changed=!0}},e.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");var e=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],e.setEventedParent(null),e.clearTiles(),e.onRemove&&e.onRemove(this.map),this._changed=!0},e.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},e.prototype.addLayer=function(t,e,n){this._checkLoaded();var r=t.id;if("object"==typeof t.source&&(this.addSource(r,t.source),t=c.extend(t,{source:r})),!this._validate(v.layer,"layers."+r,t,{arrayIndex:-1},n)){var o=i.create(t);this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}});var a=e?this._order.indexOf(e):this._order.length;if(this._order.splice(a,0,r),this._layers[r]=o,this._removedLayers[r]&&o.source){var s=this._removedLayers[r];delete this._removedLayers[r],this._updatedSources[o.source]=s.type!==o.type?"clear":"reload"}this._updateLayer(o),"symbol"===o.type&&(this._updatedSymbolOrder=!0),this.updateClasses(r)}},e.prototype.moveLayer=function(t,e){this._checkLoaded(),this._changed=!0;var n=this._layers[t];if(!n)return void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")});var r=this._order.indexOf(t);this._order.splice(r,1);var i=e?this._order.indexOf(e):this._order.length;this._order.splice(i,0,t),"symbol"===n.type&&(this._updatedSymbolOrder=!0,n.source&&!this._updatedSources[n.source]&&(this._updatedSources[n.source]="reload"))},e.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(!e)return void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")});e.setEventedParent(null);var n=this._order.indexOf(t);this._order.splice(n,1),"symbol"===e.type&&(this._updatedSymbolOrder=!0),this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t]},e.prototype.getLayer=function(t){return this._layers[t]},e.prototype.setLayerZoomRange=function(t,e,n){this._checkLoaded();var r=this.getLayer(t);return r?void(r.minzoom===e&&r.maxzoom===n||(null!=e&&(r.minzoom=e),null!=n&&(r.maxzoom=n),this._updateLayer(r))):void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")})},e.prototype.setFilter=function(t,e){this._checkLoaded();var n=this.getLayer(t);return n?void(null!==e&&void 0!==e&&this._validate(v.filter,"layers."+n.id+".filter",e)||c.deepEqual(n.filter,e)||(n.filter=c.clone(e),this._updateLayer(n))):void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")})},e.prototype.getFilter=function(t){return c.clone(this.getLayer(t).filter)},e.prototype.setLayoutProperty=function(t,e,n){this._checkLoaded();var r=this.getLayer(t);return r?void(c.deepEqual(r.getLayoutProperty(e),n)||(r.setLayoutProperty(e,n),this._updateLayer(r))):void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")})},e.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},e.prototype.setPaintProperty=function(t,e,n,r){this._checkLoaded();var i=this.getLayer(t);if(!i)return void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")});if(!c.deepEqual(i.getPaintProperty(e,r),n)){var o=i.isPaintValueFeatureConstant(e);i.setPaintProperty(e,n,r);var a=!(n&&b.isFunctionDefinition(n)&&"$zoom"!==n.property&&void 0!==n.property);a&&o||this._updateLayer(i),this.updateClasses(t,e)}},e.prototype.getPaintProperty=function(t,e,n){return this.getLayer(t).getPaintProperty(e,n)},e.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},e.prototype.updateClasses=function(t,e){if(this._changed=!0,t){var n=this._updatedPaintProps;n[t]||(n[t]={}),n[t][e||"all"]=!0}else this._updatedAllPaintProps=!0},e.prototype.serialize=function(){var t=this;return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(e){return t._layers[e].serialize()})},function(t){return void 0!==t})},e.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload"),this._changed=!0},e.prototype._flattenRenderedFeatures=function(t){for(var e=this,n=[],r=this._order.length-1;r>=0;r--)for(var i=e._order[r],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s[i];if(u)for(var l=0,c=u;l<c.length;l+=1){var h=c[l];n.push(h)}}return n},e.prototype.queryRenderedFeatures=function(t,e,n,r){var i=this;e&&e.filter&&this._validate(v.filter,"queryRenderedFeatures.filter",e.filter);var o={};if(e&&e.layers){if(!Array.isArray(e.layers))return void this.fire("error",{error:"parameters.layers must be an Array."});for(var a=0,s=e.layers;a<s.length;a+=1){var u=s[a],l=i._layers[u];if(!l)return void i.fire("error",{error:"The layer '"+u+"' does not exist in the map's style and cannot be queried for features."});o[l.source]=!0}}var c=[];for(var h in i.sourceCaches)if(!e.layers||o[h]){var f=_.rendered(i.sourceCaches[h],i._layers,t,e,n,r);c.push(f)}return this._flattenRenderedFeatures(c)},e.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(v.filter,"querySourceFeatures.filter",e.filter);var n=this.sourceCaches[t];return n?_.source(n,e):[]},e.prototype.addSourceType=function(t,e,n){return y.getType(t)?n(new Error('A source type called "'+t+'" already exists.')):(y.setType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},e.prototype.getLight=function(){return this.light.getLight()},e.prototype.setLight=function(t,e){this._checkLoaded();var n=this.light.getLight(),r=!1;for(var i in t)if(!c.deepEqual(t[i],n[i])){r=!0;break}if(r){var o=this.stylesheet.transition||{};this.light.setLight(t),this.light.updateLightTransitions(e||{transition:!0},o,this.animationLoop)}},e.prototype._validate=function(t,e,n,r,i){return(!i||i.validate!==!1)&&v.emitErrors(this,t.call(v,c.extend({key:e,style:this.serialize(),value:n,styleSpec:x},r)))},e.prototype._remove=function(){var t=this;S.evented.off("pluginAvailable",this._rtlTextPluginCallback);for(var e in t.sourceCaches)t.sourceCaches[e].clearTiles();this.dispatcher.remove()},e.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},e.prototype._reloadSource=function(t){this.sourceCaches[t].reload()},e.prototype._updateSources=function(t){var e=this;for(var n in e.sourceCaches)e.sourceCaches[n].update(t)},e.prototype._redoPlacement=function(){var t=this;for(var e in t.sourceCaches)t.sourceCaches[e].redoPlacement()},e.prototype.getIcons=function(t,e,n){var r=this,i=function(){r.spriteAtlas.setSprite(r.sprite),r.spriteAtlas.addIcons(e.icons,n)};!this.sprite||this.sprite.loaded()?i():this.sprite.on("data",i)},e.prototype.getGlyphs=function(t,e,n){function r(t,e,r){t&&console.error(t),s[r]=e,a--,0===a&&n(null,s)}var i=this,o=e.stacks,a=Object.keys(o).length,s={};for(var u in o)i.glyphSource.getSimpleGlyphs(u,o[u],e.uid,r)},e}(r);e.exports=k},{"../render/line_atlas":76,"../source/query_features":89,"../source/rtl_text_plugin":91,"../source/source":92,"../source/source_cache":93,"../style-spec/deref":102,"../style-spec/diff":103,"../style-spec/function":107,"../style-spec/reference/latest":119,"../symbol/glyph_source":168,"../symbol/sprite_atlas":172,"../util/ajax":194,"../util/browser":195,"../util/dispatcher":201,"../util/evented":203,"../util/global_worker_pool":205,"../util/mapbox":210,"../util/util":215,"./animation_loop":146,"./image_sprite":147,"./light":148,"./style_layer":151,"./validate_style":159}],150:[function(t,e,n){"use strict";var r=t("../style-spec/function"),i=t("../util/util"),o=function(t,e){var n=this;if(this.value=i.clone(e),this.isFunction=r.isFunctionDefinition(e),this.json=JSON.stringify(this.value),this.minimum=t.minimum,this.function=r(this.value,t),this.isFeatureConstant=this.function.isFeatureConstant,this.isZoomConstant=this.function.isZoomConstant,this.isFeatureConstant||this.isZoomConstant){if(!this.isZoomConstant){this.stopZoomLevels=[];for(var o=0,a=n.value.stops;o<a.length;o+=1){var s=a[o];n.stopZoomLevels.indexOf(s[0])<0&&n.stopZoomLevels.push(s[0])}}}else{this.stopZoomLevels=[];for(var u=[],l=0,c=n.value.stops;l<c.length;l+=1){var h=c[l],f=h[0].zoom;n.stopZoomLevels.indexOf(f)<0&&(n.stopZoomLevels.push(f),u.push([f,u.length]))}this._functionInterpolationT=r({type:"exponential",stops:u,base:e.base},{type:"number"})}};o.prototype.calculate=function(t,e){var n=this.function(t&&t.zoom,e||{});return void 0!==this.minimum&&n<this.minimum?this.minimum:n},o.prototype.calculateInterpolationT=function(t){return this.isFeatureConstant||this.isZoomConstant?0:this._functionInterpolationT(t&&t.zoom,{})},e.exports=o},{"../style-spec/function":107,"../util/util":215}],151:[function(t,e,n){"use strict";function r(t){return t.value}var i=t("../util/util"),o=t("./style_transition"),a=t("./style_declaration"),s=t("../style-spec/reference/latest"),u=t("./validate_style"),l=t("./../style-spec/util/parse_color"),c=t("../util/evented"),h="-transition",f=function(t){function e(e){var n=this;t.call(this),this.id=e.id,this.metadata=e.metadata,this.type=e.type,this.source=e.source,this.sourceLayer=e["source-layer"],this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.filter=e.filter,this.paint={},this.layout={},this._paintSpecifications=s["paint_"+this.type],this._layoutSpecifications=s["layout_"+this.type],this._paintTransitions={},this._paintTransitionOptions={},this._paintDeclarations={},this._layoutDeclarations={},this._layoutFunctions={};var r,i,o={validate:!1};for(var a in e){var u=a.match(/^paint(?:\.(.*))?$/);if(u){var l=u[1]||"";for(r in e[a])n.setPaintProperty(r,e[a][r],l,o)}}for(i in e.layout)n.setLayoutProperty(i,e.layout[i],o);for(r in n._paintSpecifications)n.paint[r]=n.getPaintValue(r);for(i in n._layoutSpecifications)n._updateLayoutValue(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setLayoutProperty=function(t,e,n){if(null==e)delete this._layoutDeclarations[t];else{var r="layers."+this.id+".layout."+t;if(this._validate(u.layoutProperty,r,t,e,n))return;this._layoutDeclarations[t]=new a(this._layoutSpecifications[t],e)}this._updateLayoutValue(t)},e.prototype.getLayoutProperty=function(t){return this._layoutDeclarations[t]&&this._layoutDeclarations[t].value},e.prototype.getLayoutValue=function(t,e,n){var r=this._layoutSpecifications[t],i=this._layoutDeclarations[t];return i?i.calculate(e,n):r.default},e.prototype.setPaintProperty=function(t,e,n,r){var o="layers."+this.id+(n?'["paint.'+n+'"].':".paint.")+t;if(i.endsWith(t,h))if(this._paintTransitionOptions[n||""]||(this._paintTransitionOptions[n||""]={}),null===e||void 0===e)delete this._paintTransitionOptions[n||""][t];else{if(this._validate(u.paintProperty,o,t,e,r))return;this._paintTransitionOptions[n||""][t]=e}else if(this._paintDeclarations[n||""]||(this._paintDeclarations[n||""]={}),
null===e||void 0===e)delete this._paintDeclarations[n||""][t];else{if(this._validate(u.paintProperty,o,t,e,r))return;this._paintDeclarations[n||""][t]=new a(this._paintSpecifications[t],e)}},e.prototype.getPaintProperty=function(t,e){return e=e||"",i.endsWith(t,h)?this._paintTransitionOptions[e]&&this._paintTransitionOptions[e][t]:this._paintDeclarations[e]&&this._paintDeclarations[e][t]&&this._paintDeclarations[e][t].value},e.prototype.getPaintValue=function(t,e,n){var r=this._paintSpecifications[t],i=this._paintTransitions[t];return i?i.calculate(e,n):"color"===r.type&&r.default?l(r.default):r.default},e.prototype.getPaintValueStopZoomLevels=function(t){var e=this._paintTransitions[t];return e?e.declaration.stopZoomLevels:[]},e.prototype.getLayoutValueStopZoomLevels=function(t){var e=this._layoutDeclarations[t];return e?e.stopZoomLevels:[]},e.prototype.getPaintInterpolationT=function(t,e){var n=this._paintTransitions[t];return n.declaration.calculateInterpolationT(e)},e.prototype.getLayoutInterpolationT=function(t,e){var n=this._layoutDeclarations[t];return n.calculateInterpolationT(e)},e.prototype.isPaintValueFeatureConstant=function(t){var e=this._paintTransitions[t];return!e||e.declaration.isFeatureConstant},e.prototype.isLayoutValueFeatureConstant=function(t){var e=this._layoutDeclarations[t];return!e||e.isFeatureConstant},e.prototype.isPaintValueZoomConstant=function(t){var e=this._paintTransitions[t];return!e||e.declaration.isZoomConstant},e.prototype.isLayoutValueZoomConstant=function(t){var e=this._layoutDeclarations[t];return!e||e.isZoomConstant},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.layout.visibility},e.prototype.updatePaintTransitions=function(t,e,n,r,o){for(var a=this,s=i.extend({},this._paintDeclarations[""]),u=0;u<t.length;u++)i.extend(s,a._paintDeclarations[t[u]]);var l;for(l in s)a._applyPaintDeclaration(l,s[l],e,n,r,o);for(l in a._paintTransitions)l in s||a._applyPaintDeclaration(l,null,e,n,r,o)},e.prototype.updatePaintTransition=function(t,e,n,r,i,o){for(var a=this,s=this._paintDeclarations[""][t],u=0;u<e.length;u++){var l=a._paintDeclarations[e[u]];l&&l[t]&&(s=l[t])}this._applyPaintDeclaration(t,s,n,r,i,o)},e.prototype.recalculate=function(t){var e=this;for(var n in e._paintTransitions)e.paint[n]=e.getPaintValue(n,{zoom:t});for(var r in e._layoutFunctions)e.layout[r]=e.getLayoutValue(r,{zoom:t})},e.prototype.serialize=function(){var t=this,e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:i.mapObject(this._layoutDeclarations,r)};for(var n in t._paintDeclarations){var o=""===n?"paint":"paint."+n;e[o]=i.mapObject(t._paintDeclarations[n],r)}return i.filterObject(e,function(t,e){return void 0!==t&&!("layout"===e&&!Object.keys(t).length)})},e.prototype._applyPaintDeclaration=function(t,e,n,r,s,u){var l=n.transition?this._paintTransitions[t]:void 0,c=this._paintSpecifications[t];if(null!==e&&void 0!==e||(e=new a(c,c.default)),!l||l.declaration.json!==e.json){var f=i.extend({duration:300,delay:0},r,this.getPaintProperty(t+h)),p=this._paintTransitions[t]=new o(c,e,l,f,u);p.instant()||(p.loopID=s.set(p.endTime-Date.now())),l&&s.cancel(l.loopID)}},e.prototype._updateLayoutValue=function(t){var e=this._layoutDeclarations[t];e&&e.isFunction?this._layoutFunctions[t]=!0:(delete this._layoutFunctions[t],this.layout[t]=this.getLayoutValue(t))},e.prototype._validate=function(t,e,n,r,i){return(!i||i.validate!==!1)&&u.emitErrors(this,t.call(u,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:s,style:{glyphs:!0,sprite:!0}}))},e}(c);e.exports=f;var p={circle:t("./style_layer/circle_style_layer"),fill:t("./style_layer/fill_style_layer"),"fill-extrusion":t("./style_layer/fill_extrusion_style_layer"),line:t("./style_layer/line_style_layer"),symbol:t("./style_layer/symbol_style_layer")};f.create=function(t){var e=p[t.type]||f;return new e(t)}},{"../style-spec/reference/latest":119,"../util/evented":203,"../util/util":215,"./../style-spec/util/parse_color":124,"./style_declaration":150,"./style_layer/circle_style_layer":152,"./style_layer/fill_extrusion_style_layer":153,"./style_layer/fill_style_layer":154,"./style_layer/line_style_layer":155,"./style_layer/symbol_style_layer":156,"./style_transition":158,"./validate_style":159}],152:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/circle_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new i(t)},e}(r);e.exports=o},{"../../data/bucket/circle_bucket":46,"../style_layer":151}],153:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/fill_extrusion_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPaintValue=function(e,n,r){var i=t.prototype.getPaintValue.call(this,e,n,r);return"fill-extrusion-color"===e&&i&&(i[3]=1),i},e.prototype.createBucket=function(t){return new i(t)},e}(r);e.exports=o},{"../../data/bucket/fill_extrusion_bucket":48,"../style_layer":151}],154:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/fill_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPaintValue=function(e,n,r){var i=this;if("fill-outline-color"===e){if(void 0===this.getPaintProperty("fill-outline-color"))return t.prototype.getPaintValue.call(this,"fill-color",n,r);for(var o=this._paintTransitions["fill-outline-color"];o;){var a=o&&o.declaration&&o.declaration.value;if(!a)return t.prototype.getPaintValue.call(i,"fill-color",n,r);o=o.oldTransition}}return t.prototype.getPaintValue.call(this,e,n,r)},e.prototype.getPaintValueStopZoomLevels=function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.getPaintValueStopZoomLevels.call(this,"fill-color"):t.prototype.getPaintValueStopZoomLevels.call(this,e)},e.prototype.getPaintInterpolationT=function(e,n){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.getPaintInterpolationT.call(this,"fill-color",n):t.prototype.getPaintInterpolationT.call(this,e,n)},e.prototype.isPaintValueFeatureConstant=function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.isPaintValueFeatureConstant.call(this,"fill-color"):t.prototype.isPaintValueFeatureConstant.call(this,e)},e.prototype.isPaintValueZoomConstant=function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.isPaintValueZoomConstant.call(this,"fill-color"):t.prototype.isPaintValueZoomConstant.call(this,e)},e.prototype.createBucket=function(t){return new i(t)},e}(r);e.exports=o},{"../../data/bucket/fill_bucket":47,"../style_layer":151}],155:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/line_bucket"),o=t("../../util/util"),a=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPaintValue=function(e,n,r){var i=t.prototype.getPaintValue.call(this,e,n,r);if(i&&"line-dasharray"===e){var a=this.getPaintValue("line-width",o.extend({},n,{zoom:Math.floor(n.zoom)}),r);i.fromScale*=a,i.toScale*=a}return i},e.prototype.createBucket=function(t){return new i(t)},e}(r);e.exports=a},{"../../data/bucket/line_bucket":49,"../../util/util":215,"../style_layer":151}],156:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/symbol_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayoutValue=function(e,n,r){var i=t.prototype.getLayoutValue.call(this,e,n,r);if("auto"!==i)return i;switch(e){case"text-rotation-alignment":case"icon-rotation-alignment":return"line"===this.getLayoutValue("symbol-placement",n,r)?"map":"viewport";case"text-pitch-alignment":return this.getLayoutValue("text-rotation-alignment",n,r);default:return i}},e.prototype.createBucket=function(t){return new i(t)},e}(r);e.exports=o},{"../../data/bucket/symbol_bucket":50,"../style_layer":151}],157:[function(t,e,n){"use strict";var r=t("./style_layer"),i=t("../util/util"),o=t("../style-spec/feature_filter"),a=t("../style-spec/group_by_layout"),s=function(t){t&&this.replace(t)};s.prototype.replace=function(t){var e=this;this.symbolOrder=[];for(var n=0,r=t;n<r.length;n+=1){var i=r[n];"symbol"===i.type&&e.symbolOrder.push(i.id)}this._layerConfigs={},this._layers={},this.update(t,[])},s.prototype.update=function(t,e,n){for(var s=this,u=0,l=t;u<l.length;u+=1){var c=l[u];s._layerConfigs[c.id]=c;var h=s._layers[c.id]=r.create(c);h.updatePaintTransitions({},{transition:!1}),h.filter=o(h.filter)}for(var f=0,p=e;f<p.length;f+=1){var d=p[f];delete s._layerConfigs[d],delete s._layers[d]}n&&(this.symbolOrder=n),this.familiesBySource={};for(var m=a(i.values(this._layerConfigs)),v=0,y=m;v<y.length;v+=1){var _=y[v],g=_.map(function(t){return s._layers[t.id]}),x=g[0];if(!x.layout||"none"!==x.layout.visibility){var b=x.source||"",w=s.familiesBySource[b];w||(w=s.familiesBySource[b]={});var M=x.sourceLayer||"_geojsonTileLayer",T=w[M];T||(T=w[M]=[]),T.push(g)}}},e.exports=s},{"../style-spec/feature_filter":105,"../style-spec/group_by_layout":108,"../util/util":215,"./style_layer":151}],158:[function(t,e,n){"use strict";function r(t,e,n){if(void 0!==t&&void 0!==e)return{from:t.to,fromScale:t.toScale,to:e.to,toScale:e.toScale,t:n}}var i=t("../util/util"),o=t("../style-spec/util/interpolate"),a={lastIntegerZoom:0,lastIntegerZoomTime:0,lastZoom:0},s=function(t,e,n,i,s){this.declaration=e,this.startTime=this.endTime=(new Date).getTime(),this.oldTransition=n,this.duration=i.duration||0,this.delay=i.delay||0,this.zoomTransitioned="piecewise-constant"===t.function&&t.transition,this.interp=this.zoomTransitioned?r:o[t.type],this.zoomHistory=s||a,this.instant()||(this.endTime=this.startTime+this.duration+this.delay),n&&n.endTime<=this.startTime&&delete n.oldTransition};s.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay},s.prototype.calculate=function(t,e,n){var r=this._calculateTargetValue(t,e);if(this.instant())return r;if(n=n||Date.now(),n>=this.endTime)return r;var o=this.oldTransition.calculate(t,e,this.startTime),a=i.easeCubicInOut((n-this.startTime-this.delay)/this.duration);return this.interp(o,r,a)},s.prototype._calculateTargetValue=function(t,e){if(!this.zoomTransitioned)return this.declaration.calculate(t,e);var n=t.zoom,r=this.zoomHistory.lastIntegerZoom,i=n>r?2:.5,a=this.declaration.calculate({zoom:n>r?n-1:n+1},e),s=this.declaration.calculate({zoom:n},e),u=Math.min((Date.now()-this.zoomHistory.lastIntegerZoomTime)/this.duration,1),l=Math.abs(n-r),c=o(u,1,l);return void 0!==a&&void 0!==s?{from:a,fromScale:i,to:s,toScale:1,t:c}:void 0},e.exports=s},{"../style-spec/util/interpolate":123,"../util/util":215}],159:[function(t,e,n){"use strict";e.exports=t("../style-spec/validate_style.min"),e.exports.emitErrors=function(t,e){if(e&&e.length){for(var n=0;n<e.length;n++)t.fire("error",{error:new Error(e[n].message)});return!0}return!1}},{"../style-spec/validate_style.min":145}],160:[function(t,e,n){"use strict";var r=t("point-geometry"),i=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(r);e.exports=i},{"point-geometry":26}],161:[function(t,e,n){"use strict";function r(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=t[a-1],h=t[a],f=t[a+1];if(!f)return!1;var p=c.angleTo(h)-h.angleTo(f);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:p}),l+=p;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=h.dist(f)}return!0}e.exports=r},{}],162:[function(t,e,n){"use strict";function r(t,e,n,r,o){for(var a=[],s=0;s<t.length;s++)for(var u=t[s],l=void 0,c=0;c<u.length-1;c++){var h=u[c],f=u[c+1];h.x<e&&f.x<e||(h.x<e?h=new i(e,h.y+(f.y-h.y)*((e-h.x)/(f.x-h.x)))._round():f.x<e&&(f=new i(e,h.y+(f.y-h.y)*((e-h.x)/(f.x-h.x)))._round()),h.y<n&&f.y<n||(h.y<n?h=new i(h.x+(f.x-h.x)*((n-h.y)/(f.y-h.y)),n)._round():f.y<n&&(f=new i(h.x+(f.x-h.x)*((n-h.y)/(f.y-h.y)),n)._round()),h.x>=r&&f.x>=r||(h.x>=r?h=new i(r,h.y+(f.y-h.y)*((r-h.x)/(f.x-h.x)))._round():f.x>=r&&(f=new i(r,h.y+(f.y-h.y)*((r-h.x)/(f.x-h.x)))._round()),h.y>=o&&f.y>=o||(h.y>=o?h=new i(h.x+(f.x-h.x)*((o-h.y)/(f.y-h.y)),o)._round():f.y>=o&&(f=new i(h.x+(f.x-h.x)*((o-h.y)/(f.y-h.y)),o)._round()),l&&h.equals(l[l.length-1])||(l=[h],a.push(l)),l.push(f)))))}return a}var i=t("point-geometry");e.exports=r},{"point-geometry":26}],163:[function(t,e,n){"use strict";var r=t("../util/struct_array"),i=t("point-geometry"),o=r({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Float32",name:"maxScale"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"bbox0"},{type:"Int16",name:"bbox1"},{type:"Int16",name:"bbox2"},{type:"Int16",name:"bbox3"},{type:"Float32",name:"placementScale"}]});Object.defineProperty(o.prototype.StructType.prototype,"anchorPoint",{get:function(){return new i(this.anchorPointX,this.anchorPointY)}}),e.exports=o},{"../util/struct_array":213,"point-geometry":26}],164:[function(t,e,n){"use strict";var r=function(t,e,n,r,i,o,a,s,u,l,c){var h=a.top*s-u,f=a.bottom*s+u,p=a.left*s-u,d=a.right*s+u;if(this.boxStartIndex=t.length,l){var m=f-h,v=d-p;if(m>0)if(m=Math.max(10*s,m),c){var y=e[n.segment+1].sub(e[n.segment])._unit()._mult(v),_=[n.sub(y),n.add(y)];this._addLineCollisionBoxes(t,_,n,0,v,m,r,i,o)}else this._addLineCollisionBoxes(t,e,n,n.segment,v,m,r,i,o)}else t.emplaceBack(n.x,n.y,p,h,d,f,1/0,r,i,o,0,0,0,0,0);this.boxEndIndex=t.length};r.prototype._addLineCollisionBoxes=function(t,e,n,r,i,o,a,s,u){var l=o/2,c=Math.floor(i/l),h=-o/2,f=this.boxes,p=n,d=r+1,m=h;do{if(d--,d<0)return f;m-=e[d].dist(p),p=e[d]}while(m>-i/2);for(var v=e[d].dist(e[d+1]),y=0;y<c;y++){for(var _=-i/2+y*l;m+v<_;){if(m+=v,d++,d+1>=e.length)return f;v=e[d].dist(e[d+1])}var g=_-m,x=e[d],b=e[d+1],w=b.sub(x)._unit()._mult(g)._add(x)._round(),M=Math.max(Math.abs(_-h)-l/2,0),T=i/2/M;t.emplaceBack(w.x,w.y,-o/2,-o/2,o/2,o/2,T,a,s,u,0,0,0,0,0)}return f},e.exports=r},{}],165:[function(t,e,n){"use strict";var r=t("point-geometry"),i=t("../data/extent"),o=t("grid-index"),a=t("../util/intersection_tests"),s=function(t,e,n){if("object"==typeof t){var r=t;n=e,t=r.angle,e=r.pitch,this.grid=new o(r.grid),this.ignoredGrid=new o(r.ignoredGrid)}else this.grid=new o(i,12,6),this.ignoredGrid=new o(i,12,0);this.minScale=.5,this.maxScale=2,this.angle=t,this.pitch=e;var a=Math.sin(t),s=Math.cos(t);if(this.rotationMatrix=[s,-a,a,s],this.reverseRotationMatrix=[s,a,-a,s],this.yStretch=1/Math.cos(e/180*Math.PI),this.yStretch=Math.pow(this.yStretch,1.3),this.collisionBoxArray=n,0===n.length){n.emplaceBack();var u=32767;n.emplaceBack(0,0,0,-u,0,u,u,0,0,0,0,0,0,0,0,0),n.emplaceBack(i,0,0,-u,0,u,u,0,0,0,0,0,0,0,0,0),n.emplaceBack(0,0,-u,0,u,0,u,0,0,0,0,0,0,0,0,0),n.emplaceBack(0,i,-u,0,u,0,u,0,0,0,0,0,0,0,0,0)}this.tempCollisionBox=n.get(0),this.edges=[n.get(1),n.get(2),n.get(3),n.get(4)]};s.prototype.serialize=function(t){var e=this.grid.toArrayBuffer(),n=this.ignoredGrid.toArrayBuffer();return t&&(t.push(e),t.push(n)),{angle:this.angle,pitch:this.pitch,grid:e,ignoredGrid:n}},s.prototype.placeCollisionFeature=function(t,e,n){for(var i=this,o=this.collisionBoxArray,a=this.minScale,s=this.rotationMatrix,u=this.yStretch,l=t.boxStartIndex;l<t.boxEndIndex;l++){var c=o.get(l),h=c.anchorPoint._matMult(s),f=h.x,p=h.y,d=f+c.x1,m=p+c.y1*u,v=f+c.x2,y=p+c.y2*u;if(c.bbox0=d,c.bbox1=m,c.bbox2=v,c.bbox3=y,!e)for(var _=i.grid.query(d,m,v,y),g=0;g<_.length;g++){var x=o.get(_[g]),b=x.anchorPoint._matMult(s);if(a=i.getPlacementScale(a,h,c,b,x),a>=i.maxScale)return a}if(n){var w=void 0;if(i.angle){var M=i.reverseRotationMatrix,T=new r(c.x1,c.y1).matMult(M),S=new r(c.x2,c.y1).matMult(M),E=new r(c.x1,c.y2).matMult(M),A=new r(c.x2,c.y2).matMult(M);w=i.tempCollisionBox,w.anchorPointX=c.anchorPoint.x,w.anchorPointY=c.anchorPoint.y,w.x1=Math.min(T.x,S.x,E.x,A.x),w.y1=Math.min(T.y,S.x,E.x,A.x),w.x2=Math.max(T.x,S.x,E.x,A.x),w.y2=Math.max(T.y,S.x,E.x,A.x),w.maxScale=c.maxScale}else w=c;for(var k=0;k<this.edges.length;k++){var z=i.edges[k];if(a=i.getPlacementScale(a,c.anchorPoint,w,z.anchorPoint,z),a>=i.maxScale)return a}}}return a},s.prototype.queryRenderedSymbols=function(t,e){var n={},i=[];if(0===t.length||0===this.grid.length&&0===this.ignoredGrid.length)return i;for(var o=this.collisionBoxArray,s=this.rotationMatrix,u=this.yStretch,l=[],c=1/0,h=1/0,f=-(1/0),p=-(1/0),d=0;d<t.length;d++)for(var m=t[d],v=0;v<m.length;v++){var y=m[v].matMult(s);c=Math.min(c,y.x),h=Math.min(h,y.y),f=Math.max(f,y.x),p=Math.max(p,y.y),l.push(y)}for(var _=this.grid.query(c,h,f,p),g=this.ignoredGrid.query(c,h,f,p),x=0;x<g.length;x++)_.push(g[x]);for(var b=Math.pow(2,Math.ceil(Math.log(e)/Math.LN2*10)/10),w=0;w<_.length;w++){var M=o.get(_[w]),T=M.sourceLayerIndex,S=M.featureIndex;if(void 0===n[T]&&(n[T]={}),!n[T][S]&&!(b<M.placementScale||b>M.maxScale)){var E=M.anchorPoint.matMult(s),A=E.x+M.x1/e,k=E.y+M.y1/e*u,z=E.x+M.x2/e,C=E.y+M.y2/e*u,P=[new r(A,k),new r(z,k),new r(z,C),new r(A,C)];a.polygonIntersectsPolygon(l,P)&&(n[T][S]=!0,i.push(_[w]))}}return i},s.prototype.getPlacementScale=function(t,e,n,r,i){var o=e.x-r.x,a=e.y-r.y,s=(i.x1-n.x2)/o,u=(i.x2-n.x1)/o,l=(i.y1-n.y2)*this.yStretch/a,c=(i.y2-n.y1)*this.yStretch/a;(isNaN(s)||isNaN(u))&&(s=u=1),(isNaN(l)||isNaN(c))&&(l=c=1);var h=Math.min(Math.max(s,u),Math.max(l,c)),f=i.maxScale,p=n.maxScale;return h>f&&(h=f),h>p&&(h=p),h>t&&h>=i.placementScale&&(t=h),t},s.prototype.insertCollisionFeature=function(t,e,n){for(var r=this,i=n?this.ignoredGrid:this.grid,o=this.collisionBoxArray,a=t.boxStartIndex;a<t.boxEndIndex;a++){var s=o.get(a);s.placementScale=e,e<r.maxScale&&i.insert(a,s.bbox0,s.bbox1,s.bbox2,s.bbox3)}},e.exports=s},{"../data/extent":54,"../util/intersection_tests":207,"grid-index":16,"point-geometry":26}],166:[function(t,e,n){"use strict";function r(t,e,n,r,o,a,s,u,l){var c=r?.6*a*s:0,h=Math.max(r?r.right-r.left:0,o?o.right-o.left:0),f=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;e-h*s<e/4&&(e=h*s+e/4);var p=2*a,d=f?e/2*u%e:(h/2+p)*s*u%e;return i(t,d,e,c,n,h*s,f,!1,l)}function i(t,e,n,r,u,l,c,h,f){for(var p=l/2,d=0,m=0;m<t.length-1;m++)d+=t[m].dist(t[m+1]);for(var v=0,y=e-n,_=[],g=0;g<t.length-1;g++){for(var x=t[g],b=t[g+1],w=x.dist(b),M=b.angleTo(x);y+n<v+w;){y+=n;var T=(y-v)/w,S=o(x.x,b.x,T),E=o(x.y,b.y,T);if(S>=0&&S<f&&E>=0&&E<f&&y-p>=0&&y+p<=d){var A=new a(S,E,M,g)._round();r&&!s(t,A,l,r,u)||_.push(A)}}v+=w}return h||_.length||c||(_=i(t,v/2,n,r,u,l,c,!0,f)),_}var o=t("../style-spec/util/interpolate"),a=t("../symbol/anchor"),s=t("./check_max_angle");e.exports=r},{"../style-spec/util/interpolate":123,"../symbol/anchor":160,"./check_max_angle":161}],167:[function(t,e,n){"use strict";var r=t("@mapbox/shelf-pack"),i=t("../util/util"),o=4,a=128,s=2048,u=function(){this.width=a,this.height=a,this.atlas=new r(this.width,this.height),this.index={},this.ids={},this.data=new Uint8Array(this.width*this.height)};u.prototype.getGlyphs=function(){var t,e,n,r=this,i={};for(var o in r.ids)t=o.split("#"),e=t[0],n=t[1],i[e]||(i[e]=[]),i[e].push(n);return i},u.prototype.getRects=function(){var t,e,n,r=this,i={};for(var o in r.ids)t=o.split("#"),e=t[0],n=t[1],i[e]||(i[e]={}),i[e][n]=r.index[o];return i},u.prototype.addGlyph=function(t,e,n,r){var o=this;if(!n)return null;var a=e+"#"+n.id;if(this.index[a])return this.ids[a].indexOf(t)<0&&this.ids[a].push(t),this.index[a];if(!n.bitmap)return null;var s=n.width+2*r,u=n.height+2*r,l=1,c=s+2*l,h=u+2*l;c+=4-c%4,h+=4-h%4;var f=this.atlas.packOne(c,h);if(f||(this.resize(),f=this.atlas.packOne(c,h)),!f)return i.warnOnce("glyph bitmap overflow"),null;this.index[a]=f,this.ids[a]=[t];for(var p=this.data,d=n.bitmap,m=0;m<u;m++)for(var v=o.width*(f.y+m+l)+f.x+l,y=s*m,_=0;_<s;_++)p[v+_]=d[y+_];return this.dirty=!0,f},u.prototype.resize=function(){var t=this,e=this.width,n=this.height;if(!(e>=s||n>=s)){this.texture&&(this.gl&&this.gl.deleteTexture(this.texture),this.texture=null),this.width*=o,this.height*=o,this.atlas.resize(this.width,this.height);for(var r=new ArrayBuffer(this.width*this.height),i=0;i<n;i++){var a=new Uint8Array(t.data.buffer,n*i,e),u=new Uint8Array(r,n*i*o,e);u.set(a)}this.data=new Uint8Array(r)}},u.prototype.bind=function(t){this.gl=t,this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,null))},u.prototype.updateTexture=function(t){this.bind(t),this.dirty&&(t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data),this.dirty=!1)},e.exports=u},{"../util/util":215,"@mapbox/shelf-pack":2}],168:[function(t,e,n){"use strict";function r(t,e,n,r){return r=r||"abc",n.replace("{s}",r[t.length%r.length]).replace("{fontstack}",t).replace("{range}",e)}var i=t("../util/mapbox").normalizeGlyphsURL,o=t("../util/ajax"),a=t("../util/verticalize_punctuation"),s=t("../util/glyphs"),u=t("../symbol/glyph_atlas"),l=t("pbf"),c=function(t,e,n){var r=1;this.advance=t.advance,this.left=t.left-n-r,this.top=t.top+n+r,this.rect=e},h=function(t){this.url=t&&i(t),this.atlases={},this.stacks={},this.loading={}};h.prototype.getSimpleGlyphs=function(t,e,n,r){var i=this;void 0===this.stacks[t]&&(this.stacks[t]={}),void 0===this.atlases[t]&&(this.atlases[t]=new u);for(var o={},s=this.stacks[t],l=this.atlases[t],h=3,f={},p=0,d=function(e){var r=Math.floor(e/256);if(s[r]){var i=s[r].glyphs[e],a=l.addGlyph(n,t,i,h);i&&(o[e]=new c(i,a,h))}else void 0===f[r]&&(f[r]=[],p++),f[r].push(e)},m=0;m<e.length;m++){var v=e[m],y=String.fromCharCode(v);d(v),a.lookup[y]&&d(a.lookup[y].charCodeAt(0))}p||r(void 0,o,t);var _=function(e,a,s){if(!e)for(var u=i.stacks[t][a]=s.stacks[0],d=0;d<f[a].length;d++){var m=f[a][d],v=u.glyphs[m],y=l.addGlyph(n,t,v,h);v&&(o[m]=new c(v,y,h))}p--,p||r(void 0,o,t)};for(var g in f)i.loadRange(t,g,_)},h.prototype.loadRange=function(t,e,n){if(256*e>65535)return n("glyphs > 65535 not supported");void 0===this.loading[t]&&(this.loading[t]={});var i=this.loading[t];if(i[e])i[e].push(n);else{i[e]=[n];var a=256*e+"-"+(256*e+255),u=r(t,a,this.url);o.getArrayBuffer(u,function(t,n){for(var r=!t&&new s(new l(n.data)),o=0;o<i[e].length;o++)i[e][o](t,e,r);delete i[e]})}},h.prototype.getGlyphAtlas=function(t){return this.atlases[t]},e.exports=h},{"../symbol/glyph_atlas":167,"../util/ajax":194,"../util/glyphs":206,"../util/mapbox":210,"../util/verticalize_punctuation":217,pbf:25}],169:[function(t,e,n){"use strict";e.exports=function(t){function e(e){s.push(t[e]),u++}function n(t,e,n){var r=a[t];return delete a[t],a[e]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(t,e,n){var r=o[e];return delete o[e],o[t]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function i(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var o={},a={},s=[],u=0,l=0;l<t.length;l++){var c=t[l],h=c.geometry,f=c.text;if(f){var p=i(f,h),d=i(f,h,!0);if(p in a&&d in o&&a[p]!==o[d]){var m=r(p,d,h),v=n(p,d,s[m].geometry);delete o[p],delete a[d],a[i(f,s[v].geometry,!0)]=v,s[m].geometry=null}else p in a?n(p,d,h):d in o?r(p,d,h):(e(l),o[p]=u-1,a[d]=u-1)}else e(l)}return s.filter(function(t){return t.geometry})}},{}],170:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s,u,l,c){this.anchorPoint=t,this.tl=e,this.tr=n,this.bl=r,this.br=i,this.tex=o,this.anchorAngle=a,this.glyphAngle=s,this.minScale=u,this.maxScale=l,this.writingMode=c}function i(t,e,n,i,o,a,s,u,l){var c,h,d,m,v=e.image.rect,y=o.layout,_=1,g=e.left-_,x=g+v.w/e.image.pixelRatio,b=e.top-_,w=b+v.h/e.image.pixelRatio;if("none"!==y["icon-text-fit"]&&s){var M=x-g,T=w-b,S=y["text-size"]/24,E=s.left*S,A=s.right*S,k=s.top*S,z=s.bottom*S,C=A-E,P=z-k,L=y["icon-text-fit-padding"][0],I=y["icon-text-fit-padding"][1],O=y["icon-text-fit-padding"][2],R=y["icon-text-fit-padding"][3],N="width"===y["icon-text-fit"]?.5*(P-T):0,D="height"===y["icon-text-fit"]?.5*(C-M):0,j="width"===y["icon-text-fit"]||"both"===y["icon-text-fit"]?C:M,B="height"===y["icon-text-fit"]||"both"===y["icon-text-fit"]?P:T;c=new f(E+D-R,k+N-L),h=new f(E+D+I+j,k+N-L),d=new f(E+D+I+j,k+N+O+B),m=new f(E+D-R,k+N+O+B)}else c=new f(g,b),h=new f(x,b),d=new f(x,w),m=new f(g,w);var F=o.getLayoutValue("icon-rotate",u,l)*Math.PI/180;if(a){var U=i[t.segment];if(t.y===U.y&&t.x===U.x&&t.segment+1<i.length){var V=i[t.segment+1];F+=Math.atan2(t.y-V.y,t.x-V.x)+Math.PI}else F+=Math.atan2(t.y-U.y,t.x-U.x)}if(F){var q=Math.sin(F),Z=Math.cos(F),W=[Z,-q,q,Z];c=c.matMult(W),h=h.matMult(W),m=m.matMult(W),d=d.matMult(W)}return[new r(new f(t.x,t.y),c,h,m,d,e.image.rect,0,0,p,1/0)]}function o(t,e,n,i,o,s,u,l){for(var c=o.getLayoutValue("text-rotate",u,l)*Math.PI/180,h=o.layout["text-keep-upright"],d=e.positionedGlyphs,m=[],v=0;v<d.length;v++){var y=d[v],_=y.glyph;if(_){var g=_.rect;if(g){var x=(y.x+_.advance/2)*n,b=void 0,w=p;s?(b=[],w=a(b,t,x,i,t.segment,!1),h&&(w=Math.min(w,a(b,t,x,i,t.segment,!0)))):b=[{anchorPoint:new f(t.x,t.y),upsideDown:!1,angle:0,maxScale:1/0,minScale:p}];var M=y.x+_.left,T=y.y-_.top,S=M+g.w,E=T+g.h,A=new f(y.x,_.advance/2),k=new f(M,T),z=new f(S,T),C=new f(M,E),P=new f(S,E);0!==y.angle&&(k._sub(A)._rotate(y.angle)._add(A),z._sub(A)._rotate(y.angle)._add(A),C._sub(A)._rotate(y.angle)._add(A),P._sub(A)._rotate(y.angle)._add(A));for(var L=0;L<b.length;L++){var I=b[L],O=k,R=z,N=C,D=P;if(c){var j=Math.sin(c),B=Math.cos(c),F=[B,-j,j,B];O=O.matMult(F),R=R.matMult(F),N=N.matMult(F),D=D.matMult(F)}var U=Math.max(I.minScale,w),V=(t.angle+(I.upsideDown?Math.PI:0)+2*Math.PI)%(2*Math.PI),q=(I.angle+(I.upsideDown?Math.PI:0)+2*Math.PI)%(2*Math.PI);m.push(new r(I.anchorPoint,O,R,N,D,g,V,q,U,I.maxScale,e.writingMode))}}}}return m}function a(t,e,n,r,i,o){for(var a=n>=0^o,u=Math.abs(n),p=new f(e.x,e.y),d=c(a,r,i),m={anchor:p,end:d,index:i,minScale:l(u,p,d),maxScale:1/0};;){if(s(t,m,a,o),m.minScale<=e.scale)return e.scale;var v=h(m,r,u,a);if(!v)return m.minScale;m=v}}function s(t,e,n,r){var i=Math.atan2(e.end.y-e.anchor.y,e.end.x-e.anchor.x),o=n?i:i+Math.PI;t.push({anchorPoint:e.anchor,upsideDown:r,minScale:e.minScale,maxScale:e.maxScale,angle:(o+2*Math.PI)%(2*Math.PI)})}function u(t,e,n){var r=e.sub(t)._unit();return t.sub(r._mult(n))}function l(t,e,n){var r=e.dist(n);return t/r}function c(t,e,n){return t?e[n+1]:e[n]}function h(t,e,n,r){for(var i=t.end,o=i,a=t.index;o.equals(i);){if(r&&a+2<e.length)a+=1;else{if(r||0===a)return null;a-=1}o=c(r,e,a)}var s=u(i,o,t.anchor.dist(t.end));return{anchor:s,end:o,index:a,minScale:l(n,s,o),maxScale:t.minScale}}var f=t("point-geometry");e.exports={getIconQuads:i,getGlyphQuads:o,SymbolQuad:r};var p=.5},{"point-geometry":26}],171:[function(t,e,n){"use strict";function r(t,e,n,r,i){this.codePoint=t,this.x=e,this.y=n,this.glyph=r||null,this.angle=i}function i(t,e,n,r,i,o,a){this.positionedGlyphs=t,this.text=e,this.top=n,this.bottom=r,this.left=i,this.right=o,this.writingMode=a}function o(t,e){for(var n=[],r=0,i=0,o=e;i<o.length;i+=1){var a=o[i];n.push(t.substring(r,a)),r=a}return r<t.length&&n.push(t.substring(r,t.length)),n}function a(t,e,n,r,a,s,u,l,c,h,d){var m=t.trim();d===b.vertical&&(m=g(m));var v,y=[],_=new i(y,m,c[1],c[1],c[0],c[0],d);return v=x.processBidirectionalText?x.processBidirectionalText(m,f(m,l,n,e)):o(m,f(m,l,n,e)),p(_,e,v,r,a,s,u,c,d,l,h),!!y.length&&_}function s(t,e,n,r){var i=0;for(var o in t){var a=r[t.charCodeAt(o)];a&&(i+=a.advance+e)}var s=Math.max(1,Math.ceil(i/n));return i/s}function u(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function l(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function c(t,e,n,r,i,o){for(var a=null,s=u(e,n,i,o),l=0,c=r;l<c.length;l+=1){var h=c[l],f=e-h.x,p=u(f,n,i,o)+h.badness;p<=s&&(a=h,s=p)}return{index:t,x:e,priorBreak:a,badness:s}}function h(t){return t?h(t.priorBreak).concat(t.index):[]}function f(t,e,n,r){if(!n)return[];if(!t)return[];for(var i=[],o=s(t,e,n,r),a=0,u=0;u<t.length;u++){var f=t.charCodeAt(u),p=r[f];p&&!w[f]&&(a+=p.advance+e),u<t.length-1&&(M[f]||_.charAllowsIdeographicBreaking(f))&&i.push(c(u+1,a,o,i,l(f,t.charCodeAt(u+1)),!1))}return h(c(t.length,a,o,i,0,!0))}function p(t,e,n,i,o,a,s,u,l,c,h){var f=-17,p=0,v=f,y=0,g=t.positionedGlyphs;for(var x in n){var w=n[x].trim();if(w.length){for(var M=g.length,T=0;T<w.length;T++){var S=w.charCodeAt(T),E=e[S];E&&(_.charHasUprightVerticalOrientation(S)&&l!==b.horizontal?(g.push(new r(S,p,0,E,-Math.PI/2)),p+=h+c):(g.push(new r(S,p,v,E,0)),p+=E.advance+c))}if(g.length!==M){var A=p-c;y=Math.max(A,y),d(g,e,M,g.length-1,s)}p=0,v+=i}else v+=i}m(g,s,o,a,y,i,n.length,u);var k=n.length*i;t.top+=-a*k,t.bottom=t.top+k,t.left+=-o*y,t.right=t.left+y}function d(t,e,n,r,i){if(i)for(var o=e[t[r].codePoint].advance,a=(t[r].x+o)*i,s=n;s<=r;s++)t[s].x-=a}function m(t,e,n,r,i,o,a,s){for(var u=(e-n)*i+s[0],l=(-r*a+.5)*o+s[1],c=0;c<t.length;c++)t[c].x+=u,t[c].y+=l}function v(t,e){if(!t||!t.rect)return null;var n=e[0],r=e[1],i=n-t.width/2,o=i+t.width,a=r-t.height/2,s=a+t.height;return new y(t,a,s,i,o)}function y(t,e,n,r,i){this.image=t,this.top=e,this.bottom=n,this.left=r,this.right=i}var _=t("../util/script_detection"),g=t("../util/verticalize_punctuation"),x=t("../source/rtl_text_plugin"),b={horizontal:1,vertical:2};e.exports={shapeText:a,shapeIcon:v,WritingMode:b};var w={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},M={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0}},{"../source/rtl_text_plugin":91,"../util/script_detection":211,"../util/verticalize_punctuation":217}],172:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s,u,l,c){var h,f,p=r*e+n,d=s*o+a;if(c)for(d-=o,f=-1;f<=l;f++,d+=o)for(p=((f+l)%l+r)*e+n,h=-1;h<=u;h++)i[d+h]=t[p+(h+u)%u];else for(f=0;f<l;f++,p+=e,d+=o)for(h=0;h<u;h++)i[d+h]=t[p+h]}var i=t("@mapbox/shelf-pack"),o=t("../util/browser"),a=t("../util/util"),s=t("../util/window"),u=t("../util/evented"),l=function(t){function e(e,n){t.call(this),this.width=e,this.height=n,this.shelfPack=new i(e,n),this.images={},this.data=!1,this.texture=0,this.filter=0,this.pixelRatio=o.devicePixelRatio>1?2:1,this.dirty=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.allocateImage=function(t,e){t/=this.pixelRatio,e/=this.pixelRatio;var n=2,r=t+n+(4-(t+n)%4),i=e+n+(4-(e+n)%4),o=this.shelfPack.packOne(r,i);return o?o:(a.warnOnce("SpriteAtlas out of space."),null)},e.prototype.addImage=function(t,e,n){var r,i,a;if(e instanceof s.HTMLImageElement?(r=e.width,i=e.height,e=o.getImageData(e),a=1):(r=n.width,i=n.height,a=n.pixelRatio||1),ArrayBuffer.isView(e)&&(e=new Uint32Array(e.buffer)),!(e instanceof Uint32Array))return this.fire("error",{
error:new Error("Image provided in an invalid format. Supported formats are HTMLImageElement and ArrayBufferView.")});if(this.images[t])return this.fire("error",{error:new Error("An image with this name already exists.")});var u=this.allocateImage(r,i);if(!u)return this.fire("error",{error:new Error("There is not enough space to add this image.")});var l={rect:u,width:r/a,height:i/a,sdf:!1,pixelRatio:a/this.pixelRatio};this.images[t]=l,this.copy(e,r,u,{pixelRatio:a,x:0,y:0,width:r,height:i},!1),this.fire("data",{dataType:"style"})},e.prototype.removeImage=function(t){var e=this.images[t];return delete this.images[t],e?(this.shelfPack.unref(e.rect),void this.fire("data",{dataType:"style"})):this.fire("error",{error:new Error("No image with this name exists.")})},e.prototype.getImage=function(t,e){if(this.images[t])return this.images[t];if(!this.sprite)return null;var n=this.sprite.getSpritePosition(t);if(!n.width||!n.height)return null;var r=this.allocateImage(n.width,n.height);if(!r)return null;var i={rect:r,width:n.width/n.pixelRatio,height:n.height/n.pixelRatio,sdf:n.sdf,pixelRatio:n.pixelRatio/this.pixelRatio};if(this.images[t]=i,!this.sprite.imgData)return null;var o=new Uint32Array(this.sprite.imgData.buffer);return this.copy(o,this.sprite.width,r,n,e),i},e.prototype.getPosition=function(t,e){var n=this.getImage(t,e),r=n&&n.rect;if(!r)return null;var i=n.width*n.pixelRatio,o=n.height*n.pixelRatio,a=1;return{size:[n.width,n.height],tl:[(r.x+a)/this.width,(r.y+a)/this.height],br:[(r.x+a+i)/this.width,(r.y+a+o)/this.height]}},e.prototype.allocate=function(){var t=this;if(!this.data){var e=Math.floor(this.width*this.pixelRatio),n=Math.floor(this.height*this.pixelRatio);this.data=new Uint32Array(e*n);for(var r=0;r<this.data.length;r++)t.data[r]=0}},e.prototype.copy=function(t,e,n,i,o){this.allocate();var a=this.data,s=1;r(t,e,i.x,i.y,a,this.width*this.pixelRatio,(n.x+s)*this.pixelRatio,(n.y+s)*this.pixelRatio,i.width,i.height,o),this.dirty=!0},e.prototype.setSprite=function(t){t&&this.canvas&&(this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio),this.sprite=t},e.prototype.addIcons=function(t,e){for(var n=this,r=0;r<t.length;r++)n.getImage(t[r]);e(null,this.images)},e.prototype.bind=function(t,e){var n=!1;this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),n=!0);var r=e?t.LINEAR:t.NEAREST;r!==this.filter&&(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r),this.filter=r),this.dirty&&(this.allocate(),n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width*this.pixelRatio,this.height*this.pixelRatio,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width*this.pixelRatio,this.height*this.pixelRatio,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)),this.dirty=!1)},e}(u);e.exports=l},{"../util/browser":195,"../util/evented":203,"../util/util":215,"../util/window":197,"@mapbox/shelf-pack":2}],173:[function(t,e,n){"use strict";var r=t("../source/rtl_text_plugin");e.exports=function(t,e,n,i){var o=e.getLayoutValue("text-transform",n,i);return"uppercase"===o?t=t.toLocaleUpperCase():"lowercase"===o&&(t=t.toLocaleLowerCase()),r.applyArabicShaping&&(t=r.applyArabicShaping(t)),t}},{"../source/rtl_text_plugin":91}],174:[function(t,e,n){"use strict";var r=t("../util/dom"),i=t("point-geometry"),o={scrollZoom:t("./handler/scroll_zoom"),boxZoom:t("./handler/box_zoom"),dragRotate:t("./handler/drag_rotate"),dragPan:t("./handler/drag_pan"),keyboard:t("./handler/keyboard"),doubleClickZoom:t("./handler/dblclick_zoom"),touchZoomRotate:t("./handler/touch_zoom_rotate")};e.exports=function(t,e){function n(t){y("mouseout",t)}function a(e){t.stop(),w=r.mousePos(g,e),y("mousedown",e),b=!0}function s(e){var n=t.dragRotate&&t.dragRotate.isActive();x&&!n&&y("contextmenu",x),x=null,b=!1,y("mouseup",e)}function u(e){if(!(t.dragPan&&t.dragPan.isActive()||t.dragRotate&&t.dragRotate.isActive())){for(var n=e.toElement||e.target;n&&n!==g;)n=n.parentNode;n===g&&y("mousemove",e)}}function l(e){t.stop(),_("touchstart",e),!e.touches||e.touches.length>1||(M?(clearTimeout(M),M=null,y("dblclick",e)):M=setTimeout(p,300))}function c(t){_("touchmove",t)}function h(t){_("touchend",t)}function f(t){_("touchcancel",t)}function p(){M=null}function d(t){var e=r.mousePos(g,t);e.equals(w)&&y("click",t)}function m(t){y("dblclick",t),t.preventDefault()}function v(e){var n=t.dragRotate&&t.dragRotate.isActive();b||n?b&&(x=e):y("contextmenu",e),e.preventDefault()}function y(e,n){var i=r.mousePos(g,n);return t.fire(e,{lngLat:t.unproject(i),point:i,originalEvent:n})}function _(e,n){var o=r.touchPos(g,n),a=o.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new i(0,0));return t.fire(e,{lngLat:t.unproject(a),point:a,lngLats:o.map(function(e){return t.unproject(e)},this),points:o,originalEvent:n})}var g=t.getCanvasContainer(),x=null,b=!1,w=null,M=null;for(var T in o)t[T]=new o[T](t,e),e.interactive&&e[T]&&t[T].enable(e[T]);g.addEventListener("mouseout",n,!1),g.addEventListener("mousedown",a,!1),g.addEventListener("mouseup",s,!1),g.addEventListener("mousemove",u,!1),g.addEventListener("touchstart",l,!1),g.addEventListener("touchend",h,!1),g.addEventListener("touchmove",c,!1),g.addEventListener("touchcancel",f,!1),g.addEventListener("click",d,!1),g.addEventListener("dblclick",m,!1),g.addEventListener("contextmenu",v,!1)}},{"../util/dom":202,"./handler/box_zoom":182,"./handler/dblclick_zoom":183,"./handler/drag_pan":184,"./handler/drag_rotate":185,"./handler/keyboard":186,"./handler/scroll_zoom":187,"./handler/touch_zoom_rotate":188,"point-geometry":26}],175:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../style-spec/util/interpolate"),o=t("../util/browser"),a=t("../geo/lng_lat"),s=t("../geo/lng_lat_bounds"),u=t("point-geometry"),l=t("../util/evented"),c=function(t){function e(e,n){t.call(this),this.moving=!1,this.transform=e,this._bearingSnap=n.bearingSnap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCenter=function(){return this.transform.center},e.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},e.prototype.panBy=function(t,e,n){return t=u.convert(t).mult(-1),this.panTo(this.transform.center,r.extend({offset:t},e),n)},e.prototype.panTo=function(t,e,n){return this.easeTo(r.extend({center:t},e),n)},e.prototype.getZoom=function(){return this.transform.zoom},e.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},e.prototype.zoomTo=function(t,e,n){return this.easeTo(r.extend({zoom:t},e),n)},e.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},e.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},e.prototype.getBearing=function(){return this.transform.bearing},e.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},e.prototype.rotateTo=function(t,e,n){return this.easeTo(r.extend({bearing:t},e),n)},e.prototype.resetNorth=function(t,e){return this.rotateTo(0,r.extend({duration:1e3},t),e),this},e.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},e.prototype.getPitch=function(){return this.transform.pitch},e.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},e.prototype.fitBounds=function(t,e,n){if(e=r.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},e),"number"==typeof e.padding){var i=e.padding;e.padding={top:i,bottom:i,right:i,left:i}}if(!r.deepEqual(Object.keys(e.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"]))return void r.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'");t=s.convert(t);var o=[e.padding.left-e.padding.right,e.padding.top-e.padding.bottom],a=Math.min(e.padding.right,e.padding.left),l=Math.min(e.padding.top,e.padding.bottom);e.offset=[e.offset[0]+o[0],e.offset[1]+o[1]];var c=u.convert(e.offset),h=this.transform,f=h.project(t.getNorthWest()),p=h.project(t.getSouthEast()),d=p.sub(f),m=(h.width-2*a-2*Math.abs(c.x))/d.x,v=(h.height-2*l-2*Math.abs(c.y))/d.y;return v<0||m<0?void r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."):(e.center=h.unproject(f.add(p).div(2)),e.zoom=Math.min(h.scaleZoom(h.scale*Math.min(m,v)),e.maxZoom),e.bearing=0,e.linear?this.easeTo(e,n):this.flyTo(e,n))},e.prototype.jumpTo=function(t,e){this.stop();var n=this.transform,r=!1,i=!1,o=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(r=!0,n.zoom=+t.zoom),"center"in t&&(n.center=a.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(i=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(o=!0,n.pitch=+t.pitch),this.fire("movestart",e).fire("move",e),r&&this.fire("zoomstart",e).fire("zoom",e).fire("zoomend",e),i&&this.fire("rotate",e),o&&this.fire("pitchstart",e).fire("pitch",e).fire("pitchend",e),this.fire("moveend",e)},e.prototype.easeTo=function(t,e){var n=this;this.stop(),t=r.extend({offset:[0,0],duration:500,easing:r.ease},t),t.animate===!1&&(t.duration=0),t.smoothEasing&&0!==t.duration&&(t.easing=this._smoothOutEasing(t.duration));var o=this.transform,s=this.getZoom(),l=this.getBearing(),c=this.getPitch(),h="zoom"in t?+t.zoom:s,f="bearing"in t?this._normalizeBearing(t.bearing,l):l,p="pitch"in t?+t.pitch:c,d=o.centerPoint.add(u.convert(t.offset)),m=o.pointLocation(d),v=a.convert(t.center||m);this._normalizeCenter(v);var y,_,g=o.project(m),x=o.project(v).sub(g),b=o.zoomScale(h-s);return t.around&&(y=a.convert(t.around),_=o.locationPoint(y)),this.zooming=h!==s,this.rotating=l!==f,this.pitching=p!==c,this._prepareEase(e,t.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(t){if(this.zooming&&(o.zoom=i(s,h,t)),this.rotating&&(o.bearing=i(l,f,t)),this.pitching&&(o.pitch=i(c,p,t)),y)o.setLocationAtPoint(y,_);else{var n=o.zoomScale(o.zoom-s),r=h>s?Math.min(2,b):Math.max(.5,b),a=Math.pow(r,1-t),u=o.unproject(g.add(x.mult(t*a)).mult(n));o.setLocationAtPoint(o.renderWorldCopies?u.wrap():u,d)}this._fireMoveEvents(e)},function(){t.delayEndEvents?n._onEaseEnd=setTimeout(function(){return n._easeToEnd(e)},t.delayEndEvents):n._easeToEnd(e)},t),this},e.prototype._prepareEase=function(t,e){this.moving=!0,e||this.fire("movestart",t),this.zooming&&this.fire("zoomstart",t),this.pitching&&this.fire("pitchstart",t)},e.prototype._fireMoveEvents=function(t){this.fire("move",t),this.zooming&&this.fire("zoom",t),this.rotating&&this.fire("rotate",t),this.pitching&&this.fire("pitch",t)},e.prototype._easeToEnd=function(t){var e=this.zooming,n=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,e&&this.fire("zoomend",t),n&&this.fire("pitchend",t),this.fire("moveend",t)},e.prototype.flyTo=function(t,e){function n(t){var e=(E*E-S*S+(t?-1:1)*C*C*A*A)/(2*(t?E:S)*C*A);return Math.log(Math.sqrt(e*e+1)-e)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function s(t){return(Math.exp(t)+Math.exp(-t))/2}function l(t){return o(t)/s(t)}var c=this;this.stop(),t=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},t);var h=this.transform,f=this.getZoom(),p=this.getBearing(),d=this.getPitch(),m="zoom"in t?+t.zoom:f,v="bearing"in t?this._normalizeBearing(t.bearing,p):p,y="pitch"in t?+t.pitch:d,_=h.zoomScale(m-f),g=h.centerPoint.add(u.convert(t.offset)),x=h.pointLocation(g),b=a.convert(t.center||x);this._normalizeCenter(b);var w=h.project(x),M=h.project(b).sub(w),T=t.curve,S=Math.max(h.width,h.height),E=S/_,A=M.mag();if("minZoom"in t){var k=r.clamp(Math.min(t.minZoom,f,m),h.minZoom,h.maxZoom),z=S/h.zoomScale(k-f);T=Math.sqrt(z/A*2)}var C=T*T,P=n(0),L=function(t){return s(P)/s(P+T*t)},I=function(t){return S*((s(P)*l(P+T*t)-o(P))/C)/A},O=(n(1)-P)/T;if(Math.abs(A)<1e-6){if(Math.abs(S-E)<1e-6)return this.easeTo(t,e);var R=E<S?-1:1;O=Math.abs(Math.log(E/S))/T,I=function(){return 0},L=function(t){return Math.exp(R*T*t)}}if("duration"in t)t.duration=+t.duration;else{var N="screenSpeed"in t?+t.screenSpeed/T:+t.speed;t.duration=1e3*O/N}return this.zooming=!0,this.rotating=p!==v,this.pitching=y!==d,this._prepareEase(e,!1),this._ease(function(t){var n=t*O,r=1/L(n);h.zoom=f+h.scaleZoom(r),this.rotating&&(h.bearing=i(p,v,t)),this.pitching&&(h.pitch=i(d,y,t));var o=h.unproject(w.add(M.mult(I(n))).mult(r));h.setLocationAtPoint(h.renderWorldCopies?o.wrap():o,g),this._fireMoveEvents(e)},function(){return c._easeToEnd(e)},t),this},e.prototype.isEasing=function(){return!!this._abortFn},e.prototype.isMoving=function(){return this.moving},e.prototype.stop=function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},e.prototype._ease=function(t,e,n){this._finishFn=e,this._abortFn=o.timed(function(e){t.call(this,n.easing(e)),1===e&&this._finishEase()},n.animate===!1?0:n.duration,this)},e.prototype._finishEase=function(){delete this._abortFn;var t=this._finishFn;delete this._finishFn,t.call(this)},e.prototype._normalizeBearing=function(t,e){t=r.wrap(t,-180,180);var n=Math.abs(t-e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t},e.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},e.prototype._smoothOutEasing=function(t){var e=r.ease;if(this._prevEase){var n=this._prevEase,i=(Date.now()-n.start)/n.duration,o=n.easing(i+.01)-n.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);e=r.bezier(a,s,.25,1)}return this._prevEase={start:(new Date).getTime(),duration:t,easing:e},e},e}(l);e.exports=c},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../style-spec/util/interpolate":123,"../util/browser":195,"../util/evented":203,"../util/util":215,"point-geometry":26}],176:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=function(t){this.options=t,i.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};o.prototype.getDefaultPosition=function(){return"bottom-right"},o.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},o.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},o.prototype._updateEditLink=function(){if(this._editLink||(this._editLink=this._container.querySelector(".mapboxgl-improve-map")),this._editLink){var t=this._map.getCenter();this._editLink.href="https://www.mapbox.com/map-feedback/#/"+t.lng+"/"+t.lat+"/"+Math.round(this._map.getZoom()+1)}},o.prototype._updateData=function(t){t&&"metadata"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},o.prototype._updateAttributions=function(){if(this._map.style){var t=[],e=this._map.style.sourceCaches;for(var n in e){var r=e[n].getSource();r.attribution&&t.indexOf(r.attribution)<0&&t.push(r.attribution)}t.sort(function(t,e){return t.length-e.length}),t=t.filter(function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}),this._container.innerHTML=t.join(" | "),this._editLink=null}},o.prototype._updateCompact=function(){var t=this._map.getCanvasContainer().offsetWidth<=640;this._container.classList[t?"add":"remove"]("mapboxgl-compact")},e.exports=o},{"../../util/dom":202,"../../util/util":215}],177:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/window"),a=function(){this._fullscreen=!1,i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.document&&(this._fullscreenchange="MSFullscreenChange")};a.prototype.onAdd=function(t){var e="mapboxgl-ctrl",n=this._container=r.create("div",e+" mapboxgl-ctrl-group"),i=this._fullscreenButton=r.create("button",e+"-icon "+e+"-fullscreen",this._container);return i.setAttribute("aria-label","Toggle fullscreen"),i.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),this._mapContainer=t.getContainer(),o.document.addEventListener(this._fullscreenchange,this._changeIcon),n},a.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map=null,o.document.removeEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._isFullscreen=function(){return this._fullscreen},a.prototype._changeIcon=function(){var t=o.document.fullscreenElement||o.document.mozFullScreenElement||o.document.webkitFullscreenElement||o.document.msFullscreenElement;if(t===this._mapContainer!==this._fullscreen){this._fullscreen=!this._fullscreen;var e="mapboxgl-ctrl";this._fullscreenButton.classList.toggle(e+"-shrink"),this._fullscreenButton.classList.toggle(e+"-fullscreen")}},a.prototype._onClickFullscreen=function(){this._isFullscreen()?o.document.exitFullscreen?o.document.exitFullscreen():o.document.mozCancelFullScreen?o.document.mozCancelFullScreen():o.document.msExitFullscreen?o.document.msExitFullscreen():o.document.webkitCancelFullScreen&&o.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()},e.exports=a},{"../../util/dom":202,"../../util/util":215,"../../util/window":197}],178:[function(t,e,n){"use strict";function r(t){void 0!==i?t(i):void 0!==s.navigator.permissions?s.navigator.permissions.query({name:"geolocation"}).then(function(e){i="denied"!==e.state,t(i)}):(i=!!s.navigator.geolocation,t(i))}var i,o=t("../../util/evented"),a=t("../../util/dom"),s=t("../../util/window"),u=t("../../util/util"),l={enableHighAccuracy:!1,timeout:6e3},c="mapboxgl-ctrl",h=function(t){function e(e){t.call(this),this.options=e||{},u.bindAll(["_onSuccess","_onError","_finish","_setupUI"],this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onAdd=function(t){return this._map=t,this._container=a.create("div",c+" "+c+"-group"),r(this._setupUI),this._container},e.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map=void 0},e.prototype._onSuccess=function(t){this._map.jumpTo({center:[t.coords.longitude,t.coords.latitude],zoom:17,bearing:0,pitch:0}),this.fire("geolocate",t),this._finish()},e.prototype._onError=function(t){this.fire("error",t),this._finish()},e.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},e.prototype._setupUI=function(t){t!==!1&&(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=a.create("button",c+"-icon "+c+"-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.watchPosition&&this._geolocateButton.setAttribute("aria-pressed",!1),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)))},e.prototype._onClickGeolocate=function(){var t=u.extend(l,this.options&&this.options.positionOptions||{});this.options.watchPosition?void 0!==this._geolocationWatchID?(this._geolocateButton.classList.remove("mapboxgl-watching"),this._geolocateButton.setAttribute("aria-pressed",!1),s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0):(this._geolocateButton.classList.add("mapboxgl-watching"),this._geolocateButton.setAttribute("aria-pressed",!0),this._geolocationWatchID=s.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)):(s.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,t),this._timeoutId=setTimeout(this._finish,1e4))},e}(o);e.exports=h},{"../../util/dom":202,"../../util/evented":203,"../../util/util":215,"../../util/window":197}],179:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=function(){i.bindAll(["_updateLogo"],this)};o.prototype.onAdd=function(t){return this._map=t,this._container=r.create("div","mapboxgl-ctrl"),this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container},o.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("sourcedata",this._updateLogo)},o.prototype.getDefaultPosition=function(){return"bottom-left"},o.prototype._updateLogo=function(t){if(t&&"metadata"===t.sourceDataType)if(!this._container.childNodes.length&&this._logoRequired()){var e=r.create("a","mapboxgl-ctrl-logo");e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(e),this._map.off("data",this._updateLogo)}else this._container.childNodes.length&&!this._logoRequired()&&this.onRemove()},o.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t){var n=t[e].getSource();if(n.mapbox_logo)return!0}return!1}},e.exports=o},{"../../util/dom":202,"../../util/util":215}],180:[function(t,e,n){"use strict";function r(t){return new o.MouseEvent(t.type,{button:2,buttons:2,bubbles:!0,cancelable:!0,detail:t.detail,view:t.view,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,movementX:t.movementX,movementY:t.movementY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey})}var i=t("../../util/dom"),o=t("../../util/window"),a=t("../../util/util"),s="mapboxgl-ctrl",u=function(){a.bindAll(["_rotateCompassArrow"],this)};u.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},u.prototype.onAdd=function(t){return this._map=t,this._container=i.create("div",s+" "+s+"-group",t.getContainer()),this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._zoomInButton=this._createButton(s+"-icon "+s+"-zoom-in","Zoom In",t.zoomIn.bind(t)),this._zoomOutButton=this._createButton(s+"-icon "+s+"-zoom-out","Zoom Out",t.zoomOut.bind(t)),this._compass=this._createButton(s+"-icon "+s+"-compass","Reset North",t.resetNorth.bind(t)),this._compassArrow=i.create("span",s+"-compass-arrow",this._compass),this._compass.addEventListener("mousedown",this._onCompassDown.bind(this)),this._onCompassMove=this._onCompassMove.bind(this),this._onCompassUp=this._onCompassUp.bind(this),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._container},u.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("rotate",this._rotateCompassArrow),this._map=void 0},u.prototype._onContextMenu=function(t){t.preventDefault()},u.prototype._onCompassDown=function(t){0===t.button&&(i.disableDrag(),o.document.addEventListener("mousemove",this._onCompassMove),o.document.addEventListener("mouseup",this._onCompassUp),this._map.getCanvasContainer().dispatchEvent(r(t)),t.stopPropagation())},u.prototype._onCompassMove=function(t){0===t.button&&(this._map.getCanvasContainer().dispatchEvent(r(t)),t.stopPropagation())},u.prototype._onCompassUp=function(t){0===t.button&&(o.document.removeEventListener("mousemove",this._onCompassMove),o.document.removeEventListener("mouseup",this._onCompassUp),i.enableDrag(),this._map.getCanvasContainer().dispatchEvent(r(t)),t.stopPropagation())},u.prototype._createButton=function(t,e,n){var r=i.create("button",t,this._container);return r.type="button",r.setAttribute("aria-label",e),r.addEventListener("click",function(){n()}),r},e.exports=u},{"../../util/dom":202,"../../util/util":215,"../../util/window":197}],181:[function(t,e,n){"use strict";function r(t,e,n){var r=n&&n.maxWidth||100,a=t._container.clientHeight/2,s=o(t.unproject([0,a]),t.unproject([r,a]));if(n&&"imperial"===n.unit){var u=3.2808*s;if(u>5280){var l=u/5280;i(e,r,l,"mi")}else i(e,r,u,"ft")}else i(e,r,s,"m")}function i(t,e,n,r){var i=a(n),o=i/n;"m"===r&&i>=1e3&&(i/=1e3,r="km"),t.style.width=e*o+"px",t.innerHTML=i+r}function o(t,e){var n=6371e3,r=Math.PI/180,i=t.lat*r,o=e.lat*r,a=Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos((e.lng-t.lng)*r),s=n*Math.acos(Math.min(a,1));return s}function a(t){var e=Math.pow(10,(""+Math.floor(t)).length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}var s=t("../../util/dom"),u=t("../../util/util"),l=function(t){this.options=t,u.bindAll(["_onMove"],this)};l.prototype.getDefaultPosition=function(){return"bottom-left"},l.prototype._onMove=function(){r(this._map,this._container,this.options)},l.prototype.onAdd=function(t){return this._map=t,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},l.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("move",this._onMove),this._map=void 0},e.exports=l},{"../../util/dom":202,"../../util/util":215}],182:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../geo/lng_lat_bounds"),o=t("../../util/util"),a=t("../../util/window"),s=function(t){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),o.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._map.dragPan&&this._map.dragPan.disable(),this._el.addEventListener("mousedown",this._onMouseDown,!1),this._map.dragPan&&this._map.dragPan.enable(),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},s.prototype._onMouseDown=function(t){t.shiftKey&&0===t.button&&(a.document.addEventListener("mousemove",this._onMouseMove,!1),a.document.addEventListener("keydown",this._onKeyDown,!1),a.document.addEventListener("mouseup",this._onMouseUp,!1),r.disableDrag(),this._startPos=r.mousePos(this._el,t),this._active=!0)},s.prototype._onMouseMove=function(t){var e=this._startPos,n=r.mousePos(this._el,t);this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(e.x,n.x),o=Math.max(e.x,n.x),a=Math.min(e.y,n.y),s=Math.max(e.y,n.y);r.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"},s.prototype._onMouseUp=function(t){if(0===t.button){var e=this._startPos,n=r.mousePos(this._el,t),o=(new i).extend(this._map.unproject(e)).extend(this._map.unproject(n));this._finish(),e.x===n.x&&e.y===n.y?this._fireEvent("boxzoomcancel",t):this._map.fitBounds(o,{linear:!0}).fire("boxzoomend",{originalEvent:t,boxZoomBounds:o})}},s.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},s.prototype._finish=function(){this._active=!1,a.document.removeEventListener("mousemove",this._onMouseMove,!1),a.document.removeEventListener("keydown",this._onKeyDown,!1),a.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.parentNode.removeChild(this._box),this._box=null),r.enableDrag()},s.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},e.exports=s},{"../../geo/lng_lat_bounds":63,"../../util/dom":202,"../../util/util":215,"../../util/window":197}],183:[function(t,e,n){"use strict";var r=function(t){this._map=t,this._onDblClick=this._onDblClick.bind(this)};r.prototype.isEnabled=function(){return!!this._enabled},r.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},r.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},r.prototype._onDblClick=function(t){this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},e.exports=r},{}],184:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/window"),a=.3,s=i.bezier(0,0,a,1),u=1400,l=2500,c=function(t){this._map=t,this._el=t.getCanvasContainer(),i.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.isActive=function(){return!!this._active},c.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},c.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},c.prototype._onDown=function(t){this._ignoreEvent(t)||this.isActive()||(t.touches?(o.document.addEventListener("touchmove",this._onMove),o.document.addEventListener("touchend",this._onTouchEnd)):(o.document.addEventListener("mousemove",this._onMove),o.document.addEventListener("mouseup",this._onMouseUp)),o.addEventListener("blur",this._onMouseUp),this._active=!1,this._startPos=this._pos=r.mousePos(this._el,t),this._inertia=[[Date.now(),this._pos]])},c.prototype._onMove=function(t){if(!this._ignoreEvent(t)){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",t),this._fireEvent("movestart",t));var e=r.mousePos(this._el,t),n=this._map;n.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),e]),n.transform.setLocationAtPoint(n.transform.pointLocation(this._pos),e),this._fireEvent("drag",t),this._fireEvent("move",t),this._pos=e,t.preventDefault()}},c.prototype._onUp=function(t){var e=this;if(this.isActive()){this._active=!1,this._fireEvent("dragend",t),this._drainInertiaBuffer();var n=function(){e._map.moving=!1,e._fireEvent("moveend",t)},r=this._inertia;if(r.length<2)return void n();var i=r[r.length-1],o=r[0],c=i[1].sub(o[1]),h=(i[0]-o[0])/1e3;if(0===h||i[1].equals(o[1]))return void n();var f=c.mult(a/h),p=f.mag();p>u&&(p=u,f._unit()._mult(p));var d=p/(l*a),m=f.mult(-d/2);this._map.panBy(m,{duration:1e3*d,easing:s,noMoveStart:!0},{originalEvent:t})}},c.prototype._onMouseUp=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener("mousemove",this._onMove),o.document.removeEventListener("mouseup",this._onMouseUp),o.removeEventListener("blur",this._onMouseUp))},c.prototype._onTouchEnd=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onTouchEnd))},c.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},c.prototype._ignoreEvent=function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragRotate&&e.dragRotate.isActive())return!0;if(t.touches)return t.touches.length>1;if(t.ctrlKey)return!0;var n=1,r=0;return"mousemove"===t.type?t.buttons&0===n:t.button&&t.button!==r},c.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now(),n=160;t.length>0&&e-t[0][0]>n;)t.shift();
},e.exports=c},{"../../util/dom":202,"../../util/util":215,"../../util/window":197}],185:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/window"),a=.25,s=i.bezier(0,0,a,1),u=180,l=720,c=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._bearingSnap=e.bearingSnap,this._pitchWithRotate=e.pitchWithRotate!==!1,i.bindAll(["_onDown","_onMove","_onUp"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.isActive=function(){return!!this._active},c.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},c.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},c.prototype._onDown=function(t){this._ignoreEvent(t)||this.isActive()||(o.document.addEventListener("mousemove",this._onMove),o.document.addEventListener("mouseup",this._onUp),o.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=r.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault())},c.prototype._onMove=function(t){if(!this._ignoreEvent(t)){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t));var e=this._map;e.stop();var n=this._pos,i=r.mousePos(this._el,t),o=.8*(n.x-i.x),a=(n.y-i.y)*-.5,s=e.getBearing()-o,u=e.getPitch()-a,l=this._inertia,c=l[l.length-1];this._drainInertiaBuffer(),l.push([Date.now(),e._normalizeBearing(s,c[1])]),e.transform.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",t),e.transform.pitch=u),this._fireEvent("rotate",t),this._fireEvent("move",t),this._pos=i}},c.prototype._onUp=function(t){var e=this;if(!this._ignoreEvent(t)&&(o.document.removeEventListener("mousemove",this._onMove),o.document.removeEventListener("mouseup",this._onUp),o.removeEventListener("blur",this._onUp),this.isActive())){this._active=!1,this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,c=function(){Math.abs(r)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):(e._map.moving=!1,e._fireEvent("moveend",t)),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(i.length<2)return void c();var h=i[0],f=i[i.length-1],p=i[i.length-2],d=n._normalizeBearing(r,p[1]),m=f[1]-h[1],v=m<0?-1:1,y=(f[0]-h[0])/1e3;if(0===m||0===y)return void c();var _=Math.abs(m*(a/y));_>u&&(_=u);var g=_/(l*a),x=v*_*(g/2);d+=x,Math.abs(n._normalizeBearing(d,0))<this._bearingSnap&&(d=n._normalizeBearing(0,d)),n.rotateTo(d,{duration:1e3*g,easing:s,noMoveStart:!0},{originalEvent:t})}},c.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},c.prototype._ignoreEvent=function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragPan&&e.dragPan.isActive())return!0;if(t.touches)return t.touches.length>1;var n=t.ctrlKey?1:2,r=t.ctrlKey?0:2,i=t.button;return"undefined"!=typeof InstallTrigger&&2===t.button&&t.ctrlKey&&o.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(i=0),"mousemove"===t.type?t.buttons&0===n:!this.isActive()&&i!==r},c.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now(),n=160;t.length>0&&e-t[0][0]>n;)t.shift()},e.exports=c},{"../../util/dom":202,"../../util/util":215,"../../util/window":197}],186:[function(t,e,n){"use strict";function r(t){return t*(2-t)}var i=100,o=15,a=10,s=function(t){this._map=t,this._el=t.getCanvasContainer(),this._onKeyDown=this._onKeyDown.bind(this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},s.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,s=0,u=0,l=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),u=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),u=1);break;case 38:t.shiftKey?s=1:(t.preventDefault(),l=-1);break;case 40:t.shiftKey?s=-1:(l=1,t.preventDefault());break;default:return}var c=this._map,h=c.getZoom(),f={duration:300,delayEndEvents:500,easing:r,zoom:e?Math.round(h)+e*(t.shiftKey?2:1):h,bearing:c.getBearing()+n*o,pitch:c.getPitch()+s*a,offset:[-u*i,-l*i],center:c.getCenter()};c.easeTo(f,{originalEvent:t})}},e.exports=s},{}],187:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/browser"),a=t("../../util/window"),s=a.navigator.userAgent.toLowerCase(),u=s.indexOf("firefox")!==-1,l=s.indexOf("safari")!==-1&&s.indexOf("chrom")===-1,c=function(t){this._map=t,this._el=t.getCanvasContainer(),i.bindAll(["_onWheel","_onTimeout"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.enable=function(t){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},c.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},c.prototype._onWheel=function(t){var e;"wheel"===t.type?(e=t.deltaY,u&&t.deltaMode===a.WheelEvent.DOM_DELTA_PIXEL&&(e/=o.devicePixelRatio),t.deltaMode===a.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"===t.type&&(e=-t.wheelDeltaY,l&&(e/=3));var n=o.now(),i=n-(this._time||0);this._pos=r.mousePos(this._el,t),this._time=n,0!==e&&e%4.000244140625===0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(i*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&this._zoom(-e,t),t.preventDefault()},c.prototype._onTimeout=function(){this._type="wheel",this._zoom(-this._lastValue)},c.prototype._zoom=function(t,e){if(0!==t){var n=this._map,r=2/(1+Math.exp(-Math.abs(t/100)));t<0&&0!==r&&(r=1/r);var i=n.ease?n.ease.to:n.transform.scale,o=n.transform.scaleZoom(i*r);n.zoomTo(o,{duration:"wheel"===this._type?200:0,around:this._aroundCenter?n.getCenter():n.unproject(this._pos),delayEndEvents:200,smoothEasing:!0},{originalEvent:e})}},e.exports=c},{"../../util/browser":195,"../../util/dom":202,"../../util/util":215,"../../util/window":197}],188:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/window"),a=.15,s=i.bezier(0,0,a,1),u=12,l=2.5,c=.15,h=4,f=function(t){this._map=t,this._el=t.getCanvasContainer(),i.bindAll(["_onStart","_onMove","_onEnd"],this)};f.prototype.isEnabled=function(){return!!this._enabled},f.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},f.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},f.prototype.disableRotation=function(){this._rotationDisabled=!0},f.prototype.enableRotation=function(){this._rotationDisabled=!1},f.prototype._onStart=function(t){if(2===t.touches.length){var e=r.mousePos(this._el,t.touches[0]),n=r.mousePos(this._el,t.touches[1]);this._startVec=e.sub(n),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],o.document.addEventListener("touchmove",this._onMove,!1),o.document.addEventListener("touchend",this._onEnd,!1)}},f.prototype._onMove=function(t){if(2===t.touches.length){var e=r.mousePos(this._el,t.touches[0]),n=r.mousePos(this._el,t.touches[1]),i=e.add(n).div(2),o=e.sub(n),a=o.mag()/this._startVec.mag(),s=this._rotationDisabled?0:180*o.angleWith(this._startVec)/Math.PI,u=this._map;if(this._gestureIntent){var l={duration:0,around:u.unproject(i)};"rotate"===this._gestureIntent&&(l.bearing=this._startBearing+s),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(l.zoom=u.transform.scaleZoom(this._startScale*a)),u.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),a,i]),u.easeTo(l,{originalEvent:t})}else{var f=Math.abs(1-a)>c,p=Math.abs(s)>h;p?this._gestureIntent="rotate":f&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=o,this._startScale=u.transform.scale,this._startBearing=u.transform.bearing)}t.preventDefault()}},f.prototype._onEnd=function(t){o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var e=this._inertia,n=this._map;if(e.length<2)return void n.snapToNorth({},{originalEvent:t});var r=e[e.length-1],i=e[0],c=n.transform.scaleZoom(this._startScale*r[1]),h=n.transform.scaleZoom(this._startScale*i[1]),f=c-h,p=(r[0]-i[0])/1e3,d=r[2];if(0===p||c===h)return void n.snapToNorth({},{originalEvent:t});var m=f*a/p;Math.abs(m)>l&&(m=m>0?l:-l);var v=1e3*Math.abs(m/(u*a)),y=c+m*v/2e3;y<0&&(y=0),n.easeTo({zoom:y,duration:v,easing:s,around:this._aroundCenter?n.getCenter():n.unproject(d)},{originalEvent:t})},f.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now(),n=160;t.length>2&&e-t[0][0]>n;)t.shift()},e.exports=f},{"../../util/dom":202,"../../util/util":215,"../../util/window":197}],189:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/window"),o=function(){r.bindAll(["_onHashChange","_updateHash"],this)};o.prototype.addTo=function(t){return this._map=t,i.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},o.prototype.remove=function(){return i.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},o.prototype._onHashChange=function(){var t=i.location.hash.replace("#","").split("/");return t.length>=3&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},o.prototype._updateHash=function(){var t=this._map.getCenter(),e=this._map.getZoom(),n=this._map.getBearing(),r=this._map.getPitch(),o=Math.max(0,Math.ceil(Math.log(e)/Math.LN2)),a="#"+Math.round(100*e)/100+"/"+t.lat.toFixed(o)+"/"+t.lng.toFixed(o);(n||r)&&(a+="/"+Math.round(10*n)/10),r&&(a+="/"+Math.round(r)),i.history.replaceState("","",a)},e.exports=o},{"../util/util":215,"../util/window":197}],190:[function(t,e,n){"use strict";function r(t){t.parentNode&&t.parentNode.removeChild(t)}var i=t("../util/util"),o=t("../util/browser"),a=t("../util/window"),s=t("../util/dom"),u=t("../util/ajax"),l=t("../style/style"),c=t("../style/animation_loop"),h=t("../render/painter"),f=t("../geo/transform"),p=t("./hash"),d=t("./bind_handlers"),m=t("./camera"),v=t("../geo/lng_lat"),y=t("../geo/lng_lat_bounds"),_=t("point-geometry"),g=t("./control/attribution_control"),x=t("./control/logo_control"),b=t("mapbox-gl-supported"),w=0,M=22,T={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:w,maxZoom:M,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0},S=function(t){function e(e){var n=this;if(e=i.extend({},T,e),null!=e.minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var r=new f(e.minZoom,e.maxZoom,e.renderWorldCopies);if(t.call(this,r,e),this._interactive=e.interactive,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,"string"==typeof e.container){if(this._container=a.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else this._container=e.container;this.animationLoop=new c,e.maxBounds&&this.setMaxBounds(e.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),this.on("moveend",function(){n.animationLoop.set(300),n._rerender()}),"undefined"!=typeof a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1)),d(this,e),this._hash=e.hash&&(new p).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),this._classes=[],this.resize(),e.classes&&this.setClasses(e.classes),e.style&&this.setStyle(e.style),e.attributionControl&&this.addControl(new g),this.addControl(new x,e.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update(this._classes,{transition:!1})}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return e.prototype.addControl=function(t,e){void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right");var n=t.onAdd(this),r=this._controlPositions[e];return e.indexOf("bottom")!==-1?r.insertBefore(n,r.firstChild):r.appendChild(n),this},e.prototype.removeControl=function(t){return t.onRemove(this),this},e.prototype.addClass=function(t,e){return i.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes.indexOf(t)>=0||""===t?this:(this._classes.push(t),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0))},e.prototype.removeClass=function(t,e){i.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");var n=this._classes.indexOf(t);return n<0||""===t?this:(this._classes.splice(n,1),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0))},e.prototype.setClasses=function(t,e){i.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");for(var n={},r=0;r<t.length;r++)""!==t[r]&&(n[t[r]]=!0);return this._classes=Object.keys(n),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0)},e.prototype.hasClass=function(t){return i.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes.indexOf(t)>=0},e.prototype.getClasses=function(){return i.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes},e.prototype.resize=function(){var t=this._containerDimensions(),e=t[0],n=t[1];return this._resizeCanvas(e,n),this.transform.resize(e,n),this.painter.resize(e,n),this.fire("movestart").fire("move").fire("resize").fire("moveend")},e.prototype.getBounds=function(){var t=new y(this.transform.pointLocation(new _(0,this.transform.height)),this.transform.pointLocation(new _(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(t.extend(this.transform.pointLocation(new _(this.transform.size.x,0))),t.extend(this.transform.pointLocation(new _(0,this.transform.size.y)))),t},e.prototype.setMaxBounds=function(t){if(t){var e=y.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()}else null!==t&&void 0!==t||(this.transform.lngRange=[],this.transform.latRange=[],this._update());return this},e.prototype.setMinZoom=function(t){if(t=null===t||void 0===t?w:t,t>=w&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between "+w+" and the current maxZoom, inclusive")},e.prototype.getMinZoom=function(){return this.transform.minZoom},e.prototype.setMaxZoom=function(t){if(t=null===t||void 0===t?M:t,t>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},e.prototype.getMaxZoom=function(){return this.transform.maxZoom},e.prototype.project=function(t){return this.transform.locationPoint(v.convert(t))},e.prototype.unproject=function(t){return this.transform.pointLocation(_.convert(t))},e.prototype.on=function(e,n,r){var o=this;if(void 0===r)return t.prototype.on.call(this,e,n);var a=function(){if("mouseenter"===e||"mouseover"===e){var t=!1,a=function(a){var s=o.queryRenderedFeatures(a.point,{layers:[n]});s.length?t||(t=!0,r.call(o,i.extend({features:s},a,{type:e}))):t=!1},s=function(){t=!1};return{layer:n,listener:r,delegates:{mousemove:a,mouseout:s}}}if("mouseleave"===e||"mouseout"===e){var u=!1,l=function(t){var a=o.queryRenderedFeatures(t.point,{layers:[n]});a.length?u=!0:u&&(u=!1,r.call(o,i.extend({},t,{type:e})))},c=function(t){u&&(u=!1,r.call(o,i.extend({},t,{type:e})))};return{layer:n,listener:r,delegates:{mousemove:l,mouseout:c}}}var h=function(t){var e=o.queryRenderedFeatures(t.point,{layers:[n]});e.length&&r.call(o,i.extend({features:e},t))};return{layer:n,listener:r,delegates:(f={},f[e]=h,f)};var f}();this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(a);for(var s in a.delegates)o.on(s,a.delegates[s]);return this},e.prototype.off=function(e,n,r){var i=this;if(void 0===r)return t.prototype.off.call(this,e,n);if(this._delegatedListeners&&this._delegatedListeners[e])for(var o=this._delegatedListeners[e],a=0;a<o.length;a++){var s=o[a];if(s.layer===n&&s.listener===r){for(var u in s.delegates)i.off(u,s.delegates[u]);return o.splice(a,1),i}}},e.prototype.queryRenderedFeatures=function(){function t(t){return t instanceof _||Array.isArray(t)}var e,n={};return 2===arguments.length?(e=arguments[0],n=arguments[1]):1===arguments.length&&t(arguments[0])?e=arguments[0]:1===arguments.length&&(n=arguments[0]),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(e),n,this.transform.zoom,this.transform.angle):[]},e.prototype._makeQueryGeometry=function(t){var e=this;void 0===t&&(t=[_.convert([0,0]),_.convert([this.transform.width,this.transform.height])]);var n,r=t instanceof _||"number"==typeof t[0];if(r){var i=_.convert(t);n=[i]}else{var o=[_.convert(t[0]),_.convert(t[1])];n=[o[0],new _(o[1].x,o[0].y),o[1],new _(o[0].x,o[1].y),o[0]]}return n=n.map(function(t){return e.transform.pointCoordinate(t)})},e.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},e.prototype.setStyle=function(t,e){var n=(!e||e.diff!==!1)&&this.style&&t&&!(t instanceof l)&&"string"!=typeof t;if(n)try{return this.style.setState(t)&&this._update(!0),this}catch(t){i.warnOnce("Unable to perform style diff: "+(t.message||t.error||t)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement)),t?(t instanceof l?this.style=t:this.style=new l(t,this),this.style.setEventedParent(this,{style:this.style}),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this):(this.style=null,this)},e.prototype.getStyle=function(){if(this.style)return this.style.serialize()},e.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},e.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},e.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];return void 0===e?void this.fire("error",{error:new Error("There is no source with ID '"+t+"'")}):e.loaded()},e.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e],r=n._tiles;for(var i in r){var o=r[i];if("loaded"!==o.state&&"errored"!==o.state)return!1}}return!0},e.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},e.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},e.prototype.getSource=function(t){return this.style.getSource(t)},e.prototype.addImage=function(t,e,n){this.style.spriteAtlas.addImage(t,e,n)},e.prototype.removeImage=function(t){this.style.spriteAtlas.removeImage(t)},e.prototype.loadImage=function(t,e){u.getImage(t,e)},e.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},e.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},e.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},e.prototype.getLayer=function(t){return this.style.getLayer(t)},e.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},e.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0),this},e.prototype.getFilter=function(t){return this.style.getFilter(t)},e.prototype.setPaintProperty=function(t,e,n,r){return this.style.setPaintProperty(t,e,n,r),this._update(!0),this},e.prototype.getPaintProperty=function(t,e,n){return this.style.getPaintProperty(t,e,n)},e.prototype.setLayoutProperty=function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0),this},e.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},e.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},e.prototype.getLight=function(){return this.style.getLight()},e.prototype.getContainer=function(){return this._container},e.prototype.getCanvasContainer=function(){return this._canvasContainer},e.prototype.getCanvas=function(){return this._canvas},e.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},e.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map");var e=this._canvasContainer=s.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=s.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",0),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=s.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){i[t]=s.create("div","mapboxgl-ctrl-"+t,r)})},e.prototype._resizeCanvas=function(t,e){var n=a.devicePixelRatio||1;this._canvas.width=n*t,this._canvas.height=n*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},e.prototype._setupPainter=function(){var t=i.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},b.webGLContextAttributes),e=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);return e?void(this.painter=new h(e,this.transform)):void this.fire("error",{error:new Error("Failed to initialize WebGL")})},e.prototype._contextLost=function(t){t.preventDefault(),this._frameId&&o.cancelFrame(this._frameId),this.fire("webglcontextlost",{originalEvent:t})},e.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:t})},e.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},e.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender(),this):this},e.prototype._render=function(){return this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(this._classes,this._classOptions),this._classOptions=null,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty)&&this._rerender(),this},e.prototype.remove=function(){this._hash&&this._hash.remove(),o.cancelFrame(this._frameId),this.setStyle(null),"undefined"!=typeof a&&(a.removeEventListener("resize",this._onWindowResize,!1),a.removeEventListener("online",this._onWindowOnline,!1));var t=this.painter.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),r(this._canvasContainer),r(this._controlContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},e.prototype._rerender=function(){this.style&&!this._frameId&&(this._frameId=o.frame(this._render))},e.prototype._onWindowOnline=function(){this._update()},e.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,this.style._redoPlacement())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(t){this._repaint=t,this._update()},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(t){this._vertices=t,this._update()},e.prototype._onData=function(t){this._update("style"===t.dataType),this.fire(t.dataType+"data",t)},e.prototype._onDataLoading=function(t){this.fire(t.dataType+"dataloading",t)},Object.defineProperties(e.prototype,n),e}(m);e.exports=S},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../geo/transform":64,"../render/painter":77,"../style/animation_loop":146,"../style/style":149,"../util/ajax":194,"../util/browser":195,"../util/dom":202,"../util/util":215,"../util/window":197,"./bind_handlers":174,"./camera":175,"./control/attribution_control":176,"./control/logo_control":179,"./hash":189,"mapbox-gl-supported":22,"point-geometry":26}],191:[function(t,e,n){"use strict";var r=t("../util/dom"),i=t("../geo/lng_lat"),o=t("point-geometry"),a=t("../util/smart_wrap"),s=function(t,e){this._offset=o.convert(e&&e.offset||[0,0]),this._update=this._update.bind(this),this._onMapClick=this._onMapClick.bind(this),t||(t=r.create("div")),t.classList.add("mapboxgl-marker"),this._element=t,this._popup=null};s.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map=null),r.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(t){return this._lngLat=i.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(t){return this._popup&&(this._popup.remove(),this._popup=null),t&&(this._popup=t,this._popup.setLngLat(this._lngLat)),this},s.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var t=this._popup;t&&(t.isOpen()?t.remove():t.addTo(this._map))},s.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=a(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),r.setTransform(this._element,"translate("+this._pos.x+"px, "+this._pos.y+"px)"))},e.exports=s},{"../geo/lng_lat":62,"../util/dom":202,"../util/smart_wrap":212,"point-geometry":26}],192:[function(t,e,n){"use strict";function r(t){if(t){if("number"==typeof t){var e=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{top:new l(0,t),"top-left":new l(e,e),"top-right":new l(-e,e),bottom:new l(0,-t),"bottom-left":new l(e,-e),"bottom-right":new l(-e,-e),left:new l(t,0),right:new l(-t,0)}}if(i(t)){var n=l.convert(t);return{top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{top:l.convert(t.top||[0,0]),"top-left":l.convert(t["top-left"]||[0,0]),"top-right":l.convert(t["top-right"]||[0,0]),bottom:l.convert(t.bottom||[0,0]),"bottom-left":l.convert(t["bottom-left"]||[0,0]),"bottom-right":l.convert(t["bottom-right"]||[0,0]),left:l.convert(t.left||[0,0]),right:l.convert(t.right||[0,0])}}return r(new l(0,0))}function i(t){return t instanceof l||Array.isArray(t)}var o=t("../util/util"),a=t("../util/evented"),s=t("../util/dom"),u=t("../geo/lng_lat"),l=t("point-geometry"),c=t("../util/window"),h=t("../util/smart_wrap"),f={closeButton:!0,closeOnClick:!0},p=function(t){function e(e){t.call(this),this.options=o.extend(Object.create(f),e),o.bindAll(["_update","_onClickClose"],this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addTo=function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},e.prototype.isOpen=function(){return!!this._map},e.prototype.remove=function(){return this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._container&&(this._container.parentNode.removeChild(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=u.convert(t),this._pos=null,this._update(),this},e.prototype.setText=function(t){return this.setDOMContent(c.document.createTextNode(t))},e.prototype.setHTML=function(t){var e,n=c.document.createDocumentFragment(),r=c.document.createElement("body");for(r.innerHTML=t;e=r.firstChild,e;)n.appendChild(e);return this.setDOMContent(n)},e.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},e.prototype._createContent=function(){this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._content=s.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=s.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",
this._closeButton.addEventListener("click",this._onClickClose))},e.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=s.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=s.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=h(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat);var t=this.options.anchor,e=r(this.options.offset);if(!t){var n=this._container.offsetWidth,i=this._container.offsetHeight;t=this._pos.y+e.bottom.y<i?["top"]:this._pos.y>this._map.transform.height-i?["bottom"]:[],this._pos.x<n/2?t.push("left"):this._pos.x>this._map.transform.width-n/2&&t.push("right"),t=0===t.length?"bottom":t.join("-")}var o=this._pos.add(e[t]).round(),a={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},u=this._container.classList;for(var l in a)u.remove("mapboxgl-popup-anchor-"+l);u.add("mapboxgl-popup-anchor-"+t),s.setTransform(this._container,a[t]+" translate("+o.x+"px,"+o.y+"px)")}},e.prototype._onClickClose=function(){this.remove()},e}(a);e.exports=p},{"../geo/lng_lat":62,"../util/dom":202,"../util/evented":203,"../util/smart_wrap":212,"../util/util":215,"../util/window":197,"point-geometry":26}],193:[function(t,e,n){"use strict";var r=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.target.addEventListener("message",this.receive,!1)};r.prototype.send=function(t,e,n,r,i){var o=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[o]=n),this.target.postMessage({targetMapId:i,sourceMapId:this.mapId,type:t,id:String(o),data:e},r)},r.prototype.receive=function(t){var e,n=this,r=t.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var o=function(t,e,r){n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:t?String(t):null,data:e},r)};if("<response>"===r.type)e=this.callbacks[r.id],delete this.callbacks[r.id],e&&e(r.error||null,r.data);else if("undefined"!=typeof r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,r.data,o);else if("undefined"!=typeof r.id&&this.parent.getWorkerSource){var a=r.type.split("."),s=this.parent.getWorkerSource(r.sourceMapId,a[0]);s[a[1]](r.data,o)}else this.parent[r.type](r.data)}},r.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},e.exports=r},{}],194:[function(t,e,n){"use strict";function r(t){var e=i.document.createElement("a");return e.href=t,e.protocol===i.document.location.protocol&&e.host===i.document.location.host}var i=t("./window"),o=function(t){function e(e,n){t.call(this,e),this.status=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);n.getJSON=function(t,e){var n=new i.XMLHttpRequest;return n.open("GET",t,!0),n.setRequestHeader("Accept","application/json"),n.onerror=function(t){e(t)},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var t;try{t=JSON.parse(n.response)}catch(t){return e(t)}e(null,t)}else e(new o(n.statusText,n.status))},n.send(),n},n.getArrayBuffer=function(t,e){var n=new i.XMLHttpRequest;return n.open("GET",t,!0),n.responseType="arraybuffer",n.onerror=function(t){e(t)},n.onload=function(){return 0===n.response.byteLength&&200===n.status?e(new Error("http status 200 returned without content.")):void(n.status>=200&&n.status<300&&n.response?e(null,{data:n.response,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new o(n.statusText,n.status)))},n.send(),n};var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";n.getImage=function(t,e){return n.getArrayBuffer(t,function(t,n){if(t)return e(t);var r=new i.Image,o=i.URL||i.webkitURL;r.onload=function(){e(null,r),o.revokeObjectURL(r.src)};var s=new i.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?o.createObjectURL(s):a})},n.getVideo=function(t,e){var n=i.document.createElement("video");n.onloadstart=function(){e(null,n)};for(var o=0;o<t.length;o++){var a=i.document.createElement("source");r(t[o])||(n.crossOrigin="Anonymous"),a.src=t[o],n.appendChild(a)}return n}},{"./window":197}],195:[function(t,e,n){"use strict";var r=t("./window");e.exports.now=function(){return r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date)}();var i=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame;n.frame=function(t){return i(t)};var o=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame;n.cancelFrame=function(t){o(t)},n.timed=function(t,r,i){function o(u){a||(u=e.exports.now(),u>=s+r?t.call(i,1):(t.call(i,(u-s)/r),n.frame(o)))}if(!r)return t.call(i,1),null;var a=!1,s=e.exports.now();return n.frame(o),function(){a=!0}},n.getImageData=function(t){var e=r.document.createElement("canvas"),n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height).data},n.supported=t("mapbox-gl-supported"),n.hardwareConcurrency=r.navigator.hardwareConcurrency||4,Object.defineProperty(n,"devicePixelRatio",{get:function(){return r.devicePixelRatio}}),n.supportsWebp=!1;var a=r.document.createElement("img");a.onload=function(){n.supportsWebp=!0},a.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":197,"mapbox-gl-supported":22}],196:[function(t,e,n){"use strict";var r=t("webworkify"),i=t("../window"),o=i.URL.createObjectURL(new r(t("../../source/worker"),{bare:!0}));e.exports=function(){return new i.Worker(o)}},{"../../source/worker":100,"../window":197,webworkify:41}],197:[function(t,e,n){"use strict";e.exports=self},{}],198:[function(t,e,n){"use strict";function r(t,e){return e.area-t.area}var i=t("quickselect"),o=t("./util").calculateSignedArea;e.exports=function(t,e){var n=t.length;if(n<=1)return[t];for(var a,s,u=[],l=0;l<n;l++){var c=o(t[l]);0!==c&&(t[l].area=Math.abs(c),void 0===s&&(s=c<0),s===c<0?(a&&u.push(a),a=[t[l]]):a.push(t[l]))}if(a&&u.push(a),e>1)for(var h=0;h<u.length;h++)u[h].length<=e||(i(u[h],e,1,u[h].length-1,r),u[h]=u[h].slice(0,e));return u}},{"./util":215,quickselect:28}],199:[function(t,e,n){"use strict";var r={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null};e.exports=r},{}],200:[function(t,e,n){"use strict";var r=function(t){var e=this;this._stringToNumber={},this._numberToString=[];for(var n=0;n<t.length;n++){var r=t[n];e._stringToNumber[r]=n,e._numberToString[n]=r}};r.prototype.encode=function(t){return this._stringToNumber[t]},r.prototype.decode=function(t){return this._numberToString[t]},e.exports=r},{}],201:[function(t,e,n){"use strict";var r=t("./util"),i=t("./actor"),o=function(t,e){var n=this;this.workerPool=t,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var o=this.workerPool.acquire(this.id),a=0;a<o.length;a++){var s=o[a],u=new i(s,e,n.id);u.name="Worker "+a,n.actors.push(u)}};o.prototype.broadcast=function(t,e,n){n=n||function(){},r.asyncAll(this.actors,function(n,r){n.send(t,e,r)},n)},o.prototype.send=function(t,e,n,r,i){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(t,e,n,i),r},o.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},e.exports=o},{"./actor":193,"./util":215}],202:[function(t,e,n){"use strict";function r(t){for(var e=0;e<t.length;e++)if(t[e]in u)return t[e];return t[0]}function i(t){t.preventDefault(),t.stopPropagation(),a.removeEventListener("click",i,!0)}var o=t("point-geometry"),a=t("./window");n.create=function(t,e,n){var r=a.document.createElement(t);return e&&(r.className=e),n&&n.appendChild(r),r};var s,u=a.document.documentElement.style,l=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){l&&(s=u[l],u[l]="none")},n.enableDrag=function(){l&&(u[l]=s)};var c=r(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[c]=e},n.suppressClick=function(){a.addEventListener("click",i,!0),a.setTimeout(function(){a.removeEventListener("click",i,!0)},0)},n.mousePos=function(t,e){var n=t.getBoundingClientRect();return e=e.touches?e.touches[0]:e,new o(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},n.touchPos=function(t,e){for(var n=t.getBoundingClientRect(),r=[],i="touchend"===e.type?e.changedTouches:e.touches,a=0;a<i.length;a++)r.push(new o(i[a].clientX-n.left-t.clientLeft,i[a].clientY-n.top-t.clientTop));return r},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)}},{"./window":197,"point-geometry":26}],203:[function(t,e,n){"use strict";function r(t,e,n){n[t]=n[t]||[],n[t].push(e)}function i(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);r!==-1&&n[t].splice(r,1)}}var o=t("./util"),a=function(){};a.prototype.on=function(t,e){return this._listeners=this._listeners||{},r(t,e,this._listeners),this},a.prototype.off=function(t,e){return i(t,e,this._listeners),i(t,e,this._oneTimeListeners),this},a.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},r(t,e,this._oneTimeListeners),this},a.prototype.fire=function(t,e){var n=this;if(this.listens(t)){e=o.extend({},e,{type:t,target:this});for(var r=this._listeners&&this._listeners[t]?this._listeners[t].slice():[],a=0;a<r.length;a++)r[a].call(n,e);for(var s=this._oneTimeListeners&&this._oneTimeListeners[t]?this._oneTimeListeners[t].slice():[],u=0;u<s.length;u++)s[u].call(n,e),i(t,s[u],n._oneTimeListeners);this._eventedParent&&this._eventedParent.fire(t,o.extend({},e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else o.endsWith(t,"error")&&console.error(e&&e.error||e||"Empty error event");return this},a.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},a.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this},e.exports=a},{"./util":215}],204:[function(t,e,n){"use strict";function r(t,e){return e.max-t.max}function i(t,e,n,r){this.p=new u(t,e),this.h=n,this.d=o(this.p,r),this.max=this.d+this.h*Math.SQRT2}function o(t,e){for(var n=!1,r=1/0,i=0;i<e.length;i++)for(var o=e[i],a=0,s=o.length,u=s-1;a<s;u=a++){var c=o[a],h=o[u];c.y>t.y!=h.y>t.y&&t.x<(h.x-c.x)*(t.y-c.y)/(h.y-c.y)+c.x&&(n=!n),r=Math.min(r,l(t,c,h))}return(n?1:-1)*Math.sqrt(r)}function a(t){for(var e=0,n=0,r=0,o=t[0],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u],h=l.x*c.y-c.x*l.y;n+=(l.x+c.x)*h,r+=(l.y+c.y)*h,e+=3*h}return new i(n/e,r/e,0,t)}var s=t("tinyqueue"),u=t("point-geometry"),l=t("./intersection_tests").distToSegmentSquared;e.exports=function(t,e,n){e=e||1;for(var o,u,l,c,h=t[0],f=0;f<h.length;f++){var p=h[f];(!f||p.x<o)&&(o=p.x),(!f||p.y<u)&&(u=p.y),(!f||p.x>l)&&(l=p.x),(!f||p.y>c)&&(c=p.y)}var d=l-o,m=c-u,v=Math.min(d,m),y=v/2,_=new s(null,r);if(0===v)return[o,u];for(var g=o;g<l;g+=v)for(var x=u;x<c;x+=v)_.push(new i(g+y,x+y,y,t));for(var b=a(t),w=_.length;_.length;){var M=_.pop();(M.d>b.d||!b.d)&&(b=M,n&&console.log("found best %d after %d probes",Math.round(1e4*M.d)/1e4,w)),M.max-b.d<=e||(y=M.h/2,_.push(new i(M.p.x-y,M.p.y-y,y,t)),_.push(new i(M.p.x+y,M.p.y-y,y,t)),_.push(new i(M.p.x-y,M.p.y+y,y,t)),_.push(new i(M.p.x+y,M.p.y+y,y,t)),w+=4)}return n&&(console.log("num probes: "+w),console.log("best distance: "+b.d)),b.p}},{"./intersection_tests":207,"point-geometry":26,tinyqueue:30}],205:[function(t,e,n){"use strict";var r,i=t("./worker_pool");e.exports=function(){return r||(r=new i),r}},{"./worker_pool":218}],206:[function(t,e,n){"use strict";function r(t,e){this.stacks=t.readFields(i,[],e)}function i(t,e,n){if(1===t){var r=n.readMessage(o,{glyphs:{}});e.push(r)}}function o(t,e,n){if(1===t)e.name=n.readString();else if(2===t)e.range=n.readString();else if(3===t){var r=n.readMessage(a,{});e.glyphs[r.id]=r}}function a(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}e.exports=r},{}],207:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<t.length;n++)if(p(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(p(t,e[r]))return!0;return!!u(t,e)}function i(t,e,n){for(var r=0;r<t.length;r++)for(var i=t[r],o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var u=a[s];if(p(i,u))return!0;if(c(u,i,n))return!0}return!1}function o(t,e){if(1===t.length&&1===t[0].length)return f(e,t[0][0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(f(t,r[i]))return!0;for(var o=0;o<t.length;o++){for(var a=t[o],s=0;s<a.length;s++)if(f(e,a[s]))return!0;for(var l=0;l<e.length;l++)if(u(a,e[l]))return!0}return!1}function a(t,e,n){for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<t.length;o++){var a=t[o];if(a.length>=3)for(var u=0;u<i.length;u++)if(p(a,i[u]))return!0;if(s(a,i,n))return!0}return!1}function s(t,e,n){if(t.length>1){if(u(t,e))return!0;for(var r=0;r<e.length;r++)if(c(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(c(t[i],e,n))return!0;return!1}function u(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++){var a=e[o],s=e[o+1];if(l(r,i,a,s))return!0}return!1}function l(t,e,n,r){return d(t,n,r)!==d(e,n,r)&&d(t,e,n)!==d(t,e,r)}function c(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++){var o=e[i-1],a=e[i];if(h(t,o,a)<r)return!0}return!1}function h(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return i<0?t.distSqr(e):i>1?t.distSqr(n):t.distSqr(n.sub(e)._mult(i)._add(e))}function f(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++){n=t[a];for(var s=0,u=n.length-1;s<n.length;u=s++)r=n[s],i=n[u],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function p(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}var d=t("./util").isCounterClockwise;e.exports={multiPolygonIntersectsBufferedMultiPoint:i,multiPolygonIntersectsMultiPolygon:o,multiPolygonIntersectsBufferedMultiLine:a,polygonIntersectsPolygon:r,distToSegmentSquared:h}},{"./util":215}],208:[function(t,e,n){"use strict";var r={"Latin-1 Supplement":function(t){return t>=128&&t<=255},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};e.exports=r},{}],209:[function(t,e,n){"use strict";var r=function(t,e){this.max=t,this.onRemove=e,this.reset()};r.prototype.reset=function(){var t=this;for(var e in t.data)t.onRemove(t.data[e]);return this.data={},this.order=[],this},r.prototype.add=function(t,e){if(this.has(t))this.order.splice(this.order.indexOf(t),1),this.data[t]=e,this.order.push(t);else if(this.data[t]=e,this.order.push(t),this.order.length>this.max){var n=this.get(this.order[0]);n&&this.onRemove(n)}return this},r.prototype.has=function(t){return t in this.data},r.prototype.keys=function(){return this.order},r.prototype.get=function(t){if(!this.has(t))return null;var e=this.data[t];return delete this.data[t],this.order.splice(this.order.indexOf(t),1),e},r.prototype.getWithoutRemoving=function(t){if(!this.has(t))return null;var e=this.data[t];return e},r.prototype.remove=function(t){if(!this.has(t))return this;var e=this.data[t];return delete this.data[t],this.onRemove(e),this.order.splice(this.order.indexOf(t),1),this},r.prototype.setMaxSize=function(t){var e=this;for(this.max=t;this.order.length>this.max;){var n=e.get(e.order[0]);n&&e.onRemove(n)}return this},e.exports=r},{}],210:[function(t,e,n){"use strict";function r(t,e){var n=a(u.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,!u.REQUIRE_ACCESS_TOKEN)return s(t);if(e=e||u.ACCESS_TOKEN,!e)throw new Error("An API access token is required to use Mapbox GL. "+c);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+c);return t.params.push("access_token="+e),s(t)}function i(t){return 0===t.indexOf("mapbox:")}function o(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(u.ACCESS_TOKEN||""))}function a(t){var e=t.match(f);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function s(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}var u=t("./config"),l=t("./browser"),c="See https://www.mapbox.com/api-documentation/#access-tokens";n.isMapboxURL=i,n.normalizeStyleURL=function(t,e){if(!i(t))return t;var n=a(t);return n.path="/styles/v1"+n.path,r(n,e)},n.normalizeGlyphsURL=function(t,e){if(!i(t))return t;var n=a(t);return n.path="/fonts/v1"+n.path,r(n,e)},n.normalizeSourceURL=function(t,e){if(!i(t))return t;var n=a(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),r(n,e)},n.normalizeSpriteURL=function(t,e,n,o){var u=a(t);return i(t)?(u.path="/styles/v1"+u.path+"/sprite"+e+n,r(u,o)):(u.path+=""+e+n,s(u))};var h=/(\.(png|jpg)\d*)(?=$)/;n.normalizeTileURL=function(t,e,n){if(!e||!i(e))return t;var r=a(t),u=l.devicePixelRatio>=2||512===n?"@2x":"",c=l.supportsWebp?".webp":"$1";return r.path=r.path.replace(h,""+u+c),o(r.params),s(r)};var f=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/},{"./browser":195,"./config":199}],211:[function(t,e,n){"use strict";var r=t("./is_char_in_unicode_block");e.exports.allowsIdeographicBreaking=function(t){for(var e=0,r=t;e<r.length;e+=1){var i=r[e];if(!n.charAllowsIdeographicBreaking(i.charCodeAt(0)))return!1}return!0},e.exports.allowsVerticalWritingMode=function(t){for(var e=0,r=t;e<r.length;e+=1){var i=r[e];if(n.charHasUprightVerticalOrientation(i.charCodeAt(0)))return!0}return!1},e.exports.charAllowsIdeographicBreaking=function(t){return!!(!(t<11904)&&(r["Bopomofo Extended"](t)||r.Bopomofo(t)||r["CJK Compatibility Forms"](t)||r["CJK Compatibility Ideographs"](t)||r["CJK Compatibility"](t)||r["CJK Radicals Supplement"](t)||r["CJK Strokes"](t)||r["CJK Symbols and Punctuation"](t)||r["CJK Unified Ideographs Extension A"](t)||r["CJK Unified Ideographs"](t)||r["Enclosed CJK Letters and Months"](t)||r["Halfwidth and Fullwidth Forms"](t)||r.Hiragana(t)||r["Ideographic Description Characters"](t)||r["Kangxi Radicals"](t)||r["Katakana Phonetic Extensions"](t)||r.Katakana(t)||r["Vertical Forms"](t)||r["Yi Radicals"](t)||r["Yi Syllables"](t)))},n.charHasUprightVerticalOrientation=function(t){return!!(746===t||747===t||!(t<4352)&&(r["Bopomofo Extended"](t)||r.Bopomofo(t)||r["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||r["CJK Compatibility Ideographs"](t)||r["CJK Compatibility"](t)||r["CJK Radicals Supplement"](t)||r["CJK Strokes"](t)||!(!r["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||r["CJK Unified Ideographs Extension A"](t)||r["CJK Unified Ideographs"](t)||r["Enclosed CJK Letters and Months"](t)||r["Hangul Compatibility Jamo"](t)||r["Hangul Jamo Extended-A"](t)||r["Hangul Jamo Extended-B"](t)||r["Hangul Jamo"](t)||r["Hangul Syllables"](t)||r.Hiragana(t)||r["Ideographic Description Characters"](t)||r.Kanbun(t)||r["Kangxi Radicals"](t)||r["Katakana Phonetic Extensions"](t)||r.Katakana(t)&&12540!==t||!(!r["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!r["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||r["Unified Canadian Aboriginal Syllabics"](t)||r["Unified Canadian Aboriginal Syllabics Extended"](t)||r["Vertical Forms"](t)||r["Yijing Hexagram Symbols"](t)||r["Yi Syllables"](t)||r["Yi Radicals"](t)))},n.charHasNeutralVerticalOrientation=function(t){return!!(r["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||r["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||r["Letterlike Symbols"](t)||r["Number Forms"](t)||r["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||r["Control Pictures"](t)&&9251!==t||r["Optical Character Recognition"](t)||r["Enclosed Alphanumerics"](t)||r["Geometric Shapes"](t)||r["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||r["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||r["CJK Symbols and Punctuation"](t)||r.Katakana(t)||r["Private Use Area"](t)||r["CJK Compatibility Forms"](t)||r["Small Form Variants"](t)||r["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)},n.charHasRotatedVerticalOrientation=function(t){return!(n.charHasUprightVerticalOrientation(t)||n.charHasNeutralVerticalOrientation(t))}},{"./is_char_in_unicode_block":208}],212:[function(t,e,n){"use strict";var r=t("../geo/lng_lat");e.exports=function(t,e,n){if(t=new r(t.lng,t.lat),e){var i=new r(t.lng-360,t.lat),o=new r(t.lng+360,t.lat),a=n.locationPoint(t).distSqr(e);n.locationPoint(i).distSqr(e)<a?t=i:n.locationPoint(o).distSqr(e)<a&&(t=o)}for(;Math.abs(t.lng-n.center.lng)>180;){var s=n.locationPoint(t);if(s.x>=0&&s.y>=0&&s.x<=n.width&&s.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}},{"../geo/lng_lat":62}],213:[function(t,e,n){"use strict";function r(t){var e=JSON.stringify(t);if(v[e])return v[e];var n=void 0===t.alignment?1:t.alignment,r=0,a=0,u=["Uint8"],h=t.members.map(function(t){u.indexOf(t.type)<0&&u.push(t.type);var e=o(t.type),s=r=i(r,Math.max(n,e)),l=t.components||1;return a=Math.max(a,e),r+=e*l,{name:t.name,type:t.type,components:l,offset:s}}),p=i(r,Math.max(a,n)),d=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(f);d.prototype.alignment=n,d.prototype.size=p;for(var y=0,_=h;y<_.length;y+=1)for(var g=_[y],x=0;x<g.components;x++){var b=g.name+(1===g.components?"":x);Object.defineProperty(d.prototype,b,{get:l(g,x),set:c(g,x)})}var w=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(m);return w.prototype.members=h,w.prototype.StructType=d,w.prototype.bytesPerElement=p,w.prototype.emplaceBack=s(h,p),w.prototype._usedTypes=u,v[e]=w,w}function i(t,e){return Math.ceil(t/e)*e}function o(t){return h[t].BYTES_PER_ELEMENT}function a(t){return t.toLowerCase()}function s(t,e){for(var n=[],r=[],i="var i = this.length;\nthis.resize(this.length + 1);\n",s=0,u=t;s<u.length;s+=1){var l=u[s],c=o(l.type);n.indexOf(c)<0&&(n.push(c),i+="var o"+c.toFixed(0)+" = i * "+(e/c).toFixed(0)+";\n");for(var h=0;h<l.components;h++){var f="v"+r.length,p="o"+c.toFixed(0)+" + "+(l.offset/c+h).toFixed(0);i+="this."+a(l.type)+"["+p+"] = "+f+";\n",r.push(f)}}return i+="return i;",new Function(r.toString(),i)}function u(t,e){var n="this._pos"+o(t.type).toFixed(0),r=(t.offset/o(t.type)+e).toFixed(0),i=n+" + "+r;return"this._structArray."+a(t.type)+"["+i+"]"}function l(t,e){return new Function("return "+u(t,e)+";")}function c(t,e){return new Function("x",u(t,e)+" = x;")}e.exports=r;var h={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},f=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},p=128,d=5,m=function(t){this.isTransferred=!1,void 0!==t?(this.arrayBuffer=t.arrayBuffer,this.length=t.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))};m.serialize=function(){return{members:this.prototype.members,alignment:this.prototype.StructType.prototype.alignment,bytesPerElement:this.prototype.bytesPerElement}},m.prototype.serialize=function(t){return this._trim(),t&&(this.isTransferred=!0,t.push(this.arrayBuffer)),{length:this.length,arrayBuffer:this.arrayBuffer}},m.prototype.get=function(t){return new this.StructType(this,t)},m.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},m.prototype.resize=function(t){if(this.length=t,t>this.capacity){this.capacity=Math.max(t,Math.floor(this.capacity*d),p),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},m.prototype._refreshViews=function(){for(var t=this,e=0,n=t._usedTypes;e<n.length;e+=1){var r=n[e];t[a(r)]=new h[r](t.arrayBuffer)}},m.prototype.toArray=function(t,e){for(var n=this,r=[],i=t;i<e;i++){var o=n.get(i);r.push(o)}return r};var v={}},{}],214:[function(t,e,n){"use strict";function r(t,e){return e.replace(/{([^{}]+)}/g,function(e,n){return n in t?t[n]:""})}e.exports=r},{}],215:[function(t,e,n){"use strict";var r=t("@mapbox/unitbezier"),i=t("../geo/coordinate");t("point-geometry");n.easeCubicInOut=function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},n.bezier=function(t,e,n,i){var o=new r(t,e,n,i);return function(t){return o.solve(t)}},n.ease=n.bezier(.25,.1,.25,1),n.clamp=function(t,e,n){return Math.min(n,Math.max(e,t))},n.wrap=function(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i},n.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),i[a]=e,0===--r&&n(o,i)})})},n.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},n.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},n.extend=function(t,e,n,r){for(var i=arguments,o=1;o<arguments.length;o++){var a=i[o];for(var s in a)t[s]=a[s]}return t},n.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n};var o=1;n.uniqueId=function(){return o++},n.bindAll=function(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})},n.getCoordinatesCenter=function(t){for(var e=1/0,n=1/0,r=-(1/0),o=-(1/0),a=0;a<t.length;a++)e=Math.min(e,t[a].column),n=Math.min(n,t[a].row),r=Math.max(r,t[a].column),o=Math.max(o,t[a].row);var s=r-e,u=o-n,l=Math.max(s,u),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2));return new i((e+r)/2,(n+o)/2,0).zoomTo(c)},n.endsWith=function(t,e){return t.indexOf(e,t.length-e.length)!==-1},n.mapObject=function(t,e,n){var r=this,i={};for(var o in t)i[o]=e.call(n||r,t[o],o,t);return i},n.filterObject=function(t,e,n){var r=this,i={};for(var o in t)e.call(n||r,t[o],o,t)&&(i[o]=t[o]);return i},n.deepEqual=function(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!n.deepEqual(t[r],e[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;var i=Object.keys(t);if(i.length!==Object.keys(e).length)return!1;for(var o in t)if(!n.deepEqual(t[o],e[o]))return!1;return!0}return t===e},n.clone=function(t){return Array.isArray(t)?t.map(n.clone):"object"==typeof t&&t?n.mapObject(t,n.clone):t},n.arraysIntersect=function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1};var a={};n.warnOnce=function(t){a[t]||("undefined"!=typeof console&&console.warn(t),a[t]=!0)},n.isCounterClockwise=function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)},n.calculateSignedArea=function(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)o=t[n],a=t[i],e+=(a.x-o.x)*(o.y+a.y);return e},n.isClosedPolygon=function(t){if(t.length<4)return!1;var e=t[0],r=t[t.length-1];return!(Math.abs(e.x-r.x)>0||Math.abs(e.y-r.y)>0)&&Math.abs(n.calculateSignedArea(t))>.01},n.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,[e*Math.cos(n)*Math.sin(r),e*Math.sin(n)*Math.sin(r),e*Math.cos(r)]},n.parseCacheControl=function(t){var e=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,n={};if(t.replace(e,function(t,e,r,i){var o=r||i;return n[e]=!o||o.toLowerCase(),""}),n["max-age"]){var r=parseInt(n["max-age"],10);isNaN(r)?delete n["max-age"]:n["max-age"]=r}return n}},{"../geo/coordinate":61,"@mapbox/unitbezier":3,"point-geometry":26}],216:[function(t,e,n){"use strict";var r=function(t,e,n,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,null!=t.id&&(this.id=t.id)},i={geometry:{}};i.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry;
},i.geometry.set=function(t){this._geometry=t},r.prototype.toJSON=function(){var t=this,e={geometry:this.geometry};for(var n in t)"_geometry"!==n&&"_vectorTileFeature"!==n&&(e[n]=t[n]);return e},Object.defineProperties(r.prototype,i),e.exports=r},{}],217:[function(t,e,n){"use strict";var r=t("./script_detection");e.exports=function(t){for(var n="",i=0;i<t.length;i++){var o=t.charCodeAt(i+1)||null,a=t.charCodeAt(i-1)||null,s=(!o||!r.charHasRotatedVerticalOrientation(o)||e.exports.lookup[t[i+1]])&&(!a||!r.charHasRotatedVerticalOrientation(a)||e.exports.lookup[t[i-1]]);n+=s&&e.exports.lookup[t[i]]?e.exports.lookup[t[i]]:t[i]}return n},e.exports.lookup={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"}},{"./script_detection":211}],218:[function(t,e,n){"use strict";var r=t("./web_worker"),i=function(){this.active={}};i.prototype.acquire=function(e){var n=this;if(!this.workers){var i=t("../").workerCount;for(this.workers=[];this.workers.length<i;)n.workers.push(new r)}return this.active[e]=!0,this.workers.slice()},i.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},e.exports=i},{"../":65,"./web_worker":196}]},{},[65])(65)})}).call(e,function(){return this}(),n(58).Buffer)},function(t,e){"use strict";function n(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0===e.length)return function(t){return t};if(1===e.length)return e[0];var r=e[e.length-1],i=e.slice(0,-1);return function(){return i.reduceRight(function(t,e){return e(t)},r.apply(void 0,arguments))}}e.__esModule=!0,e.default=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){function r(){y===v&&(y=v.slice())}function o(){return m}function s(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var e=!0;return r(),y.push(t),function(){if(e){e=!1,r();var n=y.indexOf(t);y.splice(n,1)}}}function c(t){if(!(0,a.default)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(_)throw new Error("Reducers may not dispatch actions.");try{_=!0,m=d(m,t)}finally{_=!1}for(var e=v=y,n=0;n<e.length;n++)e[n]();return t}function h(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");d=t,c({type:l.INIT})}function f(){var t,e=s;return t={subscribe:function(t){function n(){t.next&&t.next(o())}if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");n();var r=e(n);return{unsubscribe:r}}},t[u.default]=function(){return this},t}var p;if("function"==typeof e&&"undefined"==typeof n&&(n=e,e=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(i)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var d=t,m=e,v=[],y=v,_=!1;return c({type:l.INIT}),p={dispatch:c,subscribe:s,getState:o,replaceReducer:h},p[u.default]=f,p}e.__esModule=!0,e.ActionTypes=void 0,e.default=i;var o=n(18),a=r(o),s=n(117),u=r(s),l=e.ActionTypes={INIT:"@@redux/INIT"}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.compose=e.applyMiddleware=e.bindActionCreators=e.combineReducers=e.createStore=void 0;var i=n(21),o=r(i),a=n(110),s=r(a),u=n(109),l=r(u),c=n(108),h=r(c),f=n(20),p=r(f),d=n(23);r(d);e.createStore=o.default,e.combineReducers=s.default,e.bindActionCreators=l.default,e.applyMiddleware=h.default,e.compose=p.default},function(t,e){"use strict";function n(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t);try{throw new Error(t)}catch(t){}}e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var r=n(8),i=n(63),o=r.call(Function.call,String.prototype.replace),a=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,s=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;t.exports=function(){var t=i.ToString(i.CheckObjectCoercible(this));return o(o(t,a,""),s,"")}},function(t,e,n){"use strict";var r=n(24),i="​";t.exports=function(){return String.prototype.trim&&i.trim()===i?String.prototype.trim:r}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){function n(t){if(t=Object.assign({},t),!(this instanceof n))throw new Error("MapboxLanguage needs to be called with the new keyword");this.setLanguage=this.setLanguage.bind(this),this._initialStyleUpdate=this._initialStyleUpdate.bind(this),this._defaultLanguage=t.defaultLanguage,this._isLanguageField=t.languageField||/^\{name/,this._getLanguageField=t.getLanguageField||function(t){return"{name_"+t+"}"},this._languageSource=t.languageSource||null,this._languageTransform=t.languageTransform||function(t,e){return"ar"===e?i(t):r(t)},this.supportedLanguages=t.supportedLanguages||["en","es","fr","de","ru","zh","ar","pt"]}function r(t){var e=t.layers.map(function(t){if(!(t.layout||{})["text-field"])return t;var e=0;return"state_label"===t["source-layer"]&&(e=.15),"marine_label"===t["source-layer"]&&(/-lg/.test(t.id)&&(e=.25),/-md/.test(t.id)&&(e=.15),/-sm/.test(t.id)&&(e=.1)),"place_label"===t["source-layer"]&&(/-suburb/.test(t.id)&&(e=.15),/-neighbour/.test(t.id)&&(e=.1),/-islet/.test(t.id)&&(e=.01)),"airport_label"===t["source-layer"]&&(e=.01),"rail_station_label"===t["source-layer"]&&(e=.01),"poi_label"===t["source-layer"]&&/-scalerank/.test(t.id)&&(e=.01),"road_label"===t["source-layer"]&&(/-label-/.test(t.id)&&(e=.01),/-shields/.test(t.id)&&(e=.05)),Object.assign({},t,{layout:Object.assign({},t.layout,{"text-letter-spacing":e})})});return Object.assign({},t,{layers:e})}function i(t){var e=t.layers.map(function(t){if(!(t.layout||{})["text-field"])return t;var e=0;return Object.assign({},t,{layout:Object.assign({},t.layout,{"text-letter-spacing":e})})});return Object.assign({},t,{layers:e})}function o(t,e){return"string"==typeof e&&t.test(e)}function a(t,e){return e.stops&&e.stops.filter(function(e){return t.test(e[1])}).length>0}function s(t,e,n){if(o(t,e))return n;if(a(t,e)){var r=e.stops.map(function(e){return t.test(e[1])?[e[0],n]:e});return Object.assign({},e,{stops:r})}return e}function u(t,e,n){return e.layout&&e.layout["text-field"]?Object.assign({},e,{layout:Object.assign({},e.layout,{"text-field":s(t,e.layout["text-field"],n)})}):e}function l(t){var e=Object.keys(t.sources).filter(function(e){var n=t.sources[e];return/mapbox-streets-v\d/.test(n.url)});return e[0]}function c(t){var e=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage,n=e.split("-"),r=e;return n.length>1&&(r=n[0]),t.indexOf(r)>-1?r:null}n.prototype.setLanguage=function(t,e){if(this.supportedLanguages.indexOf(e)<0)throw new Error("Language "+e+" is not supported");var n=this._languageSource||l(t);if(!n)return t;var r=this._getLanguageField(e),i=this._isLanguageField,o=t.layers.map(function(t){return t.source===n?u(i,t,r):t}),a=Object.assign({},t,{layers:o});return this._languageTransform(a,e)},n.prototype._initialStyleUpdate=function(){var t=this._map.getStyle(),e=this._defaultLanguage||c(this.supportedLanguages);this._map.off("styledata",this._initialStyleUpdate),this._map.setStyle(this.setLanguage(t,e))},n.prototype.onAdd=function(t){return this._map=t,this._map.on("styledata",this._initialStyleUpdate),this._container=document.createElement("div"),this._container},n.prototype.onRemove=function(){this._map.off("styledata",this._initialStyleUpdate),this._map=void 0},"undefined"!=typeof t&&"undefined"!=typeof t.exports?t.exports=n:window.MapboxLanguage=n},function(t,e,n){var r=n(29).coordEach;t.exports=function(t){var e=[1/0,1/0,-(1/0),-(1/0)];return r(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}},function(t,e){function n(t,e,r){var i,o,a,s,u,l,c,h,f,p,d=0,m=0,v="FeatureCollection"===t.type,y="Feature"===t.type,_=v?t.features.length:1;for(i=0;i<_;i++)for(f=v?t.features[i].geometry:y?t.geometry:t,p="GeometryCollection"===f.type,c=p?f.geometries.length:1,s=0;s<c;s++)if(l=p?f.geometries[s]:f,h=l.coordinates,d=!r||"Polygon"!==l.type&&"MultiPolygon"!==l.type?0:1,"Point"===l.type)e(h,m),m++;else if("LineString"===l.type||"MultiPoint"===l.type)for(o=0;o<h.length;o++)e(h[o],m),m++;else if("Polygon"===l.type||"MultiLineString"===l.type)for(o=0;o<h.length;o++)for(a=0;a<h[o].length-d;a++)e(h[o][a],m),m++;else if("MultiPolygon"===l.type)for(o=0;o<h.length;o++)for(a=0;a<h[o].length;a++)for(u=0;u<h[o][a].length-d;u++)e(h[o][a][u],m),m++;else{if("GeometryCollection"!==l.type)throw new Error("Unknown Geometry Type");for(o=0;o<l.geometries.length;o++)n(l.geometries[o],e,r)}}function r(t,e,r,i){var o=r;return n(t,function(t,n){o=0===n&&void 0===r?t:e(o,t,n)},i),o}function i(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function o(t,e,n){var r=n;return i(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function s(t,e,n){var r=n;return a(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function u(t){var e=[];return n(t,function(t){e.push(t)}),e}function l(t,e){var n,r,i,o,a,s,u,l,c=0,h="FeatureCollection"===t.type,f="Feature"===t.type,p=h?t.features.length:1;for(n=0;n<p;n++)for(s=h?t.features[n].geometry:f?t.geometry:t,l=h?t.features[n].properties:f?t.properties:{},u="GeometryCollection"===s.type,a=u?s.geometries.length:1,i=0;i<a;i++)if(o=u?s.geometries[i]:s,"Point"===o.type||"LineString"===o.type||"MultiPoint"===o.type||"Polygon"===o.type||"MultiLineString"===o.type||"MultiPolygon"===o.type)e(o,c,l),c++;else{if("GeometryCollection"!==o.type)throw new Error("Unknown Geometry Type");for(r=0;r<o.geometries.length;r++)e(o.geometries[r],c,l),c++}}function c(t,e,n){var r=n;return l(t,function(t,i,o){r=0===i&&void 0===n?t:e(r,t,i,o)}),r}function h(t,e){l(t,function(t,n,r){switch(t.type){case"Point":case"LineString":case"Polygon":return void e(p(t,r),n,0)}var i;switch(t.type){case"MultiPoint":i="Point";break;case"MultiLineString":i="LineString";break;case"MultiPolygon":i="Polygon"}t.coordinates.forEach(function(t,o){var a={type:i,coordinates:t};e(p(a,r),n,o)})})}function f(t,e,n){var r=n;return h(t,function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)}),r}function p(t,e){if(!t)throw new Error("No geometry passed");return{type:"Feature",properties:e||{},geometry:t}}t.exports={coordEach:n,coordReduce:r,propEach:i,propReduce:o,featureEach:a,featureReduce:s,coordAll:u,geomEach:l,geomReduce:c,flattenEach:h,flattenReduce:f}},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-app",'<router> <route path="*/explore.."> <sealevel-explorer></sealevel-explorer> </route> <route path="*/#*"> <sealevel-scrolly></sealevel-scrolly> </route> <route path=".."> <sealevel-redirects></sealevel-redirects> </route> </router>',"","",function(t){n(113),n(49),n(37),n(39)})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-explorer-breadcrumbs",'<ul class="{breadcrumbs: true, breadcrumbs--condensed: station}"> <li> <a href="{pathToExplorer()}"> {i18n.t(\'explorer.start\')} </a> </li> <li if="{continent}"> <a href="{pathToContinent(continent)}"> {i18n.t(\'explorer.continents.\' + continent)} </a> </li> <li if="{country}"> <a href="{pathToCountry(country)}"> {i18n.t(\'explorer.countries.\' + country)} </a> </li> <li if="{station}"> <a href="{pathToStation(station.id)}"> {station.location} </a> </li> </ul>',"","",function(t){var e=this;this.on("update",function(){var t=e.opts,n=t.station,r=t.country,i=t.continent;e.country=n&&n.country_id||r,e.continent=n&&n.continent||i,e.station=n}),this.pathToExplorer=function(){return t.routes.explorer(e.i18n.getLocale())},this.pathToContinent=function(n){return t.routes.continent(e.i18n.getLocale(),n)},this.pathToCountry=function(n){return t.routes.country(e.i18n.getLocale(),n)},this.pathToStation=function(n){return t.routes.station(e.i18n.getLocale(),n)}})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-explorer-continent",'<h2 class="explorer__title"> {i18n.t(\'explorer.continents.\' + opts.continent)} </h2> <p> {i18n.t(\'explorer.continent_descriptions.\' + opts.continent)} </p> <sealevel-article-link for="{opts.continent}"></sealevel-article-link> <ul class="entries"> <li each="{country in opts.countries}"> <a class="entries__item" href="{route(country)}"> <h3 class="entries__title"> {i18n.t(\'explorer.countries.\' + country)} </h3> <p class="entries__description" if="{stationCount && stationCount[country]}"> {i18n.t(\'explorer.num_stations\', stationCount[country])} </p> </a> </li> </ul>',"","",function(t){function e(t){return t&&t.__esModule?t:{default:t}}var r=this,i=n(2),o=e(i);n(5),this.on("update",function(){r.stationCount=o.default.countBy(r.opts.stations,"country")}),this.route=function(e){return t.pathToCountry(r.i18n.getLocale(),e)}})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-explorer-country",'<h2 class="explorer__title">{i18n.t(\'explorer.countries.\' + opts.country)}</h2> <div if="{opts.stations[0].c02_emissions}"> <p>{this.i18n.t(\'explorer.emissions_desc\', descriptionData)}</p> <p>{this.i18n.t(\'explorer.risk_desc\', descriptionData)}</p> </div> <p> <sealevel-article-link for="{opts.country}"></sealevel-article-link> </p> <ul class="entries"> <li each="{station in opts.stations}"> <a href="{route(station.id)}" class="entries__item {getChangeIndicator(station)}"> <h4 class="entries__title"> {station.location} </h4> <p class="entries__description"> {this.i18n.t(\'explorer.sealevel_change\', { change: getChangeValue(station) })} </p> </a> </li> </ul>',"","",function(t){function e(t){return t&&t.__esModule?t:{default:t}}var r=this,i=n(2),o=e(i);n(5);var a=[{threshold:-60,className:"entries__item--change-lower"},{threshold:-15,className:"entries__item--change-low"},{threshold:15,className:"entries__item--change-flat"},{threshold:60,className:"entries__item--change-high"},{threshold:1/0,className:"entries__item--change-higher"}];this.route=function(e){return t.pathToStation(r.i18n.getLocale(),e)},this.on("update",function(){var t=r.i18n.getLocale(),e=r.opts.stations[0],n=e.coastal_population2010_sum,i=e.total_population2010_sum;r.descriptionData={country:r.i18n.t("explorer.countries."+e.country),coastal_population_percent:Math.round(100*n/i),c02_emissions:Number(e.c02_emissions).toLocaleString(t)}}),this.getChangeValue=function(t){var e=t.timeseries;return o.default.last(e)},this.getChangeIndicator=function(t){var e=r.getChangeValue(t),n=o.default.find(a,function(t){var n=t.threshold;return e<n});return n.className}})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-explorer-map",'<div id="explorer__map" class="explorer__map"></div> <div class="explorer__map__legend"> {i18n.t(\'explorer.legend\')} </div>',"","",function(t){function e(t){return t&&t.__esModule?t:{default:t}}var r=this,i=n(19),o=e(i),a=n(27),s=e(a),u=n(2),l=e(u),c=n(28),h=e(c),f=[[-(1/0),"#469e9f"],[-60,"#7aa1a3"],[-15,"#9fa4a6"],[15,"#9f7b7e"],[60,"#9d474b"]];this.activeLayers=[],this.state=this.store.getState(),this.subscribe(function(t){return r.update({state:t})}),this.on("updated",function(){v(r.opts),r.opts.station&&p(r.opts.station)}),this.on("mount",function(){r.map=_(t.options)});var p=function(t){var e=l.default.find(r.opts.stations,{id:t}),n=document.createElement("div");n.className="explorer__map__highlight",r.marker&&r.marker.remove(),r.marker=new o.default.Marker(n,{offset:[-10,-10]}).setLngLat([parseFloat(e.longitude),parseFloat(e.latitude)]).addTo(r.map)},d=function(t){return{type:"FeatureCollection",features:t.map(function(t){return{type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(t.longitude),parseFloat(t.latitude)]},properties:{id:t.id,title:t.location,amplitude:parseFloat(l.default.last(t.timeseries),10)}}})}},m=function(t){var e=t.stations,n=t.station,r=t.country,i=t.continent;return i?l.default.filter(e,{continent:i}):r?l.default.filter(e,{country:r}):n?[l.default.find(e,function(t){var e=t.id;return e===n})]:e},v=function(t){var e=m(t),n=(0,h.default)(d(e));r.map.fitBounds(n,{duration:1e3,maxZoom:7,offset:[-200,0]})},y=function(t){var e=t.features,n=e[0],i=r.i18n.getLocale();r.opts.routeToStation(i,n.properties.id),r.popup&&r.popup.remove(),r.popup=new o.default.Popup({offset:[0,-15],closeOnClick:!1,closeButton:!1}).setLngLat(n.geometry.coordinates).setHTML(n.properties.title).addTo(r.map)},_=function(){o.default.accessToken="pk.eyJ1IjoiY29ycmVjdGl2IiwiYSI6ImNpZXZoc2k3dzAwYjZ0cGtzZ3lzcWRxZ3oifQ.D7nZQDnSO4BMLssgleNSSg";var t=new o.default.Map({container:"explorer__map",style:"mapbox://styles/correctiv/cj5ck638406zq2rs1y0toq1ba",maxZoom:8});return t.on("load",function(){t.addLayer({id:"stations_small",type:"circle",source:{type:"geojson",data:d(r.opts.stations)},paint:{"circle-radius":3,"circle-color":{property:"amplitude",type:"interval",stops:f}}}),t.addLayer({id:"stations_large",type:"circle",source:{type:"geojson",data:d(r.opts.stations)},paint:{"circle-radius":6,"circle-color":{property:"amplitude",type:"interval",stops:f}}}),t.on("click","stations_small",y),t.on("click","stations_large",y),t.addControl(new s.default({defaultLanguage:r.i18n.getLocale()})),t.dragRotate.disable(),t.touchZoomRotate.disableRotation(),t.on("mouseenter","stations_large",function(){t.getCanvas().style.cursor="pointer"}),t.on("mouseleave","stations_large",function(){t.getCanvas().style.cursor=""})}),t}})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-explorer-overview",'<div class="explorer__intro"> <h2 class="explorer__intro__title">{i18n.t(\'explorer.title\')}</h2> <p>{i18n.t(\'explorer.intro\')}</p> <sealevel-article-link for="{\'main\'}"></sealevel-article-link> <p><a href="{i18n.t(\'explorer.download_link\')}" target="_blank">{i18n.t(\'explorer.download_text\')}</a></p> </div> <h2 class="explorer__title">{i18n.t(\'explorer.choose_continent\')}</h2> <ul class="entries"> <li each="{stations, slug in continents}"> <a class="entries__item" href="{route(slug)}"> <h3 class="entries__title"> {i18n.t(\'explorer.continents.\' + slug)} </h3> <p class="entries__description"> {i18n.t(\'explorer.num_stations\', stations.length)} </p> </a> </li> </ul>',"","",function(t){function e(t){return t&&t.__esModule?t:{default:t}}var r=this,i=n(2),o=e(i);n(5),this.on("update",function(){r.continents=o.default.groupBy(r.opts.stations,"continent")}),this.route=function(e){return t.pathToContinent(r.i18n.getLocale(),e)}})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-explorer-station",'<h1 class="explorer__title">{opts.station.location}</h1> <sealevel-linechart chartdata="{opts.tides}"></sealevel-linechart> <p>{stationDesc}</p> <sealevel-article-link for="{opts.station.id}"></sealevel-article-link> <a href="{routeBack(opts.station.country)}"> {i18n.t(\'explorer.back\')} {i18n.t(\'explorer.countries.\' + opts.station.country)} </a>',"","",function(t){function e(t){return t&&t.__esModule?t:{default:t}}var r=this,i=n(2),o=e(i);n(38),n(5);var a=function(t){return(t>0)-(t<0)||+t},s=function(t,e){return t?a(t)!==a(e)&&t>0?"explorer.station_desc_unclear_positive":a(t)!==a(e)&&t<0?"explorer.station_desc_unclear_negative":t>2?"explorer.station_desc_higher":t>.5?"explorer.station_desc_high":t>-.5?"explorer.station_desc_flat":t>-2?"explorer.station_desc_low":"explorer.station_desc_lower":"explorer.station_desc_unclear"};this.on("update",function(){var t=r.opts,e=t.station,n=t.tides;if(e&&n){var i=o.default.last(n),a=i.tide,u=i.year,l=o.default.last(e.timeseries);e.last_available_year=u,e.last_available_value_since_beginning=a>0?a:-a,e.last_available_value=l>0?l:-l,"145"===e.id?r.stationDesc=r.i18n.t("explorer.manila"):r.stationDesc=r.i18n.t(s(e.trend_longest,a),e)}}),this.routeBack=function(e){return t.pathToCountry(r.i18n.getLocale(),e)}})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-explorer",'<sealevel-explorer-map if="{state.items && isLargeViewport()}" stations="{state.items}" country="{state.country}" continent="{state.continent}" station="{state.station}" route-to-station="{routes.routeToStation}"></sealevel-explorer-map> <div class="explorer-panel"> <sealevel-explorer-breadcrumbs if="{state.station || state.continent || state.country}" continent="{state.continent || getContinentForCountry(state.country)}" country="{state.country || getCountryForStation(state.station)}" station="{getStationContext(state.station)}" routes="{routes}"></sealevel-explorer-breadcrumbs> <sealevel-explorer-overview if="{!state.station && !state.continent && !state.country}" stations="{state.items}" path-to-continent="{routes.continent}"></sealevel-explorer-overview> <sealevel-explorer-continent if="{state.continent}" continent="{state.continent}" countries="{getCountriesForContinent(state.continent)}" stations="{state.items}" path-to-country="{routes.country}"></sealevel-explorer-continent> <sealevel-explorer-country if="{state.country}" country="{state.country}" stations="{getStationsForCountry(state.country)}" path-to-station="{routes.station}"></sealevel-explorer-country> <sealevel-explorer-station if="{state.station && state.items}" station="{getStationContext(state.station)}" tides="{getTidesForStation(state.station)}" path-to-country="{routes.country}"></sealevel-explorer-station> </div>',"","",function(t){function e(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}var i=this,o=n(2),a=r(o),s=n(4),u=r(s),l=n(6),c=e(l),h=n(7);n(34),n(31),n(35),n(33),n(32),n(36);var f=480;this.routes=c,this.state=this.store.getState().explorer,this.subscribe(function(t){var e=t.explorer;i.update({state:e})}),(0,u.default)("*/explore/stations/*",function(t,e){i.dispatch((0,h.requestStationList)({station:e}))}),(0,u.default)("*/explore/countries/*",function(t,e){i.dispatch((0,h.requestStationList)({country:e}))}),(0,u.default)("*/explore/start",function(t){i.dispatch((0,h.requestStationList)())}),(0,u.default)("*/explore/*",function(t,e){i.dispatch((0,h.requestStationList)({continent:e}))}),(0,u.default)("*/explore/",function(t){i.dispatch((0,h.requestStationList)())}),u.default.exec(),this.on("route",function(t){i.i18n.setLocale(t)}),this.isLargeViewport=function(){return document.documentElement.clientWidth>=f},this.getStationContext=function(t){return a.default.find(i.state.items,function(e){var n=e.id;return n===t})},this.getContinentForCountry=function(t){var e=a.default.find(i.state.items,function(e){var n=e.country;return n===t});return e&&e.continent},this.getCountriesForContinent=function(t){return i.state.items&&(0,a.default)(i.state.items).filter(function(e){return e.continent===t}).map("country").uniq().sort().value()},this.getStationsForCountry=function(t){return i.state.items&&(0,a.default)(i.state.items).filter(function(e){return e.country===t}).sortBy("location").value()},this.getCountryForStation=function(t){var e=a.default.find(i.state.items,function(e){return e.id===t});return e&&e.country},this.getTidesForStation=function(t){return i.state.tides&&i.state.tides[t]},window.addEventListener("deviceorientation",function(){return i.update()}),window.addEventListener("resize",function(){return i.update()})})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-linechart",'<svg ref="linechart"></svg>',"",'class="linechart"',function(t){function e(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var r=this,i=n(3),o=e(i);this.on("updated",function(){r.opts.chartdata&&s(r.opts.chartdata)});var a=o.bisector(function(t){return t.year}).left,s=function(t){function e(){var e=o.mouse(this),n=d.invert(e[0]),r=a(t,n),i=t[r],s=d(i.year),u=m(i.tide);_.select("text").attr("transform","translate("+s+")").text(i.tide),_.select("#linechart__focuscircle").attr("cx",s).attr("cy",u),_.select("#linechart__focusLineX").attr("x1",d(i.year)).attr("y1",m(p[0])).attr("x2",d(i.year)).attr("y2",m(p[1]))}var n=r.refs.linechart,i=r.root.clientWidth,s=r.root.clientHeight,u=o.select(n);u.selectAll("*").remove(),u.attr("width",i),u.attr("height",s);var l={top:40,left:40,right:40,bottom:40},c=s-l.top-l.bottom,h=i-l.left-l.right,f=o.extent(t,function(t){return t.year}),p=o.extent(t,function(t){return t.tide}),d=o.scaleLinear().rangeRound([0,h]).domain(f),m=o.scaleLinear().rangeRound([c,0]).domain(p),v=o.line().defined(function(t){return null!==t.tide}).x(function(t){return d(t.year)}).y(function(t){return m(t.tide)}).curve(o.curveNatural),y=u.append("g").attr("transform","translate("+l.left+", "+l.top+")");y.append("g").attr("class","linechart__axis linechart__axis-x").attr("transform","translate(0,"+c+")").call(o.axisBottom(d).ticks(5).tickFormat(o.format("d"))),y.append("g").attr("class","linechart__axis linechart__axis-y").call(o.axisLeft(m).ticks(5)).append("text").attr("fill","#000").attr("y",-15).attr("x",5).attr("dy","0.71em").style("text-anchor","end").text(r.i18n.t("explorer.linechart_axis")),y.append("path").datum(t).attr("class","linechart__line").attr("d",v);var _=y.append("g").style("display","none");_.append("circle").attr("id","linechart__focuscircle").attr("r",4.5).attr("class","linechart__circle"),_.append("text").attr("x",9).attr("dy",".35em"),_.append("line").attr("id","linechart__focusLineX").attr("class","linechart__focusline"),_.append("line").attr("id","linechart__focusLineY").attr("class","linechart__focusline"),y.append("rect").attr("class","linechart__overlay").attr("width",h).attr("height",c).on("mouseover",function(){return _.style("display",null)}).on("mouseout",function(){return _.style("display","none")}).on("mousemove",e)}})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-redirects","<h2>Not found</h2>","","",function(t){function e(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}var i=n(4),o=r(i),a=n(6),s=e(a);(0,o.default)("/",function(){return s.routeToIntro("de")}),(0,o.default)("de",function(){return s.routeToIntro("de")}),(0,o.default)("fr",function(){return s.routeToIntro("fr")}),(0,o.default)("en",function(){return s.routeToIntro("en")}),o.default.exec()})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-scrolly-content","","","",function(t){var e=this,r=function(t){var r=document.createElement("section"),i=document.createElement("div");i.className="scrolly__content",r.setAttribute("id",t),r.setAttribute("class","scrolly__section--"+t),r.appendChild(i),i.innerHTML=n(121)("./"+e.locale+"/"+t+".md"),e.root.appendChild(r)},i=function(){e.opts.steps.forEach(r)};this.shouldUpdate=function(){if(e.locale!==e.i18n.getLocale())return!0},this.on("update",function(){e.locale=e.i18n.getLocale(),i()})})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-scrolly-info",'<div class="scrolly__main__wrapper"> <div class="container"> <div class="scrolly__main__content"> <div class="scrolly__main__body"> {i18n.t(\'scrolly.info\')} </div> <figure class="scrolly__figure"> [INFOGRAFIK] <figcaption class="scrolly__figure__caption"> <p>{i18n.t(\'scrolly.info_figcaption\')}</p> </figcaption> </figure> </div> </div> </div>',"",'class="scrolly__main--world-info"',function(t){})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-scrolly-intro",'<div class="intro__container"> <h1 class="intro__title">{i18n.t(\'intro.title\')}</h1> <p class="intro__logo-correctiv">Ein Projekt von CORRECTIV</p> <video autoplay muted loop poster="../{video.jpg}"> <source riot-src="../{video.mp4}" type="video/mp4"> <source riot-src="../{video.webm}" type="video/webm"> </video> <div class="intro__lead"> <p>{i18n.t(\'intro.lead\')}</p> </div> <a onclick="{opts.onMoreClick}" class="intro__more" href="{articlePath()}"> {i18n.t(\'intro.more\')} </a> </div>',"",'class="{intro: true, intro--active: opts.active}"',function(t){var e=this,r=n(6);this.video={jpg:n(71),mp4:n(72),webm:n(73)},this.articlePath=function(){return(0,r.article)(e.i18n.getLocale())}})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-scrolly-main",'<div class="scrolly__main__wrapper"> <div class="container"> <div class="scrolly__main__content"> <h1 class="scrolly__title"> {i18n.t(\'scrolly.title\')} </h1> <div class="scrolly__main__sidebar"> <div class="scrolly__main__authors"> {i18n.t(\'scrolly.authors\')} <em>Annika Jöres,</em> <em>Simon Jockers,</em> <em>Felix Michel</em> </div> <div class="scrolly__main__partners"> <h4>{i18n.t(\'scrolly.partners\')}</h4> [Partner Logos] </div> </div> <div class="scrolly__main__body"> {i18n.t(\'scrolly.introduction\')} </div> <figure class="scrolly__figure--marginal"> <img src="/assets/content/pegel_genua.jpg" alt=""> <figcaption class="scrolly__figure__caption"> <p>{i18n.t(\'scrolly.tide_figcaption\')}</p> <p> {i18n.t(\'scrolly.credits\')} <a href="https://commons.wikimedia.org/w/index.php?curid=37402118">Motnbkl</a>, <a href="http://creativecommons.org/licenses/by-sa/4.0">CC-BY-SA 4.0</a> </p> </figcaption> </figure> <div class="scrolly__main__body" ref="body"></div> </div> </div> </div>',"",'class="scrolly__main"',function(t){var e=this;this.on("update",function(){var t=e.i18n.getLocale(),r=n(122)("./"+t+"/main.md");e.refs.body.innerHTML=r})})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-scrolly-map-animation",'<svg ref="vis"></svg> <div class="container"> <span class="scrolly__map-animation__counter"> {year} </span> </div>',"","",function(t){function e(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){var e=a.min(t,function(t){return a.min(t.timeseries)}),n=a.max(t,function(t){return a.max(t.timeseries)});return[e,n]}var i=this,o=n(3),a=e(o),s=1985,u=2015,l=500,c=200;this.on("mount",function(){h(i.opts.map)}),this.on("unmount",function(){p()}),this.on("updated",function(){d()});var h=function(t){var e=a.select(i.refs.vis);if(i.stations=i.opts.items,i.stations.length>0){i.paths=e.selectAll("path").data(i.stations).enter().append("path");var n=r(i.stations);i.scale=a.scaleLinear().rangeRound([c,0]).domain(n),f(),t.on("viewreset",d),t.on("move",d)}},f=function(){i.year=s,i.animationLoop=setInterval(function(){i.update({year:++i.year}),i.year>=u&&p()},l)},p=function(){clearInterval(i.animationLoop)},d=function(){var t=m(i.opts.map),e=a.geoPath();e.projection(t),i.paths.transition(l).attr("transform",function(e){var n=i.year,r=t(e.lngLat),o=e.timeseries[n]||0,a=Math.abs(i.scale(o)-i.scale(0)),s=r[0]-3,u=o<=0?r[1]:r[1]-a;
return"translate("+s+", "+u+")"}).attr("d",function(t){var e=t.timeseries[i.year],n=Math.abs(i.scale(e)-i.scale(0));return e?e>=0?"M 3,0 6, "+n+" 0, "+n+" z":"M 0 0 L 3 "+n+" L 6 0 z":"M 0 0 L 3 0 L 6 0 z"}).attr("class",function(t){return t.timeseries[i.year]<0?"scrolly__map-animation__item--negative":"scrolly__map-animation__item--positive"})},m=function(t){var e=t.getCanvas().getBoundingClientRect(),n=t.getCenter(),r=t.getZoom(),i=256/Math.PI*Math.pow(2,r),o=a.geoMercator().center([n.lng,n.lat]).translate([e.width/2,e.height/2]).scale(i);return o}})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-scrolly-map-visualization-tooltip",'<h4 class="scrolly__map-visualization__tooltip__location"> {opts.location} </h4> <p class="scrolly__map-visualization__tooltip__value"> <strong>{opts.value}mm</strong> {i18n.t(\'scrolly.period\')} </p>',"",'class="scrolly__map-visualization__tooltip" riot-style="{getStyle(opts.position)}"',function(t){this.getStyle=function(t){var e=t[0],n=t[1];return"left: "+(e||0)+"px; top: "+(n||0)+"px"}})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-scrolly-map-visualization",'<svg> <g ref="vis"></g> <g ref="annotations"></g> </svg> <sealevel-scrolly-map-visualization-tooltip if="{tooltip}" value="{tooltip.value}" location="{tooltip.location}" position="{tooltip.position}"></sealevel-scrolly-map-visualization-tooltip>',"",'class="scrolly__map-visualization {scrolly__map-visualization--hidden: isMoving}"',function(t){function e(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var i=this,o=n(3),a=r(o),s=n(61),u=r(s),l=n(52),c=e(l);n(45);var h=1985,f=2015,p=500,d=12,m=u.annotationCustomType(u.annotationCallout,{className:"custom",connector:{end:"dot"},note:{lineType:"horizontal"}}),v=[{data:{lonLat:["120.968","14.58"]},note:{title:"Der Pegel Manila",label:"ist in 30 Jahren um fast 40cm gestiegen."},dy:30,dx:-30,type:m,color:"black"},{data:{lonLat:["120.91","14.71"]},note:{title:"Besonders gefährdet",label:"sind Gebiete unterhalb von 10 Meter über dem Meer."},dy:30,dx:-30,type:m,color:"black"}],y=function(){i.update({isMoving:t.map.isMoving()})},_=function(t){return"undefined"!=typeof t},g=function(t){var e=t[h],n=t[f];return _(e)&&_(n)?n-e:0},x=function(t,e){var n=t.location,r=t.timeseries;i.update({tooltip:{location:n,value:g(r),position:e}})},b=function(){i.update({tooltip:null})};this.isMoving=!0,this.tooltip=null,this.on("mount",function(){i.mixin((0,c.default)({container:i.refs.vis,map:i.opts.map,stations:i.opts.items,minYear:h,maxYear:f,width:d,height:p,tooltip:{show:x,hide:b}})),i.sparkVis.redraw(),i.opts.map.on("movestart",y),i.opts.map.on("moveend",y),i.opts.map.on("viewreset",i.sparkVis.redraw),i.opts.map.on("move",i.sparkVis.redraw)}),this.on("unmount",function(){i.opts.map.off("movestart",y),i.opts.map.off("moveend",y),i.opts.map.off("movestart",y),i.opts.map.off("moveend",y)}),this.on("redraw",function(t){var e=u.annotation().annotations(v).textWrap(180).accessors({x:function(e){var n=e.lonLat;return t(n)[0]},y:function(e){var n=e.lonLat;return t(n)[1]}});a.select(i.refs.annotations).call(e)})})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-scrolly-map",'<div id="scrolly__map" class="scrolly__map__container"></div> <sealevel-scrolly-map-animation if="{state.animation.items && activeStep === \'world\'}" map="{map}" items="{state.animation.items}"></sealevel-scrolly-map-animation> <sealevel-scrolly-map-visualization if="{state.animation.items && activeStep !== \'world\'}" map="{map}" items="{state.explorer.items}"></sealevel-scrolly-map-visualization>',"",'class="scrolly__map"',function(t){function e(t){return t&&t.__esModule?t:{default:t}}var r=this,i=n(19),o=e(i),a=n(9),s=n(7);n(44),n(46),this.activeLayers=[],this.state=this.store.getState(),this.subscribe(function(t){return r.update({state:t})}),this.on("update",function(){r.activeStep=r.state.navigation.activeStep}),this.on("updated",function(){r.map&&u(r.activeStep)}),this.on("mount",function(){r.map=l(),r.store.dispatch((0,a.fetchAnimationDataIfNeeded)()),r.store.dispatch((0,s.requestStationList)())});var u=function(t){switch(t){case"world":r.map.fitBounds([[-160,-55],[185.1,75]],{duration:0});break;case"manila":r.map.flyTo({center:[121,14.65],zoom:9.5,offset:[-100,0]});break;case"scandinavia":r.map.fitBounds([[-25.18,54.47],[32.82,71.27]],{offset:[100,0]});break;case"france":r.map.flyTo({center:[3.93,43.52],zoom:4,offset:[-100,0]});break;case"usa":r.map.flyTo({center:[-73.93,40.52],zoom:5,offset:[150,0]});break;case"argentina":r.map.flyTo({center:[-58.38,-34.6],zoom:5,offset:[-100,0]})}},l=function(){o.default.accessToken="pk.eyJ1IjoiY29ycmVjdGl2IiwiYSI6ImNpZXZoc2k3dzAwYjZ0cGtzZ3lzcWRxZ3oifQ.D7nZQDnSO4BMLssgleNSSg";var t=new o.default.Map({container:"scrolly__map",style:"mapbox://styles/correctiv/cj5ck638406zq2rs1y0toq1ba",zoom:3});return t.on("load",function(){t.dragRotate.disable(),t.touchZoomRotate.disableRotation()}),t}})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-scrolly-outro",'<div class="container"> <article class="outro__article outro__article--main"> <a href="{i18n.t(\'outro.main.url\')}"> <h1 class="outro__article__title">{i18n.t(\'outro.main.title\')}</h1> <p class="outro__article__teaser">{i18n.t(\'outro.main.teaser\')}</p> <span class="outro__article__more">{i18n.t(\'outro.more\')}</span> </a> </article> <article class="outro__article outro__article--aside"> <a href="{i18n.t(\'outro.aside.url\')}"> <h1 class="outro__article__title">{i18n.t(\'outro.aside.title\')}</h1> <p class="outro__article__teaser">{i18n.t(\'outro.aside.teaser\')}</p> <span class="outro__article__more">{i18n.t(\'outro.more\')}</span> </a> </article> </div>',"",'class="outro"',function(t){})}).call(e,n(1))},function(t,e,n){(function(t){"use strict";t.tag2("sealevel-scrolly",'<sealevel-scrolly-map></sealevel-scrolly-map> <sealevel-scrolly-intro id="intro" locale="{locale}"></sealevel-scrolly-intro> <article class="scrolly__article"> <sealevel-scrolly-main id="main"></sealevel-scrolly-main> <sealevel-scrolly-info id="world"></sealevel-scrolly-info> <div class="container"> <sealevel-scrolly-content steps="{steps}"></sealevel-scrolly-content> </div> </article> <sealevel-scrolly-outro id="outro" locale="{locale}"></sealevel-scrolly-outro> <nav class="scrolly__nav" data-gumshoe-header> <ul data-gumshoe> <li> <a class="scrolly__nav__link" href="#intro"> <b>{i18n.t(\'scrolly.steps.intro\')}</b> </a> </li> <li> <a class="scrolly__nav__link" href="#main"> <b>{i18n.t(\'scrolly.steps.main\')}</b> </a> </li> <li> <a class="scrolly__nav__link" href="#world"> <b>{i18n.t(\'scrolly.steps.world\')}</b> </a> </li> <li each="{step in steps}"> <a class="scrolly__nav__link" href="#{step}"> <b>{i18n.t(\'scrolly.steps.\' + step)}</b> </a> </li> </ul> </nav>',"","",function(t){function e(t){return t&&t.__esModule?t:{default:t}}var r=this,i=n(4),o=e(i),a=n(2),s=e(a),u=n(77),l=e(u),c=n(114),h=e(c),f=n(10),p=n(6);n(42),n(43),n(41),n(40),n(48),n(47);var d=function(t){var e=t&&t.target.id,n=r.i18n.getLocale();e&&(0,o.default)(n+"/#"+e)},m=function(){(0,h.default)('a[href*="#main"]'),l.default.init({container:window,offset:0,activeClass:"scrolly__nav__link--active",callback:d})};this.steps=p.STEPS,this.on("route",function(t,e){r.i18n.setLocale(t),r.store.dispatch((0,f.setStep)(e)),r.root.className="scrolly--"+e+"-active"}),this.on("mount",function(){s.default.defer(m)})})}).call(e,n(1))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),o=r(i),a=n(4),s=r(a),u=n(107),l=r(u),c=n(22),h=n(112),f=r(h),p=n(55),d=r(p),m=n(51),v=r(m);n(70),n(30),s.default.base("/");var y=(0,c.createStore)(d.default,(0,c.applyMiddleware)(l.default));o.default.mixin((0,f.default)(y)),o.default.mixin((0,v.default)("de")),o.default.mount("sealevel-app")},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return{init:function(){var e=s.default.mapValues({en:l.default,fr:h.default,de:p.default},function(t,e){return new o.default({phrases:t,locale:e})});this.i18n={t:function(){var n;return(n=e[t]).t.apply(n,arguments)},setLocale:function(e){t=e},getLocale:function(){return t}}}}};var i=n(104),o=r(i),a=n(2),s=r(a),u=n(94),l=r(u),c=n(95),h=r(c),f=n(93),p=r(f)},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.width,n=t.height,r=t.stations,i=t.tooltip,c=t.map,h=o.scaleLinear().rangeRound([n,0]).domain(s(r)),f=function(e){var n=e[t.minYear],r=e[t.maxYear];return l(n)&&l(r)?r-n:0};return{init:function(){var n=this;r.length>0&&o.select(t.container).selectAll("path").data(r).enter().append("path"),this.sparkVis={redraw:function(){var r=u(c),s=o.geoPath();s.projection(r),o.select(t.container).selectAll("path").attr("transform",function(t){var e=r([t.longitude,t.latitude]),n=f(t.timeseries),i=Math.abs(h(n)-h(0)),o=e[0]-3,a=n<=0?e[1]:e[1]-i;return"translate("+o+", "+a+")"}).attr("d",function(t){var n=f(t.timeseries),r=Math.abs(h(n)-h(0));return a(e,r,n)}).attr("class",function(t){return f(t.timeseries)<0?"scrolly__map-visualization__item--negative":"scrolly__map-visualization__item--positive"}).on("mouseover",function(t){i.show(t,r([t.longitude,t.latitude]))}).on("mouseout",function(){i.hide()}),n.trigger("redraw",r)}}}}};var i=n(3),o=r(i),a=function(t,e,n){return n?n>0?"M "+t/2+", 0 "+t+", "+e+" 0, "+e+" z":n<0?"M 0 0 L "+t/2+" "+e+" L "+t+" 0 z":void 0:"M 0 0 L "+t/2+" 0 L "+t+" 0 z"},s=function(t){var e=o.min(t,function(t){return o.min(t.timeseries)}),n=o.max(t,function(t){return o.max(t.timeseries)});return[e,n]},u=function(t){var e=t.getCanvas().getBoundingClientRect(),n=t.getCenter(),r=t.getZoom(),i=256/Math.PI*Math.pow(2,r),a=o.geoMercator().center([n.lng,n.lat]).translate([e.width/2,e.height/2]).scale(i);return a},l=function(t){return"undefined"!=typeof t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(9),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];switch(e.type){case i.REQUEST_ANIMATION_DATA:return r({},t,{isFetching:!0,items:null});case i.RECEIVE_ANIMATION_DATA:return r({},t,{isFetching:!1,items:e.data});default:return t}};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(7),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];switch(e.type){case i.REQUEST_STATION_LIST_DATA:return r({},t,{isFetchingOverviewData:!0});case i.RECEIVE_STATION_LIST_DATA:return r({},t,{items:e.data,isFetchingOverviewData:!1});case i.REQUEST_STATION_DETAILS_DATA:return r({},t,{isFetchingFullData:!0});case i.RECEIVE_STATION_DETAILS_DATA:return r({},t,{tides:e.data,isFetchingFullData:!1});case i.SHOW_STATION_DETAILS:return r({},t,{station:e.data,country:null,continent:null});case i.SHOW_STATION_LIST:return r({},t,{station:e.station,country:e.country,continent:e.continent});default:return t}};e.default=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(22),o=n(56),a=r(o),s=n(54),u=r(s),l=n(53),c=r(l),h=(0,i.combineReducers)({navigation:a.default,explorer:u.default,animation:c.default});e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(10),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{activeStep:null},e=arguments[1];switch(e.type){case i.SET_STEP:return r({},t,{activeStep:e.id});default:return t}};e.default=o},function(t,e){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function r(t){return 3*t.length/4-n(t)}function i(t){var e,r,i,o,a,s,u=t.length;a=n(t),s=new c(3*u/4-a),i=a>0?u-4:u;var h=0;for(e=0,r=0;e<i;e+=4,r+=3)o=l[t.charCodeAt(e)]<<18|l[t.charCodeAt(e+1)]<<12|l[t.charCodeAt(e+2)]<<6|l[t.charCodeAt(e+3)],s[h++]=o>>16&255,s[h++]=o>>8&255,s[h++]=255&o;return 2===a?(o=l[t.charCodeAt(e)]<<2|l[t.charCodeAt(e+1)]>>4,s[h++]=255&o):1===a&&(o=l[t.charCodeAt(e)]<<10|l[t.charCodeAt(e+1)]<<4|l[t.charCodeAt(e+2)]>>2,s[h++]=o>>8&255,s[h++]=255&o),s}function o(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}function a(t,e,n){for(var r,i=[],a=e;a<n;a+=3)r=(t[a]<<16)+(t[a+1]<<8)+t[a+2],i.push(o(r));return i.join("")}function s(t){for(var e,n=t.length,r=n%3,i="",o=[],s=16383,l=0,c=n-r;l<c;l+=s)o.push(a(t,l,l+s>c?c:l+s));return 1===r?(e=t[n-1],i+=u[e>>2],i+=u[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=u[e>>10],i+=u[e>>4&63],i+=u[e<<2&63],i+="="),o.push(i),o.join("")}e.byteLength=r,e.toByteArray=i,e.fromByteArray=s;for(var u=[],l=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=h.length;f<p;++f)u[f]=h[f],l[h.charCodeAt(f)]=f;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(t,e,n){(function(t){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(i()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=a.prototype):(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,e,n)}function s(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,n,r):"string"==typeof e?h(t,e,n):d(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e,n,r){return u(e),e<=0?o(t,e):void 0!==n?"string"==typeof r?o(t,e).fill(n,r):o(t,e).fill(n):o(t,e)}function c(t,e){if(u(e),t=o(t,e<0?0:0|m(e)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(e,n);t=o(t,r);var i=t.write(e,n);return i!==r&&(t=t.slice(0,i)),t}function f(t,e){var n=e.length<0?0:0|m(e.length);t=o(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),a.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=a.prototype):t=f(t,e),t}function d(t,e){if(a.isBuffer(e)){var n=0|m(e.length);return t=o(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||K(e.length)?o(t,0):f(t,e);if("Buffer"===e.type&&Q(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function v(t){return+t!=t&&(t=0),a.alloc(+t)}function y(t,e){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(t).length;default:if(r)return W(t).length;e=(""+e).toLowerCase(),r=!0}}function _(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return z(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return L(this,e,n);case"base64":return k(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function x(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=a.from(e,r)),a.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,u=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}var l;if(i){var c=-1;for(l=n;l<s;l++)if(o(t,l)===o(e,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===u)return c*a}else c!==-1&&(l-=l-c),c=-1}else for(n+u>s&&(n=s-u),l=n;l>=0;l--){for(var h=!0,f=0;f<u;f++)if(o(t,l+f)!==o(e,f)){h=!1;break}if(h)return l}return-1}function w(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function M(t,e,n,r){return Y(W(e,t.length-n),t,n,r)}function T(t,e,n,r){return Y(G(e),t,n,r)}function S(t,e,n,r){return T(t,e,n,r)}function E(t,e,n,r){return Y(X(e),t,n,r)}function A(t,e,n,r){return Y(H(e,t.length-n),t,n,r)}function k(t,e,n){return 0===e&&n===t.length?J.fromByteArray(t):J.fromByteArray(t.slice(e,n))}function z(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,l,c,h;switch(s){case 1:o<128&&(a=o);break;case 2:u=t[i+1],128===(192&u)&&(h=(31&o)<<6|63&u,h>127&&(a=h));break;case 3:u=t[i+1],l=t[i+2],128===(192&u)&&128===(192&l)&&(h=(15&o)<<12|(63&u)<<6|63&l,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:u=t[i+1],l=t[i+2],c=t[i+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(h=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c,h>65535&&h<1114112&&(a=h))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return C(r)}function C(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=tt));return n}function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function L(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function I(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=Z(t[o]);return i}function O(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function D(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function B(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,r,i){return i||B(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(t,e,n,r,23,4),n+4}function U(t,e,n,r,i){return i||B(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(t,e,n,r,52,8),n+8}function V(t){if(t=q(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function q(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function W(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;a<r;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function H(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function X(t){return J.toByteArray(V(t))}function Y(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function K(t){return t!==t}var J=n(57),$=n(89),Q=n(91);e.Buffer=a,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),e.kMaxLength=i(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,n){return s(null,t,e,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,e,n){return l(null,t,e,n)},a.allocUnsafe=function(t){return c(null,t)},a.allocUnsafeSlow=function(t){return c(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Q(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=a.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=y,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?z(this,0,t):_.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,e,n,r,i){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,s=n-e,u=Math.min(o,s),l=this.slice(r,i),c=t.slice(e,n),h=0;h<u;++h)if(l[h]!==c[h]){o=l[h],s=c[h];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},a.prototype.indexOf=function(t,e,n){return x(this,t,e,n,!0)},a.prototype.lastIndexOf=function(t,e,n){return x(this,t,e,n,!1)},a.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return M(this,t,e,n);case"ascii":return T(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;a.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=a.prototype;else{var i=e-t;r=new a(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},a.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},a.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},a.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},a.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},a.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),$.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),$.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),$.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),$.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;N(this,t,e,n,i,0)}var o=1,a=0;for(this[e]=255&t;++a<n&&(o*=256);)this[e+a]=t/o&255;return e+n},a.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;N(this,t,e,n,i,0)}var o=n-1,a=1;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+n},a.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):j(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},a.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},a.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},a.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):j(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},a.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},a.prototype.writeDoubleLE=function(t,e,n){return U(this,t,e,!0,n)},a.prototype.writeDoubleBE=function(t,e,n){return U(this,t,e,!1,n)},a.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},a.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=a.isBuffer(t)?t:W(new a(t,r).toString()),u=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%u]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,function(){return this}())},function(t,e,n){!function(t,r){r(e,n(11),n(12))}(this,function(t,e,n){"use strict";function r(){n.event.stopImmediatePropagation()}function i(t,e){var r=t.document.documentElement,i=n.select(t).on("dragstart.drag",null);e&&(i.on("click.drag",l,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function o(t,e,n,r,i,o,a,s,u,l){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=u,this._=l}function a(){return!n.event.button}function s(){return this.parentNode}function u(t){return null==t?{x:n.event.x,y:n.event.y}:t}var l=function(){n.event.preventDefault(),n.event.stopImmediatePropagation()},c=function(t){var e=t.document.documentElement,r=n.select(t).on("dragstart.drag",l,!0);"onselectstart"in e?r.on("selectstart.drag",l,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")},h=function(t){return function(){return t}};o.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var f=function(){function t(t){t.on("mousedown.drag",f).on("touchstart.drag",m).on("touchmove.drag",v).on("touchend.drag touchcancel.drag",y).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(){if(!x&&b.apply(this,arguments)){var t=_("mouse",w.apply(this,arguments),n.mouse,this,arguments);t&&(n.select(n.event.view).on("mousemove.drag",p,!0).on("mouseup.drag",d,!0),c(n.event.view),r(),g=!1,t("start"))}}function p(){l(),g=!0,T.mouse("drag")}function d(){n.select(n.event.view).on("mousemove.drag mouseup.drag",null),i(n.event.view,g),l(),T.mouse("end")}function m(){if(b.apply(this,arguments)){var t,e,i=n.event.changedTouches,o=w.apply(this,arguments),a=i.length;for(t=0;t<a;++t)(e=_(i[t].identifier,o,n.touch,this,arguments))&&(r(),e("start"))}}function v(){var t,e,r=n.event.changedTouches,i=r.length;for(t=0;t<i;++t)(e=T[r[t].identifier])&&(l(),e("drag"))}function y(){var t,e,i=n.event.changedTouches,o=i.length;for(x&&clearTimeout(x),x=setTimeout(function(){x=null},500),t=0;t<o;++t)(e=T[i[t].identifier])&&(r(),e("end"))}function _(e,r,i,a,s){var u,l,c,h=i(r,e),f=S.copy();if(n.customEvent(new o(t,"beforestart",u,e,E,h[0],h[1],0,0,f),function(){return null!=(n.event.subject=u=M.apply(a,s))&&(l=u.x-h[0]||0,c=u.y-h[1]||0,!0)}))return function p(d){var m,v=h;switch(d){case"start":T[e]=p,m=E++;break;case"end":delete T[e],--E;case"drag":h=i(r,e),m=E}n.customEvent(new o(t,d,u,e,m,h[0]+l,h[1]+c,h[0]-v[0],h[1]-v[1],f),f.apply,f,[d,a,s])}}var g,x,b=a,w=s,M=u,T={},S=e.dispatch("start","drag","end"),E=0;return t.filter=function(e){return arguments.length?(b="function"==typeof e?e:h(!!e),t):b},t.container=function(e){return arguments.length?(w="function"==typeof e?e:h(e),t):w},t.subject=function(e){return arguments.length?(M="function"==typeof e?e:h(e),t):M},t.on=function(){var e=S.on.apply(S,arguments);return e===S?t:e},t};t.drag=f,t.dragDisable=c,t.dragEnable=i,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(){this._x0=this._y0=this._x1=this._y1=null,this._=[]}function n(){return new e}var r=Math.PI,i=2*r,o=1e-6,a=i-o;e.prototype=n.prototype={constructor:e,moveTo:function(t,e){this._.push("M",this._x0=this._x1=+t,",",this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._.push("Z"))},lineTo:function(t,e){this._.push("L",this._x1=+t,",",this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._.push("Q",+t,",",+e,",",this._x1=+n,",",this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._.push("C",+t,",",+e,",",+n,",",+r,",",this._x1=+i,",",this._y1=+o)},arcTo:function(t,e,n,i,a){t=+t,e=+e,n=+n,i=+i,a=+a;var s=this._x1,u=this._y1,l=n-t,c=i-e,h=s-t,f=u-e,p=h*h+f*f;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._.push("M",this._x1=t,",",this._y1=e);else if(p>o)if(Math.abs(f*l-c*h)>o&&a){var d=n-s,m=i-u,v=l*l+c*c,y=d*d+m*m,_=Math.sqrt(v),g=Math.sqrt(p),x=a*Math.tan((r-Math.acos((v+p-y)/(2*_*g)))/2),b=x/g,w=x/_;Math.abs(b-1)>o&&this._.push("L",t+b*h,",",e+b*f),this._.push("A",a,",",a,",0,0,",+(f*d>h*m),",",this._x1=t+w*l,",",this._y1=e+w*c)}else this._.push("L",this._x1=t,",",this._y1=e);else;},arc:function(t,e,n,s,u,l){t=+t,e=+e,n=+n;var c=n*Math.cos(s),h=n*Math.sin(s),f=t+c,p=e+h,d=1^l,m=l?s-u:u-s;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._.push("M",f,",",p):(Math.abs(this._x1-f)>o||Math.abs(this._y1-p)>o)&&this._.push("L",f,",",p),n&&(m>a?this._.push("A",n,",",n,",0,1,",d,",",t-c,",",e-h,"A",n,",",n,",0,1,",d,",",this._x1=f,",",this._y1=p):(m<0&&(m=m%i+i),this._.push("A",n,",",n,",0,",+(m>=r),",",d,",",this._x1=t+n*Math.cos(u),",",this._y1=e+n*Math.sin(u))))},rect:function(t,e,n,r){this._.push("M",this._x0=this._x1=+t,",",this._y0=this._y1=+e,"h",+n,"v",+r,"h",-n,"Z")},toString:function(){return this._.join("")}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){!function(t,r){r(e,n(12),n(59),n(62),n(11))}(this,function(t,e,n,r,i){"use strict";function o(){var t=[],n=void 0,r=void 0,o=[],a={},s={},u=!1,l=void 0,c=V,h=void 0,f=void 0,m=i.dispatch("subjectover","subjectout","subjectclick","connectorover","connectorout","connectorclick","noteover","noteout","noteclick","dragend","dragstart"),v=void 0,y=function r(i){v=i,u||i.selectAll("circle.handle").remove();var y=t.map(function(t){return t.type||(t.type=c),t.disable||(t.disable=o),new p(t)});n=n||new d({annotations:y,accessors:a,accessorsInverse:s,ids:l});var _=i.selectAll("g").data([n]);_.enter().append("g").attr("class","annotations");var g=i.select("g.annotations");K(g,n.annotations,"g","annotation");var r=g.selectAll("g.annotation");r.each(function(t){var n=e.select(this);n.attr("class","annotation"),K(n,[t],"g","annotation-connector"),K(n,[t],"g","annotation-subject"),K(n,[t],"g","annotation-note"),K(n.select("g.annotation-note"),[t],"g","annotation-note-content"),t.type="[object Object]"===t.type.toString()?t.type:new t.type({a:n,annotation:t,textWrap:h,notePadding:f,editMode:u,dispatcher:m,accessors:a}),t.type.draw(),t.type.drawText&&t.type.drawText()})};return y.json=function(){return console.log("Annotations JSON was copied to your clipboard. Please note the annotation type is not JSON compatible. It appears in the objects array in the console, but not in the copied JSON.",n.json),window.copy(JSON.stringify(n.json.map(function(t){return delete t.type,t}))),y},y.update=function(){return t&&n&&(t=n.annotations.map(function(t){return t.type.draw(),t})),y},y.updateText=function(){return n&&(n.updateText(h),t=n.annotations),y},y.updatedAccessors=function(){return n.setPositionWithAccessors(),t=n.annotations,y},y.disable=function(e){return arguments.length?(o=e,n&&(n.updateDisable(o),t=n.annotations),y):o},y.textWrap=function(e){return arguments.length?(h=e,n&&(n.updateTextWrap(h),t=n.annotations),y):h},y.notePadding=function(e){return arguments.length?(f=e,n&&(n.updateNotePadding(f),t=n.annotations),y):f},y.type=function(e,r){return arguments.length?(c=e,n&&(n.annotations.map(function(t){t.type.note&&t.type.note.selectAll("*:not(.annotation-note-content)").remove(),t.type.noteContent&&t.type.noteContent.selectAll("*").remove(),t.type.subject&&t.type.subject.selectAll("*").remove(),t.type.connector&&t.type.connector.selectAll("*").remove(),t.type.typeSettings={},t.type=c,t.subject=r&&r.subject||t.subject,t.connector=r&&r.connector||t.connector,t.note=r&&r.note||t.note}),t=n.annotations),y):c},y.annotations=function(e){if(!arguments.length)return n&&n.annotations||t;if(t=e,n&&n.annotations){var r=t.some(function(t){return!t.type||"[object Object]"!==t.type.toString()});r?(n=null,y(v)):n.annotations=t}return y},y.context=function(t){return arguments.length?(r=t,y):r},y.accessors=function(t){return arguments.length?(a=t,y):a},y.accessorsInverse=function(t){return arguments.length?(s=t,y):s},y.ids=function(t){return arguments.length?(l=t,y):l},y.editMode=function(e){return arguments.length?(u=e,v&&v.selectAll("g.annotation").classed("editable",u),n&&(n.editMode(u),t=n.annotations),y):u},y.collection=function(t){return arguments.length?(n=t,y):n},y.on=function(){var t=m.on.apply(m,arguments);return t===m?y:t},y}var a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},f=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},p=function(){function t(e){var n=e.x,r=void 0===n?0:n,i=e.y,o=void 0===i?0:i,s=e.nx,u=e.ny,l=e.dy,c=void 0===l?0:l,h=e.dx,f=void 0===h?0:h,p=e.color,d=void 0===p?"grey":p,m=e.data,v=e.type,y=e.subject,_=e.connector,g=e.note,x=e.disable,b=e.id,w=e.className;a(this,t),this._dx=void 0!==s?s-r:f,this._dy=void 0!==u?u-o:c,this._x=r,this._y=o,this._color=d,this.id=b,this._className=w||"",this.type=v||"",this.data=m,this.note=g||{},this.connector=_||{},this.subject=y||{},this.disable=x||[]}return s(t,[{key:"updatePosition",value:function(){this.type.setPosition&&(this.type.setPosition(),0!==this.type.subject.selectAll(":not(.handle)").nodes().length&&this.type.redrawSubject())}},{key:"updateOffset",value:function(){this.type.setOffset&&(this.type.setOffset(),0!==this.type.connector.selectAll(":not(.handle)").nodes().length&&this.type.redrawConnector(),this.type.redrawNote())}},{key:"className",get:function(){return this._className},set:function(t){this._className=t,this.type.setClassName&&this.type.setClassName()}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this.updatePosition()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this.updatePosition()}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this.updatePosition()}},{key:"dx",get:function(){return this._dx},set:function(t){this._dx=t,this.updateOffset()}},{key:"dy",get:function(){return this._dy},set:function(t){this._dy=t,this.updateOffset()}},{key:"nx",set:function(t){this._dx=t-this._x,this.updateOffset()}},{key:"ny",set:function(t){this._dy=t-this._y,this.updateOffset()}},{key:"offset",get:function(){return{x:this._dx,y:this._dy}},set:function(t){var e=t.x,n=t.y;this._dx=e,this._dy=n,this.updateOffset()}},{key:"position",get:function(){return{x:this._x,y:this._y}},set:function(t){var e=t.x,n=t.y;this._x=e,this._y=n,this.updatePosition()}},{key:"translation",get:function(){return{x:this._x+this._dx,y:this._y+this._dy}}},{key:"json",get:function(){var t={x:this._x,y:this._y,dx:this._dx,dy:this._dy};return this.data&&Object.keys(this.data).length>0&&(t.data=this.data),this.type&&(t.type=this.type),this._className&&(t.className=this._className),Object.keys(this.connector).length>0&&(t.connector=this.connector),Object.keys(this.subject).length>0&&(t.subject=this.subject),Object.keys(this.note).length>0&&(t.note=this.note),t}}]),t}(),d=function(){function t(e){var n=e.annotations,r=e.accessors,i=e.accessorsInverse;
a(this,t),this.accessors=r,this.accessorsInverse=i,this.annotations=n}return s(t,[{key:"clearTypes",value:function(t){this.annotations.forEach(function(e){e.type=void 0,e.subject=t&&t.subject||e.subject,e.connector=t&&t.connector||e.connector,e.note=t&&t.note||e.note})}},{key:"setPositionWithAccessors",value:function(){var t=this;this.annotations.forEach(function(e){e.type.setPositionWithAccessors(t.accessors)})}},{key:"editMode",value:function(t){this.annotations.forEach(function(e){e.type&&(e.type.editMode=t,e.type.updateEditMode())})}},{key:"updateDisable",value:function(t){this.annotations.forEach(function(e){e.disable=t,e.type&&t.forEach(function(t){e.type[t]&&(e.type[t].remove&&e.type[t].remove(),e.type[t]=void 0)})})}},{key:"updateTextWrap",value:function(t){this.annotations.forEach(function(e){e.type&&e.type.updateTextWrap&&e.type.updateTextWrap(t)})}},{key:"updateText",value:function(){this.annotations.forEach(function(t){t.type&&t.type.drawText&&t.type.drawText()})}},{key:"updateNotePadding",value:function(t){this.annotations.forEach(function(e){e.type&&(e.type.notePadding=t)})}},{key:"json",get:function(){var t=this;return this.annotations.map(function(e){var n=e.json;return t.accessorsInverse&&e.data&&(n.data={},Object.keys(t.accessorsInverse).forEach(function(r){n.data[r]=t.accessorsInverse[r]({x:e.x,y:e.y})})),n})}},{key:"noteNodes",get:function(){return this.annotations.map(function(t){return u({},t.type.getNoteBBoxOffset(),{positionX:t.x,positionY:t.y})})}}]),t}(),m=function(t){var e=t.cx,n=void 0===e?0:e,r=t.cy,i=void 0===r?0:r;return{move:{x:n,y:i}}},v=function(t){var e=t.cx,n=void 0===e?0:e,r=t.cy,i=void 0===r?0:r,o=t.r1,a=t.r2,s=t.padding,u={move:{x:n,y:i}};return void 0!==o&&(u.r1={x:n+o/Math.sqrt(2),y:i+o/Math.sqrt(2)}),void 0!==a&&(u.r2={x:n+a/Math.sqrt(2),y:i+a/Math.sqrt(2)}),void 0!==s&&(u.padding={x:n+o+s,y:i}),u},y=function(t){var r=t.group,i=t.handles,o=t.r,a=void 0===o?10:o,s=r.selectAll("circle.handle").data(i);s.enter().append("circle").attr("class","handle").attr("fill","grey").attr("fill-opacity",.1).attr("cursor","move").attr("stroke-dasharray",5).attr("stroke","grey").call(n.drag().container(e.select("g.annotations").node()).on("start",function(t){return t.start&&t.start(t)}).on("drag",function(t){return t.drag&&t.drag(t)}).on("end",function(t){return t.end&&t.end(t)})),r.selectAll("circle.handle").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",function(t){return t.r||a}).attr("class",function(t){return"handle "+(t.className||"")}),s.exit().remove()},_=function(t,e){return"dynamic"!==t&&"left"!==t&&"right"!==t||(t=e<0?"top":"bottom"),t},g=function(t,e){return"dynamic"!==t&&"top"!==t&&"bottom"!==t||(t=e<0?"right":"left"),t},x=["topBottom","top","bottom"],b=["leftRight","left","right"],w=function(t){var e=t.padding,n=void 0===e?0:e,r=t.bbox,i=void 0===r?{x:0,y:0,width:0,height:0}:r,o=t.align,a=t.orientation,s=t.offset,u=void 0===s?{x:0,y:0}:s,l=-i.x,c=0;return x.indexOf(a)!==-1?(o=g(o,u.x),u.y<0&&"topBottom"===a||"top"===a?c-=i.height+n:c+=n,"middle"===o?l-=i.width/2:"right"===o&&(l-=i.width)):b.indexOf(a)!==-1&&(o=_(o,u.y),u.x<0&&"leftRight"===a||"left"===a?l-=i.width+n:l+=n,"middle"===o?c-=i.height/2:"top"===o&&(c-=i.height)),{x:l,y:c}},M=function(t){var e=t.data,n=t.curve,i=void 0===n?r.curveLinear:n,o=t.canvasContext,a=t.className,s=t.classID,u=r.line().curve(i),l={type:"path",className:a,classID:s,data:e};return o?(u.context(o),l.pathMethods=u):l.attrs={d:u(e)},l},T=function(t){var e=t.data,n=t.canvasContext,i=t.className,o=t.classID,a={type:"path",className:i,classID:o,data:e},s=r.arc().innerRadius(e.innerRadius||0).outerRadius(e.outerRadius||e.radius||2).startAngle(e.startAngle||0).endAngle(e.endAngle||2*Math.PI);return n?(s.context(n),a.pathMethods=lineGen):a.attrs={d:s()},a},S=function(t){var e=t.align,n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.bbox,s=t.offset;e=_(e,s.y),"top"===e?o-=a.height:"middle"===e&&(o-=a.height/2);var u=[[r,o],[r,o+a.height]];return{components:[M({data:u,className:"note-line"})]}},E=function(t){var e=t.align,n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.offset,s=t.bbox;e=g(e,a.x),"right"===e?r-=s.width:"middle"===e&&(r-=s.width/2);var u=[[r,o],[r+s.width,o]];return{components:[M({data:u,className:"note-line"})]}},A=function(t){var e=t.type,n=t.subjectType,r=e.annotation,i=r.position,o=r.x-i.x,a=o+r.dx,s=r.y-i.y,u=s+r.dy,l=r.subject;if("circle"===n&&(l.outerRadius||l.radius)){var c=Math.sqrt((o-a)*(o-a)+(s-u)*(s-u)),h=Math.asin(-u/c),f=l.outerRadius||l.radius+(l.radiusPadding||0);o=Math.abs(Math.cos(h)*f)*(a<0?-1:1),s=Math.abs(Math.sin(h)*f)*(u<0?-1:1)}if("rect"===n){var p=l.width,d=l.height;(p>0&&r.dx>0||p<0&&r.dx<0)&&(o=Math.abs(p)>Math.abs(r.dx)?p/2:p),(d>0&&r.dy>0||d<0&&r.dy<0)&&(s=Math.abs(d)>Math.abs(r.dy)?d/2:d),o===p/2&&s===d/2&&(o=a,s=u)}return[[o,s],[a,u]]},k=function(t){var e=A(t);return{components:[M({data:e,className:"connector"})]}},z=function(t){var e=t.type,n=t.subjectType,r=e.annotation,i=r.position,o=r.x-i.x,a=o+r.dx,s=r.y-i.y,u=s+r.dy,l=r.subject;if("rect"===n){var c=l.width,h=l.height;(c>0&&r.dx>0||c<0&&r.dx<0)&&(o=Math.abs(c)>Math.abs(r.dx)?c/2:c),(h>0&&r.dy>0||h<0&&r.dy<0)&&(s=Math.abs(h)>Math.abs(r.dy)?h/2:h),o===c/2&&s===h/2&&(o=a,s=u)}var f=[[o,s],[a,u]],p=u-s,d=a-o,m=a,v=u,y=u<s&&a>o||a<o&&u>s?-1:1;if(Math.abs(d)<Math.abs(p)?(m=a,v=s+d*y):(v=u,m=o+p*y),"circle"===n&&(l.outerRadius||l.radius)){var _=(l.outerRadius||l.radius)+(l.radiusPadding||0),g=_/Math.sqrt(2);if(Math.abs(d)>g&&Math.abs(p)>g)o=g*(a<0?-1:1),s=g*(u<0?-1:1),f=[[o,s],[m,v],[a,u]];else if(Math.abs(d)>Math.abs(p)){var x=Math.asin(-u/_);o=Math.abs(Math.cos(x)*_)*(a<0?-1:1),f=[[o,u],[a,u]]}else{var b=Math.acos(a/_);s=Math.abs(Math.sin(b)*_)*(u<0?-1:1),f=[[a,s],[a,u]]}}else f=[[o,s],[m,v],[a,u]];return{components:[M({data:f,className:"connector"})]}},C=function(t){var n=t.type,i=t.connectorData,o=t.subjectType;i||(i={}),i.points&&"number"!=typeof i.points||(i.points=P(n.annotation.offset,i.points)),i.curve||(i.curve=r.curveCatmullRom);var a=[];if(n.editMode){var s=i.points.map(function(t,e){return u({},m({cx:t[0],cy:t[1]}),{index:e})}),l=function(t){i.points[t][0]+=e.event.dx,i.points[t][1]+=e.event.dy,n.redrawConnector()};a=n.mapHandles(s.map(function(t){return u({},t.move,{drag:l.bind(n,t.index)})}))}var c=A({type:n,subjectType:o});c=[c[0]].concat(f(i.points),[c[1]]);var h=[M({data:c,curve:i.curve,className:"connector"})];return{components:h,handles:a}},P=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n={x:t.x/(e+1),y:t.y/(e+1)},r=[],i=1;i<=e;i++)r.push([n.x*i+i%2*20,n.y*i-i%2*20]);return r},L=function(t){var e=t.annotation,n=t.start,r=t.end,i=t.scale,o=void 0===i?1:i,a=e.position;n=n?[-r[0]+n[0],-r[1]+n[1]]:[e.dx,e.dy],r||(r=[e.x-a.x,e.y-a.y]);var s=r[0],u=r[1],l=n[0],c=n[1],h=10*o,f=16/180*Math.PI,p=Math.atan(c/l);l<0&&(p+=Math.PI);var d=[[s,u],[Math.cos(p+f)*h+s,Math.sin(p+f)*h+u],[Math.cos(p-f)*h+s,Math.sin(p-f)*h+u],[s,u]];return{components:[M({data:d,className:"connector-end connector-arrow",classID:"connector-end"})]}},I=function(t){var e=t.line,n=t.scale,r=void 0===n?1:n,i=T({className:"connector-end connector-dot",classID:"connector-end",data:{radius:3*Math.sqrt(r)}});return i.attrs.transform="translate("+e.data[0][0]+", "+e.data[0][1]+")",{components:[i]}},O=function(t){var n=t.subjectData,r=t.type;n.radius||n.outerRadius||(n.radius=20);var i=[],o=T({data:n,className:"subject"});if(r.editMode){var a=v({r1:o.data.outerRadius||o.data.radius,r2:o.data.innerRadius,padding:n.radiusPadding}),s=function(t){var i=n[t]+e.event.dx*Math.sqrt(2);n[t]=i,r.redrawSubject(),r.redrawConnector()},l=[u({},a.r1,{drag:s.bind(r,void 0!==n.outerRadius?"outerRadius":"radius")})];n.innerRadius&&l.push(u({},a.r2,{drag:s.bind(r,"innerRadius")})),i=r.mapHandles(l)}return o.attrs["fill-opacity"]=0,{components:[o],handles:i}},R=function(t){var n=t.subjectData,r=t.type;n.width||(n.width=100),n.height||(n.height=100);var i=[],o=n.width,a=n.height,s=[[0,0],[o,0],[o,a],[0,a],[0,0]],u=M({data:s,className:"subject"});if(r.editMode){var l=function(){n.width=e.event.x,r.redrawSubject(),r.redrawConnector()},c=function(){n.height=e.event.y,r.redrawSubject(),r.redrawConnector()},h=[{x:o,y:a/2,drag:l.bind(r)},{x:o/2,y:a,drag:c.bind(r)}];i=r.mapHandles(h)}return u.attrs["fill-opacity"]=.1,{components:[u],handles:i}},N=function(t){var e=t.subjectData,n=t.type,r=n.annotation.position,i=(void 0!==e.x1?e.x1:r.x)-r.x,o=(void 0!==e.x2?e.x2:r.x)-r.x,a=(void 0!==e.y1?e.y1:r.y)-r.y,s=(void 0!==e.y2?e.y2:r.y)-r.y,u=[[i,a],[o,s]];return{components:[M({data:u,className:"subject"})]}},D=function(t){var n=t.subjectData,r=void 0===n?{}:n,i=t.type,o=void 0===i?{}:i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=o.typeSettings&&o.typeSettings.subject;r.radius||(s&&s.radius?r.radius=s.radius:r.radius=14),r.x||s&&s.x&&(r.x=s.x),r.y||s&&s.y&&(r.y=s.y);var u=[],l=[],c=r.radius,h=.7*c,f=0,p=0,d=Math.sqrt(2)*c,m={xleftcorner:-c,xrightcorner:c,ytopcorner:-c,ybottomcorner:c,xleft:-d,xright:d,ytop:-d,ybottom:d};r.x&&!r.y?f=m["x"+r.x]:r.y&&!r.x?p=m["y"+r.y]:r.x&&r.y&&(f=m["x"+r.x+"corner"],p=m["y"+r.y+"corner"]);var v="translate("+f+", "+p+")",y=T({className:"subject",data:{radius:c}});y.attrs.transform=v,y.attrs.fill=a.color,y.attrs["stroke-linecap"]="round",y.attrs["stroke-width"]="3px";var _=T({className:"subject-ring",data:{outerRadius:c,innerRadius:h}});_.attrs.transform=v,_.attrs["stroke-width"]="3px",_.attrs.fill="white";var g=void 0;if(f&&p||!f&&!p)g=M({className:"subject-pointer",data:[[0,0],[f||0,0],[0,p||0],[0,0]]});else if(f||p){var x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t&&t/Math.sqrt(2)/Math.sqrt(2)||e*c/Math.sqrt(2)};g=M({className:"subject-pointer",data:[[0,0],[x(f),x(p)],[x(f,-1),x(p,-1)],[0,0]]})}if(g&&(g.attrs.fill=a.color,g.attrs["stroke-linecap"]="round",g.attrs["stroke-width"]="3px",l.push(g)),o.editMode){var b=function(){r.x=e.event.x<2*-c?"left":e.event.x>2*c?"right":void 0,r.y=e.event.y<2*-c?"top":e.event.y>2*c?"bottom":void 0,o.redrawSubject()},w={x:2*f,y:2*p,drag:b.bind(o)};w.x||w.y||(w.y=-c),u=o.mapHandles([w])}var S=void 0;return r.text&&(S={type:"text",className:"badge-text",attrs:{fill:"white",stroke:"none","font-size":".7em",text:r.text,"text-anchor":"middle",dy:".25em",x:f,y:p}}),l.push(y),l.push(_),l.push(S),{components:l,handles:u}},j=function(){function t(e){var n=e.a,r=e.annotation,i=e.editMode,o=e.dispatcher,s=e.notePadding,u=e.accessors;if(a(this,t),this.a=n,this.note=r.disable.indexOf("note")===-1&&n.select("g.annotation-note"),this.noteContent=this.note&&n.select("g.annotation-note-content"),this.connector=r.disable.indexOf("connector")===-1&&n.select("g.annotation-connector"),this.subject=r.disable.indexOf("subject")===-1&&n.select("g.annotation-subject"),this.dispatcher=o,o){var l=J.bind(null,o,r);l({component:this.note,name:"note"}),l({component:this.connector,name:"connector"}),l({component:this.subject,name:"subject"})}this.annotation=r,this.editMode=r.editMode||i,this.notePadding=void 0!==s?s:3,this.offsetCornerX=0,this.offsetCornerY=0,u&&r.data&&this.init(u)}return s(t,[{key:"init",value:function(t){this.annotation.x||this.mapX(t),this.annotation.y||this.mapY(t)}},{key:"mapY",value:function(t){t.y&&(this.annotation.y=t.y(this.annotation.data))}},{key:"mapX",value:function(t){t.x&&(this.annotation.x=t.x(this.annotation.data))}},{key:"updateEditMode",value:function(){this.a.selectAll("circle.handle").remove()}},{key:"drawOnSVG",value:function(t,e){var n=this;Array.isArray(e)||(e=[e]),e.filter(function(t){return t}).forEach(function(e){var r=e.type,i=e.className,o=e.attrs,a=e.handles,s=e.classID;if("handle"===r)y({group:t,r:o&&o.r,handles:a});else{K(t,[n.annotation],r,i,s);for(var u=t.select(r+"."+(s||i)),l=Object.keys(o),c=[],h=u.node().attributes,f=h.length-1;f>=0;f--){var p=h[f].name;l.indexOf(p)===-1&&"class"!==p&&c.push(p)}l.forEach(function(t){"text"===t?u.text(o[t]):u.attr(t,o[t])}),c.forEach(function(t){return u.attr(t,null)})}})}},{key:"getNoteBBox",value:function(){return Q(this.note,".annotation-note-content text")}},{key:"getNoteBBoxOffset",value:function(){var t=Q(this.note,".annotation-note-content"),e=this.noteContent.attr("transform").split(/\(|\,|\)/g);return t.offsetCornerX=parseFloat(e[1])+this.annotation.dx,t.offsetCornerY=parseFloat(e[2])+this.annotation.dy,t.offsetX=this.annotation.dx,t.offsetY=this.annotation.dy,t}},{key:"drawSubject",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.annotation.subject,r=e.type,i={type:this,subjectData:n},o={};"circle"===r?o=O(i):"rect"===r?o=R(i):"threshold"===r?o=N(i):"badge"===r&&(o=D(i,this.annotation));var a=o,s=a.components,u=void 0===s?[]:s,l=a.handles,c=void 0===l?[]:l;return u.forEach(function(e){e&&e.attrs&&!e.attrs.stroke&&(e.attrs.stroke=t.annotation.color)}),this.editMode&&(c=c.concat(this.mapHandles([{drag:this.dragSubject.bind(this)}])),u.push({type:"handle",handles:c})),u}},{key:"drawConnector",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.annotation.connector,r=n.type||e.type,i={type:this,connectorData:n};i.subjectType=this.typeSettings&&this.typeSettings.subject&&this.typeSettings.subject.type;var o={};o="curve"===r?C(i):"elbow"===r?z(i):k(i);var a=o,s=a.components,u=void 0===s?[]:s,l=a.handles,c=void 0===l?[]:l,h=u[0];h&&(h.attrs.stroke=this.annotation.color,h.attrs.fill="none");var f=n.end||e.end,p={};if("arrow"===f){var d=h.data[1],m=h.data[0],v=Math.sqrt(Math.pow(d[0]-m[0],2)+Math.pow(d[1]-m[1],2));v<5&&h.data[2]&&(d=h.data[2]),p=L({annotation:this.annotation,start:d,end:m,scale:n.endScale})}else"dot"===f&&(p=I({line:h,scale:n.endScale}));return p.components&&(p.components.forEach(function(e){e.attrs.fill=t.annotation.color,e.attrs.stroke=t.annotation.color}),u=u.concat(p.components)),this.editMode&&0!==c.length&&u.push({type:"handle",handles:c}),u}},{key:"drawNote",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.annotation.note,r=n.align||e.align||"dynamic",i={bbox:e.bbox,align:r,offset:this.annotation.offset},o=n.lineType||e.lineType,a={};"vertical"===o?a=S(i):"horizontal"===o&&(a=E(i));var s=a,u=s.components,l=void 0===u?[]:u,c=s.handles,h=void 0===c?[]:c;return l.forEach(function(e){e.attrs.stroke=t.annotation.color}),this.editMode&&(h=this.mapHandles([{x:0,y:0,drag:this.dragNote.bind(this)}]),l.push({type:"handle",handles:h})),l}},{key:"drawNoteContent",value:function(t){var e=this.annotation.note,n=void 0!==e.padding?e.padding:this.notePadding,r=e.orientation||t.orientation||"topBottom",i=e.lineType||t.lineType,o=e.align||t.align||"dynamic";"vertical"===i?r="leftRight":"horizontal"===i&&(r="topBottom");var a={padding:n,bbox:t.bbox,offset:this.annotation.offset,orientation:r,align:o},s=w(a),u=s.x,l=s.y;return this.offsetCornerX=u+this.annotation.dx,this.offsetCornerY=l+this.annotation.dy,this.note&&this.noteContent.attr("transform","translate("+u+", "+l+")"),[]}},{key:"drawOnScreen",value:function(t,e){return this.drawOnSVG(t,e)}},{key:"redrawSubject",value:function(){this.subject&&this.drawOnScreen(this.subject,this.drawSubject())}},{key:"redrawConnector",value:function(){this.connector&&this.drawOnScreen(this.connector,this.drawConnector())}},{key:"redrawNote",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNoteBBox();this.noteContent&&this.drawOnScreen(this.noteContent,this.drawNoteContent({bbox:t})),this.note&&this.drawOnScreen(this.note,this.drawNote({bbox:t}))}},{key:"setPosition",value:function(){var t=this.annotation.position;this.a.attr("transform","translate("+t.x+", "+t.y+")")}},{key:"setOffset",value:function(){if(this.note){var t=this.annotation.offset;this.note.attr("transform","translate("+t.x+", "+t.y+")")}}},{key:"setPositionWithAccessors",value:function(t){t&&this.annotation.data&&(this.mapX(t),this.mapY(t)),this.setPosition()}},{key:"setClassName",value:function(){this.a.attr("class","annotation "+(this.className&&this.className())+" "+(this.editMode?"editable":"")+" "+(this.annotation.className||""))}},{key:"draw",value:function(){this.setClassName(),this.setPosition(),this.setOffset(),this.redrawSubject(),this.redrawConnector(),this.redrawNote()}},{key:"dragstarted",value:function(){e.event.sourceEvent.stopPropagation(),this.dispatcher&&this.dispatcher.call("dragstart",this.a,this.annotation),this.a.classed("dragging",!0),this.a.selectAll("circle.handle").style("pointer-events","none")}},{key:"dragended",value:function(){this.dispatcher&&this.dispatcher.call("dragend",this.a,this.annotation),this.a.classed("dragging",!1),this.a.selectAll("circle.handle").style("pointer-events","all")}},{key:"dragSubject",value:function(){var t=this.annotation.position;t.x+=e.event.dx,t.y+=e.event.dy,this.annotation.position=t}},{key:"dragNote",value:function(){var t=this.annotation.offset;t.x+=e.event.dx,t.y+=e.event.dy,this.annotation.offset=t}},{key:"mapHandles",value:function(t){var e=this;return t.map(function(t){return u({},t,{start:e.dragstarted.bind(e),end:e.dragended.bind(e)})})}}]),t}(),B=function(t,e,n){return function(t){function r(t){a(this,r);var n=h(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));return n.typeSettings=e,e.disable&&e.disable.forEach(function(t){n[t]=void 0,"note"===t&&(n.noteContent=void 0)}),n}return c(r,t),s(r,[{key:"className",value:function(){return""+(e.className||l(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"className",this)&&l(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"className",this).call(this)||"")}},{key:"drawSubject",value:function(t){return this.typeSettings.subject=u({},e.subject,this.typeSettings.subject),l(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawSubject",this).call(this,u({},t,this.typeSettings.subject))}},{key:"drawConnector",value:function(t){return this.typeSettings.connector=u({},e.connector,this.typeSettings.connector),l(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawConnector",this).call(this,u({},t,e.connector,this.typeSettings.connector))}},{key:"drawNote",value:function(t){return this.typeSettings.note=u({},e.note,this.typeSettings.note),l(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawNote",this).call(this,u({},t,e.note,this.typeSettings.note))}},{key:"drawNoteContent",value:function(t){return l(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawNoteContent",this).call(this,u({},t,e.note,this.typeSettings.note))}}],[{key:"init",value:function(t,e){return l(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,t,e),n&&(t=n(t,e)),t}}]),r}(t)},F=function(t){function e(t){a(this,e);var n=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.textWrap=t.textWrap||120,n.drawText(),n}return c(e,t),s(e,[{key:"updateTextWrap",value:function(t){this.textWrap=t,this.drawText()}},{key:"drawText",value:function(){if(this.note){K(this.note,[this.annotation],"g","annotation-note-content");var t=this.note.select("g.annotation-note-content");K(t,[this.annotation],"rect","annotation-note-bg"),K(t,[this.annotation],"text","annotation-note-label"),K(t,[this.annotation],"text","annotation-note-title");var e={height:0},n=this.a.select("text.annotation-note-label"),r=this.annotation.note&&this.annotation.note.wrap||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrap||this.textWrap,i=this.annotation.note&&this.annotation.note.wrapSplitter||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrapSplitter;if(this.annotation.note.title){var o=this.a.select("text.annotation-note-title");o.text(this.annotation.note.title),o.attr("fill",this.annotation.color),o.attr("font-weight","bold"),o.call($,r,i),e=o.node().getBBox()}n.text(this.annotation.note.label).attr("dx","0"),n.call($,r,i),n.attr("y",1.1*e.height||0),n.attr("fill",this.annotation.color);var a=this.getNoteBBox();this.a.select("rect.annotation-note-bg").attr("width",a.width).attr("height",a.height).attr("x",a.x).attr("fill","white").attr("fill-opacity",0)}}}]),e}(j),U=B(F,{className:"label",note:{align:"middle"}}),V=B(F,{className:"callout",note:{lineType:"horizontal"}}),q=B(V,{className:"callout elbow",connector:{type:"elbow"}}),Z=B(V,{className:"callout curve",connector:{type:"curve"}}),W=B(j,{className:"badge",subject:{type:"badge"},disable:["connector","note"]}),G=B(q,{className:"callout circle",subject:{type:"circle"}}),H=B(q,{className:"callout rect",subject:{type:"rect"}}),X=function(t){function e(){return a(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,t),s(e,[{key:"mapY",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapY",this).call(this,t);var n=this.annotation;(n.subject.x1||n.subject.x2)&&n.data&&t.y&&(n.y=t.y(n.data)),!n.subject.x1&&!n.subject.x2||n.x||(n.x=n.subject.x1||n.subject.x2)}},{key:"mapX",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapX",this).call(this,t);var n=this.annotation;(n.subject.y1||n.subject.y2)&&n.data&&t.x&&(n.x=t.x(n.data)),!n.subject.y1&&!n.subject.y2||n.y||(n.y=n.subject.y1||n.subject.y2)}}]),e}(V),Y=B(X,{className:"callout xythreshold",subject:{type:"threshold"}}),K=function(t,e,n,r,i){var o=t.selectAll(n+"."+(i||r)).data(e);return o.enter().append(n).merge(o).attr("class",r),o.exit().remove(),t},J=function(t,e,n){var r=n.component,i=n.name;r&&r.on("mouseover.annotations",function(){t.call(i+"over",r,e)}).on("mouseout.annotations",function(){return t.call(i+"out",r,e)}).on("click.annotations",function(){return t.call(i+"click",r,e)})},$=function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2;t.each(function(){for(var t=e.select(this),o=t.text().split(r||/[ \t\r\n]+/).reverse().filter(function(t){return""!==t}),a=void 0,s=[],u=t.text(null).append("tspan").attr("x",0).attr("dy","0.8em");a=o.pop();)s.push(a),u.text(s.join(" ")),u.node().getComputedTextLength()>n&&s.length>1&&(s.pop(),u.text(s.join(" ")),s=[a],u=t.append("tspan").attr("x",0).attr("dy",i+"em").text(a))})},Q=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":not(.handle)";return t?t.selectAll(e).nodes().reduce(function(t,e){var n=e.getBBox();t.x=Math.min(t.x,n.x),t.y=Math.min(t.y,n.y),t.width=Math.max(t.width,n.width);var r=e&&e.attributes&&e.attributes.y;return t.height=Math.max(t.height,(r&&parseFloat(r.value)||0)+n.height),t},{x:0,y:0,width:0,height:0}):{x:0,y:0,width:0,height:0}},tt={annotation:o,annotationTypeBase:j,annotationLabel:U,annotationCallout:V,annotationCalloutCurve:Z,annotationCalloutElbow:q,annotationCalloutCircle:G,annotationCalloutRect:H,annotationXYThreshold:Y,annotationBadge:W,annotationCustomType:B};t.annotation=o,t.annotationTypeBase=j,t.annotationLabel=U,t.annotationCallout=V,t.annotationCalloutCurve=Z,t.annotationCalloutElbow=q,t.annotationCalloutCircle=G,t.annotationCalloutRect=H,t.annotationXYThreshold=Y,t.annotationBadge=W,t.annotationCustomType=B,t.default=tt,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){!function(t,r){r(e,n(60))}(this,function(t,e){"use strict";function n(t){return t.innerRadius}function r(t){return t.outerRadius}function i(t){return t.startAngle}function o(t){return t.endAngle}function a(t){return t&&t.padAngle}function s(t){return t>=1?Y:t<=-1?-Y:Math.asin(t)}function u(t,e,n,r,i,o,a,s){var u=n-t,l=r-e,c=a-i,h=s-o,f=(c*(e-o)-h*(t-i))/(h*u-c*l);return[t+f*u,e+f*l]}function l(t,e,n,r,i,o,a){var s=t-n,u=e-r,l=(a?o:-o)/Math.sqrt(s*s+u*u),c=l*u,h=-l*s,f=t+c,p=e+h,d=n+c,m=r+h,v=(f+d)/2,y=(p+m)/2,_=d-f,g=m-p,x=_*_+g*g,b=i-o,w=f*m-d*p,M=(g<0?-1:1)*Math.sqrt(Math.max(0,b*b*x-w*w)),T=(w*g-_*M)/x,S=(-w*_-g*M)/x,E=(w*g+_*M)/x,A=(-w*_+g*M)/x,k=T-v,z=S-y,C=E-v,P=A-y;return k*k+z*z>C*C+P*P&&(T=E,S=A),{cx:T,cy:S,x01:-c,y01:-h,x11:T*(i/b-1),y11:S*(i/b-1)}}function c(t){this._context=t}function h(t){return t[0]}function f(t){return t[1]}function p(t){this._curve=t}function d(t){function e(e){return new p(t(e))}return e._curve=t,e}function m(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(d(t)):e()._curve},t}function v(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function y(t){this._context=t}function _(t){this._context=t}function g(t){this._context=t}function x(t,e){this._basis=new y(t),this._beta=e}function b(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function w(t,e){this._context=t,this._k=(1-e)/6}function M(t,e){this._context=t,this._k=(1-e)/6}function T(t,e){this._context=t,this._k=(1-e)/6}function S(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>H){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>H){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function E(t,e){this._context=t,this._alpha=e}function A(t,e){this._context=t,this._alpha=e}function k(t,e){this._context=t,this._alpha=e}function z(t){this._context=t}function C(t){return t<0?-1:1}function P(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(C(o)+C(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function L(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function I(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function O(t){this._context=t}function R(t){this._context=new N(t)}function N(t){this._context=t}function D(t){return new O(t)}function j(t){return new R(t)}function B(t){this._context=t}function F(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function U(t,e){this._context=t,this._t=e}function V(t){return new U(t,0)}function q(t){return new U(t,1)}function Z(t,e){return t[e]}function W(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var G=function(t){return function(){return t}},H=1e-12,X=Math.PI,Y=X/2,K=2*X,J=function(){function t(){var t,n,r=+c.apply(this,arguments),i=+h.apply(this,arguments),o=d.apply(this,arguments)-Y,a=m.apply(this,arguments)-Y,_=Math.abs(a-o),g=a>o;if(y||(y=t=e.path()),i<r&&(n=i,i=r,r=n),i>H)if(_>K-H)y.moveTo(i*Math.cos(o),i*Math.sin(o)),y.arc(0,0,i,o,a,!g),r>H&&(y.moveTo(r*Math.cos(a),r*Math.sin(a)),y.arc(0,0,r,a,o,g));else{var x,b,w=o,M=a,T=o,S=a,E=_,A=_,k=v.apply(this,arguments)/2,z=k>H&&(p?+p.apply(this,arguments):Math.sqrt(r*r+i*i)),C=Math.min(Math.abs(i-r)/2,+f.apply(this,arguments)),P=C,L=C;if(z>H){var I=s(z/r*Math.sin(k)),O=s(z/i*Math.sin(k));(E-=2*I)>H?(I*=g?1:-1,T+=I,S-=I):(E=0,T=S=(o+a)/2),(A-=2*O)>H?(O*=g?1:-1,w+=O,M-=O):(A=0,w=M=(o+a)/2)}var R=i*Math.cos(w),N=i*Math.sin(w),D=r*Math.cos(S),j=r*Math.sin(S);if(C>H){var B=i*Math.cos(M),F=i*Math.sin(M),U=r*Math.cos(T),V=r*Math.sin(T);if(_<X){var q=E>H?u(R,N,U,V,B,F,D,j):[D,j],Z=R-q[0],W=N-q[1],G=B-q[0],J=F-q[1],$=1/Math.sin(Math.acos((Z*G+W*J)/(Math.sqrt(Z*Z+W*W)*Math.sqrt(G*G+J*J)))/2),Q=Math.sqrt(q[0]*q[0]+q[1]*q[1]);P=Math.min(C,(r-Q)/($-1)),L=Math.min(C,(i-Q)/($+1))}}A>H?L>H?(x=l(U,V,R,N,i,L,g),b=l(B,F,D,j,i,L,g),y.moveTo(x.cx+x.x01,x.cy+x.y01),L<C?y.arc(x.cx,x.cy,L,Math.atan2(x.y01,x.x01),Math.atan2(b.y01,b.x01),!g):(y.arc(x.cx,x.cy,L,Math.atan2(x.y01,x.x01),Math.atan2(x.y11,x.x11),!g),y.arc(0,0,i,Math.atan2(x.cy+x.y11,x.cx+x.x11),Math.atan2(b.cy+b.y11,b.cx+b.x11),!g),y.arc(b.cx,b.cy,L,Math.atan2(b.y11,b.x11),Math.atan2(b.y01,b.x01),!g))):(y.moveTo(R,N),y.arc(0,0,i,w,M,!g)):y.moveTo(R,N),r>H&&E>H?P>H?(x=l(D,j,B,F,r,-P,g),b=l(R,N,U,V,r,-P,g),y.lineTo(x.cx+x.x01,x.cy+x.y01),P<C?y.arc(x.cx,x.cy,P,Math.atan2(x.y01,x.x01),Math.atan2(b.y01,b.x01),!g):(y.arc(x.cx,x.cy,P,Math.atan2(x.y01,x.x01),Math.atan2(x.y11,x.x11),!g),y.arc(0,0,r,Math.atan2(x.cy+x.y11,x.cx+x.x11),Math.atan2(b.cy+b.y11,b.cx+b.x11),g),y.arc(b.cx,b.cy,P,Math.atan2(b.y11,b.x11),Math.atan2(b.y01,b.x01),!g))):y.arc(0,0,r,S,T,g):y.lineTo(D,j)}else y.moveTo(0,0);if(y.closePath(),t)return y=null,t+""||null}var c=n,h=r,f=G(0),p=null,d=i,m=o,v=a,y=null;return t.centroid=function(){var t=(+c.apply(this,arguments)+ +h.apply(this,arguments))/2,e=(+d.apply(this,arguments)+ +m.apply(this,arguments))/2-X/2;return[Math.cos(e)*t,Math.sin(e)*t]},t.innerRadius=function(e){return arguments.length?(c="function"==typeof e?e:G(+e),t):c},t.outerRadius=function(e){return arguments.length?(h="function"==typeof e?e:G(+e),t):h},t.cornerRadius=function(e){return arguments.length?(f="function"==typeof e?e:G(+e),t):f},t.padRadius=function(e){return arguments.length?(p=null==e?null:"function"==typeof e?e:G(+e),t):p},t.startAngle=function(e){return arguments.length?(d="function"==typeof e?e:G(+e),t):d},t.endAngle=function(e){return arguments.length?(m="function"==typeof e?e:G(+e),t):m},t.padAngle=function(e){return arguments.length?(v="function"==typeof e?e:G(+e),t):v},t.context=function(e){return arguments.length?(y=null==e?null:e,t):y},t};c.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var $=function(t){return new c(t)},Q=function(){function t(t){var u,l,c,h=t.length,f=!1;for(null==o&&(s=a(c=e.path())),u=0;u<=h;++u)!(u<h&&i(l=t[u],u,t))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+n(l,u,t),+r(l,u,t));if(c)return s=null,c+""||null}var n=h,r=f,i=G(!0),o=null,a=$,s=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:G(+e),t):n},t.y=function(e){return arguments.length?(r="function"==typeof e?e:G(+e),t):r},t.defined=function(e){return arguments.length?(i="function"==typeof e?e:G(!!e),t):i},t.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),t):a},t.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),t):o},t},tt=function(){function t(t){var n,h,f,p,d,m=t.length,v=!1,y=new Array(m),_=new Array(m);for(null==u&&(c=l(d=e.path())),n=0;n<=m;++n){if(!(n<m&&s(p=t[n],n,t))===v)if(v=!v)h=n,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),f=n-1;f>=h;--f)c.point(y[f],_[f]);c.lineEnd(),c.areaEnd()}v&&(y[n]=+r(p,n,t),_[n]=+o(p,n,t),c.point(i?+i(p,n,t):y[n],a?+a(p,n,t):_[n]))}if(d)return c=null,d+""||null}function n(){return Q().defined(s).curve(l).context(u)}var r=h,i=null,o=G(0),a=f,s=G(!0),u=null,l=$,c=null;return t.x=function(e){return arguments.length?(r="function"==typeof e?e:G(+e),i=null,t):r},t.x0=function(e){return arguments.length?(r="function"==typeof e?e:G(+e),t):r},t.x1=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:G(+e),t):i},t.y=function(e){return arguments.length?(o="function"==typeof e?e:G(+e),a=null,t):o},t.y0=function(e){return arguments.length?(o="function"==typeof e?e:G(+e),t):o},t.y1=function(e){return arguments.length?(a=null==e?null:"function"==typeof e?e:G(+e),t):a},t.lineX0=t.lineY0=function(){return n().x(r).y(o)},t.lineY1=function(){return n().x(r).y(a)},t.lineX1=function(){return n().x(i).y(o)},t.defined=function(e){return arguments.length?(s="function"==typeof e?e:G(!!e),t):s},t.curve=function(e){
return arguments.length?(l=e,null!=u&&(c=l(u)),t):l},t.context=function(e){return arguments.length?(null==e?u=c=null:c=l(u=e),t):u},t},et=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},nt=function(t){return t},rt=function(){function t(t){var s,u,l,c,h,f=t.length,p=0,d=new Array(f),m=new Array(f),v=+i.apply(this,arguments),y=Math.min(K,Math.max(-K,o.apply(this,arguments)-v)),_=Math.min(Math.abs(y)/f,a.apply(this,arguments)),g=_*(y<0?-1:1);for(s=0;s<f;++s)(h=m[d[s]=s]=+e(t[s],s,t))>0&&(p+=h);for(null!=n?d.sort(function(t,e){return n(m[t],m[e])}):null!=r&&d.sort(function(e,n){return r(t[e],t[n])}),s=0,l=p?(y-f*g)/p:0;s<f;++s,v=c)u=d[s],h=m[u],c=v+(h>0?h*l:0)+g,m[u]={data:t[u],index:s,value:h,startAngle:v,endAngle:c,padAngle:_};return m}var e=nt,n=et,r=null,i=G(0),o=G(K),a=G(0);return t.value=function(n){return arguments.length?(e="function"==typeof n?n:G(+n),t):e},t.sortValues=function(e){return arguments.length?(n=e,r=null,t):n},t.sort=function(e){return arguments.length?(r=e,n=null,t):r},t.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:G(+e),t):i},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:G(+e),t):o},t.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:G(+e),t):a},t},it=d($);p.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var ot=function(){return m(Q().curve(it))},at=function(){var t=tt().curve(it),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return m(n())},delete t.lineX0,t.lineEndAngle=function(){return m(r())},delete t.lineX1,t.lineInnerRadius=function(){return m(i())},delete t.lineY0,t.lineOuterRadius=function(){return m(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(d(t)):e()._curve},t},st={draw:function(t,e){var n=Math.sqrt(e/X);t.moveTo(n,0),t.arc(0,0,n,0,K)}},ut={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},lt=Math.sqrt(1/3),ct=2*lt,ht={draw:function(t,e){var n=Math.sqrt(e/ct),r=n*lt;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},ft=.8908130915292852,pt=Math.sin(X/10)/Math.sin(7*X/10),dt=Math.sin(K/10)*pt,mt=-Math.cos(K/10)*pt,vt={draw:function(t,e){var n=Math.sqrt(e*ft),r=dt*n,i=mt*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=K*o/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},yt={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},_t=Math.sqrt(3),gt={draw:function(t,e){var n=-Math.sqrt(e/(3*_t));t.moveTo(0,2*n),t.lineTo(-_t*n,-n),t.lineTo(_t*n,-n),t.closePath()}},xt=-.5,bt=Math.sqrt(3)/2,wt=1/Math.sqrt(12),Mt=3*(wt/2+1),Tt={draw:function(t,e){var n=Math.sqrt(e/Mt),r=n/2,i=n*wt,o=r,a=n*wt+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(xt*r-bt*i,bt*r+xt*i),t.lineTo(xt*o-bt*a,bt*o+xt*a),t.lineTo(xt*s-bt*u,bt*s+xt*u),t.lineTo(xt*r+bt*i,xt*i-bt*r),t.lineTo(xt*o+bt*a,xt*a-bt*o),t.lineTo(xt*s+bt*u,xt*u-bt*s),t.closePath()}},St=[st,ut,ht,yt,vt,gt,Tt],Et=function(){function t(){var t;if(i||(i=t=e.path()),n.apply(this,arguments).draw(i,+r.apply(this,arguments)),t)return i=null,t+""||null}var n=G(st),r=G(64),i=null;return t.type=function(e){return arguments.length?(n="function"==typeof e?e:G(e),t):n},t.size=function(e){return arguments.length?(r="function"==typeof e?e:G(+e),t):r},t.context=function(e){return arguments.length?(i=null==e?null:e,t):i},t},At=function(){};y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:v(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:v(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var kt=function(t){return new y(t)};_.prototype={areaStart:At,areaEnd:At,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:v(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var zt=function(t){return new _(t)};g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:v(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Ct=function(t){return new g(t)};x.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Pt=function t(e){function n(t){return 1===e?new y(t):new x(t,e)}return n.beta=function(e){return t(+e)},n}(.85);w.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:b(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:b(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Lt=function t(e){function n(t){return new w(t,e)}return n.tension=function(e){return t(+e)},n}(0);M.prototype={areaStart:At,areaEnd:At,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:b(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var It=function t(e){function n(t){return new M(t,e)}return n.tension=function(e){return t(+e)},n}(0);T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:b(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ot=function t(e){function n(t){return new T(t,e)}return n.tension=function(e){return t(+e)},n}(0);E.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:S(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Rt=function t(e){function n(t){return e?new E(t,e):new w(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);A.prototype={areaStart:At,areaEnd:At,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:S(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Nt=function t(e){function n(t){return e?new A(t,e):new M(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);k.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:S(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Dt=function t(e){function n(t){return e?new k(t,e):new T(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);z.prototype={areaStart:At,areaEnd:At,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var jt=function(t){return new z(t)};O.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:I(this,this._t0,L(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,I(this,L(this,n=P(this,t,e)),n);break;default:I(this,this._t0,n=P(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(R.prototype=Object.create(O.prototype)).point=function(t,e){O.prototype.point.call(this,e,t)},N.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},B.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=F(t),i=F(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Bt=function(t){return new B(t)};U.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Ft=function(t){return new U(t,.5)},Ut=Array.prototype.slice,Vt=function(t,e){if((r=t.length)>1)for(var n,r,i=1,o=t[e[0]],a=o.length;i<r;++i){n=o,o=t[e[i]];for(var s=0;s<a;++s)o[s][1]+=o[s][0]=isNaN(n[s][1])?n[s][0]:n[s][1]}},qt=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n},Zt=function(){function t(t){var o,a,s=e.apply(this,arguments),u=t.length,l=s.length,c=new Array(l);for(o=0;o<l;++o){for(var h,f=s[o],p=c[o]=new Array(u),d=0;d<u;++d)p[d]=h=[0,+i(t[d],f,d,t)],h.data=t[d];p.key=f}for(o=0,a=n(c);o<l;++o)c[a[o]].index=o;return r(c,a),c}var e=G([]),n=qt,r=Vt,i=Z;return t.keys=function(n){return arguments.length?(e="function"==typeof n?n:G(Ut.call(n)),t):e},t.value=function(e){return arguments.length?(i="function"==typeof e?e:G(+e),t):i},t.order=function(e){return arguments.length?(n=null==e?qt:"function"==typeof e?e:G(Ut.call(e)),t):n},t.offset=function(e){return arguments.length?(r=null==e?Vt:e,t):r},t},Wt=function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}Vt(t,e)}},Gt=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}Vt(t,e)}},Ht=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,l=0;s<i;++s){for(var c=t[e[s]],h=c[a][1]||0,f=c[a-1][1]||0,p=(h-f)/2,d=0;d<s;++d){var m=t[e[d]],v=m[a][1]||0,y=m[a-1][1]||0;p+=v-y}u+=h,l+=p*h}n[a-1][1]+=n[a-1][0]=o,u&&(o-=l/u)}n[a-1][1]+=n[a-1][0]=o,Vt(t,e)}},Xt=function(t){var e=t.map(W);return qt(t).sort(function(t,n){return e[t]-e[n]})},Yt=function(t){return Xt(t).reverse()},Kt=function(t){var e,n,r=t.length,i=t.map(W),o=qt(t).sort(function(t,e){return i[e]-i[t]}),a=0,s=0,u=[],l=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],l.push(n));return l.reverse().concat(u)},Jt=function(t){return qt(t).reverse()};t.arc=J,t.area=tt,t.line=Q,t.pie=rt,t.radialArea=at,t.radialLine=ot,t.symbol=Et,t.symbols=St,t.symbolCircle=st,t.symbolCross=ut,t.symbolDiamond=ht,t.symbolSquare=yt,t.symbolStar=vt,t.symbolTriangle=gt,t.symbolWye=Tt,t.curveBasisClosed=zt,t.curveBasisOpen=Ct,t.curveBasis=kt,t.curveBundle=Pt,t.curveCardinalClosed=It,t.curveCardinalOpen=Ot,t.curveCardinal=Lt,t.curveCatmullRomClosed=Nt,t.curveCatmullRomOpen=Dt,t.curveCatmullRom=Rt,t.curveLinearClosed=jt,t.curveLinear=$,t.curveMonotoneX=D,t.curveMonotoneY=j,t.curveNatural=Bt,t.curveStep=Ft,t.curveStepAfter=q,t.curveStepBefore=V,t.stack=Zt,t.stackOffsetExpand=Wt,t.stackOffsetNone=Vt,t.stackOffsetSilhouette=Gt,t.stackOffsetWiggle=Ht,t.stackOrderAscending=Xt,t.stackOrderDescending=Yt,t.stackOrderInsideOut=Kt,t.stackOrderNone=qt,t.stackOrderReverse=Jt,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){"use strict";var r=n(65),i=n(64),o=n(67),a=n(66),s=n(16),u=n(68),l={ToPrimitive:u,ToBoolean:function(t){return Boolean(t)},ToNumber:function(t){return Number(t)},ToInteger:function(t){var e=this.ToNumber(t);return r(e)?0:0!==e&&i(e)?o(e)*Math.floor(Math.abs(e)):e},ToInt32:function(t){return this.ToNumber(t)>>0},ToUint32:function(t){return this.ToNumber(t)>>>0},ToUint16:function(t){var e=this.ToNumber(t);if(r(e)||0===e||!i(e))return 0;var n=o(e)*Math.floor(Math.abs(e));return a(n,65536)},ToString:function(t){return String(t)},ToObject:function(t){return this.CheckObjectCoercible(t),Object(t)},CheckObjectCoercible:function(t,e){if(null==t)throw new TypeError(e||"Cannot call method on "+t);return t},IsCallable:s,SameValue:function(t,e){return t===e?0!==t||1/t===1/e:r(t)&&r(e)},Type:function(t){return null===t?"Null":"undefined"==typeof t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0}};t.exports=l},function(t,e){var n=Number.isNaN||function(t){return t!==t};t.exports=Number.isFinite||function(t){return"number"==typeof t&&!n(t)&&t!==1/0&&t!==-(1/0)}},function(t,e){t.exports=Number.isNaN||function(t){return t!==t}},function(t,e){t.exports=function(t,e){var n=t%e;return Math.floor(n>=0?n:n+e)}},function(t,e){t.exports=function(t){return t>=0?1:-1}},function(t,e,n){"use strict";var r=Object.prototype.toString,i=n(69),o=n(16),a={"[[DefaultValue]]":function(t,e){var n=e||("[object Date]"===r.call(t)?String:Number);if(n===String||n===Number){var a,s,u=n===String?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<u.length;++s)if(o(t[u[s]])&&(a=t[u[s]](),i(a)))return a;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}};t.exports=function(t,e){return i(t)?t:a["[[DefaultValue]]"](t,e)}},function(t,e){t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e){},function(t,e,n){t.exports=n.p+"f8cb0be6312225d9094bb063e1e2ff13.jpg"},function(t,e,n){t.exports=n.p+"dbc8b0805827a176ff2e3ecc12fc18da.mp4"},function(t,e,n){t.exports=n.p+"b5e4957ed4e139687e4cd8425f54edb5.webm"},function(t,e,n){function r(t,e,n){if(!s(e))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===u.call(t)?i(t,e,n):"string"==typeof t?o(t,e,n):a(t,e,n)}function i(t,e,n){for(var r=0,i=t.length;r<i;r++)l.call(t,r)&&e.call(n,t[r],r,t)}function o(t,e,n){for(var r=0,i=t.length;r<i;r++)e.call(n,t.charAt(r),r,t)}function a(t,e,n){for(var r in t)l.call(t,r)&&e.call(n,t[r],r,t)}var s=n(90);t.exports=r;var u=Object.prototype.toString,l=Object.prototype.hasOwnProperty},function(t,e){var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;t.exports=function(t,e,i){if("[object Function]"!==r.call(e))throw new TypeError("iterator must be a function");var o=t.length;if(o===+o)for(var a=0;a<o;a++)e.call(i,t[a],a,t);else for(var s in t)n.call(t,s)&&e.call(i,t[s],s,t)}},function(t,e){var n="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,i=Object.prototype.toString,o="[object Function]";t.exports=function(t){var e=this;if("function"!=typeof e||i.call(e)!==o)throw new TypeError(n+e);for(var a,s=r.call(arguments,1),u=function(){if(this instanceof a){var n=e.apply(this,s.concat(r.call(arguments)));return Object(n)===n?n:this}return e.apply(t,s.concat(r.call(arguments)))},l=Math.max(0,e.length-s.length),c=[],h=0;h<l;h++)c.push("$"+h);if(a=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(u),e.prototype){var f=function(){};f.prototype=e.prototype,a.prototype=new f,f.prototype=null}return a}},function(t,e,n){var r,i,o;(function(n){/*! gumshoe v3.5.0 | (c) 2017 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/gumshoe */
!function(n,a){i=[],r=a(n),o="function"==typeof r?r.apply(e,i):r,!(void 0!==o&&(t.exports=o))}("undefined"!=typeof n?n:this.window||this.global,function(t){"use strict";var e,n,r,i,o,a,s,u={},l="querySelector"in document&&"addEventListener"in t&&"classList"in document.createElement("_"),c=[],h={selector:"[data-gumshoe] a",selectorHeader:"[data-gumshoe-header]",container:t,offset:0,activeClass:"active",scrollDelay:!1,callback:function(){}},f=function(t,e,n){if("[object Object]"===Object.prototype.toString.call(t))for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(n,t[r],r,t);else for(var i=0,o=t.length;i<o;i++)e.call(n,t[i],i,t)},p=function(){var t={},e=!1,n=0,r=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],n++);for(var i=function(n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e&&"[object Object]"===Object.prototype.toString.call(n[r])?t[r]=p(!0,t[r],n[r]):t[r]=n[r])};n<r;n++){var o=arguments[n];i(o)}return t},d=function(t){return Math.max(t.scrollHeight,t.offsetHeight,t.clientHeight)},m=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},v=function(t){var n=0;if(t.offsetParent){do n+=t.offsetTop,t=t.offsetParent;while(t)}else n=t.offsetTop;return n=n-o-e.offset,n>=0?n:0},y=function(e){var n=e.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(t.innerHeight||document.documentElement.clientHeight)&&n.right<=(t.innerWidth||document.documentElement.clientWidth)},_=function(){c.sort(function(t,e){return t.distance>e.distance?-1:t.distance<e.distance?1:0})};u.setDistances=function(){r=m(),o=i?d(i)+v(i):0,f(c,function(t){t.distance=v(t.target)}),_()};var g=function(){var t=document.querySelectorAll(e.selector);f(t,function(t){if(t.hash){var e=document.querySelector(t.hash);e&&c.push({nav:t,target:e,parent:"li"===t.parentNode.tagName.toLowerCase()?t.parentNode:null,distance:0})}})},x=function(){a&&(a.nav.classList.remove(e.activeClass),a.parent&&a.parent.classList.remove(e.activeClass))},b=function(t){x(),t.nav.classList.add(e.activeClass),t.parent&&t.parent.classList.add(e.activeClass),e.callback(t),a={nav:t.nav,parent:t.parent}};u.getCurrentNav=function(){var n=t.pageYOffset;if(t.innerHeight+n>=r&&y(c[0].target))return b(c[0]),c[0];for(var i=0,o=c.length;i<o;i++){var a=c[i];if(a.distance<=n)return b(a),a}x(),e.callback()};var w=function(){f(c,function(t){t.nav.classList.contains(e.activeClass)&&(a={nav:t.nav,parent:t.parent})})};u.destroy=function(){e&&(e.container.removeEventListener("resize",T,!1),e.container.removeEventListener("scroll",T,!1),c=[],e=null,n=null,r=null,i=null,o=null,a=null,s=null)};var M=function(t){window.clearTimeout(n),n=setTimeout(function(){u.setDistances(),u.getCurrentNav()},66)},T=function(t){n||(n=setTimeout(function(){n=null,"scroll"===t.type&&u.getCurrentNav(),"resize"===t.type&&(u.setDistances(),u.getCurrentNav())},66))};return u.init=function(t){l&&(u.destroy(),e=p(h,t||{}),i=document.querySelector(e.selectorHeader),g(),0!==c.length&&(w(),u.setDistances(),u.getCurrentNav(),e.container.addEventListener("resize",T,!1),e.scrollDelay?e.container.addEventListener("scroll",M,!1):e.container.addEventListener("scroll",T,!1)))},u})}).call(e,function(){return this}())},function(t,e,n){var r=n(8);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e){t.exports="<h3 id=in-argentinien-berschwemmen-fl-sse-slums-und-villen>In Argentinien überschwemmen Flüsse Slums und Villen</h3> <p>In Südamerika liegen die größten Feuchtgebiete der Erde. Eines davon: Das Paraná-Delta, das in den Rio de la Plata mündet, zwischen Argentinien und Uruguay. Arme wohnen schon lange dort. Nun wird das Marschland bebaut mit Luxusapartments und Golfplätzen. Mit dem Klimawandel werden alle, Arm und Reich, umsiedeln müssen: Das Delta droht im Wasser unterzugehen.</p> "},function(t,e){t.exports="<h3 id=europas-str-nde-versinken>Europas Strände versinken</h3> <p>Das südfranzösische Palavas-les-Flots sollte einmal das „französische Florida&quot; werden. Nun prophezeien Experten dem Badeort, dass die Strände untergehen werden, mitsamt ihren Bars, Restaurants und Boots-Verleihen. Dass der Boden allmählich weggeschwemmt wird und das Grundwasser in der Nähe der Küste versalzt.</p> "},function(t,e){t.exports="<h3 id=in-asien-steigt-das-meer-am-st-rksten>In Asien steigt das Meer am stärksten</h3> <p>Alle zehn Städte aus unserer Auswahl, die am stärksten vom Anstieg des Wassers betroffen sind, liegen in Asien. In Manila, der Hauptstadt der Philippinen, liegt der Pegel heute rund 80 Zentimeter höher als vor 50 Jahren. Neun Millionen Menschen wohnen in der weitgehend flachen Metropolregion. Keine andere Megacity ist stärker bedroht vom Klimawandel als Manila.</p> "},function(t,e){t.exports="<h3 id=das-land-wird-gr-er-in-skandinavien>Das Land wird größer in Skandinavien</h3> <p>Auf den ersten Blick überraschend: In Skandinavien steigt das Land schneller als das Wasser, eine Folge der “postglazialen Hebung” nach dem Verschwinden der eiszeitlichen Gletscher. So dass inzwischen manche Häfen auf dem Trockenen liegen. In Vaasa in Finnland hob sich das Land um fast zehn Zentimeter, in Bodo, im Norden Norwegens, sogar um 25 Zentimeter.</p> "},function(t,e){t.exports="<h3 id=usa-ostk-ste-viel-geld-f-r-mehr-schutz>USA, Ostküste: Viel Geld für mehr Schutz</h3> <p>Auch Nordamerika wird von dramatischen Veränderungen erfasst werden. Die Vorboten sind für jeden sichtbar: In Alaska taut der Permafrostboden auf und macht Dörfer unbewohnbar, an der Ostküste werden jedes Jahr höhere Pegelstände gemessen, allein Miami hat 100 Millionen Dollar bereitgestellt, um Straßen höherzulegen, Hochwasserpumpen zu installieren und Abwässerkanäle vor eindringendem Meerwasser zu schützen. Und das ist erst der Anfang.</p> "},function(t,e){t.exports="<h3 id=en-argentine-la-crue-des-fleuves-inonde-indistinctement-les-quartiers-pauvres-et-les-quartiers-riches>En Argentine, la crue des fleuves inonde indistinctement les quartiers pauvres et les quartiers riches</h3> <p>Les plus vastes zones humides de la planète se trouvent en Amérique du Sud. Dans le delta du Paraná, non loin de Buenos Aires, les pauvres habitent des taudis et les riches des complexes résidentiels sécurisés portant des noms tels que «Venise» - parce que l&#39;on peut y amarrer son yacht juste devant sa porte. La construction de ces villas luxueuses et de leurs terrains de golf a nécessité la dérivation d’énormes volumes d’eau et aujourd’hui, les inondations se multiplient dans les bidonvilles. Pourtant, le changement climatique forcera tout le monde – riches ou pauvres - à déménager parce que c’est le delta tout entier qui menace d&#39;être englouti par les eaux.</p> "},function(t,e){t.exports="<h3 id=les-plages-d-europe-sombrent>Les plages d&#39;Europe sombrent</h3> <p>Il fut un temps, Palavas-les-Flots était qualifiée de «Floride française». Mais dans les années 1960, le changement climatique lui a occasionné des dommages irréversibles. Les chercheurs ont prédit que la pénurie d’eaux souterraines provoquerait l’érosion des sols et la disparition des plages et de leurs bars et restaurants. Cette ville du sud de la France, comme de nombreuses autres villes côtières d’Europe, devra céder devant la mer.</p> "},function(t,e){t.exports="<h3 id=c-est-en-asie-que-le-niveau-de-la-mer-monte-le-plus-rapidement>C’est en Asie que le niveau de la mer monte le plus rapidement</h3> <p>Les dix villes les plus touchées se trouvent en Asie. À Manille, capitale des Philippines – un État composé de 7000 îles entourées par la mer - le niveau de la mer est supérieur de 80 centimètres à celui d’il y a 50 ans. Le changement climatique est une réelle menace pour la métropole, ses 9 millions d’habitants et sa multitude de villes côtières.</p> "},function(t,e){t.exports="<h3 id=en-scandinavie-la-terre-se-dilate>En Scandinavie, la terre se dilate</h3> <p>Voici un phénomène qui a de quoi en surprendre plus d&#39;un : dans les pays scandinaves, la terre s’élève plus vite que les eaux. Certains ports sont en effet littéralement à sec. Selon nos données, les étendues de terres sèches ont progressé de près de 10 centimètres dans la ville finlandaise de Vaasa et à Bodo, dans le nord de la Norvège, de 25 centimètres.</p> "},function(t,e){t.exports="<h3 id=le-naufrage-des-raffineries-de-la-c-te-est-des-etats-unis>Le naufrage des raffineries de la côte est des Etats-Unis</h3> <p>Les usines sont souvent implantées le long des côtes pour faciliter l’expédition de leur production. Toutefois, d’après nos recherches, les principales compagnies pétrolières de la côte est des Etats-Unis n’ont toujours pas prévu de plan B si leurs usines devaient être envahies par la mer. Elles n&#39;ont pas la volonté d&#39;empêcher un changement climatique qu’elles persistent à ne pas reconnaître. Il est très probable que ce seront les contribuables qui finiront pas payer en cas d&#39;inondations des raffineries consécutives à une tempête.</p> "},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=l}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+p]=255&a,p+=d,a/=256,l-=8);t[n+p-d]|=128*m}},function(t,e){function n(t){var e=r.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}t.exports=n;var r=Object.prototype.toString},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports={de:{145:{title:"Unserere Recherche über Manila",url:"https://correctiv.org/a/1735"},main:{title:"Lies unseren weltweiten Überblick",url:"https://correctiv.org/a/1650"},europe:{title:"Unserere Recherche über Europa",url:"https://correctiv.org/a/1698"},africa:{title:"Unserere Recherche über Afrika",url:"https://correctiv.org/a/1598"},"north-america":{title:"Unserere Recherche über Nordamerika",url:"https://correctiv.org/a/1877"},"south-america":{title:"Unserere Recherche über Südamerika",url:"https://correctiv.org/a/1866"},FIN:{title:"Unserere Recherche über Finland",url:"https://correctiv.org/a/1694"},FRA:{title:"Unserere Recherche über Frankreich",url:"https://correctiv.org/a/1692"},ISL:{title:"Unserere Recherche über Island",url:"https://correctiv.org/a/1697"},JPN:{title:"Unserere Recherche über Japan",url:"https://correctiv.org/a/1872"},PHL:{title:"Unserere Recherche über die Philippinen",url:"https://correctiv.org/a/1738"},RUS:{title:"Unserere Recherche über Russland",url:"https://correctiv.org/a/1847"},SWE:{title:"Unserere Recherche über Schweden",url:"https://correctiv.org/a/1694"}},fr:{},en:{}}},function(t,e){t.exports={intro:{title:"Steigende Meere",lead:"Über 700.000 Pegeldaten weltweit belegen: Der Meeresspiegel steigt. Der Klimawandel ist an den Küsten angekommen. Er wird die Welt verändern. Das Meer wird Strände fortspülen, Inseln versenken, Ebenen überschwemmen. Mit möglicherweise dramatischen Folgen für hunderte Millionen Menschen.",more:"mehr erfahren",logo_alt:"ein Projekt von CORRECTIV"},outro:{more:"mehr erfahren",main:{title:"Lorem Ipsum",teaser:"Lorem Ipsum dolor sit amet",url:"https://correctiv.org"},aside:{title:"Lorem Ipsum",teaser:"Lorem Ipsum dolor sit amet",url:"https://correctiv.org"}},scrolly:{title:"Ein Datenschatz – erstmals gehoben",authors:"von",introduction:"Seit Jahrhunderten hat eine britische Behörde, der Permanent Service of Mean Sea Level (PSMSL), die Fluthöhen von Häfen in aller Welt gesammelt. Wir haben diesen Datensatz ausgewertet. Die Daten sind unbestechlich. Nur einen Nachteil haben sie: Die Messpunkte sind nicht gleichmäßig über den Globus verteilt. Afrika beispielsweise, das wenig Bedeutung für den Welthandel hat, ist ein weißer Fleck.",partners:"In Kooperation mit:",tide_figcaption:"Moderner Pegel im Hafen von Genua",info_figcaption:"",credits:"Foto:",info:"Wir haben die 500 am besten dokumentierten Messpunkte in eine Weltkarte eingetragen. Steigt das Meer, ist der Pegel rot eingefärbt, steigt das Land, ist er blau dargestellt. Nur einige Beispiele: Das Mittelmeer in Marseille ist heute 20 Zentimeter höher als drei Jahrzehnte zuvor. Auf der ostfriesischen Insel Borkum sind es 18 Zentimeter: Wo man 1985 noch trockenen Fußes gehen konnte, muss man heute hohe Gummistiefel tragen. In Atlantic City, südlich von New York, betrug der Anstieg sogar knapp 35 Zentimeter.",period:"1985 bis 2015",steps:{intro:"Start",main:"Einführung",world:"steigende Pegel",manila:"Philippinen",scandinavia:"Skandinavien",france:"Frankreich",usa:"USA",argentina:"Argentinien"}},explorer:{title:"Steigende Meere",intro:"„Explorer“ hieß diese Karte bei uns, während wir an ihr arbeiteten. Denn hier kannst du dir ansehen, wie sich die Meeresspiegel verändert haben an 500 Messpunkten weltweit. Klicke dazu auf den Kontinent, dann auf das Land, dann auf die jeweilige Messstation.",download_text:"Lade die Daten unserer Recherche herunter",download_link:"/data/sealevel_data_download.csv",choose_continent:"Wähle einen Kontinent",start:"Start",sealevel_change:"Veränderung seit 1985: %{change}mm",linechart_axis:"mm",back:"Zurück zur Übersicht:",legend:"Bewohnte Gegenden unterhalb von zehn Metern über dem Meeresspiegel",continents:{africa:"Afrika","north-america":"Nordamerika","south-america":"Südamerika",asia:"Asien",europe:"Europa",oceania:"Australien und Ozeanien",antarctica:"Antarktika"},countries:{FRA:"Frankreich",GBR:"Vereinigtes Königreich",DEU:"Deutschland",NLD:"Niederlande",USA:"Vereinigte Staaten von Amerika",FIN:"Finnland",NOR:"Norwegen",GEO:"Georgien",SWE:"Schweden",DNK:"Dänemark",CAN:"Kanada",AUS:"Australien",LTU:"Litauen",JPN:"Japan",NZL:"Neuseeland",PHL:"Philippinen",ITA:"Italien",PAN:"Panama",THA:"Thailand",IND:"Indien",RUS:"Russische Föderation",MYS:"Malaysia",ALA:"Åland",PRT:"Portugal",HRV:"Kroatien",BMU:"Bermuda",GRC:"Griechenland",BEL:"Belgien",URY:"Uruguay",ESP:"Spanien",CHL:"Chile",MHL:"Marshallinseln",UMI:"United States Minor Outlying Islands",ASM:"Amerikanisch-Samoa",GUM:"Guam",SJM:"Svalbard und Jan Mayen",CUB:"Kuba",ISL:"Island",CHN:"China",SGP:"Singapur",PRI:"Puerto Rico",ARG:"Argentinien",ZAF:"Südafrika",VNM:"Vietnam",ATA:"Antarktika",KOR:"Südkorea",BRA:"Brasilien",PLW:"Palau",PYF:"Französisch-Polynesien",PER:"Peru",FJI:"Fidschi",KIR:"Kiribati",FSM:"Mikronesien",VIR:"Amerikanische Jungferninseln",COK:"Cookinseln",MNP:"Nördliche Marianen",REU:"Réunion",TZA:"Tansania, Vereinigte Republik",ECU:"Ecuador"},continent_descriptions:{africa:"Afrikas Küsten sind am wenigsten vorbereitet auf die Fluten. Klar: Wo es am nötigsten fehlt, an Schulen und Krankenhäusern, an Brücken und Straßen, will kaum eine Regierung Geld ausgeben für Küstenschutz. Laut mancher Prognosen werden mehr als 16 Millionen Menschen in Afrika ihre Wohnorte an den Küsten aufgeben müssen. Einzig Südafrika reagiert derzeit aktiv auf das Steigen der Meere – und errichtet Dämme und siedelt Menschen um.","north-america":"Besonders die Ostküste der USA ist vom Klimawandel bedroht. Hier kommen zwei Dinge zusammen: Einerseits steigt unaufhaltsam das Meer, andererseits sinkt an vielen Stellen das Land, etwa weil Grundwasserspeicher leergepumpt wurden. Forscher haben gezeigt, dass in amerikanischen Großstädten all die kleinen Zwischenfälle, all die wegen Hochwasser gesperrten Straßen und vollgelaufenen Keller, inzwischen mehr Geld verschlingen als die Reparatur der Schäden nach extremen Wetterereignissen.","south-america":"In Lateinamerika verfügen wir leider nur über wenige gesicherte Pegelstände. Nur eines steht fest: Dass der Kontinent vom steigenden Wasser bedroht ist. Laut dem Weltklimarat waren die Länder Südamerikas zwischen 2000 und 2013 von mehr als 600 extremen klimatischen Ereignissen betroffen, von Stürmen und Überschwemmungen. In keinem anderen Kontinent ist die Bevölkerung so sehr an Küsten konzentriert wie in Lateinamerika – Millionen Menschen werden vom Klimawandel betroffen sein.",asia:"In unserer Auswahl liegen alle zehn Orte, an denen das Meer am stärksten steigt, in Asien. Der Kontinent wird unter dem Klimawandel besonders leiden. An manchen Orte schwillt das Wasser pro Jahr um mehr als einen Zentimeter an. Manila zum Beispiel, die Hauptstadt der Philippinen: Dort liegt der Pegel heute rund 40 Zentimeter höher als vor 30 Jahren. Etliche Inseln der Philippinen, so die Prognose, werden untergehen.",europe:"Rund 200 Millionen Europäer leben in Küstennähe. Sie sind höchst unterschiedlich vom Klimawandel betroffen. Skandinavier gar nicht, bei ihnen hebt sich das Land schneller als das Meer. Südlich von Dänemark aber steigen die Pegel. Die EU ist weltweit Vorreiter bei den Maßnahmen gegen den Klimawandel. Trotzdem werden langfristig einige Küstenstädte nicht gehalten werden können. An der Ostküste Großbritanniens etwa, wo die Pegel steigen und die Küsten bröckeln.",oceania:"Australien gehört mit seinen Kohlekraftwerken zu den schlimmsten Verschmutzern der Erde – und muss künftig um seine Großstädte an den Küsten fürchten. Nach unseren Daten steigen die Pegel an der Westküste besonders stark an, an vielen Stationen sind es mehr als zehn Zentimeter. Laut Prognosen des Weltklimarates sind unter anderem der Flughafen von Brisbane oder der Hafen von Melbourne gefährdet.",antarctica:""},num_stations:"%{smart_count} Station |||| %{smart_count} Stationen",station_desc_higher:"Am Pegel %{location} ist das Meer in den vergangenen Jahrzehnten deutlich gestiegen: Zwischen 1985 und %{last_available_year} veränderte sich der Pegel um %{last_available_value} Millimeter. Seit Beginn der Aufzeichnungen sind es %{last_available_value_since_beginning} Millimeter. Es ist wahrscheinlich, dass Überschwemmungen hier zunehmen und Stürme größere Schäden verursachen werden.",station_desc_high:"Am Pegel %{location} ist das Meer in den vergangenen Jahrzehnten leicht angestiegen: Zwischen 1985 und %{last_available_year} erhöhte sich der Pegel um %{last_available_value} Millimeter. Seit Beginn der Aufzeichnungen sind es %{last_available_value_since_beginning} Millimeter. Mit dem Klimawandel wird der Wasserstand hier weiter steigen.",station_desc_flat:"Am Pegel %{location} hat sich die Höhe des Meeresspiegels in den vergangenen Jahrzehnten kaum verändert. Das ist nur an wenigen Orten der Welt der Fall. Mit dem Klimawandel wird aber auch hier künftig das Wasser von Jahr zu Jahr ansteigen.",station_desc_low:"Am Pegel %{location} ist das Meer an der Küste in den vergangenen Jahrzehnten leicht gesunken. %{last_available_year} war der Pegel um %{last_available_value} Millimeter niedriger als 1985. Seit Beginn der Aufzeichnungen sind es %{last_available_value_since_beginning} Millimeter. Die Erklärung: Das Land, das einst von kilometerdicken Eispanzern zusammengepresst wurde, dehnt sich bis heute aus. Dieser Trend wird eines Tages an sein Ende kommen: Rund 95 Prozent aller Küsten werden laut UN-Klimarat höhere Meeresstände verkraften müssen",station_desc_lower:"Am Pegel %{location} ist das Meer an der Küste in den vergangenen Jahrzehnten stark gesunken. %{last_available_year} war der Pegel um %{last_available_value} Millimeter niedriger als 1985. Seit Beginn der Aufzeichnungen sind es %{last_available_value_since_beginning} Millimeter. Die Erdkruste, die hier einst von kilometerdicken Eispanzern zusammengepresst wurde, dehnt sich nach deren Schmelzen bis heute aus.",station_desc_unclear:"Über die Entwicklung der Meereshöhe am Pegel %{location} haben wir keine gesicherten Daten. Das kann mehrere Ursachen haben: Die Messstation wurde im Laufe der Jahre versetzt, der Hafen umgebaut, Wellenbrecher wurden eingesetzt. All das verfälschte die Messungen. Laut einhelliger Meinung des UN-Klimarates wird das Meer in den kommenden Jahrzehnten an nahezu jedem Ort der Welt ansteigen – sehr wahrscheinlich auch an diesem.",station_desc_unclear_positive:"Am Pegel %{location} schwanken die Messwerte sehr stark. Der Trend weist auf einen Anstieg hin. Mit dem Klimawandel wird auch hier künftig das Wasser von Jahr zu Jahr ansteigen.",station_desc_unclear_negative:"Am Pegel %{location} schwanken die Messwerte sehr stark. Der Trend weist auf einen sinkenden Meeresspiegel hin. Dieser Trend wird eines Tages an sein Ende kommen: Rund 95 Prozent aller Küsten werden laut UN-Klimarat höhere Meeresstände verkraften müssen.",risk_desc:"In %{country} leben %{coastal_population_percent} Prozent der Bevölkerung nahe an der Küste. Wahrscheinlich ist, dass die Menschen mit dem Klimawandel häufiger von Überschwemmungen und Stürmen heimgesucht werden.",emissions_desc:"Aktuell produziert jeder Bewohner von %{country} jährlich %{c02_emissions} Tonnen CO₂. Um den Klimawandel abzuschwächen, sollte jeder Mensch laut UNO nicht mehr als zwei Tonnen CO₂ pro Jahr produzieren. Die entstehen, wenn man rund 10.000 Kilometer mit einem Mittelklassewagen fährt oder von Berlin nach Washington fliegt – oneway.",manila:"Über den Meeresanstieg am Pegel Manila, S. Harbor haben wir keine gesicherten Daten. Während das Wasser ansteigt, senkt sich zugleich die Landmasse in der Bucht stark ab - beide Effekte zusammen führen dazu, dass in der philippinische Hauptstadt das Meer so schnell anwächst wie an kaum einem anderen Ort der Welt."}}},function(t,e){t.exports={intro:{title:"Steigende Meere",lead:"Über 700.000 Pegeldaten weltweit belegen: Der Meeresspiegel steigt. Der Klimawandel ist an den Küsten angekommen. Er wird die Welt verändern. Das Meer wird Strände fortspülen, Inseln versenken, Ebenen überschwemmen. Mit möglicherweise dramatischen Folgen für hunderte Millionen Menschen.",more:"mehr erfahren",logo_alt:"ein Projekt von CORRECTIV"},scrolly:{title:"Ein Datenschatz – erstmals gehoben",authors:"von",introduction:"Seit Jahrhunderten hat eine britische Behörde, der Permanent Service of Mean Sea Level (PSMSL), die Fluthöhen von Häfen in aller Welt gesammelt. Wir haben diesen Datensatz ausgewertet. Die Daten sind unbestechlich. Nur einen Nachteil haben sie: Die Messpunkte sind nicht gleichmäßig über den Globus verteilt. Afrika beispielsweise, das wenig Bedeutung für den Welthandel hat, ist ein weißer Fleck.",partners:"In Kooperation mit:",tide_figcaption:"Moderner Pegel im Hafen von Genua",info_figcaption:"",credits:"Foto:",info:"Wir haben die 500 am besten dokumentierten Messpunkte in eine Weltkarte eingetragen. Steigt das Meer, ist der Pegel rot eingefärbt, steigt das Land, ist er blau dargestellt. Nur einige Beispiele: Das Mittelmeer in Marseille ist heute 20 Zentimeter höher als drei Jahrzehnte zuvor. Auf der ostfriesischen Insel Borkum sind es 18 Zentimeter: Wo man 1985 noch trockenen Fußes gehen konnte, muss man heute hohe Gummistiefel tragen. In Atlantic City, südlich von New York, betrug der Anstieg sogar knapp 35 Zentimeter."},explorer:{title:"Rising seas",intro:"Use the Explorer button to see how the sea level has changed at 500 measuring points worldwide. Click on the continent, then the country, then on the respective measuring station.",download_text:"Click here to download our data",download_link:"/data/sealevel_data_download.csv",choose_continent:"Select a continent",start:"Start",sealevel_change:"Change since 1985: %{change} mm",linechart_axis:"mm",back:"Back to overview:",legend:"Inhabited regions under 10 meters beyond sea level",continents:{africa:"Africa","north-america":"North America","south-america":"South America",asia:"Asia",europe:"Europe",oceania:"Australia and Oceania",antarctica:"Antarctica"},countries:{FRA:"France",GBR:"United Kingdom",DEU:"Germany",NLD:"Netherlands",USA:"USA",FIN:"Finland",NOR:"Norway",GEO:"Georgia",SWE:"Sweden",DNK:"Denmark",CAN:"Canada",AUS:"Austrialia",LTU:"Lithuania",JPN:"Japan",NZL:"New Zealand",PHL:"Philippines",ITA:"Intaly",PAN:"Panama",THA:"Thailand",IND:"India",RUS:"Russian Federation",MYS:"Malaysia",ALA:"Åland Islands",PRT:"Portugal",HRV:"Croatia",BMU:"Bermuda",GRC:"Greece",BEL:"Belgium",URY:"Uruguay",ESP:"Spain",CHL:"Chile",MHL:"Marshall Islands",UMI:"United States Minor Outlying Islands",ASM:"American Samoa",GUM:"Guam",SJM:"Svalbard and Jan Mayen",CUB:"Cuba",ISL:"Iceland",CHN:"China",SGP:"Singapore",PRI:"Puerto Rico",ARG:"Argentina",ZAF:"South Africa",VNM:"Vietnam",ATA:"Antarktica",KOR:"South Korea",BRA:"Brazil",PLW:"Palau",PYF:"French Polynesia",PER:"Peru",FJI:"Fiji",KIR:"Kiribati",FSM:"Micronesia",VIR:"American Virgin Islands",COK:"Cook Islands",MNP:"Northern Mariana Islands",REU:"Réunion",TZA:"Tanzania",ECU:"Ecuador"},continent_descriptions:{africa:"","north-america":"","south-america":"",asia:"",europe:"",oceania:"",antarctica:""},num_stations:"%{smart_count} station |||| %{smart_count} stations",station_desc_higher:"At the level %{location}, the sea level has risen sharply in recent decades: between 1985 and %{last_available_year} the level changed by %{last_available_value} millimetres. Today, the citizens of these areas experience the most severe flooding and storms, which cause major damage. These places are the first victims of climate change.",station_desc_high:"At the level% {location}, the sea level has increased slightly in recent decades: between 1985 and %{last_available_year}, the level increased by %{last_available_value} millimetres. As climate change continues the sea level will rise further. Storms will become more destructive and more flooding can be expected.",station_desc_flat:"At the level %{location} the sea level has hardly changed in recent decades. This is only the case for a few places globally. But with climate change the sea level will start to rise, with known consequences.",station_desc_low:"At the level %{location} the sea level has slightly declined in recent decades. In %{Last_available_year} the level was around %{last_available_value} millimetres lower than in 1985. This is because the land mass, once weighed down by ice caps several kilometres thick, is still rebounding after the melt at the end of the last ice age. This trend will eventually end and around 95 per cent of these areas will face sea level rise, according to the UN Climate Council.",station_desc_lower:"At the level %{location} the sea level has fallen sharply in recent decades. In %{last_available_year} the level was around %{last_available_value} millimetres lower than in 1985. The land mass here, once compressed by ice caps several kilometres thick, is still expanding after the ice melted.",station_desc_unclear:"We don’t have reliable data for the sea level at %{location} level. This could be because the measuring station moved over the years; or the port was rebuilt; or shaft breakers were used. This means the measurements aren’t consistent. However, according to the unanimous opinion of the UN climate team, the sea will rise almost everywhere globally in the coming decades - and probably in these areas too.",station_desc_unclear_positive:"At the level %{location}, the measured values ​​fluctuate very strongly. The trend indicates a slight increase in seal level. With climate change, the water will rise year by year.",station_desc_unclear_negative:"At the level %{location}, the measured values ​​fluctuate very strongly. The trend indicates a falling sea level. This trend will one day come to an end: around 95 per cent of all coasts will have to cope with higher seas, according to the UN Climate Change team.",risk_desc:"In %{country} %{coastal_population_percent} per cent of the population lives close to the coast. These people are threatened by floods and storms resulting from climate change most frequently.",emissions_desc:"Currently, every inhabitant of %{country} produces %{c02_emissions} tonnes. To mitigate climate change, every human being should not produce more than two tonnes of CO₂ per year, according to a UN estimate. That figure is the equivalent to around 10,000 kilometres driven in a medium sized car. A return flight between Berlin and New York produces around 3.5 tonnes of CO₂ per person, exceeding the yearly cap. ",manila:"Über den Meeresanstieg am Pegel Manila, S. Harbor haben wir keine gesicherten Daten. Während das Wasser ansteigt, senkt sich zugleich die Landmasse in der Bucht stark ab - beide Effekte zusammen führen dazu, dass in der philippinische Hauptstadt das Meer so schnell anwächst wie an kaum einem anderen Ort der Welt."}}},function(t,e){t.exports={intro:{title:"Quand les mers montent",lead:"L’analyse de plus de 700 000 mesures marégraphiques réalisées dans le monde entier l'atteste : le changement climatique est depuis longtemps une réalité pour les littoraux de la planète. Avec des conséquences dramatiques pour des centaines de millions de personnes.",more:"En savoir plus",logo_alt:"Un projet de Correctiv"},scrolly:{title:"Une mine de données – pour la première fois dévoilée",authors:"de",introduction:"Depuis 1933, une organisation britannique, le Permanent Service of Mean Sea Level, recueille des données marégraphiques dans les ports du monde entier. Cette mine de données constitue la plus infaillible méthode d’évaluation du changement climatique. Seul inconvénient : les points de mesure sont inégalement répartis à la surface du globe. L’Afrique, par exemple, qui revêt peu d’importance pour le commerce mondial, est quasiment absente.",partners:"En coopération avec :",tide_figcaption:"Le port de Gênes, en Italie.",credits:"Photo :",info:"Nous avons sélectionné 500 lieux particulièrement bien documentés et les avons cartographiés, en répertoriant la hausse du niveau des mers depuis trois décennies. Les points correspondent aux stations marégraphiques : celles où la mer monte sont en rouge ; celles où elle recule sont en bleu. Les zones côtières teintées de vert sont les plus menacées, car situées à moins de dix mètres au-dessus du niveau de la mer."},explorer:{title:"Quand les mers montent",intro:"Visualisez comment le niveau de la mer a évolué au fil des années dans 500 ports du globe. Vous pouvez sélectionner les continents, les pays puis accéder aux différentes localités mesurées.",download_text:"Pour télécharger les données de notre recherche, cliquez ici",download_link:"/data/sealevel_data_download.csv",choose_continent:"Choisir un continent",start:"Accueil",sealevel_change:"Évolution depuis 1985 : %{change} mm",linechart_axis:"mm",back:"Retour à la vue d'ensemble:",legend:"Zones habitées situées moins de dix mètres au-dessus du niveau de la mer.",continents:{africa:"Afrique","north-america":"Amérique du Nord","south-america":"Amérique du Sud",asia:"Asie",europe:"Europe",oceania:"Océanie",antarctica:"Antarctique"},countries:{FRA:"France",GBR:"Royaume-Uni",DEU:"Allemagne",NLD:"Pays-Bas",USA:"États-Unis",FIN:"Finlande",NOR:"Norvège",GEO:"Géorgie",SWE:"Suède",DNK:"Danemark",CAN:"Canada",AUS:"Australie",LTU:"Lituanie",JPN:"Japon",NZL:"Nouvelle-Zélande",PHL:"Philippines",ITA:"Italie",PAN:"Panama",THA:"Thaïlande",IND:"Inde",RUS:"Russie",MYS:"Malaisie",ALA:"Åland",PRT:"Portugal",HRV:"Croatie",BMU:"Bermudes",GRC:"Grèce",BEL:"Belgique",URY:"Uruguay",ESP:"Espagne",CHL:"Chili",MHL:"Îles Marshall",UMI:"Îles mineures éloignées des États-Unis",ASM:"Samoa américaines",GUM:"Guam",SJM:"Svalbard et Jan Mayen",CUB:"Cuba",ISL:"Islande",CHN:"Chine",SGP:"Singapour",PRI:"Puerto Rico",
ARG:"Argentine",ZAF:"Afrique du Sud",VNM:"Vietnam",ATA:"Antarctique",KOR:"Corée du Sud",BRA:"Brésil",PLW:"Palau",PYF:"Polynésie française",PER:"Pérou",FJI:"Fidji",KIR:"Kiribati",FSM:"Micronésie",VIR:"Îles Vierges des États-Unis",COK:"Îles Cook",MNP:"Îles Mariannes du Nord",REU:"La Réunion",TZA:"Tanzanie",ECU:"Équateur"},continent_descriptions:{africa:"Les côtes africaines sont les moins bien préparées aux inondations. Et pour cause : quand les écoles, les hôpitaux, les routes ou les ponts manquent, les gouvernements ne sont pas prompts à investir en priorité dans la protection du littoral. Selon les prévisions, 16 millions d’Africains habitants en bord de mer devront abandonner leurs foyers. Seule l’Afrique du Sud prend pour le moment des mesures face à la montée du niveau de la mer, en érigeant des barrages et en déplaçant des populations.","north-america":"La côte est des Etats-Unis est particulièrement menacée par le changement climatique : d’une part, la mer monte inexorablement ; de l’autre, les sols s’affaissent à de nombreux endroits, notamment car les nappes phréatiques s’assèchent. Des chercheurs ont montré que, mis bout à bout, les incidents mineurs et réguliers liés à la montée des eaux, comme les rues submergées ou les caves inondées, coûtent désormais plus d’argent aux grandes villes américaines que la réparation des dommages liés aux phénomènes météorologiques extrêmes et rares, comme les tempêtes et les ouragans.","south-america":"En Amérique latine, les points de mesure sont moins nombreux. Une certitude néanmoins : le continent est lui aussi menacé par la montée des eaux. Entre 2000 et 2013, selon le Groupe d'experts intergouvernemental sur l'évolution du climat, les pays d’Amérique du Sud ont été affectés par plus de 600 événements climatiques extrêmes, tempêtes et inondations. L’Amérique du Sud est le continent où la population se concentre le plus sur le littoral – des millions d’habitants seront donc concerné par le changement climatique.",asia:"Les dix points du globe où la mer s’élève le plus sensiblement sont tous situés en Asie. Le continent va donc particulièrement souffrir du changement climatique. À plusieurs endroits, l’eau monte de plus d’un centimètre par an. À Manille, la capitale des Philippines, par exemple, le niveau a grimpé de 40 centimètres en 30 ans. Selon les prévisions, certaines des 7107 îles de l’archipel philippin sombreront.",europe:"Les quelque 200 millions d’Européens qui vivent à proximité du littoral sont plus ou moins concernés par le changement climatique. Ce n’est pas le cas des Scandinaves, chez qui la terre s’élève plus vite que la mer. Mais au sud du Danemark, le niveau des eaux monte. Si l’Europe est plutôt en avance en matière de mesures de lutte contre le changement climatique, certaines villes côtières ne disposeront à terme de plus aucune protection. Comme sur la côte est du Royaume-Uni, où la mer monte et le littoral s’effrite.",oceania:"L’Australie est, avec ses centrales à charbon, l’un des plus gros pollueurs de la planète – et devra à l’avenir s’inquiéter pour ses métropoles côtières. Selon nos données, le niveau de la mer monte particulièrement fort sur la côte ouest du pays. Selon les prévisions du Groupe d'experts intergouvernemental sur l'évolution du climat, l’aéroport de Brisbane et le port de Melbourne sont notamment en danger.",antarctica:""},num_stations:"%{smart_count} station |||| %{smart_count} stations",station_desc_higher:"À la station %{location}, la mer est sensiblement montée au cours des dernières décennies : entre 1985 et %{last_available_year}, son niveau s’est élevé de %{last_available_value} millimètres ; de %{last_available_value_since_beginning} millimètres depuis le début des mesures. Il est fort probable qu'à cet endroit, les inondations gagneront en intensité et les tempêtes causeront d’importants dégâts.",station_desc_high:"À la station %{location}, la mer est légèrement montée au cours des dernières décennies : entre 1985 et %{last_available_year}, son niveau s’est élevé de %{last_available_value} millimètres ; de %{last_available_value_since_beginning} millimètres depuis le début des mesures. Avec le changement climatique, ce phénomène va s'accentuer.",station_desc_flat:"À la station %{location}, le niveau de la mer a peu évolué au cours des dernières décennies. C’est le cas dans peu d’endroits du globe. Néanmoins, avec le changement climatique, l’eau y grimpera aussi lors des prochaines années.",station_desc_low:"À la station %{location}, la mer a légèrement baissé au cours des dernières décennies. En %{last_available_year}, son niveau était de %{last_available_value} millimètres en-dessous de celui de 1985 ; de %{last_available_value_since_beginning} millimètres depuis le début des mesures. Explication : les terres s’élèvent en raison de la fonte de glaciers et donc de la disparition du poids colossal de ces masses de glace. Un jour, cette tendance prendra fin : environ 95 % du littoral de la planète devra faire face à une hausse du niveau de la mer, selon le Groupe d'experts intergouvernemental sur l'évolution du climat.",station_desc_lower:"À la station %{location}, la mer a sensiblement baissé au cours des dernières décennies. En %{last_available_year}, son niveau était de %{last_available_value} millimètres en-dessous de celui de 1985 ; de %{last_available_value_since_beginning} millimètres depuis le début des mesures. La croûte terrestre se dilate en raison de la fonte de glaciers et donc de la disparition du poids colossal de ces masses de glace.",station_desc_unclear:"À la station %{location}, aucune donnée fiable n’est disponible. Il peut y avoir plusieurs raisons : les points de mesure ont été déplacés au cours des années, les ports ont été transformés, des digues ont été posées. Tout cela fausse les mesures. D’après le Groupe d'experts intergouvernemental sur l'évolution du climat, le niveau de la mer s’élèvera à peu près partout sur le globe lors des prochaines décennies – et vraisemblablement aussi en ces lieux.",station_desc_unclear_positive:"A la station %{location}, les mesures fluctuent très fortement. La tendance indique que le niveau de la mer baisse. À cause du changement climatique, il est fort probable qu'à cet endroit la mer va monter de plus en plus.",station_desc_unclear_negative:"A la station %{location}, les mesures fluctuent très fortement. La tendance indique que le niveau de la mer baisse. Un jour, cette tendance va trouver sa fin: L’ONU prédit qu’environ 95 pourcent de tous les côtes du monde subiront des niveaux de la mer élevées.",risk_desc:"%{coastal_population_percent} % de la population de %{country} vit à proximité du littoral. Avec le changement climatique, ses habitants seront régulièrement menacés par les inondations et les tempêtes.",emissions_desc:"Actuellement, chaque habitant de %{country} produit %{c02_emissions} tonnes de CO₂ par an. Selon l’ONU, pour atténuer le changement climatique, chaque habitant de la planète ne devrait pas produire plus de 2 tonnes de CO₂ par an. Cela correspond à peu près à un trajet de 10 000 kilomètres en voiture. Un vol Paris-New York dépasse par contre largement ce « budget moyen » : il consomme environ 3,5 tonnes de CO₂ par passager.",manila:"Les données pour Manille sont incertaines. Pendant que la mer monte, les masses continentales sont en train de baisser. Les deux effets provoquent simultanément que la capitale des Philippines est l'un des lieux le plus touché par la montée des mers."}}},function(t,e,n){function r(t){return null==t?void 0===t?u:s:l&&l in Object(t)?o(t):a(t)}var i=n(17),o=n(99),a=n(100),s="[object Null]",u="[object Undefined]",l=i?i.toStringTag:void 0;t.exports=r},function(t,e){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,function(){return this}())},function(t,e,n){var r=n(101),i=r(Object.getPrototypeOf,Object);t.exports=i},function(t,e,n){function r(t){var e=a.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[u]=n:delete t[u]),i}var i=n(17),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i?i.toStringTag:void 0;t.exports=r},function(t,e){function n(t){return i.call(t)}var r=Object.prototype,i=r.toString;t.exports=n},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e,n){var r=n(97),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},function(t,e,n){"use strict";function r(t){var e={};return u(t,function(t,n){u(t,function(t){e[t]=n})}),e}function i(t){var e=r(y);return e[t]||e[d.call(t,/-/,1)[0]]||e.en}function o(t,e){return v[i(t)](e)}function a(t,e,n){if("string"!=typeof t)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==e)return t;var r=t,i="number"==typeof e?{smart_count:e}:e;if(null!=i.smart_count&&r){var a=d.call(r,m);r=h(a[o(n||"en",i.smart_count)]||a[0])}return r=p.call(r,x,function(t,e){return c(i,e)&&null!=i[e]?p.call(i[e],_,g):t})}function s(t){var e=t||{};this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en";var n=e.allowMissing?a:null;this.onMissingKey="function"==typeof e.onMissingKey?e.onMissingKey:n,this.warn=e.warn||f}var u=n(74),l=n(120),c=n(78),h=n(115),f=function(t){l(!1,t)},p=String.prototype.replace,d=String.prototype.split,m="||||",v={arabic:function(t){return t<3?t:t%100>=3&&t%100<=10?3:t%100>=11?4:5},chinese:function(){return 0},german:function(t){return 1!==t?1:0},french:function(t){return t>1?1:0},russian:function(t){return t%10===1&&t%100!==11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!==1||t%100===11?1:0}},y={arabic:["ar"],chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru","lt"],czech:["cs","sk"],polish:["pl"],icelandic:["is"]},_=/\$/g,g="$$",x=/%\{(.*?)\}/g;s.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},s.prototype.extend=function(t,e){u(t,function(t,n){var r=e?e+"."+n:n;"object"==typeof t?this.extend(t,r):this.phrases[r]=t},this)},s.prototype.unset=function(t,e){"string"==typeof t?delete this.phrases[t]:u(t,function(t,n){var r=e?e+"."+n:n;"object"==typeof t?this.unset(t,r):delete this.phrases[r]},this)},s.prototype.clear=function(){this.phrases={}},s.prototype.replace=function(t){this.clear(),this.extend(t)},s.prototype.t=function(t,e){var n,r,i=null==e?{}:e;if("string"==typeof this.phrases[t])n=this.phrases[t];else if("string"==typeof i._)n=i._;else if(this.onMissingKey){var o=this.onMissingKey;r=o(t,i,this.currentLocale)}else this.warn('Missing translation for key: "'+t+'"'),r=t;return"string"==typeof n&&(r=a(n,i,this.currentLocale)),r},s.prototype.has=function(t){return c(this.phrases,t)},s.transformPhrase=a,t.exports=s},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Array.prototype.slice,a=n(106),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),l=s.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},f={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!f["$"+t]&&r.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{h(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),d=function(t){if("undefined"==typeof window||!p)return h(t);try{return h(t)}catch(t){return!1}},m=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===i.call(t),o=a(t),s=e&&"[object String]"===i.call(t),h=[];if(!e&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var f=l&&n;if(s&&t.length>0&&!r.call(t,0))for(var p=0;p<t.length;++p)h.push(String(p));if(o&&t.length>0)for(var m=0;m<t.length;++m)h.push(String(m));else for(var v in t)f&&"prototype"===v||!r.call(t,v)||h.push(String(v));if(u)for(var y=d(t),_=0;_<c.length;++_)y&&"constructor"===c[_]||!r.call(t,c[_])||h.push(c[_]);return h};m.shim=function(){if(Object.keys){var t=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!t){var e=Object.keys;Object.keys=function(t){return e(a(t)?o.call(t):t)}}}else Object.keys=m;return Object.keys||m},t.exports=m},function(t,e){"use strict";var n=Object.prototype.toString;t.exports=function(t){var e=n.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===n.call(t.callee)),r}},function(t,e){"use strict";function n(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(i){return"function"==typeof i?i(n,r,t):e(i)}}}}e.__esModule=!0;var r=n();r.withExtraArgument=n,e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(n,r,i){var a=t(n,r,i),u=a.dispatch,l=[],c={getState:a.getState,dispatch:function(t){return u(t)}};return l=e.map(function(t){return t(c)}),u=s.default.apply(void 0,l)(a.dispatch),o({},a,{dispatch:u})}}}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=i;var a=n(20),s=r(a)},function(t,e){"use strict";function n(t,e){return function(){return e(t.apply(void 0,arguments))}}function r(t,e){if("function"==typeof t)return n(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(t),i={},o=0;o<r.length;o++){var a=r[o],s=t[a];"function"==typeof s&&(i[a]=n(s,e))}return i}e.__esModule=!0,e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n=e&&e.type,r=n&&'"'+n.toString()+'"'||"an action";return"Given action "+r+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function o(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:s.ActionTypes.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+e+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var i="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:i}))throw new Error('Reducer "'+e+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function a(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var a=e[r];"function"==typeof t[a]&&(n[a]=t[a])}var s,u=Object.keys(n);try{o(n)}catch(t){s=t}return function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments[1];if(s)throw s;for(var r=!1,o={},a=0;a<u.length;a++){var l=u[a],c=n[l],h=t[l],f=c(h,e);if("undefined"==typeof f){var p=i(l,e);throw new Error(p)}o[l]=f,r=r||f!==h}return r?o:t}}e.__esModule=!0,e.default=a;var s=n(21),u=n(18),l=(r(u),n(23));r(l)},function(t,e,n){!function(e,n){var r=function(t){t=t||{};var e={},n=Array.prototype.slice;return Object.defineProperties(t,{on:{value:function(n,r){return"function"==typeof r&&(e[n]=e[n]||[]).push(r),t},enumerable:!1,writable:!1,configurable:!1},off:{value:function(n,r){if("*"!=n||r)if(r)for(var i,o=e[n],a=0;i=o&&o[a];++a)i==r&&o.splice(a--,1);else delete e[n];else e={};return t},enumerable:!1,writable:!1,configurable:!1},one:{value:function(e,n){function r(){t.off(e,r),n.apply(t,arguments)}return t.on(e,r)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(r){var i,o,a,s=arguments.length-1,u=new Array(s);for(a=0;a<s;a++)u[a]=arguments[a+1];for(i=n.call(e[r]||[],0),a=0;o=i[a];++a)o.apply(t,u);return e["*"]&&"*"!=r&&t.trigger.apply(t,["*",r].concat(u)),t},enumerable:!1,writable:!1,configurable:!1}}),t};t.exports=r}("undefined"!=typeof window?window:void 0)},function(t,e){t.exports=function(t){return{init:function(){this.store=t},dispatch:function(e){return t.dispatch(e)},dispatchify:function(e){var n=Object.keys(e);for(var r in n){var i=n[r],o=e[i];this[i]=function(e){var n="function"==typeof e;return function(){var r=n?e.apply(this,arguments):e;return t.dispatch(r)}}(o)}},subscribe:function(e,n,r){function i(){var i=t.getState(),o=e(i);r(a)&&n(o)}n||(n=this.update);var o=function(t){return!t};switch(typeof r){case"function":o=r;break;case"string":o=e[r]?e[r]:o;break;case"undefined":o=e.recomputations?e.recomputations:o}var a;r=function(t){return a=o(t),t!==a};var s=t.subscribe(i);return this.on("unmount",s),i(),s}}}},function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var i=r(n(4)),o=r(n(1));o.tag2("router","<yield></yield>","","",function(t){var e=this;this.route=i.create(),this.select=function(t){[].concat(e.tags.route).forEach(function(e){return e.show=e===t})},this.on("mount",function(){window.setTimeout(function(){return i.start(!0)},0)})}),o.tag2("route",'<virtual if="{show}"><yield></yield></virtual>',"","",function(t){function e(t){return Object.keys(t).map(function(e){return t[e]}).reduce(function(t,e){return t.concat(e)},[])}var n=this;this.show=!1,this.parent.route(t.path,function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];n.one("updated",function(){e(n.tags).forEach(function(e){e.trigger.apply(e,["route"].concat(t)),e.update()})}),n.parent.select(n),n.parent.update()})}),t.exports=i},function(t,e,n){var r,i;(function(n){/*! smooth-scroll v12.1.5 | (c) 2017 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/smooth-scroll */
!function(n,o){r=[],i=function(){return o(n)}.apply(e,r),!(void 0!==i&&(t.exports=i))}("undefined"!=typeof n?n:"undefined"!=typeof window?window:this,function(t){"use strict";var e="querySelector"in document&&"addEventListener"in t&&"requestAnimationFrame"in t&&"closest"in t.Element.prototype,n={ignore:"[data-scroll-ignore]",header:null,speed:500,offset:0,easing:"easeInOutCubic",customEasing:null,before:function(){},after:function(){}},r=function(){for(var t={},e=0,n=arguments.length;e<n;e++){var r=arguments[e];!function(e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}(r)}return t},i=function(e){return parseInt(t.getComputedStyle(e).height,10)},o=function(t){"#"===t.charAt(0)&&(t=t.substr(1));for(var e,n=String(t),r=n.length,i=-1,o="",a=n.charCodeAt(0);++i<r;){if(0===(e=n.charCodeAt(i)))throw new InvalidCharacterError("Invalid character: the input contains U+0000.");o+=e>=1&&e<=31||127==e||0===i&&e>=48&&e<=57||1===i&&e>=48&&e<=57&&45===a?"\\"+e.toString(16)+" ":e>=128||45===e||95===e||e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122?n.charAt(i):"\\"+n.charAt(i)}return"#"+o},a=function(t,e){var n;return"easeInQuad"===t.easing&&(n=e*e),"easeOutQuad"===t.easing&&(n=e*(2-e)),"easeInOutQuad"===t.easing&&(n=e<.5?2*e*e:(4-2*e)*e-1),"easeInCubic"===t.easing&&(n=e*e*e),"easeOutCubic"===t.easing&&(n=--e*e*e+1),"easeInOutCubic"===t.easing&&(n=e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1),"easeInQuart"===t.easing&&(n=e*e*e*e),"easeOutQuart"===t.easing&&(n=1- --e*e*e*e),"easeInOutQuart"===t.easing&&(n=e<.5?8*e*e*e*e:1-8*--e*e*e*e),"easeInQuint"===t.easing&&(n=e*e*e*e*e),"easeOutQuint"===t.easing&&(n=1+--e*e*e*e*e),"easeInOutQuint"===t.easing&&(n=e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e),t.customEasing&&(n=t.customEasing(e)),n||e},s=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},u=function(t,e,n){var r=0;if(t.offsetParent)do r+=t.offsetTop,t=t.offsetParent;while(t);return r=Math.max(r-e-n,0)},l=function(t){return t?i(t)+t.offsetTop:0},c=function(e,n,r){r||(e.focus(),document.activeElement.id!==e.id&&(e.setAttribute("tabindex","-1"),e.focus(),e.style.outline="none"),t.scrollTo(0,n))},h=function(e){return!!("matchMedia"in t&&t.matchMedia("(prefers-reduced-motion)").matches)};return function(i,f){var p,d,m,v,y,_,g,x={};x.cancelScroll=function(){cancelAnimationFrame(g)},x.animateScroll=function(e,i,o){var h=r(p||n,o||{}),f="[object Number]"===Object.prototype.toString.call(e),d=f||!e.tagName?null:e;if(f||d){var m=t.pageYOffset;h.header&&!v&&(v=document.querySelector(h.header)),y||(y=l(v));var _,g,b,w=f?e:u(d,y,parseInt("function"==typeof h.offset?h.offset():h.offset,10)),M=w-m,T=s(),S=0,E=function(n,r){var o=t.pageYOffset;if(n==r||o==r||(m<r&&t.innerHeight+o)>=T)return x.cancelScroll(),c(e,r,f),h.after(e,i),_=null,!0},A=function(e){_||(_=e),S+=e-_,g=S/parseInt(h.speed,10),g=g>1?1:g,b=m+M*a(h,g),t.scrollTo(0,Math.floor(b)),E(b,w)||(t.requestAnimationFrame(A),_=e)};0===t.pageYOffset&&t.scrollTo(0,0),h.before(e,i),x.cancelScroll(),t.requestAnimationFrame(A)}};var b=function(t){d&&(d.id=d.getAttribute("data-scroll-id"),x.animateScroll(d,m),d=null,m=null)},w=function(e){if(!h()&&0===e.button&&!e.metaKey&&!e.ctrlKey&&(m=e.target.closest(i))&&"a"===m.tagName.toLowerCase()&&!e.target.closest(p.ignore)&&m.hostname===t.location.hostname&&m.pathname===t.location.pathname&&/#/.test(m.href)){var n;try{n=o(decodeURIComponent(m.hash))}catch(t){n=o(m.hash)}if("#"===n){e.preventDefault(),d=document.body;var r=d.id?d.id:"smooth-scroll-top";return d.setAttribute("data-scroll-id",r),d.id="",void(t.location.hash.substring(1)===r?b():t.location.hash=r)}d=document.querySelector(n),d&&(d.setAttribute("data-scroll-id",d.id),d.id="",m.hash===t.location.hash&&(e.preventDefault(),b()))}},M=function(t){_||(_=setTimeout(function(){_=null,y=l(v)},66))};return x.destroy=function(){p&&(document.removeEventListener("click",w,!1),t.removeEventListener("resize",M,!1),x.cancelScroll(),p=null,d=null,m=null,v=null,y=null,_=null,g=null)},x.init=function(i){e&&(x.destroy(),p=r(n,i||{}),v=p.header?document.querySelector(p.header):null,y=l(v),document.addEventListener("click",w,!1),t.addEventListener("hashchange",b,!1),v&&t.addEventListener("resize",M,!1))},x.init(f),x}})}).call(e,function(){return this}())},function(t,e,n){"use strict";var r=n(8),i=n(13),o=n(24),a=n(25),s=n(116),u=r.call(Function.call,a());i(u,{getPolyfill:a,implementation:o,shim:s}),t.exports=u},function(t,e,n){"use strict";var r=n(13),i=n(25);t.exports=function(){var t=i();return r(String.prototype,{trim:t},{trim:function(){return String.prototype.trim!==t}}),t}},function(t,e,n){t.exports=n(118)},function(t,e,n){(function(t,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(119),s=i(a);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof t?t:r;var u=(0,s.default)(o);e.default=u}).call(e,function(){return this}(),n(26)(t))},function(t,e){"use strict";function n(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,n){"use strict";var r=function(){};t.exports=r},function(t,e,n){function r(t){return n(i(t))}function i(t){return o[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var o={"./de/argentina.md":79,"./de/france.md":80,"./de/main.md":14,"./de/manila.md":81,"./de/scandinavia.md":82,"./de/usa.md":83,"./fr/argentina.md":84,"./fr/france.md":85,"./fr/main.md":15,"./fr/manila.md":86,"./fr/scandinavia.md":87,"./fr/usa.md":88};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=121},function(t,e,n){function r(t){return n(i(t))}function i(t){return o[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var o={"./de/main.md":14,"./fr/main.md":15};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=122}]);